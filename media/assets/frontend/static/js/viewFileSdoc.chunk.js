(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[38],{1894:function(e,t,n){n(73),e.exports=n(1931)},1931:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(35),i=n.n(s),o=n(36),c=n(367),u=n(5),l=n(23),d=n(3),p=n(4),g=n(6),h=n(7),b=n(139),f=n(8),S=n(10),v=n(445),k=n(0),m=function(e){Object(g.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onInternalLinkToggle=function(){a.setState({isShowInternalLinkDialog:!a.state.isShowInternalLinkDialog})},a.unmark=function(){var e=a.props,t=e.repoID,n=e.docPath;f.a.sdocUnmarkAsDraft(t,n).then((function(e){a.props.unmarkDraft()})).catch((function(e){var t=u.a.getErrorMsg(e);S.a.danger(t)}))},a.toggleStar=function(){var e=a.props,t=e.isStarred,n=e.repoID,r=e.docPath;t?f.a.unstarItem(n,r).then((function(e){a.props.toggleStar(!1)})).catch((function(e){var t=u.a.getErrorMsg(e);S.a.danger(t)})):f.a.starItem(n,r).then((function(e){a.props.toggleStar(!0)})).catch((function(e){var t=u.a.getErrorMsg(e);S.a.danger(t)}))},a.state={isShowInternalLinkDialog:!1},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=b.c.getInstance();this.unsubscribeInternalLinkEvent=e.subscribe(b.b.INTERNAL_LINK_CLICK,this.onInternalLinkToggle),this.unsubscribeStar=e.subscribe(b.b.TOGGLE_STAR,this.toggleStar),this.unsubscribeUnmark=e.subscribe(b.b.UNMARK_AS_DRAFT,this.unmark)}},{key:"componentWillUnmount",value:function(){this.unsubscribeInternalLinkEvent(),this.unsubscribeStar(),this.unsubscribeUnmark()}},{key:"render",value:function(){var e=this.props,t=e.repoID,n=e.docPath,a=this.state.isShowInternalLinkDialog;return Object(k.jsx)(k.Fragment,{children:a&&Object(k.jsx)(v.a,{repoID:t,path:n,onInternalLinkDialogToggle:this.onInternalLinkToggle})})}}]),n}(r.a.Component),I=function(e){Object(g.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).toggleStar=function(e){a.setState({isStarred:e})},a.unmarkDraft=function(){a.setState({isDraft:!1})};var r=window.app.pageOptions,s=r.isStarred,i=r.isSdocDraft;return a.state={isStarred:s,isDraft:i},a}return Object(p.a)(n,[{key:"render",value:function(){var e=window.seafile,t=e.repoID,n=e.docPath,r=this.state,s=r.isStarred,i=r.isDraft;return Object(k.jsxs)(a.Fragment,{children:[Object(k.jsx)(b.e,{isStarred:s,isDraft:i}),Object(k.jsx)(m,{repoID:t,docPath:n,isStarred:s,toggleStar:this.toggleStar,unmarkDraft:this.unmarkDraft})]})}}]),n}(r.a.Component),j=window.app.config,D=j.serviceURL,w=j.avatarURL,L=j.siteRoot,O=j.lang,U=window.app.userInfo,R=U.username,P=U.name,x=window.app.pageOptions,A=x.repoID,T=x.repoName,y=x.parentDir,N=x.filePerm,E=x.docPath,C=x.docName,F=x.docUuid,M=x.seadocAccessToken,_=x.seadocServerUrl,K=x.assetsUrl,G=x.isSdocRevision,J=x.isPublished,z=x.originFilename,B=x.revisionCreatedAt;window.seafile={repoID:A,docPath:E,docName:C,docUuid:F,isOpenSocket:!0,serviceUrl:D,accessToken:M,sdocServer:_,name:P,username:R,avatarURL:w,siteRoot:L,docPerm:N,historyURL:u.a.generateHistoryURL(L,A,E),parentFolderURL:"".concat(L,"library/").concat(A,"/").concat(u.a.encodePath(T+y)),assetsUrl:K,isShowInternalLink:!0,isStarIconShown:!0,isSdocRevision:G,isPublished:J,revisionURL:u.a.generateRevisionURL(L,A,E),originFilename:z,revisionCreatedAt:B,lang:O},i.a.render(Object(k.jsx)(o.a,{i18n:c.a,children:Object(k.jsx)(a.Suspense,{fallback:Object(k.jsx)(l.a,{}),children:Object(k.jsx)(I,{})})}),document.getElementById("wrapper"))},367:function(e,t,n){"use strict";var a=n(213),r=n(286),s=n(287),i=n(36),o=n(1),c=window.app.pageOptions.lang;a.a.use(r.a).use(s.a).use(i.b).init({lng:c,fallbackLng:"en",ns:["sdoc-editor"],defaultNS:"sdoc-editor",whitelist:["en","zh-CN","fr","de","cs","es","es-AR","es-MX","ru"],backend:{loadPath:o.Sb+"sdoc-editor/locales/{{ lng }}/{{ ns }}.json"},debug:!1,interpolation:{escapeValue:!1},load:"currentOnly",react:{wait:!0}}),t.a=a.a}},[[1894,1,0]]]);
//# sourceMappingURL=viewFileSdoc.chunk.js.map