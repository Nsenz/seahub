{"version":3,"sources":["../node_modules/reactstrap/es/Table.js","components/dialog/create-folder-dialog.js","pages/sys-admin/side-panel.js","pages/sys-admin/main-panel.js","pages/sys-admin/main-panel-topbar.js","pages/sys-admin/info.js","pages/sys-admin/statistic/statistic-nav.js","pages/sys-admin/statistic/picker.js","pages/sys-admin/statistic/statistic-common-tool.js","pages/sys-admin/statistic/statistic-chart.js","pages/sys-admin/statistic/statistic-file.js","pages/sys-admin/statistic/statistic-storage.js","pages/sys-admin/statistic/traffic-table.js","pages/sys-admin/statistic/traffic-table-body.js","pages/sys-admin/statistic/statistic-traffic-orgs.js","pages/sys-admin/statistic/statistic-traffic-users.js","pages/sys-admin/statistic/statistic-traffic.js","pages/sys-admin/statistic/statistic-users.js","pages/sys-admin/statistic/statistic-reports.js","pages/sys-admin/devices/devices-nav.js","pages/sys-admin/devices/devices-by-platform.js","pages/sys-admin/devices/desktop-devices.js","pages/sys-admin/devices/mobile-devices.js","pages/sys-admin/user-link.js","pages/sys-admin/devices/devices-errors.js","components/dialog/sysadmin-dialog/set-quota.js","components/dialog/sysadmin-dialog/sysadmin-import-user-dialog.js","components/select-editor/sysadmin-user-role-editor.js","components/dialog/sysadmin-dialog/sysadmin-add-user-dialog.js","components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog.js","models/sysadmin-user.js","models/sysadmin-admin-user.js","pages/sys-admin/search.js","pages/sys-admin/users/users-nav.js","components/select-editor/sysadmin-user-status-editor.js","pages/sys-admin/users/users-content.js","pages/sys-admin/users/users.js","pages/sys-admin/users/admin-users.js","pages/sys-admin/users/ldap-imported-users.js","pages/sys-admin/users/ldap-users.js","pages/sys-admin/users/search-users.js","components/dialog/sysadmin-dialog/set-upload-download-rate-limit.js","components/dialog/sysadmin-dialog/update-user.js","pages/sys-admin/users/user-nav.js","pages/sys-admin/users/user-info.js","pages/sys-admin/users/user-repos.js","pages/sys-admin/users/user-shared-repos.js","pages/sys-admin/users/user-links.js","pages/sys-admin/users/user-groups.js","components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog.js","pages/sys-admin/repos/repos-nav.js","components/dialog/sysadmin-dialog/sysadmin-share-to-user.js","components/dialog/sysadmin-dialog/sysadmin-share-to-group.js","components/dialog/sysadmin-dialog/sysadmin-share-dialog.js","components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog.js","pages/sys-admin/repos/repos.js","pages/sys-admin/repos/all-repos.js","pages/sys-admin/repos/system-repo.js","pages/sys-admin/repos/trash-repos.js","pages/sys-admin/repos/search-repos.js","models/system-admin/dirent.js","pages/sys-admin/repos/dir-path-bar.js","pages/sys-admin/repos/dir-content.js","pages/sys-admin/repos/dir-view.js","components/dialog/sysadmin-dialog/sysadmin-create-group-dialog.js","components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog.js","pages/sys-admin/groups/groups-content.js","pages/sys-admin/groups/groups.js","pages/sys-admin/groups/search-groups.js","pages/sys-admin/groups/group-nav.js","pages/sys-admin/groups/group-repos.js","components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog.js","components/select-editor/sysadmin-group-role-editor.js","pages/sys-admin/groups/group-members.js","pages/sys-admin/departments/departments.js","components/dialog/sysadmin-dialog/sysadmin-add-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog.js","pages/sys-admin/departments/group-item.js","pages/sys-admin/departments/department-list.js","components/dialog/sysadmin-dialog/sysadmin-add-member-dialog.js","components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog.js","pages/sys-admin/departments/department.js","pages/sys-admin/departments/sub-departments.js","components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog.js","pages/sys-admin/departments/member-item.js","pages/sys-admin/departments/department-members.js","components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog.js","pages/sys-admin/departments/repo-item.js","pages/sys-admin/departments/department-libraries.js","pages/sys-admin/links/links-nav.js","pages/sys-admin/links/share-links.js","pages/sys-admin/links/upload-links.js","components/dialog/sysadmin-dialog/sysadmin-add-org-dialog.js","pages/sys-admin/orgs/orgs-content.js","pages/sys-admin/orgs/orgs.js","pages/sys-admin/orgs/search-orgs.js","components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog.js","components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog.js","pages/sys-admin/orgs/org-nav.js","pages/sys-admin/orgs/org-info.js","components/select-editor/sysadmin-user-membership-editor.js","pages/sys-admin/orgs/org-users.js","pages/sys-admin/orgs/org-groups.js","pages/sys-admin/orgs/org-repos.js","components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog.js","pages/sys-admin/institutions/institutions.js","pages/sys-admin/institutions/institution-nav.js","pages/sys-admin/institutions/institution-info.js","components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog.js","pages/sys-admin/institutions/institution-users.js","pages/sys-admin/institutions/institution-admins.js","pages/sys-admin/logs-page/logs-nav.js","components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog.js","pages/sys-admin/logs-page/login-logs.js","pages/sys-admin/logs-page/file-access-item-menu.js","pages/sys-admin/logs-page/file-access-toggle-filter.js","pages/sys-admin/logs-page/file-access-logs.js","pages/sys-admin/logs-page/file-update-logs.js","pages/sys-admin/logs-page/share-permission-logs.js","pages/sys-admin/web-settings/section.js","pages/sys-admin/web-settings/setting-item-base.js","pages/sys-admin/web-settings/input-item.js","pages/sys-admin/web-settings/file-item.js","pages/sys-admin/web-settings/checkbox-item.js","pages/sys-admin/web-settings/web-settings.js","components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog.js","pages/sys-admin/notifications/notifications.js","pages/sys-admin/file-scan-records.js","pages/sys-admin/work-weixin/work-weixin-department-members-list.js","pages/sys-admin/work-weixin/work-weixin-departments-tree-node.js","pages/sys-admin/work-weixin/work-weixin-departments-tree-panel.js","components/dialog/import-work-weixin-department-dialog.js","pages/sys-admin/work-weixin-departments.js","pages/sys-admin/dingtalk/dingtalk-department-members-list.js","pages/sys-admin/dingtalk/dingtalk-departments-tree-node.js","pages/sys-admin/dingtalk/dingtalk-departments-tree-panel.js","components/dialog/import-dingtalk-department-dialog.js","pages/sys-admin/dingtalk-departments.js","pages/sys-admin/invitations/invitations.js","components/dialog/terms-editor-dialog.js","components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog.js","utils/markdown-utils.js","components/dialog/terms-preview-dialog.js","pages/sys-admin/terms-and-conditions/item.js","pages/sys-admin/terms-and-conditions/content.js","pages/sys-admin/terms-and-conditions/terms-and-conditions.js","pages/sys-admin/virus-scan/nav.js","pages/sys-admin/virus-scan/all-virus-files.js","pages/sys-admin/virus-scan/unhandled-virus-files.js","pages/sys-admin/admin-logs/logs-nav.js","pages/sys-admin/admin-logs/operation-logs.js","pages/sys-admin/admin-logs/login-logs.js","pages/sys-admin/abuse-reports.js","pages/sys-admin/index.js","components/dialog/share-admin-link.js","components/dialog/commit-details.js","../node_modules/react-chartjs-2/es/index.js","components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog.js","../node_modules/chart.js/dist/Chart.js","../node_modules/lodash/isEqual.js","../node_modules/lodash/keyBy.js","../node_modules/lodash/_createAggregator.js","../node_modules/lodash/_arrayAggregator.js","../node_modules/lodash/_baseAggregator.js","components/dialog/op-menu.js"],"names":["propTypes","className","PropTypes","string","cssModule","object","size","bordered","bool","borderless","striped","dark","hover","responsive","oneOfType","tag","tagPropType","responsiveTag","innerRef","func","Table","props","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","table","React","createElement","_extends","ref","responsiveClassName","defaultProps","CreateForder","handleChange","e","target","value","trim","setState","isSubmitBtnActive","childName","handleSubmit","state","newName","checkDuplicatedName","errMessage","gettext","replace","Utils","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","key","preventDefault","toggle","addFolderCancel","this","length","isOpen","autoFocus","for","id","onKeyPress","onChange","color","onClick","disabled","Component","SidePanel","getActiveClass","tab","currentTab","isSidePanelClosed","onCloseSidePanel","canViewSystemInfo","to","siteRoot","tabItemClick","isPro","canViewStatistic","otherPermission","constanceEnabled","canConfigSystem","canManageLibrary","canManageUser","canManageGroup","multiTenancy","multiInstitution","sysadminExtraEnabled","canViewUserLog","enableFileScan","enableGuestInvitation","enableTermsAndConditions","canViewAdminLog","enableWorkWeixin","enableDingtalk","enableShareLinkReportAbuse","MainPanel","children","MainPanelTopbar","title","toggleSidePanel","search","isAdminPanel","Info","uploadLicenseFile","fileInput","current","files","file","seafileAPI","sysAdminUploadLicense","then","res","info","sysInfo","Object","assign","data","with_license","catch","error","errMsg","getErrorMsg","toaster","danger","openFileInput","click","renderLicenseDescString","license_mode","license_to","license_expiration","window","app","config","lang","loading","errorMsg","createRef","sysAdminGetSysInfo","org_count","repos_count","total_files_count","total_storage","total_devices_count","current_connected_devices_count","license_maxusers","multi_tenancy_enabled","active_users_count","users_count","groups_count","isDefaultAdmin","Button","type","href","bytesToSize","Nav","navItems","name","urlPart","text","currentItem","map","item","index","propsTypes","disabledDate","isRequired","FORMAT","Picker","defaultCalendarValue","moment","locale","clone","calendar","defaultValue","format","translateCalendar","placeholder","tabIndex","readOnly","StatisticCommonTool","changeActive","statisticTypeName","statisticType","startTime","endTime","subtract","getActiviesFiles","disabledStartDate","startValue","today","endValue","isBefore","disabledEndDate","field","onSubmit","bind","StatisticChart","titleCallback","tooltipItem","datasets","datasetIndex","label","yLabel","ticksCallback","values","opations","labels","filesData","isTitleCallback","isTicksCallback","suggestedMaxNumbers","isLegendStatus","chartTitle","_this","options","display","fontSize","elements","line","fill","tension","borderWidth","legend","usePointStyle","tooltips","callbacks","layout","padding","right","scales","yAxes","ticks","beginAtZero","suggestedMax","callback","xAxes","maxTicksLimit","nextProps","StatisticFile","groupBy","sysAdminStatisticFiles","added","deleted","visited","modified","Array","isArray","forEach","push","datetime","addedData","borderColor","backgroundColor","visitedData","modifiedData","deletedData","isLoading","err","StatisticStorage","sysAdminStatisticStorages","totalStorage","TrafficTable","sortBy","sortIcon","sortOrder","width","sortItems","TrafficTableBody","trafficName","userTrafficItem","email","org_name","syncUploadSize","sync_file_upload","syncDownloadSize","sync_file_download","webUploadSize","web_file_upload","webDownloadSize","web_file_download","linkUploadSize","link_file_upload","linkDownloadSize","link_file_download","OrgsTraffic","getPreviousPage","getTrafficList","month","currentPage","getNextPage","test","errorMessage","initPage","blur","page","perPage","orderBy","sysAdminListOrgTraffic","orgTrafficList","org_monthly_traffic_list","slice","hasNextPage","has_next_page","resetPerPage","newPerPage","initMonth","urlParams","URL","location","searchParams","parseInt","get","Input","gotoPreviousPage","gotoNextPage","curPerPage","UsersTraffic","sysAdminListUserTraffic","userTrafficList","user_monthly_traffic_list","StatisticTraffic","changeTabActive","activeName","tabActive","sysAdminStatisticTraffic","total_upload","total_download","link_upload","link_download","sync_upload","sync_download","web_upload","web_download","linkData","syncData","webData","renderCommonTool","StatisticUsers","sysAdminStatisticActiveUsers","count","userCount","StatisticReports","onGenerateReports","url","Content","getPreviousPageDevicesList","getDevicesListByPage","pageInfo","current_page","getNextPageDevicesList","items","emptyTip","Item","handleMouseOver","isOpIconShown","handleMouseOut","handleUnlink","is_desktop_client","toggleUnlinkDeviceDialog","unlinkDevice","isUnlinkDeviceDialogOpen","deleteFiles","platform","device_id","user","sysAdminUnlinkDevice","unlinked","message","success","onMouseEnter","onMouseLeave","user_name","client_version","device_name","last_login_ip","last_accessed","fromNow","toggleDialog","DevicesByPlatform","devicesPlatform","per_page","sysAdminListDevices","devicesData","devices","page_info","DesktopDevices","MobileDevices","UserLink","encodeURIComponent","getPreviousPageDeviceErrorsList","getDeviceErrorsListByPage","getNextPageDeviceErrorsList","device_ip","repo_id","repo_name","error_msg","error_time","DeviceErrors","sysAdminListDeviceErrors","devicesErrors","device_errors","isCleanBtnShown","clean","sysAdminClearDeviceErrors","SetQuotaDialog","handleQuotaChange","quota","updateQuota","Modal","ModalHeader","ModalBody","Form","FormGroup","InputGroup","InputGroupAddon","addonType","InputGroupText","ModalFooter","SysAdminImportUserDialog","fileInputRef","uploadFile","fileName","substr","lastIndexOf","importUserInBatch","Alert","SysAdminUserRoleEditor","translateRoles","role","isTextMode","isEditIconShow","roleOptions","currentOption","currentRole","onOptionChanged","onRoleChanged","translateOption","SysAdminAddUserDialog","checkSubmitBtnActive","password","passwordAgain","btnActive","togglePasswordVisible","isPasswordVisible","inputPassword","passwd","inputPasswordAgain","generatePassword","val","inputEmail","inputName","updateRole","showRole","addUser","dialogTitle","autoComplete","Label","availableRoles","SysAdminBatchAddAdminDialog","handleSelectChange","addAdminInBatch","isMulti","onSelectChange","SysAdminUser","contact_email","login_id","last_login","last_access_time","create_time","is_active","is_staff","reference_id","department","quota_total","quota_usage","institution","org_id","isSelected","SysAdminAdminUser","admin_role","Search","handleInputChange","submit","style","haveLDAP","SysAdminUserStatusEditor","translateStatus","status","statusOptions","currentStatus","onStatusChanged","sysadmin","pageOptions","availableAdminRoles","institutions","onFreezedItem","isItemFreezed","onUnfreezedItem","getListByPage","sortByQuotaUsage","isAdmin","isAllUsersSelected","columns","spaceText","spaceEl","undefined","colSpaceText","colNameText","colCreatedText","toggleSelectAllUsers","checked","updateUser","deleteUser","updateAdminRole","revokeAdmin","onUserSelected","isLDAPImported","isSearchResult","handleMouseEnter","highlight","handleMouseLeave","isOpIconShow","toggleSetQuotaDialog","isSetQuotaDialogOpen","toggleDeleteUserDialog","isDeleteUserDialogOpen","toggleResetUserPasswordDialog","isResetUserPasswordDialogOpen","toggleRevokeAdminDialog","isRevokeAdminDialogOpen","updateStatus","isActive","notify","translateAdminRole","updateInstitution","translateInstitution","inst","resetPassword","sysAdminResetUserPassword","reset_tip","getMenuOperations","list","source","translateOperations","translateResult","onMenuItemClick","operation","itemName","deleteDialogMsg","resetPasswordDialogMsg","revokeAdminDialogMsg","username","operations","executeOperation","confirmBtnText","Users","toggleImportUserDialog","isImportUserDialogOpen","toggleAddUserDialog","isAddUserDialogOpen","toggleBatchSetQuotaDialog","isBatchSetQuotaDialogOpen","toggleBatchDeleteUserDialog","isBatchDeleteUserDialogOpen","hasUserSelected","selectedUserList","users","userList","filter","thisuser","getUserList","sysAdminListAdmins","admin_user_list","getUsersListByPage","sysAdminListUsers","total_count","URLSearchParams","set","toString","navigate","sysAdminDeleteUser","newUserList","setUserQuotaInBatch","quotaTotal","emails","sysAdminSetUserQuotaInBatch","resultUser","deleteUserInBatch","sysAdminDeleteUserInBatch","oldUser","some","deletedUser","msg","failed","sysAdminImportUserViaFile","concat","sysAdminAddUser","unshift","add_user_tip","sysAdminUpdateUser","update_status_tip","sysAdminUpdateAdminRole","getOperationsForAll","toggleBatchAddAdminDialog","getCurrentNavItem","isBatchAddAdminDialogOpen","sysAdminAddAdminInBatch","getSearch","searchItems","keyword","AdminUsers","LDAPImportedUsers","sysAdminListLDAPUsers","ldap_user_list","SearchUsers","getItems","sysAdminSearchUsers","query","user_list","getPreviousPageList","getNextPageList","params","document","row","Col","sm","SysAdminSetUploadDownloadRateLimitDialog","handleRateLimitChange","rateLimit","updateUploadDownloadRateLimit","uploadOrDownload","UpdateUser","updateValue","userName","twoFactorAuthEnabled","toggleSetUserUploadRateLimitDialog","isSetUserUploadRateLimitDialogOpen","toggleSetUserDownloadRateLimitDialog","isSetUserDownloadRateLimitDialogOpen","currentKey","isUpdateUserDialogOpen","toggleSetNameDialog","toggleSetUserLoginIDDialog","toggleSetUserComtactEmailDialog","toggleSetUserReferenceIDDialog","toggleUpdateUserDialog","showEditIcon","action","userInfo","src","avatar_url","alt","upload_rate_limit","download_rate_limit","has_default_device","disable2FA","check","is_force_2fa","toggleForce2fa","User","sysAdminDeleteTwoFactorAuth","sysAdminSetForceTwoFactorAuth","decodeURIComponent","sysAdminGetUser","enableSysAdminViewRepo","deleteRepo","transferRepo","toggleDeleteDialog","isDeleteDialogOpen","toggleTransferDialog","isTransferDialogOpen","owner","renderRepoName","repo","encrypted","iconUrl","getLibIconUrl","iconTitle","getLibIconTitle","last_modified","canTransferToDept","Repos","repoID","sysAdminDeleteRepo","newRepoList","repoList","sysAdminTransferRepo","sysAdminListReposByOwner","repos","getOwnerLink","link","owner_email","indexOf","owner_name","groupID","substring","last_modify","sysAdminListShareInRepos","repo_list","deleteItem","toggleLinkDialog","isLinkDialogOpen","getRoleText","roleText","getIconUrl","is_dir","getFolderIconUrl","getFileIconUrl","obj_name","view_cnt","Links","token","sysAdminDeleteShareLink","shareLinkItems","sysAdminDeleteUploadLink","uploadLinkItems","sysAdminListShareLinksByUser","share_link_list","sort","a","b","sysAdminListUploadLinksByUser","upload_link_list","parent_group_id","created_at","Groups","sysAdminListGroupsJoinedByUser","group_list","SysAdminCreateRepoDialog","handleRepoNameChange","repoName","ownerEmail","createRepo","option","UserItem","isOperationShow","deleteShareItem","user_email","onChangeUserPermission","permission","currentPermission","getSharedPermission","permissions","onPermissionChanged","UserList","SysAdminShareToUser","selectedOption","setPermission","shareToUser","i","sysAdminAddRepoSharedItem","newItems","sharedItems","refs","userSelect","clearSelect","response","useremail","sysAdminDeleteRepoSharedItem","userEmail","sysAdminUpdateRepoSharedItemPermission","updateSharedItems","sharedItem","sharedItemUsername","is_admin","sysAdminListRepoSharedItems","colSpan","GroupItem","group_id","group_name","GroupList","NoOptionsMessage","innerProps","margin","textAlign","SysAdminShareToGroup","loadOptions","shareableGroups","obj","listSharedGroups","shareToGroup","groups","sharedItemGroupID","maxMenuHeight","inputId","components","SysAdminShareDialog","getInitialActiveTab","activeTab","renderDirContent","enableDirPrivateShare","isGroupOwnedRepo","pills","NavItem","NavLink","TabContent","TabPane","tabId","itemType","itemPath","isRepoOwner","maxWidth","SysAdminLibHistorySettingDialog","days","keepDays","autoHistory","expireDays","sysAdminUpdateRepoHistorySetting","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","sysAdminGetRepoHistorySetting","onKeyDown","sortByFileCount","sortBySize","initialSortIcon","onDeleteRepo","onTransferRepo","isRepoDeleted","toggleShareDialog","toggleHistorySettingDialog","isShareDialogOpen","isHistorySettingDialogOpen","getOperations","departmentID","file_count","repoEncrypted","userPerm","AllRepos","toggleCreateRepoDialog","isCreateRepoDialogOpen","getReposByPage","sysAdminListAllRepos","Owner","sysAdminCreateRepo","targetRepo","searchRepos","repoNameOrID","description","SystemRepo","sysAdminGetSystemRepoInfo","trashReposExpireDays","onRestoreRepo","sysAdminDeleteTrashRepo","sysAdminRestoreTrashRepo","toggleDeleteRepoDialog","isDeleteRepoDialogOpen","toggleRestoreRepoDialog","isRestoreRepoDialogOpen","delete_time","TrashRepos","toggleCleanTrashDialog","isCleanTrashDialogOpen","sysAdminListTrashRepos","cleanTrash","sysAdminCleanTrashRepos","sysAdminSearchTrashRepos","SearchRepos","getRepos","sysAdminSearchRepos","handleNameInputChange","offset","Dirent","mtime","last_update","file_size","is_file","DirPath","onPathClick","getEventData","turnPathToLink","pathList","split","nodePath","isSystemRepo","currentPath","pathElem","DirentItem","openFolder","dirent","deleteDirent","downloadDirent","fromSystemRepo","getDirentIcon","DirContent","direntList","DirView","loadDirentList","toggleNewFolderDialog","isNewFolderDialogOpen","createNewFolder","folderName","getFileName","sysAdminCreateSysRepoFolder","new_dirent","direntPath","joinPath","sysAdminListRepoDirents","is_system_library","dirent_list","encodePath","history","replaceState","sysAdminDeleteRepoDirent","sysAdminGetRepoFileDownloadURL","download_url","onFileInputChange","sydAdminGetSysRepoItemUploadURL","formData","FormData","append","axios","post","upload_link","fileObj","newDirent","Date","getTime","dirs","splice","SysAdminCreateGroupDialog","groupName","createGroup","SysAdminTransferGroupDialog","submitBtnDisabled","receiver","transferGroup","dangerouslySetInnerHTML","__html","deleteGroup","groupUrl","toggleCreateGroupDialog","isCreateGroupDialogOpen","getGroupListByPage","sysAdminListAllGroups","groupList","OnwerEmail","sysAdminCreateNewGroup","newGroupList","sysAdminDismissGroupByID","receiverEmail","sysAdminTransferGroup","searchGroups","SearchGroups","getGroups","sysAdminSearchGroups","unshareRepo","toggleUnshareRepoDialog","isUnshareRepoDialogOpen","dialogMsg","shared_by","shared_by_name","GroupRepos","sysAdminUnshareRepoFromGroup","sysAdminListGroupRepos","libraries","SysAdminGroupAddMemberDialog","selectedOptions","isSubmitBtnDisabled","addMembers","SysAdminGroupRoleEditor","removeMember","updateMemberRole","GroupMembers","sysAdminListGroupMembers","memberList","members","toggleAddMemgerDialog","isAddMemberDialogOpen","sysAdminAddGroupMember","newMemberList","duration","sysAdminDeleteGroupMember","sysAdminUpdateGroupMemberRole","Departments","AddDepartDialog","validateName","parentGroup","parentGroupID","sysAdminAddNewDepartment","departName","onAddNewDepartment","header","RenameDepartmentDialog","sysAdminRenameDepartment","departmentName","onDepartmentNameChanged","onAfterModelOpened","newInput","focus","select","onOpened","DeleteDepartmentDialog","deleteDepart","group","sysAdminDeleteDepartment","onDeleteDepartment","tipMessage","SetGroupQuotaDialog","setGroupQuota","newQuota","sysAdminUpdateDepartmentQuota","onSetQuota","toggleRenameDialog","isRenameDialogOpen","newHref","onSetDepartmentQuota","DepartmentList","listDepartments","sysAdminListAllDepartments","toggleAddDepartDialog","isShowAddDepartDialog","dept","newDepartment","topbarChildren","AddMemberDialog","orgSelect","onAddNewMembers","AddRepoDialog","sysAdminAddRepoInDepartment","onAddNewRepo","Department","getDepartmentInfo","sysAdminGetDepartmentInfo","ancestorGroups","ancestor_groups","toggleRenameDepartmentDialog","isShowRenameDepartmentDialog","toggleAddRepoDialog","isShowAddRepoDialog","toggleAddMemberDialog","isShowAddMemberDialog","toggleAddDepartmentDialog","isShowAddDepartmentDialog","topBtn","ancestor","SubDepartments","listSubDepartments","onSubDepartmentNameChanged","DeleteMemberDialog","deleteMember","member","onMemberChanged","MemberItem","toggleMemberRoleMenu","showRoleMenu","onChangeUserRole","roles","toggleItemFreezed","showDeleteMemberDialog","DepartmentMembers","listMembers","currentPageInfo","membersErrorMsg","toggleCancel","isFreezed","deletedMember","newMembers","DeleteRepoDialog","sysAdminDeleteRepoInDepartment","onRepoChanged","RepoItem","showDeleteRepoDialog","DepartmentDetail","listGroupRepo","deletedRepo","newRepo","getShareLinksByPage","sortByTime","sortByCount","deleteShareLink","renderExpiration","expire_date","expire_time","is_expired","deleteIcon","onMouseOver","onMouseOut","creator_email","creator_name","ctime","ShareLinks","sysAdminListShareLinks","shareLinkList","linkToken","newShareLinkList","getUploadLinksByPage","deleteUploadLink","UploadLinks","sysAdminListAllUploadLinks","uploadLinkList","newUploadLinkList","SysAdminAddOrgDialog","orgName","addOrg","deleteOrg","sysAdminGetOrg","repoCount","Orgs","getItemsByPage","sysAdminListOrgs","orgList","organizations","toggleAddOrgDialog","isAddOrgDialogOpen","orgID","orgInfo","sysAdminUpdateOrg","newOrgList","org","sysAdminAddOrg","sysAdminDeleteOrg","SearchOrgs","sysAdminSearchOrgs","organization_list","SysAdminSetOrgNameDialog","updateName","SysAdminSetOrgMaxUserNumberDialog","isSetNameDialogOpen","toggleSetMaxUserNumberDialog","isSetMaxUserNumberDialogOpen","max_user_number","enable_saml_login","url_prefix","metadata_url","domain","Row","md","serviceURL","updateMaxUserNumber","OrgInfo","newOrgInfo","newValue","maxUserNumber","SysAdminUserMembershipEditor","updateMembership","toggleResetPasswordDialog","isResetPasswordDialogOpen","statusValue","membershipValue","active","is_org_staff","OrgUsers","newUserInfo","sysAdminAddOrgUser","sysAdminDeleteOrgUser","sysAdminUpdateOrgUser","isOrgStaff","sysAdminListOrgUsers","OrgGroups","sysAdminListOrgGroups","OrgRepos","sysAdminListOrgRepos","SysAdminAddInstitutionDialog","addInstitution","getInstitutionsByPage","deleteInstitution","institutionName","Institutions","sysAdminListInstitutions","institutionList","institution_list","toggleAddInstitutionDialog","isAddInstitutionDialogOpen","sysAdminAddInstitution","institutionID","sysAdminDeleteInstitution","institutionInfo","user_count","quota_used","InstitutionInfo","sysAdminUpdateInstitution","newInstitutionInfo","sysAdminGetInstitution","getInstitutionUsersByPage","setAdmin","toggleSetAdminDialog","isSetAdminDialogOpen","is_institution_admin","InstitutionUsers","sysAdminListInstitutionUsers","sysAdminUpdateInstitutionUser","sysAdminAddInstitutionUserBatch","successArray","failedArray","sysAdminDeleteInstitutionUser","InstitutionAdmins","sysAdminListInstitutionAdmins","LogsExportExcelDialog","downloadExcel","isValidDateStr","startDateStr","endDateStr","logType","isValid","handleStartChange","handleEndChange","getLogsByPage","login_ip","log_success","login_time","LoginLogs","toggleExportExcelDialog","isExportExcelDialogOpen","sysAdminListLoginLogs","logList","login_log_list","FilterMenu","toggleMenu","isMenuShown","toggleFreezeItem","onItemClick","filterItems","filterBy","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","ToggleFilter","toggleFilter","toggleFilterByUser","filterByUser","toggleFilterByRepo","filterByRepo","freezed","userFilteredBy","repoFilteredBy","isHighlighted","event_type","ip","device","time","file_or_dir_name","FileAccessLogs","sysAdminListFileAccessLogs","file_access_log_list","updateURL","delete","toggleCommitDetailsDialog","isCommitDetailsDialogOpen","showCommitDetails","file_operation","repo_encrypted","commitID","commit_id","commitTime","FileUpdateLogs","sysAdminListFileUpdateLogs","file_update_log_list","getActionTextByEType","etype","getShareTo","share_type","to_user_email","to_user_name","to_group_id","to_group_name","from_user_email","from_user_name","sharePerms","folder","date","SharePermissionLogs","sysAdminListSharePermissionLogs","share_permission_log_list","Section","headingText","SettingItemBase","helpTip","displayName","mainContent","extraContent","WebSettingInput","toggleBtns","isBtnsShown","hideBtns","onInputChange","saveSetting","keyText","inputType","onFocus","onBlur","onMouseDown","WebSettingFile","postFile","filePath","fileWidth","fileHeight","height","WebSettingCheckbox","valueToNum","inputChecked","WebSettings","sysAdminSetSysSettingInfo","config_dict","fileType","sysAdminUpdateLogo","sysAdminUpdateFavicon","sysAdminUpdateLoginBG","logoPath","logo_path","faviconPath","favicon_path","loginBGPath","login_bg_image_path","mediaUrl","sysAdminGetSysSettingInfo","SysAdminAddSysNotificationDialog","addNotification","deleteNotification","setToCurrent","is_current","Notifications","toggleAddNotificationDialog","isAddNotificationDialogOpen","sysAdminAddSysNotification","notificationList","notification","sysAdminDeleteSysNotification","sysAdminSetSysNotificationToCurrent","sysAdminListAllSysNotifications","notifications","records","record","detail","suggestion","FileScanRecords","listFileScanRecords","record_list","Fragment","WorkWeixinDepartmentMembersList","newUsersTempObj","checkedDepartmentId","isMembersListLoading","canCheckUserIds","membersList","avatar","onUserChecked","userid","mobile","isCheckedAll","onAllUsersChecked","WorkWeixinDepartmentsTreeNode","toggleChildren","stopPropagation","isChildrenShow","dropdownToggle","dropdownOpen","importDepartmentDialogToggle","depart","renderTreeNodes","departmentsTree","onChangeDepartment","changeDept","toggleClass","nodeInnerClass","direction","opacity","WorkWeixinDepartmentsTreePanel","isTreeLoading","ImportWorkWeixinDepartmentDialog","onImportDepartmentSubmit","departmentsCount","membersCount","WorkWeixinDepartments","getDepartmentsTree","childIds","parentIds","parentid","intersection","v","rootIds","cloneData","deepCopy","father","branchArr","child","getWorkWeixinDepartmentsList","adminListWorkWeixinDepartments","importDepartmentChildrenCount","importDepartmentMembersCount","membersTempObj","handleError","getWorkWeixinDepartmentMembersList","department_id","adminListWorkWeixinDepartmentMembers","fetch_child","userlist","getCanCheckUserIds","userIds","keys","newUsersTempList","JSON","stringify","adminAddWorkWeixinUsersBatch","handleSubmitSuccess","fails","j","departmentId","k","importDepartment","isImportDepartmentDialogShow","adminImportWorkWeixinDepartment","handleImportDepartmentSubmitSuccess","handleImportDepartmentSubmitFailed","successes","len","successMsg","department_name","api_user_name","fail","failName","canImportDepartment","DingtalkDepartmentMembersList","DingtalkDepartmentsTreeNode","DingtalkDepartmentsTreePanel","ImportDingtalkDepartmentDialog","DingtalkDepartments","getDingtalkDepartmentsList","adminListDingtalkDepartments","getDingtalkDepartmentMembersList","adminListDingtalkDepartmentMembers","adminAddDingtalkUsersBatch","adminImportDingtalkDepartment","getInviteTypeText","invite_type","inviter_email","inviter_name","accept_time","accepter_email","accepter_name","invite_time","Invitations","sysAdminListInvitations","invitation_list","targetItem","sysAdminDeleteInvitation","deleteItemInBatch","sysAdminDeleteExpiredInvitations","prevItems","totalItemCount","TermsEditorDialog","event","isContentChanged","currentContent","getCurrentContent","onCommit","onCloseEditorDialog","simpleEditor","hasContentChange","getMarkdown","setSimpleEditorRef","editor","content","wrapClassName","contentClassName","onRef","AddOrUpdateTermDialog","handleNameChange","handleVersionNumberChange","versionNumber","handleTextChange","setActive","setInActive","addTerm","isNaN","isUpdate","updateTerm","onContentClick","isConditionsEditorDialogShow","onUpdateContent","oldTermObj","version_number","activate_time","hrefReg","imageReg1","imageReg2","linkReg1","linkReg2","getPreviewContent","markdownContent","previewText","newMarkdownContent","hrefs","match","hrefObj","links","images","imageSrcs","imageSrcs1","getLinks","TermsPreviewDialog","onClosePreviewDialog","toggleUpdateDialog","isUpdateDialogOpen","toggleTermsContentDialog","isTermsPerviewDialogOpen","deleteTerm","itemContent","mdFile","processor","process","result","innerHtml","String","previewContent","TermsAndConditions","toggleAddTermDialog","isAddTermDialogOpen","sysAdminAddTermAndCondition","reload","termID","sysAdminUpdateTermAndCondition","termList","sysAdminDeleteTermAndCondition","sysAdminListTermsAndConditions","term_and_condition_list","VirusFileItem","handleFile","virusFile","virus_id","fileStatus","fileOpList","has_deleted","has_ignored","repo_owner","file_path","virusFiles","AllVirusFiles","listVirusFiles","virus_file_list","virusID","op","request","deleteVirusFile","toggleIgnoreVirusFile","virus_file","toggleItemSelected","isAllItemsSelected","toggleAllSelected","UnhandledVirusFiles","prevState","handleSelectedItems","virusIDs","batchProcessVirusFiles","fileList","find","deleteSelectedItems","ignoreSelectedItems","selectedItems","LogsNav","getOperationText","operationType","getOperationDetail","ownerPageUrl","userPageUrl","detailText","repoPageUrl","groupPageUrl","from","AdminOperationLogs","sysAdminListAdminLogs","login_success","AdminLoginLogs","sysAdminListAdminLoginLogs","AbuseReports","listAbuseReports","sysAdminListAbuseReports","abuseReportList","abuse_report_list","updateAbuseReport","handled","abuseReportId","sysAdminUpdateAbuseReport","AbuseReportList","isDesktop","fileUrl","reporter","abuse_type","SysAdmin","getCurrentTabForPageList","pageList","urlPartList","urlBase","jlen","param","tmpTab","commonProps","zIndex","ReactDom","render","getElementById","ShareAdminLink","copyToClipboard","copy","CommitDetails","getCommitDetails","commitDetails","centered","renderDetails","detailsData","showDesc","cmt_desc","defineProperty","exports","enumerable","_chart","defaults","Scatter","Bubble","Polar","Radar","HorizontalBar","Bar","Line","Pie","Doughnut","_react","_interopRequireDefault","require","_propTypes","_isEqual","_keyBy","__esModule","default","arguments","prototype","hasOwnProperty","call","apply","_typeof","Symbol","iterator","constructor","_objectWithoutProperties","excluded","sourceKeys","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","ownKeys","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","getPrototypeOf","NODE_ENV","ChartComponent","_React$Component","_super","chartInstance","_this$props","getDatasetAtEvent","getElementAtEvent","getElementsAtEvent","onElementsClick","element","renderChart","redraw","destroyChart","updateChart","_this$props2","plugins","nextData","transformDataProp","shadowDataProp","saveCurrentDatasets","isDev","usingCustomKeyProvider","datasetKeyProvider","getLabelAsKey","multipleDatasets","shouldWarn","dataset","console","_this2","getCurrentDatasets","d","_this3","memoizeDataProps","helpers","configMerge","currentDatasets","nextDatasets","checkDatasets","currentDatasetsIndexed","next","point","pid","otherProps","rest","update","_this$props3","node","destroy","_this$props4","handleOnClick","number","arrayOf","propName","componentName","controllers","Error","position","_default","_React$Component2","_super2","_this4","_ref","_React$Component3","_super3","_this5","_ref2","_React$Component4","_super4","_this6","_ref3","_React$Component5","_super5","_this7","_ref4","_React$Component6","_super6","_this8","_ref5","_React$Component7","_super7","_this9","_ref6","_React$Component8","_super8","_this10","_ref7","_React$Component9","_super9","_this11","_ref8","_React$Component10","_super10","_this12","_ref9","SysAdminUnlinkDevice","htmlFor","module","createCommonjsModule","fn","getCjsExportFromNamespace","n","colorName","conversions","reverseKeywords","convert","rgb","channels","hsl","hsv","hwb","cmyk","xyz","lab","lch","hex","ansi16","ansi256","hcg","apple","gray","model","comparativeDistance","x","y","Math","pow","h","l","r","g","min","max","delta","rdif","gdif","bdif","s","diff","diffc","c","reversed","currentClosestKeyword","currentClosestDistance","Infinity","distance","z","t1","t2","t3","smin","lmin","hi","floor","f","q","t","sl","vmin","wh","bl","ratio","m","y2","x2","z2","atan2","PI","sqrt","hr","cos","sin","args","round","ansi","mult","rem","toUpperCase","colorString","char","join","integer","hue","chroma","pure","w","mg","buildGraph","graph","models","parent","deriveBFS","fromModel","queue","pop","adjacents","adjacent","wrapConversion","toModel","cur","conversion","route","wrapRaw","wrappedFn","wrapRounded","routes","raw","colorConvert","colorName$1","getRgba","getHsla","getRgb","getHsl","getHwb","getAlpha","hexString","rgbString","rgbaString","percentString","percentaString","hslString","hslaString","hwbString","abbr","rgba","per","hexAlpha","parseFloat","scale","alpha","hsla","vals","hexDouble","reverseNames","str","Color","valid","setValues","red","lightness","whiteness","cyan","setSpace","rgbArray","hslArray","hsvArray","hwbArray","cmykArray","rgbaArray","hslaArray","setChannel","green","blue","saturation","saturationv","blackness","magenta","yellow","black","rgbNumber","luminosity","lum","chan","contrast","color2","lum1","lum2","level","contrastRatio","light","negate","lighten","darken","saturate","desaturate","whiten","blacken","greyscale","clearer","opaquer","rotate","degrees","mix","mixinColor","weight","color1","w1","w2","toJSON","prop","spaces","maxes","getValues","space","charAt","capped","chans","sname","svalues","chartjsColor","isValidKey","noop","uid","isNullOrUndef","isObject","isFinite","Number","valueOrDefault","valueAtIndexOrDefault","thisArg","each","loopable","reverse","arrayEquals","a0","a1","ilen","v0","v1","klen","_merger","tval","sval","merge","_mergerIf","mergeIf","sources","merger","extend","dst","inherits","extensions","me","ChartElement","Surrogate","__super__","_deprecated","scope","previous","warn","helpers_core","callCallback","array","fromIndex","getValueOrDefault","getValueAtIndexOrDefault","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","helpers_easing","easingEffects","RAD_PER_DEG","DOUBLE_PI","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","exports$1","clear","chart","ctx","clearRect","roundedRect","radius","left","top","bottom","moveTo","arc","closePath","rect","drawPoint","rotation","xOffset","yOffset","cornerRadius","rad","save","translate","drawImage","restore","beginPath","lineTo","SQRT1_2","stroke","_isPointInArea","area","epsilon","clipArea","clip","unclipArea","flip","stepped","steppedLine","midpoint","bezierCurveTo","controlPointPreviousX","controlPointNextX","controlPointPreviousY","controlPointNextY","helpers_canvas","drawRoundedRectangle","_set","defaultColor","defaultFontColor","defaultFontFamily","defaultFontSize","defaultFontStyle","defaultLineHeight","showLines","core_defaults","toFontString","font","family","helpers_options","toLineHeight","matches","toPadding","_parseFont","globalDefaults","global","fontFamily","lineHeight","fontStyle","resolve","inputs","context","cacheable","exports$2","_factorize","log10","exponent","log","LOG10E","powerOf10","helpers_math","getRtlAdapter","rectX","setWidth","align","xPlus","leftForLtr","itemWidth","getLtrAdapter","_itemWidth","helpers$1","easing","canvas","math","rtl","overrideTextDirection","original","getPropertyValue","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","interpolate","start","view","ease","actual","origin","c0","c1","Element","configuration","initialize","_type","hidden","pivot","_view","_model","_start","transition","tooltipPosition","hasValue","isNumber","core_element","exports$3","currentStep","numSteps","onAnimationProgress","onAnimationComplete","core_animation","animation","onProgress","onComplete","core_animations","animations","addAnimation","lazy","now","animating","requestAnimationFrame","cancelAnimation","findIndex","requestAnimFrame","startDigest","advance","nextStep","arrayEvents","listenArrayEvents","listener","_chartjs","listeners","method","base","unlistenArrayEvents","stub","DatasetController","datasetElementType","dataElementType","_datasetElementOptions","_dataElementOptions","linkScales","addElements","getMeta","updateIndex","meta","getDataset","scalesOpts","xAxisID","yAxisID","getDatasetMeta","getScaleForId","scaleID","_getValueScaleId","_getIndexScaleId","_getValueScale","_getIndexScale","reset","_update","_data","createMetaDataset","_datasetIndex","createMetaData","_index","metaData","addElementAndReset","updateElement","buildOrUpdateElements","isExtensible","resyncElements","_configure","_config","_cachedDataOpts","easingValue","draw","getStyle","_resolveDatasetElementOptions","_resolveDataElementOptions","readKey","datasetOpts","custom","elementOptions","cached","dataIndex","freeze","removeHoverStyle","$previousStyle","setHoverStyle","getHoverColor","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","_removeDatasetHoverStyle","_setDatasetHoverStyle","hoverOptions","prev","numMeta","numData","insertElements","onDataPush","onDataPop","onDataShift","shift","onDataSplice","onDataUnshift","core_datasetController","TAU","clipArc","startAngle","endAngle","pixelMargin","angleMargin","outerRadius","innerRadius","drawFullCircleBorders","vm","inner","fullCircles","drawBorder","borderAlign","lineWidth","lineJoin","element_arc","inLabelRange","mouseX","hoverRadius","inRange","chartX","chartY","pointRelativePosition","getAngleFromPoint","angle","betweenAngles","withinRadius","getCenterPoint","halfAngle","halfRadius","getArea","centreAngle","rangeFromCentre","circumference","fillStyle","strokeStyle","valueOrDefault$1","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","capBezierPoints","element_line","currentVM","spanGaps","points","_children","globalOptionLineElements","lastDrawnIndex","_loop","previousItem","skip","lineCap","setLineDash","lineDashOffset","valueOrDefault$2","defaultColor$1","xRange","abs","hitRadius","yRange","mouseY","pointStyle","element_point","inXRange","inYRange","chartArea","defaultColor$2","isVertical","getBarBounds","x1","y1","half","swap","orig","v2","parseBorderSkipped","edge","borderSkipped","horizontal","parseBorderWidth","maxW","maxH","boundingRects","bounds","border","outer","skipX","skipY","rectangle","element_rectangle","rects","fillRect","Arc","Point","Rectangle","deprecated","valueOrDefault$3","computeMinSampleSize","pixels","curr","_length","getTicks","getPixelForTick","computeFitCategoryTraits","ruler","thickness","barThickness","stackCount","categoryPercentage","barPercentage","chunk","computeFlexCategoryTraits","percent","end","mode","gridLines","offsetGridLines","bar","controller_bar","scaleOpts","stack","minBarLength","maxBarThickness","_ruler","getRuler","_xScale","_yScale","datasetLabel","_updateElementGeometry","vscale","getBasePixel","isHorizontal","vpixels","calculateBarValuePixels","ipixels","calculateBarIndexPixels","head","center","_getStacks","last","metasets","_getMatchingVisibleMetas","stacked","stacks","getStackCount","getStackIndex","getPixelForValue","_startPixel","_endPixel","imeta","ivalue","stackLength","_parseValue","range","stackIndex","indexOpts","valueOpts","valueOrDefault$4","resolve$1","dataPoint","xLabel","controller_bubble","xScale","yScale","dsIndex","getPixelForDecimal","NaN","_options","valueOrDefault$5","PI$1","DOUBLE_PI$1","HALF_PI$1","animateRotate","animateScale","legendCallback","listItem","setAttribute","appendChild","createTextNode","outerHTML","generateLabels","controller","legendItem","cutoutPercentage","dataLabel","controller_doughnut","getRingIndex","ringIndex","isDatasetVisible","maxHeight","opts","ratioX","ratioY","offsetX","offsetY","arcs","cutout","chartWeight","_getRingWeight","startX","startY","endX","endY","contains0","contains90","contains270","minX","minY","maxX","maxY","getMaxBorderWidth","radiusLength","_getVisibleDatasetWeightTotal","total","calculateTotal","_getRingWeightOffset","animationOpts","centerX","centerY","calculateCircumference","hoverWidth","ringWeightOffset","dataSetIndex","axis","horizontalBar","controller_horizontalBar","valueOrDefault$6","resolve$2","isPointInArea","scaleClip","halfBorderWidth","tickOpts","defaultClip","toClip","controller_line","showLine","_showLine","lineTension","_scale","updateBezierControlPoints","lineModel","calculatePointY","lineOptions","ds","dsMeta","stackedRightValue","rightValue","sumPos","sumNeg","getRightValue","_getSortedVisibleDatasetMetas","controlPoints","capControlPoint","pt","cubicInterpolationMode","splineCurveMonotone","splineCurve","nextItem","resolve$3","angleLines","circular","pointLabels","controller_polarArea","starts","_starts","angles","_angles","_updateRadius","countVisibleElements","_computeAngle","minSize","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getDistanceFromCenterForValue","resetRadius","doughnut","controller_pie","valueOrDefault$7","controller_radar","pointPosition","getPointPositionForValue","scatter","bubble","polarArea","pie","radar","getRelativePosition","native","parseVisibleItems","handler","metadata","getIntersectItems","getNearestItems","intersect","distanceMetric","minDistance","POSITIVE_INFINITY","nearestItems","getDistanceMetricForAxis","useX","useY","pt1","pt2","deltaX","deltaY","indexMode","core_interaction","modes","single","nearest","intersectsItem","filterByPosition","where","pos","sortByWeight","wrapBoxes","boxes","box","layoutBoxes","setLayoutDims","layouts","fullWidth","availableWidth","vBoxMaxWidth","hBoxMaxHeight","buildLayoutBoxes","leftAndTop","rightAndBottom","vertical","getCombinedMax","maxPadding","updateDims","newWidth","newHeight","getPadding","boxPadding","outerWidth","outerHeight","sizes","handleMaxPadding","updatePos","change","getMargins","marginForPositions","positions","fitBoxes","refit","changed","refitBoxes","placeBoxes","userPadding","core_layouts","addBox","_layers","removeBox","layoutItem","configure","layoutOptions","availableHeight","verticalBoxes","horizontalBoxes","platform_basic","acquireContext","getContext","platform_dom","stylesheet","EXPANDO_KEY","CSS_PREFIX","CSS_SIZE_MONITOR","CSS_RENDER_MONITOR","CSS_RENDER_ANIMATION","ANIMATION_START_EVENTS","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","readUsedSize","property","initCanvas","renderHeight","getAttribute","renderWidth","initial","displayWidth","aspectRatio","displayHeight","eventListenerOptions","supports","addEventListener","passive","addListener","removeListener","removeEventListener","createEvent","nativeEvent","fromNativeEvent","throttled","ticking","createDiv","cls","el","createResizer","maxSize","resizer","expand","shrink","_reset","scrollLeft","scrollTop","onScroll","watchForRender","expando","proxy","renderProxy","animationName","reflow","offsetParent","classList","add","unwatchForRender","remove","addResizeListener","container","maintainAspectRatio","parentNode","clientWidth","insertBefore","firstChild","removeResizeListener","removeChild","injectCSS","rootNode","css","containsStyles","platform_dom$2","disableCSSInjection","_enabled","_ensureLoaded","root","getRootNode","host","releaseContext","removeAttribute","proxies","addEvent","removeEvent","implementation","core_plugins","_plugins","_cacheId","register","plugin","unregister","idx","getAll","hook","descriptors","cache","$plugins","_invalidate","core_scaleService","constructors","registerScaleType","scaleConstructor","scaleDefaults","getScaleConstructor","getScaleDefaults","updateScaleDefaults","additions","addScalesToLayout","valueOrDefault$8","getRtlHelper","enabled","titleFontStyle","titleSpacing","titleMarginBottom","titleFontColor","titleAlign","bodySpacing","bodyFontColor","bodyAlign","footerFontStyle","footerSpacing","footerMarginTop","footerFontColor","footerAlign","yPadding","xPadding","caretPadding","caretSize","multiKeyBackground","displayColors","beforeTitle","tooltipItems","labelCount","afterTitle","beforeBody","beforeLabel","labelColor","labelTextColor","afterLabel","afterBody","beforeFooter","footer","afterFooter","positioners","average","eventPosition","nearestElement","distanceBetweenPoints","tp","pushOrConcat","toPush","splitNewlines","createTooltipItem","indexScale","valueScale","getLabelForIndex","getBaseModel","tooltipOpts","xAlign","yAlign","textDirection","_bodyFontFamily","bodyFontFamily","_bodyFontStyle","bodyFontStyle","_bodyAlign","bodyFontSize","_titleFontFamily","titleFontFamily","_titleFontStyle","titleFontSize","_titleAlign","_footerFontFamily","footerFontFamily","_footerFontStyle","footerFontSize","_footerAlign","legendColorBackground","getTooltipSize","tooltip","body","combinedBodyLength","reduce","bodyItem","before","lines","after","titleLineCount","footerLineCount","widthPadding","maxLineWidth","measureText","fontString","determineAlignment","lf","rf","olf","orf","yf","midX","midY","getBackgroundPoint","alignment","paddingAndSize","radiusAndPadding","getAlignedX","getBeforeAfterBodyLines","exports$4","_lastActive","getTitle","getBeforeBody","getBody","bodyItems","getAfterBody","getFooter","existingModel","_active","backgroundPoint","tooltipSize","caretX","caretY","labelColors","labelTextColors","_eventPosition","itemSort","dataPoints","drawCaret","tooltipPoint","caretPosition","getCaretPosition","x3","y3","ptX","ptY","tmp","drawTitle","rtlHelper","textBaseline","fillText","drawBody","textColor","drawColorBoxes","xLinePadding","colorX","fillLineOfText","bodyAlignForCalculation","rtlColorX","strokeRect","drawFooter","drawBackground","quadraticCurveTo","hasTooltipContent","globalAlpha","handleEvent","getElementsAtEventForMode","positioners_1","core_tooltip","valueOrDefault$9","mergeScaleConfig","slen","mergeConfig","initConfig","updateConfig","newOptions","ensureScalesHaveIDs","buildOrUpdateScales","nextAvailableScaleId","axesOpts","prefix","hasId","positionIsHorizontal","compare2Level","l1","l2","events","onHover","animationDuration","responsiveAnimationDuration","Chart","_bufferedRender","instances","retinaScale","devicePixelRatio","bindEvents","resize","initToolTip","stop","silent","getMaximumWidth","getMaximumHeight","newSize","onResize","scalesOptions","scaleOptions","xAxisOptions","yAxisOptions","updated","dtype","dposition","isDefault","scaleType","scaleClass","mergeTicksOptions","hasUpdated","buildOrUpdateControllers","newControllers","destroyDatasetMeta","order","ControllerClass","resetElements","updateLayout","updateDatasets","lastActive","_bufferedRequest","_idx","updateDataset","animationOptions","animationObject","easingFunction","stepDecimal","layers","drawDatasets","_drawTooltip","_getSortedDatasetMetas","filterVisible","drawDataset","getElementsAtXAxis","_meta","generateLegend","unbindEvents","toBase64Image","toDataURL","_chartInstance","_listeners","eventHandler","updateHoverStyle","bufferedRequest","core_controller","Controller","types","scaleMerge","core_helpers","parseMaxStyle","styleValue","parentProperty","valueInPixels","isConstrainedValue","getConstraintDimension","domNode","maxStyle","percentageProperty","defaultView","_getParentNode","constrainedNode","getComputedStyle","constrainedContainer","hasCNode","hasCContainer","infinity","collection","filterCallback","filtered","findNextWhere","arrayToSearch","startIndex","findPreviousWhere","almostEquals","almostWhole","rounded","NEGATIVE_INFINITY","sign","toRadians","toDegrees","radians","_decimalPlaces","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","aliasPixel","pixelWidth","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","firstPoint","middlePoint","afterPoint","d01","d12","s01","s12","fa","fb","EPSILON","pointBefore","pointCurrent","pointAfter","alphaK","betaK","tauK","squaredMagnitude","pointsWithTangents","deltaK","mK","pointsLen","slopeDeltaX","loop","niceNum","fraction","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","evt","originalEvent","srcElement","boundingRect","getBoundingClientRect","touches","clientX","clientY","paddingLeft","paddingTop","paddingRight","paddingBottom","getConstraintWidth","getConstraintHeight","_calculatePadding","parentDimension","cw","clientHeight","ch","currentStyle","forceRatio","pixelRatio","pixelSize","longestText","arrayOfThings","gc","garbageCollect","thing","nestedThing","longest","gcLen","textWidth","numberOfLabelLines","numberOfLines","CanvasGradient","colorValue","CanvasPattern","abstract","DateAdapter","formats","parse","startOf","endOf","_create","override","core_adapters","_date","core_ticks","formatters","tickValue","logDelta","tickString","logTick","numExponential","toExponential","numDecimal","toFixed","logarithmic","remain","valueOrDefault$a","sample","arr","numItems","increment","getPixelForGridLine","validIndex","lineValue","caches","computeLabelSizes","tickFonts","tickFont","nestedLabel","widest","highest","widths","heights","offsets","widestLabelSize","highestLabelSize","major","minor","valueAt","first","getTickMarkLength","drawTicks","tickMarkLength","getScaleLabelHeight","parseFontOptions","nestedOpts","fontColor","parseTickFontOptions","nonSkipped","ticksToFilter","getEvenSpacing","calculateSpacing","majorIndices","axisLength","ticksLimit","factors","factor","evenMajorSpacing","spacing","getMajorIndices","skipMajors","tick","ceil","majorStart","majorEnd","drawOnChartArea","zeroLineWidth","zeroLineColor","zeroLineBorderDash","zeroLineBorderDashOffset","scaleLabel","labelString","minRotation","maxRotation","mirror","autoSkip","autoSkipPadding","labelOffset","Scale","zeroLineIndex","_ticks","_getLabels","xLabels","yLabels","beforeUpdate","margins","samplingEnabled","sampleSize","_labelSizes","_maxLabelLines","longestLabelWidth","longestTextCache","_gridLineItems","_labelItems","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","beforeBuildTicks","buildTicks","afterBuildTicks","_convertTicksToLabels","beforeCalculateTickRotation","calculateTickRotation","afterCalculateTickRotation","beforeFit","fit","afterFit","_ticksToDraw","_autoSkip","afterUpdate","startPixel","endPixel","reversePixels","_reversePixels","beforeTickToLabelConversion","convertTicksToLabels","userCallback","afterTickToLabelConversion","labelSizes","maxLabelWidth","maxLabelHeight","tickWidth","maxLabelDiagonal","numTicks","labelRotation","_isVisible","_getLabelSizes","scaleLabelOpts","gridLineOpts","isBottom","firstLabelSize","lastLabelSize","lineSpace","tickPadding","isRotated","angleRadians","cosRotation","sinRotation","labelHeight","offsetLeft","offsetRight","labelWidth","handleMargins","isFullWidth","rawValue","_getScaleLabel","getValueForPixel","decimal","getDecimalForPixel","getBaseValue","avgMajorSpacing","_tickSize","numMajorIndices","optionTicks","rot","_computeGridLineItems","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","lineColor","ticksLength","tl","axisWidth","axisHalfWidth","alignPixel","alignBorderValue","_computeLabelItems","lineCount","textOffset","isMirrored","fonts","_drawGrid","firstLineWidth","lastLineWidth","_drawLabels","_drawTitle","scaleLabelX","scaleLabelY","scaleLabelFontColor","scaleLabelFont","scaleLabelPadding","halfLineHeight","isLeft","tz","gz","_draw","core_scale","isNullOrUndef$1","defaultConfig","scale_category","ticksOpts","minIndex","maxIndex","_startValue","_valueRange","valueCategory","_defaults","isNullOrUndef$2","generateTicks","generationOptions","dataRange","niceMin","niceMax","numSpaces","MIN_SPACING","stepSize","unit","maxNumSpaces","maxTicks","precision","rmin","rmax","scale_linearbase","handleTickRangeOptions","minSign","maxSign","setMin","suggestedMin","setMax","getTickLimit","_computeTickLimit","handleDirectionalChanges","numericGeneratorOptions","fixedStepSize","ticksAsNumbers","_endValue","defaultConfig$1","DEFAULT_MIN","DEFAULT_MAX","getOrCreateStack","neg","stackData","relativePoints","updateMinMax","scale_linear","hasStacks","stackValues","_defaults$1","valueOrDefault$b","generateTicks$1","exp","significand","tickVal","endExp","endSignificand","minNotZero","lastTick","defaultConfig$2","nonNegativeOrDefault","scale_logarithmic","IDMatches","valuesPerStack","valuesForType","minVal","maxVal","tickValues","_getFirstTickValue","_valueOffset","_defaults$2","valueOrDefault$c","valueAtIndexOrDefault$1","resolve$4","defaultConfig$3","animate","showLabelBackdrop","backdropColor","backdropPaddingY","backdropPaddingX","getTickBackdropHeight","measureLabelSize","determineLimits","fitWithPointLabels","textSize","plFont","furthestLimits","furthestAngles","_pointLabelSizes","valueCount","getPointPosition","drawingArea","getIndexAngle","hLimits","vLimits","setReductions","getTextAlignForAngle","adjustPointPositionForLabelHeight","drawPointLabels","pointLabelOpts","tickBackdropHeight","outerDistance","extra","pointLabelPosition","pointLabelFontColor","drawRadiusLine","numberOrZero","scale_radialLinear","setCenterPoint","largestPossibleRadius","radiusReductionLeft","radiusReductionRight","radiusReductionTop","radiusReductionBottom","leftMovement","rightMovement","topMovement","bottomMovement","maxRight","maxLeft","maxTop","maxBottom","scalingFactor","distanceFromCenter","thisAngle","getBasePosition","angleLineOpts","tickFontColor","_defaults$3","deprecated$1","resolve$5","valueOrDefault$d","MIN_INTEGER","MIN_SAFE_INTEGER","MAX_INTEGER","MAX_SAFE_INTEGER","INTERVALS","millisecond","common","steps","second","minute","hour","day","week","quarter","year","UNITS","sorter","arrayUnique","hash","out","getMin","getMax","buildLookupTable","timestamps","distribution","lookup","mid","i0","i1","lo","interpolate$1","skey","tkey","span","toTimestamp","input","adapter","_adapter","parser","determineUnitForAutoTicks","minUnit","capacity","interval","determineUnitForFormatting","determineMajorUnit","generate","timeOpts","unitStepSize","weekday","isoWeekday","computeOffsets","setMajorTicks","majorUnit","ticksFromTimestamps","defaultConfig$4","adapters","displayFormat","displayFormats","scale_time","timestamp","labelsAdded","dataLabels","_table","_timestamps","getLabelCapacity","_unit","_majorUnit","_offsets","tooltipFormat","tickFormatFunction","minorFormat","majorFormat","nestedTickOpts","formatter","getPixelForOffset","_getLabelSize","tickLabelWidth","tickFontSize","getLabelWidth","exampleTime","exampleLabel","_defaults$4","category","radialLinear","FORMATS","_id","valueOf","amount","filler","propagate","mappers","boundary","decodeFill","computeLinearBoundary","scaleBottom","scaleTop","scaleZero","computeCircularBoundary","cx","cy","computeBoundary","resolveTarget","visible","createMapper","isDrawable","drawArea","curve0","curve1","len0","len1","doFill","mapper","p0","p1","d0","d1","loopOffset","plugin_filler","afterDatasetsUpdate","$filler","beforeDatasetsDraw","getRtlHelper$1","noop$1","valueOrDefault$e","getBoxWidth","labelOpts","boxWidth","ci","onLeave","lineDash","Legend","legendHitBoxes","_hoveredItem","doughnutMode","beforeBuildLabels","buildLabels","afterBuildLabels","legendItems","labelFont","hitboxes","lineWidths","totalHeight","vPadding","columnWidths","columnHeights","totalWidth","currentColWidth","currentColHeight","lineDefault","legendHeight","legendWidth","cursor","drawLegendBox","SQRT2","halfFontSize","xLeft","yMiddle","alignmentOffset","dimension","blockSize","itemHeight","realX","_getLegendItemAt","hitBox","lh","hoveredItem","createNewLegendAndAttach","legendOpts","plugin_legend","_element","beforeInit","afterEvent","noop$2","Title","titleX","titleY","fontOpts","createNewTitleBlockAndAttach","titleOpts","titleBlock","_adapters","Animation","animationService","Interaction","scaleService","Ticks","Tooltip","pluginService","PluginBase","canvasHelpers","layoutService","LinearScaleBase","klass","cfg","toLowerCase","factory","baseIsEqual","other","baseAssignValue","keyBy","createAggregator","arrayAggregator","baseAggregator","baseIteratee","setter","initializer","iteratee","accumulator","baseEach","OpMenu","onDropdownToggleClick","toggleOperationMenu","isItemMenuShow"],"mappings":"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","file":"static/js/sysAdmin.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport Logo from '../../components/logo';\nimport { gettext, siteRoot, isPro, otherPermission, canViewSystemInfo, canViewStatistic,\n  canConfigSystem, canManageLibrary, canManageUser, canManageGroup, canViewUserLog,\n  canViewAdminLog, constanceEnabled, multiTenancy, multiInstitution, sysadminExtraEnabled,\n  enableGuestInvitation, enableTermsAndConditions, enableFileScan, enableWorkWeixin, enableDingtalk,\n  enableShareLinkReportAbuse } from '../../utils/constants';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired\n};\n\nclass SidePanel extends React.Component {\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab == tab ? 'active' : '';\n  }\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <div className=\"side-nav\">\n            <div className=\"side-nav-con\">\n              <h3 className=\"sf-heading\">{gettext('System Admin')}</h3>\n              <ul className=\"nav nav-pills flex-column nav-container\">\n                {canViewSystemInfo &&\n                <li className=\"nav-item\">\n                  <Link\n                    className={`nav-link ellipsis ${this.getActiveClass('info')}`}\n                    to={siteRoot + 'sys/info/'}\n                    onClick={() => this.props.tabItemClick('info')}\n                  >\n                    <span className=\"sf2-icon-info\" aria-hidden=\"true\"></span>\n                    <span className=\"nav-text\">{gettext('Info')}</span>\n                  </Link>\n                </li>\n                }\n                {isPro && canViewStatistic &&\n                  <li className=\"nav-item\">\n                    <Link className={`nav-link ellipsis ${this.getActiveClass('statistic')}`}\n                      to={siteRoot + 'sys/statistics/file/'}\n                      onClick={() => this.props.tabItemClick('statistic')}\n                    >\n                      <span className=\"sf2-icon-histogram\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Statistic')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('devices')}`}\n                      to={siteRoot + 'sys/desktop-devices/'}\n                      onClick={() => this.props.tabItemClick('devices')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Devices')}</span>\n                    </Link>\n                  </li>\n                }\n                {constanceEnabled && canConfigSystem &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('web-settings')}`}\n                      to={siteRoot + 'sys/web-settings/'}\n                      onClick={() => this.props.tabItemClick('web-settings')}\n                    >\n                      <span className=\"sf2-icon-cog2\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Settings')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageLibrary &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('libraries')}`}\n                      to={siteRoot + 'sys/all-libraries/'}\n                      onClick={() => this.props.tabItemClick('libraries')}\n                    >\n                      <span className=\"sf2-icon-library\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Libraries')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageUser &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('users')}`}\n                      to={siteRoot + 'sys/users/'}\n                      onClick={() => this.props.tabItemClick('users')}\n                    >\n                      <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Users')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('groups')}`}\n                      to={siteRoot + 'sys/groups/'}\n                      onClick={() => this.props.tabItemClick('groups')}\n                    >\n                      <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Groups')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('departments')}`}\n                      to={siteRoot + 'sys/departments/'}\n                      onClick={() => this.props.tabItemClick('departments')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Departments')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiTenancy && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('organizations')}`}\n                      to={siteRoot + 'sys/organizations/'}\n                      onClick={() => this.props.tabItemClick('organizations')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Organizations')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiInstitution && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('institutions')}`}\n                      to={siteRoot + 'sys/institutions/'}\n                      onClick={() => this.props.tabItemClick('institutions')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Institutions')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('notifications')}`}\n                      to={siteRoot + 'sys/notifications/'}\n                      onClick={() => this.props.tabItemClick('notifications')}\n                    >\n                      <span className=\"sf2-icon-msgs\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Notifications')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('links')}`}\n                      to={siteRoot + 'sys/share-links/'}\n                      onClick={() => this.props.tabItemClick('links')}\n                    >\n                      <span className=\"sf2-icon-link\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Links')}</span>\n                    </Link>\n                  </li>\n                }\n                {sysadminExtraEnabled && canViewUserLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('logs')}`}\n                      to={siteRoot + 'sys/logs/login'}\n                      onClick={() => this.props.tabItemClick('logs')}\n                    >\n                      <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission && enableFileScan &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('file-scan-records')}`}\n                      to={siteRoot + 'sys/file-scan-records/'}\n                      onClick={() => this.props.tabItemClick('file-scan-records')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('File Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('virus-files')}`}\n                      to={siteRoot + 'sys/virus-files/all/'}\n                      onClick={() => this.props.tabItemClick('virus-files')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Virus Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && enableGuestInvitation && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('invitations')}`}\n                      to={siteRoot + 'sys/invitations/'}\n                      onClick={() => this.props.tabItemClick('invitations')}\n                    >\n                      <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Invitations')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableTermsAndConditions &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('termsandconditions')}`}\n                      to={siteRoot + 'sys/terms-and-conditions/'}\n                      onClick={() => this.props.tabItemClick('termsandconditions')}\n                    >\n                      <span className=\"sf2-icon-wiki\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Terms and Conditions')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canViewAdminLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('adminLogs')}`}\n                      to={siteRoot + 'sys/admin-logs/operation'}\n                      onClick={() => this.props.tabItemClick('adminLogs')}\n                    >\n                      <span className=\"sf2-icon-admin-log\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Admin Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableWorkWeixin &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('work-weixin')}`}\n                      to={siteRoot + 'sys/work-weixin/'}\n                      onClick={() => this.props.tabItemClick('work-weixin')}\n                    >\n                      <span className=\"sf3-font-enterprise-wechat sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{'企业微信集成'}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableDingtalk &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('dingtalk')}`}\n                      to={siteRoot + 'sys/dingtalk/'}\n                      onClick={() => this.props.tabItemClick('dingtalk')}\n                    >\n                      <span className=\"sf3-font-dingtalk sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{'钉钉集成'}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableShareLinkReportAbuse &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('abuse-reports')}`}\n                      to={siteRoot + 'sys/abuse-reports/'}\n                      onClick={() => this.props.tabItemClick('abuse-reports')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Abuse Reports')}</span>\n                    </Link>\n                  </li>\n                }\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  render() {\n    return (\n      <div className=\"main-panel\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.object,\n  toggleSidePanel: PropTypes.func\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span \n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title={gettext(\"Side Nav Menu\")}\n            onClick={this.props.toggleSidePanel}\n          ></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          {this.props.search && this.props.search}\n          <Account isAdminPanel={true} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, isPro, isDefaultAdmin } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/system-info.css';\n\nclass Info extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      sysInfo: {}\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysInfo().then((res) => {\n      this.setState({\n        loading: false,\n        sysInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  uploadLicenseFile = (e) => {\n\n    // no file selected\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    seafileAPI.sysAdminUploadLicense(file).then((res) => {\n      let info = this.state.sysInfo;\n      Object.assign(info, res.data, {with_license: true});\n      this.setState({\n        sysInfo: info\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  renderLicenseDescString = (license_mode, license_to, license_expiration) => {\n    if (license_mode == 'life-time') {\n      if (window.app.config.lang == 'zh-cn') {\n        return '永久授权给 ' + license_to + '，技术支持服务至 ' + license_expiration + ' 到期';\n      } else {\n        return gettext('licensed to {placeholder_license_to}, upgrade service expired in {placeholder_license_expiration}')\n          .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n      }\n    } else {\n      return gettext('licensed to {placeholder_license_to}, expires on {placeholder_license_expiration}')\n        .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n    }\n  }\n\n  render() {\n    let { license_mode, license_to, license_expiration, org_count,\n      repos_count, total_files_count, total_storage, total_devices_count,\n      current_connected_devices_count, license_maxusers, multi_tenancy_enabled,\n      active_users_count, users_count, groups_count, with_license } = this.state.sysInfo;\n    let { loading, errorMsg } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container system-admin-info\">\n            <h2 className=\"heading\">{gettext('Info')}</h2>\n            <div className=\"content\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) &&\n              <dl className=\"flex-1 m-0\">\n                <dt className=\"info-item-heading\">{gettext('System Info')}</dt>\n                {isPro ?\n                  <dd className=\"info-item-content\">\n                    {gettext('Professional Edition')}\n                    {with_license &&\n                      ' ' + this.renderLicenseDescString(license_mode, license_to, license_expiration)\n                    }<br/>\n                    {isDefaultAdmin &&\n                      <Fragment>\n                        <Button type=\"button\" className=\"mt-2\" onClick={this.openFileInput}>{gettext('Upload license')}</Button>\n                        <input className=\"d-none\" type=\"file\" onChange={this.uploadLicenseFile} ref={this.fileInput} />\n                      </Fragment>\n                    }\n                  </dd> :\n                  <dd className=\"info-item-content\">\n                    {gettext('Community Edition')}\n                    <a className=\"ml-1\" href=\"https://download.seafile.com/published/seafile-manual/deploy_pro/migrate_from_seafile_community_server.md\" target=\"_blank\">{gettext('Upgrade to Pro Edition')}</a>\n                  </dd>\n                }\n                <dt className=\"info-item-heading\">{gettext('Libraries')} / {gettext('Files')}</dt>\n                <dd className=\"info-item-content\">{repos_count} / {total_files_count}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Storage Used')}</dt>\n                <dd className=\"info-item-content\">{Utils.bytesToSize(total_storage)}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Total Devices')} / {gettext('Current Connected Devices')}</dt>\n                <dd className=\"info-item-content\">{total_devices_count} / {current_connected_devices_count}</dd>\n\n                {isPro ?\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')} / {gettext('Limits')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count}{' / '}{users_count}{' / '}{with_license ? license_maxusers : '--'}</dd>\n                  </Fragment> :\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count} / {users_count}</dd>\n                  </Fragment>\n                }\n\n                <dt className=\"info-item-heading\">{gettext('Groups')}</dt>\n                <dd className=\"info-item-content\">{groups_count}</dd>\n\n                {multi_tenancy_enabled &&\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Organizations')}</dt>\n                    <dd className=\"info-item-content\">{org_count}</dd>\n                  </Fragment>\n                }\n              </dl>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Info;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'fileStatistic', urlPart: 'statistics/file', text: gettext('File')},\n      {name: 'storageStatistic', urlPart: 'statistics/storage', text: gettext('Storage')},\n      {name: 'usersStatistic', urlPart: 'statistics/user', text: gettext('Users')},\n      {name: 'trafficStatistic', urlPart: 'statistics/traffic', text: gettext('Traffic')},\n      {name: 'reportsStatistic', urlPart: 'statistics/reports', text: gettext('Reports')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Calendar from '@seafile/seafile-calendar';\nimport DatePicker from '@seafile/seafile-calendar/lib/Picker';\nimport { translateCalendar } from '../../../utils/date-format-utils';\n\nimport '@seafile/seafile-calendar/assets/index.css';\n\nconst propsTypes = {\n  disabledDate: PropTypes.func.isRequired,\n  value: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n};\n\nconst FORMAT = 'YYYY-MM-DD';\n\nclass Picker extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.defaultCalendarValue = null;\n  }\n\n  componentDidMount() {\n    let lang = window.app.config.lang;\n    this.defaultCalendarValue = moment().locale(lang).clone();\n  }\n\n  render() {\n    const props = this.props;\n    const calendar = (<Calendar\n      defaultValue={this.defaultCalendarValue}\n      disabledDate={props.disabledDate}\n      format={FORMAT}\n      locale={translateCalendar()}\n    />);\n    return (\n      <DatePicker\n        calendar={calendar}\n        value={props.value}\n        onChange={props.onChange}\n      >\n        {\n          ({value}) => {\n            return (\n              <span>\n                <input\n                  placeholder=\"yyyy-mm-dd\"\n                  tabIndex=\"-1\"\n                  readOnly\n                  value={value && value.format(FORMAT) || ''}\n                  className=\"form-control system-statistic-input\"\n                />\n              </span>\n            );\n          }\n        }\n      </DatePicker>\n    );\n  }\n}\n\nPicker.propsTypes = propsTypes;\n\nexport default Picker;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport Picker from './picker';\n\nconst propTypes = {\n  getActiviesFiles: PropTypes.func.isRequired,\n  children: PropTypes.object,\n};\n\nclass StatisticCommonTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      statisticType: 'oneWeek',\n      startValue: null,\n      endValue: null,\n    };\n  }\n\n  componentDidMount() {\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  changeActive = (statisticTypeName) => {\n    let { statisticType } = this.state;\n    if (statisticType === statisticTypeName) {\n      return;\n    }\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime;\n    switch(statisticTypeName) {\n      case 'oneWeek' :\n        startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneMonth' :\n        startTime = moment().subtract(29,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneYear' :\n        startTime = moment().subtract(364,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n    }\n    this.setState({\n      statisticType: statisticTypeName,\n    });\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  disabledStartDate = (startValue) => {\n    if (!startValue) {\n      return false;\n    }\n    let today = moment().format();\n\n    const endValue = this.state.endValue;\n    if (!endValue) {\n      let startTime = moment(startValue).format();\n      return today < startTime;\n    }\n    return endValue.isBefore(startValue) || moment(startValue).format() > today;\n  }\n\n  disabledEndDate = (endValue) => {\n    if (!endValue) {\n      return false;\n    }\n    let today = moment().format();\n    const startValue = this.state.startValue;\n    if (!startValue) {\n      let endTime = moment(endValue).format();\n      return today < endTime;\n    }\n    return endValue.isBefore(startValue) || moment(endValue).format() > today;\n  }\n\n  onChange = (field, value) => {\n    this.setState({\n      [field]: value,\n    });\n  }\n\n  onSubmit = () => {\n    let { startValue, endValue } = this.state;\n    if(!startValue || !endValue) {\n      return;\n    }\n    this.setState({\n      statisticType: 'itemButton',\n    });\n    let startTime = moment(startValue).format('YYYY-MM-DD 00:00:00');\n    let endTime = moment(endValue).format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  render() {\n    let { statisticType, endValue, startValue } = this.state;\n    return(\n      <Fragment>\n        {this.props.children}\n        <div className=\"system-statistic-time-range\">\n          <div className=\"sys-stat-tool\">\n            <div className={`system-statistic-item border-right-0 rounded-left ${statisticType === 'oneWeek' ? 'item-active' : ''}`} onClick={this.changeActive.bind(this, 'oneWeek')}>{gettext('7 Days')}</div>\n            <div className={`system-statistic-item border-right-0 ${statisticType === 'oneMonth' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneMonth')}>{gettext('30 Days')}</div>\n            <div className={`system-statistic-item rounded-right ${statisticType === 'oneYear' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneYear')}>{gettext('1 Year')}</div>\n          </div>\n          <div className=\"system-statistic-input-container\">\n            <Picker\n              disabledDate={this.disabledStartDate}\n              value={startValue}\n              onChange={this.onChange.bind(this, 'startValue')}\n            />\n            <span className=\"system-statistic-connect\">-</span>\n            <Picker\n              disabledDate={this.disabledEndDate}\n              value={endValue}\n              onChange={this.onChange.bind(this, 'endValue')}\n            />\n            <Button className=\"operation-item system-statistic-button\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nStatisticCommonTool.propTypes = propTypes;\n\nexport default StatisticCommonTool;\n","import React from 'react';\nimport { Line } from 'react-chartjs-2';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  labels: PropTypes.array.isRequired,\n  filesData: PropTypes.array.isRequired,\n  suggestedMaxNumbers: PropTypes.number.isRequired,\n  isLegendStatus: PropTypes.bool.isRequired,\n  chartTitle: PropTypes.string.isRequired,\n  isTitleCallback: PropTypes.bool,\n  isTicksCallback: PropTypes.bool,\n};\n\nclass StatisticChart extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      opations: {}\n    };\n  }\n\n  componentDidMount() {\n    let { labels, filesData, isTitleCallback, isTicksCallback, suggestedMaxNumbers, isLegendStatus, chartTitle } = this.props;\n    let _this = this;\n    let data = {\n      labels: labels,\n      datasets: filesData\n    };\n    let options = {\n      title: {\n        display: true,\n        fontSize: 14,\n        text: chartTitle,\n      },\n      elements: {\n        line: {\n          fill: false,\n          tension: 0, // disable bezier curves, i.e, draw straight lines\n          borderWidth: 2\n        }\n      },\n      legend: {\n        display: isLegendStatus,\n        labels: {\n          usePointStyle: true\n        }\n      },\n      tooltips: {\n        callbacks: {\n          label: function(tooltipItem, data) {\n            if (isTitleCallback) {\n              return _this.titleCallback(tooltipItem, data);\n            }\n            return data.datasets[tooltipItem.datasetIndex].label + ': ' + tooltipItem.yLabel;\n          }\n        }\n      },\n      layout: {\n        padding: {\n          right: 100,\n        }\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero: true,\n            suggestedMax: suggestedMaxNumbers,\n            callback: function(value, index, values) {\n              if (isTicksCallback) {\n                return _this.ticksCallback(value, index, values);\n              }\n              return value;\n            }\n          }\n        }],\n        xAxes: [{\n          ticks: {\n            maxTicksLimit: 20\n          }\n        }]\n      }\n    };\n    this.setState({\n      data: data,\n      options: options\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let data = {\n      labels: nextProps.labels,\n      datasets: nextProps.filesData\n    };\n    this.setState({data: data});\n  }\n\n  titleCallback = (tooltipItem, data) => {\n    return data.datasets[tooltipItem.datasetIndex].label + ': ' + Utils.bytesToSize(tooltipItem.yLabel);\n  }\n\n  ticksCallback = (value, index, values) => {\n    return Utils.bytesToSize(value);\n  }\n\n  render() {\n\n    let { data, options } = this.state;\n    return (\n      <Line\n        data={data}\n        options={options}\n      />\n    );\n  }\n}\n\nStatisticChart.propTypes = propTypes;\n\nexport default StatisticChart;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nimport '../../../css/system-stat.css';\n\nclass StatisticFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticFiles(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        added = [],\n        deleted = [],\n        visited = [],\n        modified = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          added.push(item.added);\n          deleted.push(item.deleted);\n          modified.push(item.modified);\n          visited.push(item.visited);\n        });\n        let addedData = {\n          label: gettext('Added'),\n          data: added,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let visitedData = {\n          label: gettext('Visited'),\n          data: visited,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let modifiedData = {\n          label: gettext('Modified'),\n          data: modified,\n          borderColor: '#72c3fc',\n          backgroundColor: '#72c3fc'};\n        let deletedData = {\n          label: gettext('Deleted'),\n          data: deleted,\n          borderColor: '#f75356',\n          backgroundColor: '#f75356'};\n        filesData = [visitedData, addedData, modifiedData, deletedData];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"fileStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={true}\n                chartTitle={gettext('File Operations')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticFile;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticStorage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticStorages(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        totalStorage = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          totalStorage.push(item.total_storage);\n        });\n        let total_storage = {\n          label: gettext('Total Storage'),\n          data: totalStorage,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        filesData = [total_storage];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"storageStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10*1000*1000}\n                isTitleCallback={true}\n                isTicksCallback={true}\n                isLegendStatus={false}\n                chartTitle={gettext('Total Storage')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticStorage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n};\n\nclass TrafficTable extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { type, sortBy, sortOrder } = this.props;\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            <th width=\"16%\">{type == 'user' ? gettext('User') : gettext('Organization')}</th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_upload')}>{gettext('Sync Upload')} {sortBy === 'sync_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_download')}>{gettext('Sync Download')} {sortBy === 'sync_file_download' && sortIcon}</div></th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_upload')}>{gettext('Web Upload')} {sortBy === 'web_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_download')}>{gettext('Web Download')} {sortBy === 'web_file_download' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_upload')}>{gettext('Share link upload')} {sortBy === 'link_file_upload' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_download')}>{gettext('Share link download')} {sortBy === 'link_file_download' && sortIcon}</div></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.props.children}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nTrafficTable.propTypes = propTypes;\n\nexport default TrafficTable;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  userTrafficItem: PropTypes.object.isRequired,\n};\n\nclass TrafficTableBody extends React.Component {\n\n  trafficName = () => {\n    let { userTrafficItem, type } = this.props;\n    switch(type) {\n      case 'user':\n        if (userTrafficItem.name) {\n          return (\n            <a href={siteRoot + 'useradmin/info/' + userTrafficItem.email + '/'}>{userTrafficItem.name}</a>\n          );\n        }\n        return(<span>{'--'}</span>);\n      case 'org':\n        return(<span>{userTrafficItem.org_name}</span>);\n    }\n  }\n\n  render() {\n    let { userTrafficItem } = this.props;\n\n    let syncUploadSize = Utils.bytesToSize(userTrafficItem.sync_file_upload);\n    let syncDownloadSize = Utils.bytesToSize(userTrafficItem.sync_file_download);\n    let webUploadSize = Utils.bytesToSize(userTrafficItem.web_file_upload);\n    let webDownloadSize = Utils.bytesToSize(userTrafficItem.web_file_download);\n    let linkUploadSize = Utils.bytesToSize(userTrafficItem.link_file_upload);\n    let linkDownloadSize = Utils.bytesToSize(userTrafficItem.link_file_download);\n\n    return(\n      <tr>\n        <td>{this.trafficName()}</td>\n        <td>{syncUploadSize}</td>\n        <td>{syncDownloadSize}</td>\n        <td>{webUploadSize}</td>\n        <td>{webDownloadSize}</td>\n        <td>{linkUploadSize}</td>\n        <td>{linkDownloadSize}</td>\n      </tr>\n    );\n  }\n}\n\nTrafficTableBody.propTypes = propTypes;\n\nexport default TrafficTableBody;\n","import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass OrgsTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgTrafficList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  }\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({isLoading: true, errorMessage: ''});\n    seafileAPI.sysAdminListOrgTraffic(month, page, perPage, orderBy).then(res => {\n      let orgTrafficList = res.data.org_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        orgTrafficList: orgTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initPage, this.initMonth));\n  }\n\n  render() {\n    const {\n      isLoading, errorMessage, orgTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'org'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {orgTrafficList.length > 0 && orgTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'org'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgsTraffic;\n","import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass UsersTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userTrafficList: [],\n      hasNextPage: false,\n      perPage: 25,\n      currentPage: 1,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  }\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({\n      isLoading: true,\n      errorMessage: ''\n    });\n    seafileAPI.sysAdminListUserTraffic(month, page, perPage, orderBy).then(res => {\n      let userTrafficList = res.data.user_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        userTrafficList: userTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initMonth, this.initPage));\n  }\n\n  render() {\n    const {\n      isLoading, errorMessage, userTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'user'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {userTrafficList.length > 0 && userTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'user'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default UsersTraffic;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport Loading from '../../../components/loading';\nimport OrgsTraffic from './statistic-traffic-orgs';\nimport UsersTraffic from './statistic-traffic-users';\nimport StatisticChart from './statistic-chart';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      linkData: [],\n      syncData: [],\n      webData: [],\n      labels: [],\n      isLoading: true,\n      tabActive: 'system'\n    };\n  }\n\n  changeTabActive = activeName => {\n    this.setState({tabActive: activeName});\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    seafileAPI.sysAdminStatisticTraffic(startTime, endTime, groupBy).then((res) => {\n      let labels = [];\n      let total_upload = [],\n        total_download = [],\n        link_upload = [],\n        link_download = [],\n        sync_upload = [],\n        sync_download = [],\n        web_upload = [],\n        web_download = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          link_upload.push(item['link-file-upload']);\n          link_download.push(item['link-file-download']);\n          sync_upload.push(item['sync-file-upload']);\n          sync_download.push(item['sync-file-download']);\n          web_upload.push(item['web-file-upload']);\n          web_download.push(item['web-file-download']);\n          total_upload.push(item['link-file-upload'] + item['sync-file-upload'] + item['web-file-upload']);\n          total_download.push(item['link-file-download'] + item['sync-file-download'] + item['web-file-download']);\n        });\n        let linkUpload = {\n          label: gettext('Upload'),\n          data: link_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let linkDownload = {\n          label: gettext('Download'),\n          data: link_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let syncUpload = {\n          label: gettext('Upload'),\n          data: sync_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let syncDownload = {\n          label: gettext('Download'),\n          data: sync_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let webUpload = {\n          label: gettext('Upload'),\n          data: web_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let webDownload = {\n          label: gettext('Download'),\n          data: web_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let totalUpload = {\n          label: gettext('Upload'),\n          data: total_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let totalDownload = {\n          label: gettext('Download'),\n          data: total_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let linkData = [linkUpload, linkDownload];\n        let syncData = [syncUpload, syncDownload];\n        let webData = [webUpload, webDownload];\n        let filesData = [totalUpload, totalDownload];\n        this.setState({\n          linkData: linkData,\n          syncData: syncData,\n          webData: webData,\n          filesData: filesData,\n          labels: labels,\n          isLoading: false\n        });\n      }\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  renderCommonTool = () => {\n    let { tabActive } = this.state;\n    if (tabActive === 'system') {\n      return (\n        <StatisticCommonTool getActiviesFiles={this.getActiviesFiles}>\n          <div className=\"statistic-traffic-tab\">\n            <div className={`statistic-traffic-tab-item ${tabActive === 'system' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'system')}>{gettext('System')}</div>\n            <div className={`statistic-traffic-tab-item ${tabActive === 'user' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'user')}>{gettext('Users')}</div>\n            <div className={`statistic-traffic-tab-item ${tabActive === 'organizations' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'organizations')}>{gettext('Organizations')}</div>\n          </div>\n        </StatisticCommonTool>\n      );\n    }\n    return (\n      <div className=\"statistic-traffic-tab\">\n        <div className={`statistic-traffic-tab-item ${tabActive === 'system' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'system')}>{gettext('System')}</div>\n        <div className={`statistic-traffic-tab-item ${tabActive === 'user' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'user')}>{gettext('Users')}</div>\n        <div className={`statistic-traffic-tab-item ${tabActive === 'organizations' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'organizations')}>{gettext('Organizations')}</div>\n      </div>\n    );\n  }\n\n  render() {\n    let { labels, filesData, linkData, syncData, webData, isLoading, tabActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"trafficStatistic\" />\n          <div className=\"cur-view-content\">\n            {this.renderCommonTool()}\n            {isLoading && <Loading />}\n            {!isLoading && tabActive === 'system' &&\n              <div className=\"statistic-traffic-chart-container\">\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={filesData}\n                      chartTitle={gettext('Total Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={webData}\n                      chartTitle={gettext('Web Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={linkData}\n                      chartTitle={gettext('Share Link Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={syncData}\n                      chartTitle={gettext('Sync Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n              </div>\n            }\n            {!isLoading && tabActive === 'user' &&\n              <UsersTraffic />\n            }\n            {!isLoading && tabActive === 'organizations' &&\n              <OrgsTraffic />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticTraffic;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticUsers extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true,\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticActiveUsers(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        count = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          count.push(item.count);\n        });\n        let userCount = {\n          label: gettext('Active Users'),\n          data: count,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        filesData = [userCount];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"usersStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={false}\n                chartTitle={gettext('Active Users')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticUsers;\n","import React, { Fragment } from 'react';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport moment from 'moment';\nimport StatisticNav from './statistic-nav';\nimport { Button, Input } from 'reactstrap';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nclass StatisticReports extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      month: moment().format('YYYYMM'),\n      errorMessage: ''\n    };\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  onGenerateReports = (type) => {\n    let url = siteRoot + 'api/v2.1/admin/statistics/';\n    let { month } = this.state;\n    if (!month) {\n      let errorMessage = gettext('It is required.');\n      this.setState({\n        errorMessage: errorMessage\n      });\n      return;\n    }\n    if (type === 'month') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n    }\n    switch(type) {\n      case 'month':\n        url += 'system-user-traffic/excel/?month=' + month;\n        break;\n      case 'storage':\n        url += 'system-user-storage/excel/?';\n        break;\n    }\n    this.setState({\n      errorMessage: ''\n    });\n    window.location.href = url;\n  }\n\n  render() {\n\n    let { errorMessage } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"reportsStatistic\" />\n          <div className=\"cur-view-content\">\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('Monthly User Traffic')}</div>\n              <div className=\"d-flex align-items-center mt-4\">\n                <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n                <Input className=\"statistic-reports-input\" defaultValue={moment().format('YYYYMM')} onChange={this.handleChange} />\n                <Button className=\"statistic-reports-submit operation-item\" onClick={this.onGenerateReports.bind(this, 'month')}>{gettext('Create Report')}</Button>\n              </div>\n              {errorMessage && <div className=\"error\">{errorMessage}</div>}\n            </div>\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('User Storage')}</div>\n              <Button className=\"mt-4 operation-item\" onClick={this.onGenerateReports.bind(this, 'storage')}>{gettext('Create Report')}</Button>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticReports;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'desktop', urlPart:'desktop-devices', text: gettext('Desktop')},\n      {name: 'mobile', urlPart:'mobile-devices', text: gettext('Mobile')}\n    ];\n    if (isPro) {\n      this.navItems.push({name: 'errors', urlPart:'device-errors', text: gettext('Errors')});\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUnlinkDevice from '../../../components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No connected devices')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"19%\">{gettext('User')}</th>\n                <th width=\"19%\">{gettext('Platform')}{' / '}{gettext('Version')}</th>\n                <th width=\"19%\">{gettext('Device Name')}</th>\n                <th width=\"19%\">{gettext('IP')}</th>\n                <th width=\"19%\">{gettext('Last Access')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDevicesList}\n            gotoNextPage={this.getNextPageDevicesList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      unlinked: false,\n      isOpIconShown: false,\n      isUnlinkDeviceDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  handleUnlink = (e) => {\n    e.preventDefault();\n    if (this.props.item.is_desktop_client) {\n      this.toggleUnlinkDeviceDialog();\n    } else {\n      this.unlinkDevice(true);\n    }\n  }\n\n  toggleUnlinkDeviceDialog = () => {\n    this.setState({isUnlinkDeviceDialogOpen: !this.state.isUnlinkDeviceDialogOpen});\n  }\n\n  unlinkDevice = (deleteFiles) => {\n    const { platform, device_id, user } = this.props.item;\n    seafileAPI.sysAdminUnlinkDevice(platform, device_id, user, deleteFiles).then((res) => {\n      this.setState({unlinked: true});\n      let message = gettext('Successfully unlinked the device.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { unlinked, isUnlinkDeviceDialogOpen, isOpIconShown } = this.state;\n\n    if (unlinked) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td>{item.user_name}</td>\n          <td>{item.platform}{' / '}{item.client_version}</td>\n          <td>{item.device_name}</td>\n          <td>{item.last_login_ip}</td>\n          <td>\n            <span title={moment(item.last_accessed).format('llll')}>{moment(item.last_accessed).fromNow()}</span>\n          </td>\n          <td>\n            <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unlink')} onClick={this.handleUnlink}></a>\n          </td>\n        </tr>\n        {isUnlinkDeviceDialogOpen &&\n          <SysAdminUnlinkDevice\n            unlinkDevice={this.unlinkDevice}\n            toggleDialog={this.toggleUnlinkDeviceDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass DevicesByPlatform extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesData: {},\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDevicesListByPage(this.state.currentPage);\n    });\n  }\n\n  getDevicesListByPage = (page) => {\n    let platform = this.props.devicesPlatform;\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDevices(platform, page, per_page).then((res) => {\n      this.setState({\n        devicesData: res.data.devices,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDevicesListByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        <Content\n          loading={this.state.loading}\n          errorMsg={this.state.errorMsg}\n          items={this.state.devicesData}\n          getDevicesListByPage={this.getDevicesListByPage}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n          pageInfo={this.state.pageInfo}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DevicesByPlatform;\n","import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass DesktopDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"desktop\" />\n            <DevicesByPlatform\n              devicesPlatform={'desktop'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DesktopDevices;\n","import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass MobileDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"mobile\" />\n            <DevicesByPlatform\n              devicesPlatform={'mobile'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default MobileDevices;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot } from '../../utils/constants';\n\nconst propTypes = {\n  email: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\n\nclass UserLink extends Component {\n\n  render() {\n    return <Link to={`${siteRoot}sys/users/${encodeURIComponent(this.props.email)}/`}>{this.props.name}</Link>;\n  }\n}\n\nUserLink.propTypes = propTypes;\n\nexport default UserLink;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { Link } from '@gatsbyjs/reach-router';\nimport DevicesNav from './devices-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No sync errors')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"16%\">{gettext('User')}</th>\n                <th width=\"20%\">{gettext('Device')}{' / '}{gettext('Version')}</th>\n                <th width=\"16%\">{gettext('IP')}</th>\n                <th width=\"16%\">{gettext('Library')}</th>\n                <th width=\"16%\">{gettext('Error')}</th>\n                <th width=\"16%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDeviceErrorsList}\n            gotoNextPage={this.getNextPageDeviceErrorsList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.device_name}{' / '}{item.client_version}</td>\n        <td>{item.device_ip}</td>\n        <td><Link to={`${siteRoot}sysadmin/#libs/${item.repo_id}`}>{item.repo_name}</Link></td>\n        <td>{item.error_msg}</td>\n        <td>\n          <span className=\"item-meta-info\" title={moment(item.last_accessed).format('llll')}>{moment(item.error_time).fromNow()}</span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DeviceErrors extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesErrors: [],\n      isCleanBtnShown: false,\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDeviceErrorsListByPage(this.state.currentPage);\n    });\n  }\n\n  getDeviceErrorsListByPage = (page) => {\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDeviceErrors(page, per_page).then((res) => {\n      this.setState({\n        loading: false,\n        devicesErrors: res.data.device_errors,\n        pageInfo: res.data.page_info,\n        isCleanBtnShown: res.data.length > 0\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clean = () => {\n    seafileAPI.sysAdminClearDeviceErrors().then((res) => {\n      this.setState({\n        devicesErrors: [],\n        isCleanBtnShown: false\n      });\n      let message = gettext('Successfully cleaned all errors.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDeviceErrorsListByPage(1);\n    });\n  }\n  render() {\n    return (\n      <Fragment>\n        {this.state.isCleanBtnShown ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.clean}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : (\n          <MainPanelTopbar {...this.props} />\n        )}\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"errors\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.devicesErrors}\n                getDeviceErrorsListByPage={this.getDeviceErrorsListByPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                pageInfo={this.state.pageInfo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DeviceErrors;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateQuota: PropTypes.func.isRequired\n};\n\nclass SetQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleQuotaChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      quota: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateQuota(this.state.quota.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { quota, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={quota}\n                  onKeyPress={this.handleKeyPress}\n                  onChange={this.handleQuotaChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>MB</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetQuotaDialog.propTypes = propTypes;\n\nexport default SetQuotaDialog;\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  importUserInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminImportUserDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importUserInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import users from a .xlsx file')}</ModalHeader>\n        <ModalBody>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}useradmin/batchadduser/example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminImportUserDialog.propTypes = propTypes;\n\nexport default SysAdminImportUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  roleOptions: PropTypes.array.isRequired,\n  currentRole: PropTypes.string.isRequired,\n  onRoleChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserRoleEditor extends React.Component {\n\n  translateRoles = (role) => {\n    switch (role) {\n      case 'default':\n        return gettext('Default');\n      case 'guest':\n        return gettext('Guest');\n      default:\n        return role;\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.roleOptions}\n        currentOption={this.props.currentRole}\n        onOptionChanged={this.props.onRoleChanged}\n        translateOption={this.translateRoles}\n      />\n    );\n  }\n}\n\nSysAdminUserRoleEditor.propTypes = propTypes;\n\nexport default SysAdminUserRoleEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass SysAdminAddUserDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isPasswordVisible: false,\n      password: '',\n      passwordAgain: '',\n      email: '',\n      name: '',\n      role: 'default',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (email.trim() &&\n      password.trim() &&\n      passwordAgain.trim()) {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({isPasswordVisible: !this.state.isPasswordVisible});\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  }\n\n  generatePassword = () => {\n    let val = Utils.generatePassword(8);\n    this.setState({\n      password: val,\n      passwordAgain: val\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    });\n  }\n\n  updateRole = (role) => {\n    this.setState({\n      role: role\n    });\n  }\n\n  handleSubmit = () => {\n    const { email, password, passwordAgain, name, role } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    let data = {\n      email: email.trim(),\n      name: name.trim(),\n      password: password.trim()\n    };\n    if (this.props.showRole) {\n      data.role = role;\n    }\n    this.props.addUser(data);\n    this.toggle();\n  }\n\n  render() {\n    const { dialogTitle, showRole } = this.props;\n    const {\n      errorMsg, isPasswordVisible,\n      email, name, role, password, passwordAgain,\n      isSubmitBtnActive\n    } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{dialogTitle || gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Email')}</Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Name(optional)')}</Label>\n              <Input type=\"text\" value={name} onChange={this.inputName} />\n            </FormGroup>\n            {showRole &&\n            <FormGroup>\n              <Label>\n                {gettext('Role')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('You can also add a user as a guest, who will not be allowed to create libraries and groups.')}></span>\n              </Label>\n              <SysAdminUserRoleEditor\n                isTextMode={false}\n                isEditIconShow={false}\n                currentRole={role}\n                roleOptions={this.props.availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            </FormGroup>\n            }\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <InputGroup>\n                <Input autoComplete=\"new-password\" type={isPasswordVisible ? 'text' : 'password'} value={password || ''} onChange={this.inputPassword} />\n                <InputGroupAddon addonType=\"append\">\n                  <Button className=\"mt-0\" onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n                  <Button className=\"mt-0\" onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                </InputGroupAddon>\n              </InputGroup>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type={isPasswordVisible ? 'text' : 'password'} value={passwordAgain || ''} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddUserDialog.propTypes = propTypes;\n\nexport default SysAdminAddUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport UserSelect from '../../user-select';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addAdminInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminBatchAddAdminDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: null,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n handleSelectChange = (options) => {\n   this.setState({\n     options: options,\n     isSubmitBtnActive: options.length > 0\n   });\n }\n\n handleSubmit = () => {\n   this.props.addAdminInBatch(this.state.options.map(item => item.email));\n   this.toggle();\n }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Admin')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            isMulti={true}\n            className=\"reviewer-select\"\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminBatchAddAdminDialog.propTypes = propTypes;\n\nexport default SysAdminBatchAddAdminDialog;\n","class SysAdminUser {\n  constructor(object) {\n    this.email = object.email;\n    this.name = object.name;\n    this.contact_email = object.contact_email;\n    this.login_id = object.login_id;\n    this.last_login = object.last_login;\n    this.last_access_time = object.last_access_time;\n    this.create_time = object.create_time;\n    this.is_active = object.is_active;\n    this.is_staff = object.is_staff;\n    this.reference_id = object.reference_id;\n    this.department = object.department;\n    this.quota_total = object.quota_total;\n    this.quota_usage = object.quota_usage;\n    this.role = object.role;\n    this.institution = object.institution;\n    if (object.org_id) {\n      this.org_id = object.org_id;\n    }\n    if (object.org_name) {\n      this.org_name = object.org_name;\n    }\n    this.isSelected = false;\n  }\n}\n\nexport default SysAdminUser;\n","\nclass SysAdminAdminUser {\n  constructor(object) {\n    this.email = object.email;\n    this.name = object.name;\n    this.contact_email = object.contact_email;\n    this.login_id = object.login_id;\n    this.last_login = object.last_login;\n    this.last_access_time = object.last_access_time;\n    this.create_time = object.create_time;\n    this.is_active = object.is_active;\n    this.is_staff = object.is_staff;\n    this.quota_total = object.quota_total;\n    this.quota_usage = object.quota_usage;\n    this.admin_role = object.admin_role;\n    this.isSelected = false;\n  }\n}\n\nexport default SysAdminAdminUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired\n};\n\nclass Search extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      value: e.target.value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    const value = this.state.value.trim();\n    if (!value) {\n      return false;\n    }\n    this.props.submit(value);\n  }\n\n  render() {\n    return (\n      <div className=\"input-icon\">\n        <i className=\"d-flex input-icon-addon fas fa-search\"></i>\n        <input\n          type=\"text\"\n          className=\"form-control search-input h-6 mr-1\"\n          style={{width: '17rem'}}\n          placeholder={this.props.placeholder}\n          value={this.state.value}\n          onChange={this.handleInputChange}\n          onKeyPress={this.handleKeyPress}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = propTypes;\n\nexport default Search;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext, haveLDAP, isDefaultAdmin } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'database', urlPart: 'users', text: gettext('Database')}\n    ];\n    if (haveLDAP) {\n      this.navItems.push(\n        {name: 'ldap', urlPart: 'users/ldap', text: gettext('LDAP')},\n        {name: 'ldap-imported', urlPart: 'users/ldap-imported', text: gettext('LDAP(imported)')}\n      );\n    }\n    if (isDefaultAdmin) {\n      this.navItems.push(\n        {name: 'admin', urlPart: 'users/admins', text: gettext('Admin')}\n      );\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  statusOptions: PropTypes.array.isRequired,\n  currentStatus: PropTypes.string.isRequired,\n  onStatusChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserStatusEditor extends React.Component {\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.statusOptions}\n        currentOption={this.props.currentStatus}\n        onOptionChanged={this.props.onStatusChanged}\n        translateOption={this.translateStatus}\n      />\n    );\n  }\n}\n\nSysAdminUserStatusEditor.propTypes = propTypes;\n\nexport default SysAdminUserStatusEditor;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, username, gettext, multiInstitution, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUserStatusEditor from '../../../components/select-editor/sysadmin-user-status-editor';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\nimport SelectEditor from '../../../components/select-editor/select-editor';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\n\nconst { availableRoles, availableAdminRoles, institutions } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  sortByQuotaUsage = (e) => {\n    e.preventDefault();\n    this.props.sortByQuotaUsage();\n  }\n\n  render() {\n    const {\n      isAdmin, loading, errorMsg, items, isAllUsersSelected,\n      curPerPage, hasNextPage, currentPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n\n\n      let columns = [];\n\n      let sortIcon;\n      if (sortBy == '') {\n        // initial sort icon\n        sortIcon = <span className=\"fas fa-sort\"></span>;\n      } else {\n        sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      }\n      const spaceText = gettext('Space Used');\n      const spaceEl =\n        sortBy != undefined ? // only offer 'sort' for 'DB' & 'LDAPImported' users\n        <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByQuotaUsage}>{spaceText} {sortIcon}</a> :\n          spaceText;\n      const colSpaceText = <Fragment>{spaceEl}{` / ${gettext('Quota')}`}</Fragment>;\n\n      const colNameText = `${gettext('Name')} / ${gettext('Contact Email')}`;\n      const colCreatedText = `${gettext('Created At')} / ${gettext('Last Login')} / ${gettext('Last Access')}`;\n      if (isPro) {\n        columns.push(\n          {width: '20%', text: colNameText},\n          {width: '15%', text: gettext('Status')},\n          {width: '15%', text: gettext('Role')}\n        );\n      } else {\n        columns.push(\n          {width: '30%', text: colNameText},\n          {width: '20%', text: gettext('Status')}\n        );\n      }\n      if (multiInstitution && !isAdmin) {\n        columns.push(\n          {width: '14%', text: colSpaceText},\n          {width: '14%', text: gettext('Institution')},\n          {width: '14%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      } else {\n        columns.push(\n          {width: '20%', text: colSpaceText},\n          {width: '22%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      }\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"pl-2\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.toggleSelectAllUsers} checked={isAllUsersSelected} />\n                </th>\n                {columns.map((item, index) => {\n                  return <th width={item.width} key={index}>{item.text}</th>;\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  updateUser={this.props.updateUser}\n                  deleteUser={this.props.deleteUser}\n                  updateAdminRole={this.props.updateAdminRole}\n                  revokeAdmin={this.props.revokeAdmin}\n                  onUserSelected={this.props.onUserSelected}\n                  isAdmin={this.props.isAdmin}\n                  isLDAPImported={this.props.isLDAPImported}\n                />);\n              })}\n            </tbody>\n          </table>\n          {(!this.props.isAdmin && !this.props.isSearchResult) &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteUserDialogOpen: false,\n      isResetUserPasswordDialogOpen: false,\n      isRevokeAdminDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleDeleteUserDialog = () => {\n    this.setState({isDeleteUserDialogOpen: !this.state.isDeleteUserDialogOpen});\n  }\n\n  toggleResetUserPasswordDialog = () => {\n    this.setState({isResetUserPasswordDialogOpen: !this.state.isResetUserPasswordDialogOpen});\n  }\n\n  toggleRevokeAdminDialog = () => {\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  }\n\n  onUserSelected = () => {\n    this.props.onUserSelected(this.props.item);\n  }\n\n  updateStatus= (value) => {\n    const isActive = value == 'active';\n    if (isActive) {\n      toaster.notify(gettext('It may take some time, please wait.'));\n    }\n    this.props.updateUser(this.props.item.email, 'is_active', isActive);\n  }\n\n  updateRole = (value) => {\n    this.props.updateUser(this.props.item.email, 'role', value);\n  }\n\n  updateAdminRole = (value) => {\n    this.props.updateAdminRole(this.props.item.email, value);\n  }\n\n  translateAdminRole = (role) => {\n    switch (role) {\n      case 'default_admin':\n        return gettext('Default Admin');\n      case 'system_admin':\n        return gettext('System Admin');\n      case 'daily_admin':\n        return gettext('Daily Admin');\n      case 'audit_admin':\n        return gettext('Audit Admin');\n      default:\n        return role;\n    }\n  }\n\n  updateInstitution = (value) => {\n    this.props.updateUser(this.props.item.email, 'institution', value);\n  }\n\n  translateInstitution = (inst) => {\n    return inst;\n  }\n\n  updateQuota = (value) => {\n    this.props.updateUser(this.props.item.email, 'quota_total', value);\n  }\n\n  deleteUser = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteUser(this.props.item.email);\n  }\n\n  resetPassword = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = () => {\n    const { item } = this.props;\n    this.props.revokeAdmin(item.email, item.name);\n  }\n\n  getMenuOperations = () => {\n    const {\n      isAdmin, isLDAPImported,\n      isSearchResult, item\n    } = this.props;\n    let list = ['Delete'];\n    if (!isLDAPImported ||\n      (isSearchResult && item.source == 'db')) {\n      list.push('Reset Password');\n    }\n    if (isAdmin) {\n      list = ['Revoke Admin'];\n    }\n    return list;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteUserDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetUserPasswordDialog();\n        break;\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const { item, isAdmin } = this.props;\n    const {\n      isOpIconShown,\n      isSetQuotaDialogOpen,\n      isDeleteUserDialogOpen,\n      isResetUserPasswordDialogOpen,\n      isRevokeAdminDialogOpen\n    } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    const resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td className=\"pl-2\">\n            <input type=\"checkbox\" className=\"vam\" onChange={this.onUserSelected} checked={item.isSelected} />\n          </td>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n            {item.contact_email &&\n              <Fragment>\n                <br />\n                {item.contact_email}\n              </Fragment>}\n            {item.org_id &&\n              <Fragment>\n                <br />\n                <Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>({item.org_name})</Link>\n              </Fragment>\n            }\n          </td>\n          <td>\n            <SysAdminUserStatusEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.is_active ? 'active' : 'inactive'}\n              statusOptions={['active', 'inactive']}\n              onStatusChanged={this.updateStatus}\n            />\n          </td>\n          {isPro &&\n          <td>\n            {isAdmin ?\n              <SelectEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                options={availableAdminRoles}\n                currentOption={item.admin_role}\n                onOptionChanged={this.updateAdminRole}\n                translateOption={this.translateAdminRole}\n              /> :\n              <SysAdminUserRoleEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                currentRole={item.role}\n                roleOptions={availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            }\n          </td>\n          }\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n            <span\n              title={gettext('Edit')}\n              className={`fa fa-pencil-alt attr-action-icon ${isOpIconShown ? '' : 'invisible'}`}\n              onClick={this.toggleSetQuotaDialog}>\n            </span>\n          </td>\n          {(multiInstitution && !isAdmin) &&\n            <td>\n              <SelectEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown && institutions.length > 0}\n                options={institutions}\n                currentOption={item.institution}\n                onOptionChanged={this.updateInstitution}\n                translateOption={this.translateInstitution}\n              />\n            </td>\n          }\n          <td>\n            {`${item.create_time ? moment(item.create_time).format('YYYY-MM-DD HH:mm') : '--'} /`}\n            <br />\n            {`${item.last_login ? moment(item.last_login).fromNow() : '--'}`}\n            <br />\n            {`${item.last_access_time ? moment(item.last_access_time).fromNow() : '--'}`}\n          </td>\n          <td>\n            {(item.email != username && isOpIconShown) &&\n            <OpMenu\n              operations={this.getMenuOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleSetQuotaDialog}\n            updateQuota={this.updateQuota}\n          />\n        }\n        {isDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete User')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteUserDialog}\n          />\n        }\n        {isResetUserPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetUserPasswordDialog}\n          />\n        }\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminImportUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-import-user-dialog';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport SysAdminBatchAddAdminDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminUser from '../../../models/sysadmin-user';\nimport SysAdminAdminUser from '../../../models/sysadmin-admin-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UsersNav from './users-nav';\nimport Content from './users-content';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nconst propTypes = {\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool\n};\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isImportUserDialogOpen: false,\n      isAddUserDialogOpen: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false,\n      isBatchAddAdminDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    if (this.props.isAdmin) { // 'Admin' page\n      this.getUserList(); // no pagination\n    } else {\n      let urlParams = (new URL(window.location)).searchParams;\n      const {\n        currentPage, perPage,\n        sortBy = '',\n        sortOrder = 'asc'\n      } = this.state;\n      this.setState({\n        perPage: parseInt(urlParams.get('per_page') || perPage),\n        currentPage: parseInt(urlParams.get('page') || currentPage),\n        sortBy: urlParams.get('order_by') || sortBy,\n        sortOrder: urlParams.get('direction') || sortOrder\n      }, () => {\n        this.getUsersListByPage(this.state.currentPage);\n      });\n    }\n  }\n\n  toggleImportUserDialog = () => {\n    this.setState({isImportUserDialogOpen: !this.state.isImportUserDialogOpen});\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  }\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  }\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  }\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  }\n\n  getUserList = () => {\n  // get admins\n    seafileAPI.sysAdminListAdmins().then(res => {\n      let users = res.data.admin_user_list.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const { isLDAPImported } = this.props;\n    seafileAPI.sysAdminListUsers(page, perPage, isLDAPImported, sortBy, sortOrder).then(res => {\n      let users = res.data.data.map(user => {return new SysAdminUser(user);});\n      this.setState({\n        userList: users,\n        loading: false,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortByQuotaUsage = () => {\n    this.setState({\n      sortBy: 'quota_usage',\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc',\n      currentPage: 1\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getUsersListByPage(currentPage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.map(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  importUserInBatch = (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminImportUserViaFile(file).then((res) => {\n      if (res.data.success.length) {\n        const users = res.data.success.map(item => {\n          if (item.institution == undefined) {\n            item.institution = '';\n          }\n          return new SysAdminUser(item);\n        });\n        this.setState({\n          userList: users.concat(this.state.userList)\n        });\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  addUser = (data) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    const { email, name, role, password } = data;\n    seafileAPI.sysAdminAddUser(email, name, role, password).then((res) => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({\n        userList: userList\n      });\n      toaster.success(res.data.add_user_tip);\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  }\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getOperationsForAll = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n\n    if (isAdmin) {\n      return <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchAddAdminDialog}>{gettext('Add Admin')}</Button>;\n    }\n\n    if (isLDAPImported) {\n      return <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>;\n    }\n\n    // 'database'\n    return (\n      <Fragment>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleImportUserDialog}>{gettext('Import Users')}</Button>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add User')}</Button>\n        <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>\n      </Fragment>\n    );\n  }\n\n  getCurrentNavItem = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n    let item = 'database';\n    if (isAdmin) {\n      item = 'admin';\n    } else if (isLDAPImported) {\n      item = 'ldap-imported';\n    }\n    return item;\n  }\n\n  toggleBatchAddAdminDialog = () => {\n    this.setState({isBatchAddAdminDialogOpen: !this.state.isBatchAddAdminDialogOpen});\n  }\n\n  addAdminInBatch = (emails) => {\n    seafileAPI.sysAdminAddAdminInBatch(emails).then(res => {\n      let users = res.data.success.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users.concat(this.state.userList)\n      });\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    if (this.props.isAdmin) {\n      return null;\n    }\n    // offer 'Search' for 'DB' & 'LDAPImported' users\n    return <Search\n      placeholder={gettext('Search users')}\n      submit={this.searchItems}\n    />;\n  }\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-users/?query=${encodeURIComponent(keyword)}`);\n  }\n\n  render() {\n    const { isAdmin, isLDAPImported } = this.props;\n    const {\n      hasUserSelected,\n      isImportUserDialogOpen,\n      isAddUserDialogOpen,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen,\n      isBatchAddAdminDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          {hasUserSelected ?\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n            : this.getOperationsForAll()\n          }\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem={this.getCurrentNavItem()} />\n            <div className=\"cur-view-content\">\n              <Content\n                isAdmin={isAdmin}\n                isLDAPImported={isLDAPImported}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortByQuotaUsage={this.sortByQuotaUsage}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getUsersListByPage}\n                updateUser={this.updateUser}\n                deleteUser={this.deleteUser}\n                updateAdminRole={this.updateAdminRole}\n                revokeAdmin={this.revokeAdmin}\n                onUserSelected={this.onUserSelected}\n                isAllUsersSelected={this.isAllUsersSelected}\n                toggleSelectAllUsers={this.toggleSelectAllUsers}\n              />\n            </div>\n          </div>\n        </div>\n        {isImportUserDialogOpen &&\n        <SysAdminImportUserDialog\n          toggle={this.toggleImportUserDialog}\n          importUserInBatch={this.importUserInBatch}\n        />\n        }\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            dialogTitle={gettext('Add User')}\n            showRole={isPro}\n            availableRoles={availableRoles}\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {isBatchAddAdminDialogOpen &&\n          <SysAdminBatchAddAdminDialog\n            addAdminInBatch={this.addAdminInBatch}\n            toggle={this.toggleBatchAddAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nUsers.propTypes = propTypes;\n\nexport default Users;\n","import React, { Component, Fragment } from 'react';\nimport Users from './users';\n\nclass AdminUsers extends Component {\n\n  render() {\n    return <Users isAdmin={true} {...this.props} />;\n  }\n}\n\nexport default AdminUsers;\n","import React, { Component, Fragment } from 'react';\nimport Users from './users';\n\nclass LDAPImportedUsers extends Component {\n\n  render() {\n    return <Users isLDAPImported={true} {...this.props} />;\n  }\n}\n\nexport default LDAPImportedUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport UsersNav from './users-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"40%\">{gettext('Email')}</th>\n                <th width=\"30%\">{gettext('Space Used')}{' / '}{gettext('Quota')}</th>\n                <th width=\"30%\">{gettext('Last Login')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { item } = this.props;\n    let email = '<span class=\"op-target\">' + Utils.HTMLescape(item.email) + '</span>';\n    return (\n      <Fragment>\n        <tr>\n          <td><UserLink email={item.email} name={item.email} /></td>\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n          </td>\n          <td>\n            {item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: {},\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUsersListByPage(this.state.currentPage);\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLDAPUsers(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        userList: res.data.ldap_user_list,\n        hasNextPage: res.data.has_next_page,\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem=\"ldap\" />\n            <div className=\"cur-view-content\">\n              <Content\n                resetPerPage={this.resetPerPage}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getUsersListByPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Users;\n","import React, { Component, Fragment } from 'react';\nimport { Button, Form, FormGroup, Input, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport Paginator from '../../../components/paginator';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './users-content';\n\n\nclass SearchUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      pageInfo: {\n        has_next_page: false,\n        current_page: 1,\n      },\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      query: params.get('query') || '',\n      currentPage: parseInt(params.get('page') || currentPage),\n      perPage: parseInt(params.get('per_page') || perPage)\n    }, () => {this.getItems(this.state.currentPage);});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  }\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  }\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  }\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  }\n\n  getItems = (page) => {\n    seafileAPI.sysAdminSearchUsers(this.state.query.trim(), page, this.state.perPage).then(res => {\n      this.setState({\n        userList: res.data.user_list,\n        loading: false,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItems(1);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.map(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  }\n\n  getPreviousPageList = () => {\n    this.getItems(this.state.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.getItems(this.state.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    const {\n      hasUserSelected,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        {hasUserSelected ?\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n          </MainPanelTopbar> :\n          <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Users')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Users')}</h4>\n                <Form>\n                  <FormGroup row>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" value={query} placeholder={gettext('Search users')} onChange={this.handleInputChange} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  isLDAPImported={false}\n                  isAdmin={false}\n                  isSearchResult={true}\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.userList}\n                  updateUser={this.updateUser}\n                  deleteUser={this.deleteUser}\n                  updateAdminRole={this.updateAdminRole}\n                  revokeAdmin={this.revokeAdmin}\n                  onUserSelected={this.onUserSelected}\n                  isAllUsersSelected={this.isAllUsersSelected}\n                  toggleSelectAllUsers={this.toggleSelectAllUsers}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {this.state.pageInfo &&\n        <Paginator\n          gotoPreviousPage={this.getPreviousPageList}\n          gotoNextPage={this.getNextPageList}\n          currentPage={this.state.pageInfo.current_page}\n          hasNextPage={this.state.pageInfo.has_next_page}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchUsers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  uploadOrDownload: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  updateUploadDownloadRateLimit: PropTypes.func.isRequired\n};\n\nclass SysAdminSetUploadDownloadRateLimitDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      rateLimit: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleRateLimitChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      rateLimit: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateUploadDownloadRateLimit(this.props.uploadOrDownload, this.state.rateLimit.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { rateLimit, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{this.props.uploadOrDownload == \"upload\" ? gettext('Set Upload Rate Limit') : gettext('Set Download Rate Limit')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={rateLimit}\n                  onKeyPress={this.handleKeyPress}\n                  onChange={this.handleRateLimitChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>kB/s</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetUploadDownloadRateLimitDialog.propTypes = propTypes;\n\nexport default SysAdminSetUploadDownloadRateLimitDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  dialogTitle: PropTypes.string.isRequired,\n  updateValue: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass UpdateUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const  { dialogTitle, toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{this.props.dialogTitle}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={this.state.value}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUpdateUser.propTypes = propTypes;\n\nexport default UpdateUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: '', text: gettext('Info')},\n      {name: 'owned-repos', urlPart: 'owned-libraries', text: gettext('Owned Libraries')},\n      {name: 'shared-repos', urlPart: 'shared-libraries', text: gettext('Shared Libraries')},\n      {name: 'links', urlPart: 'shared-links', text: gettext('Shared Links')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')}\n    ];\n  }\n\n  render() {\n    const { currentItem, email, userName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/users/`}>{gettext('Users')}</Link> / {userName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/users/${encodeURIComponent(email)}/${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { FormGroup, Label, Input, Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminSetUploadDownloadRateLimitDialog from '../../../components/dialog/sysadmin-dialog/set-upload-download-rate-limit';\nimport SysAdminUpdateUserDialog from '../../../components/dialog/sysadmin-dialog/update-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { twoFactorAuthEnabled } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentKey: '',\n      dialogTitle: '',\n      isSetQuotaDialogOpen: false,\n      isSetUserUploadRateLimitDialogOpen: false,\n      isSetUserDownloadRateLimitDialogOpen: false,\n      isUpdateUserDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleSetUserUploadRateLimitDialog = () => {\n    this.setState({isSetUserUploadRateLimitDialogOpen: !this.state.isSetUserUploadRateLimitDialogOpen});\n  }\n\n  toggleSetUserDownloadRateLimitDialog = () => {\n    this.setState({isSetUserDownloadRateLimitDialogOpen: !this.state.isSetUserDownloadRateLimitDialogOpen});\n  }\n\n  updateQuota = (value) => {\n    this.props.updateUser('quota_total', value);\n  }\n\n  updateUploadDownloadRateLimit = (uploadOrDownload, value) => {\n    if (uploadOrDownload == 'upload'){\n        this.props.updateUser('upload_rate_limit', value);\n    }\n    if (uploadOrDownload == 'download'){\n        this.props.updateUser('download_rate_limit', value);\n    }\n  }\n\n  toggleDialog = (key, dialogTitle) => {\n    this.setState({\n      currentKey: key,\n      dialogTitle: dialogTitle,\n      isUpdateUserDialogOpen: !this.state.isUpdateUserDialogOpen\n    });\n  }\n\n  toggleSetNameDialog = () => {\n    this.toggleDialog('name', gettext('Set Name'));\n  }\n\n  toggleSetUserLoginIDDialog = () => {\n    this.toggleDialog('login_id', gettext('Set Login ID'));\n  }\n\n toggleSetUserComtactEmailDialog = () => {\n   this.toggleDialog('contact_email', gettext('Set Contact Email'));\n }\n\n  toggleSetUserReferenceIDDialog = () => {\n    this.toggleDialog('reference_id', gettext('Set Reference ID'));\n  }\n\n  updateValue = (value) => {\n    this.props.updateUser(this.state.currentKey, value);\n  }\n\n  toggleUpdateUserDialog = () => {\n    this.toggleDialog('', '');\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, userInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const user = this.props.userInfo;\n      const {\n        currentKey, dialogTitle,\n        isSetQuotaDialogOpen, isUpdateUserDialogOpen,\n        isSetUserUploadRateLimitDialogOpen, isSetUserDownloadRateLimitDialogOpen\n      } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Avatar')}</dt>\n            <dd className=\"info-item-content\">\n              <img src={user.avatar_url} alt={user.name} width=\"80\" className=\"rounded\"  />\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Email')}</dt>\n            <dd className=\"info-item-content\">{user.email}</dd>\n\n            {user.org_name &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Organization')}</dt>\n                <dd className=\"info-item-content\">{user.org_name}</dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {user.name || '--'}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Login ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.login_id || '--'}\n              {this.showEditIcon(this.toggleSetUserLoginIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Contact Email')}</dt>\n            <dd className=\"info-item-content\">\n              {user.contact_email || '--'}\n              {this.showEditIcon(this.toggleSetUserComtactEmailDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Reference ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.reference_id|| '--'}\n              {this.showEditIcon(this.toggleSetUserReferenceIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used / Quota')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(user.quota_usage)} / ${user.quota_total > 0 ? Utils.bytesToSize(user.quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n            {isPro &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Upload Rate Limit')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.upload_rate_limit > 0 ? user.upload_rate_limit + ' kB/s' : '--'}\n                  {this.showEditIcon(this.toggleSetUserUploadRateLimitDialog)}\n                </dd>\n                <dt className=\"info-item-heading\">{gettext('Download Rate Limit')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.download_rate_limit > 0 ? user.download_rate_limit + ' kB/s' : '--'}\n                  {this.showEditIcon(this.toggleSetUserDownloadRateLimitDialog)}\n                </dd>\n              </Fragment>\n            }\n            {twoFactorAuthEnabled &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Two-Factor Authentication')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.has_default_device ?\n                    <FormGroup>\n                      <p className=\"mb-1\">{gettext('Status: enabled')}</p>\n                      <Button onClick={this.props.disable2FA}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup> :\n                    <FormGroup>\n                      <Button disabled={true}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup>\n                  }\n                  <FormGroup check>\n                    <Label check>\n                      <Input type=\"checkbox\" checked={user.is_force_2fa} onChange={this.props.toggleForce2fa} />\n                      <span>{gettext('Force Two-Factor Authentication')}</span>\n                    </Label>\n                  </FormGroup>\n                </dd>\n              </Fragment>\n            }\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetQuotaDialog\n            updateQuota={this.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {(isPro && isSetUserUploadRateLimitDialogOpen) &&\n          <SysAdminSetUploadDownloadRateLimitDialog\n            uploadOrDownload=\"upload\"\n            updateUploadDownloadRateLimit={this.updateUploadDownloadRateLimit}\n            toggle={this.toggleSetUserUploadRateLimitDialog}\n          />\n          }\n          {(isPro && isSetUserDownloadRateLimitDialogOpen) &&\n          <SysAdminSetUploadDownloadRateLimitDialog\n            uploadOrDownload=\"download\"\n            updateUploadDownloadRateLimit={this.updateUploadDownloadRateLimit}\n            toggle={this.toggleSetUserDownloadRateLimitDialog}\n          />\n          }\n          {isUpdateUserDialogOpen &&\n          <SysAdminUpdateUserDialog\n            dialogTitle={dialogTitle}\n            value={user[currentKey]}\n            updateValue={this.updateValue}\n            toggleDialog={this.toggleUpdateUserDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass User extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    // avatar size: 160\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email, 160).then((res) => {\n      this.setState({\n        loading: false,\n        userInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateUser = (key, value) => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo[key]= res.data[key];\n      this.setState({\n        userInfo: userInfo\n      });\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  disable2FA = () => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminDeleteTwoFactorAuth(email).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.has_default_device = false;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleForce2fa = (e) => {\n    const email = this.state.userInfo.email;\n    const checked = e.target.checked;\n    seafileAPI.sysAdminSetForceTwoFactorAuth(email, checked).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.is_force_2fa = checked;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { userInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"info\" email={this.props.email} userName={userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                userInfo={this.state.userInfo}\n                updateUser={this.updateUser}\n                disable2FA={this.disable2FA}\n                toggleForce2fa={this.toggleForce2fa}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default User;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Last Update')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteRepo={this.props.deleteRepo}\n                  transferRepo={this.props.transferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.id);\n  }\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  transferRepo = (owner) => {\n    this.props.transferRepo(this.props.item.id, owner.email);\n    this.toggleTransferDialog();\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n    }\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n        <TransferDialog\n          itemName={item.name}\n          submit={this.transferRepo}\n          canTransferToDept={false}\n          toggleDialog={this.toggleTransferDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListReposByOwner(email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repos\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferRepo = (repoID, email) => {\n    seafileAPI.sysAdminTransferRepo(repoID, email).then((res) => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"owned-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n                transferRepo={this.transferRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Repos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Share From')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  }\n\n  getOwnerLink = () => {\n    let link;\n    const { item } = this.props;\n    const index = item.owner_email.indexOf('@seafile_group');\n    if (index == -1) {\n      link = <UserLink email={item.owner_email} name={item.owner_name} />;\n    } else {\n      const groupID = item.owner_email.substring(0, index);\n      link = <Link to={`${siteRoot}sys/departments/${groupID}/`}>{item.owner_name}</Link>;\n    }\n    return link;\n  }\n\n  render() {\n    const { item } = this.props;\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n    return (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{this.getOwnerLink()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modify).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListShareInRepos(email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"shared-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Repos;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport LinkDialog from '../../../components/dialog/share-admin-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No shared links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('Visits')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isLinkDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({isLinkDialogOpen: !this.state.isLinkDialogOpen});\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'View':\n        translateResult = gettext('View');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'View':\n        this.toggleLinkDialog();\n        break;\n      case 'Delete':\n        this.deleteItem();\n        break;\n    }\n  }\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  }\n\n  getIconUrl = () => {\n    const { item } = this.props;\n    let url;\n    if (item.type == 'upload') {\n      url = Utils.getFolderIconUrl();\n    } else { // share link\n      if (item.is_dir) {\n        url = Utils.getFolderIconUrl();\n      } else {\n        url = Utils.getFileIconUrl(item.obj_name);\n      }\n    }\n    return url;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={this.getIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>{item.obj_name == '/' ? item.repo_name : item.obj_name}</td>\n          {item.type == 'upload' ?\n            <Fragment>\n              <td></td>\n              <td>{gettext('Upload')}</td>\n            </Fragment> :\n            <Fragment>\n              <td>{item.is_dir ? null : Utils.bytesToSize(item.size)}</td>\n              <td>{gettext('Download')}</td>\n            </Fragment>\n          }\n          <td>{item.view_cnt}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['View', 'Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isLinkDialogOpen &&\n          <LinkDialog\n            link={item.link}\n            toggleDialog={this.toggleLinkDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Links extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      uploadLinkItems: [],\n      shareLinkItems: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n\n    seafileAPI.sysAdminListShareLinksByUser(email).then(res => {\n      const items = res.data.share_link_list.map(item => {\n        item.type = 'download';\n        return item;\n      });\n      items.sort((a, b) => {\n        return a.is_dir ? -1 : 1;\n      });\n      this.setState({\n        loading: false,\n        shareLinkItems: items\n      });\n    });\n    seafileAPI.sysAdminListUploadLinksByUser(email).then(res => {\n      const items = res.data.upload_link_list.map(item => {\n        item.type = 'upload';\n        return item;\n      });\n      this.setState({\n        loading: false,\n        uploadLinkItems: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    const type = item.type;\n    const token = item.token;\n    if (type == 'download') {\n      seafileAPI.sysAdminDeleteShareLink(token).then(res => {\n        let items = this.state.shareLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          shareLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.sysAdminDeleteUploadLink(token).then(res => {\n        let items = this.state.uploadLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          uploadLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { shareLinkItems, uploadLinkItems } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"links\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={[].concat(uploadLinkItems, shareLinkItems)}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Links;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"35%\">{gettext('Created At')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n\n    const url = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={url}>{item.name}</Link></td>\n          <td>{this.getRoleText()}</td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm')}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListGroupsJoinedByUser(email).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"groups\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\n\nconst propTypes = {\n  createRepo: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass SysAdminCreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      ownerEmail: '',\n      errMessage: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      repoName: value,\n      isSubmitBtnActive: value.trim()\n    });\n  }\n\n  handleSubmit = () => {\n    const { repoName, ownerEmail } = this.state;\n    this.props.createRepo(repoName.trim(), ownerEmail);\n    this.toggle();\n  }\n\n  handleSelectChange = (option) => {\n    // option can be null\n    this.setState({\n      ownerEmail: option ? option.email : ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"userSelect\">\n                {gettext('Owner')}\n                <span className=\"small text-secondary\">{gettext('(If left blank, owner will be admin)')}</span>\n              </Label>\n              <UserSelect\n                id=\"userSelect\"\n                isMulti={false}\n                className=\"reviewer-select\"\n                placeholder={gettext('Select a user')}\n                onSelectChange={this.handleSelectChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminCreateRepoDialog.propTypes = propTypes;\n\nexport default SysAdminCreateRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all-libraries', text: gettext('All')},\n      {name: 'system', urlPart: 'system-library', text: gettext('System')},\n      {name: 'trash', urlPart: 'trash-libraries', text: gettext('Trash')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.user_email);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.user_name}</td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass UserList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <UserItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass SysAdminShareToUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n    this.options = [];\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'user').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({sharedItems: res.data});\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToUser = () => {\n    let users = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        users[i] = this.state.selectedOption[i].email;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'user' , users, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let newItems = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(newItems),\n        selectedOption: null,\n        permission: 'rw',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch(error => {\n      if (error.response) {\n        let message = gettext('Library can not be shared to owner.');\n        let errMessage = [];\n        errMessage.push(message);\n        this.setState({\n          errorMsg: errMessage,\n          selectedOption: null,\n        });\n      }\n    });\n  }\n\n  deleteShareItem = (useremail) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'user', useremail).then(res => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter( item => { return item.user_email !== useremail; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let userEmail = item.user_email;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'user', userEmail, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateSharedItems = (item, permission) => {\n    let username = item.user_name;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemUsername = sharedItem.user_name;\n      if (username === sharedItemUsername) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    let { sharedItems } = this.state;\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('User')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleSelectChange}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToUser}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.email) {\n                  errMessage = item.email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('User')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <UserList\n              items={sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToUser.propTypes = propTypes;\n\nexport default SysAdminShareToUser;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport Select from 'react-select';\nimport { isPro, gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.group_id);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className='name'>{item.group_name}</td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass GroupList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <GroupItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass SysAdminShareToGroup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listSharedGroups();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = [];\n      for (let i = 0 ; i < res.data.length; i++) {\n        let obj = {};\n        obj.value = res.data[i].name;\n        obj.id = res.data[i].id;\n        obj.label = res.data[i].name;\n        this.options.push(obj);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listSharedGroups = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'group').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({\n          sharedItems: res.data\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToGroup = () => {\n    let groups = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        groups[i] = this.state.selectedOption[i].id;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'group', groups, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let items = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(items),\n        selectedOption: null,\n        permission: 'rw',\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteShareItem = (groupID) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'group', groupID).then(() => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter(item => { return item.group_id !== groupID; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let groupID = item.group_id;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'group', groupID, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateSharedItems = (item, permission) => {\n    let groupID = item.group_id;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('Group')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  isMulti\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select groups...')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToGroup}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_name + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('Group')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <GroupList\n              items={this.state.sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToGroup.propTypes = propTypes;\n\nexport default SysAdminShareToGroup;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SysAdminShareToUser from './sysadmin-share-to-user';\nimport SysAdminShareToGroup from './sysadmin-share-to-group';\nimport '../../../css/share-link-dialog.css';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  itemPath: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool\n};\n\nclass SysAdminShareDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: this.getInitialActiveTab(),\n      isRepoOwner: false\n    };\n  }\n\n  getInitialActiveTab = () => {\n    return 'shareToUser';\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderDirContent = () => {\n    let activeTab = this.state.activeTab;\n    const { enableDirPrivateShare, isGroupOwnedRepo } = this.props;\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            {enableDirPrivateShare &&\n              <Fragment>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')}>\n                    {gettext('Share to user')}\n                  </NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')}>\n                    {gettext('Share to group')}\n                  </NavLink>\n                </NavItem>\n              </Fragment>\n            }\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            {enableDirPrivateShare &&\n              <Fragment>\n                <TabPane tabId=\"shareToUser\">\n                  <SysAdminShareToUser itemType={'library'} isGroupOwnedRepo={isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner}/>\n                </TabPane>\n                <TabPane tabId=\"shareToGroup\">\n                  <SysAdminShareToGroup itemType={'library'} isGroupOwnedRepo={isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner}/>\n                </TabPane>\n              </Fragment>\n            }\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '720px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>{gettext('Share')} <span className=\"op-target\" title={this.props.itemName}>{this.props.itemName}</span></ModalHeader>\n          <ModalBody className=\"share-dialog-content\">\n            {this.renderDirContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nSysAdminShareDialog.propTypes = propTypes;\n\nexport default SysAdminShareDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass SysAdminLibHistorySettingDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.sysAdminGetRepoHistorySetting(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.sysAdminUpdateRepoHistorySetting(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminLibHistorySettingDialog.propTypes = propTypes;\n\nexport default SysAdminLibHistorySettingDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport DeleteRepoDialog from '../../../components/dialog/delete-repo-dialog';\nimport SysAdminShareDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-share-dialog';\nimport SysAdminLibHistorySettingDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog';\nimport UserLink from '../user-link';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  sortByFileCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('file_count');\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    this.props.sortItems('size');\n  }\n\n  render() {\n    // offer 'sort' only for 'all repos'\n    const { loading, errorMsg, items, pageInfo, curPerPage, sortBy } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className=\"fas fa-caret-down\"></span>;\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">\n                  {sortBy != undefined ?\n                    <Fragment>\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByFileCount}>{gettext('Files')} {sortBy == 'file_count' ? sortIcon : initialSortIcon}</a>{' / '}\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' ? sortIcon : initialSortIcon}</a>\n                    </Fragment> :\n                    gettext('Files') / gettext('Size')\n                  }\n                </th>\n                <th width=\"32%\">ID</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onTransferRepo={this.props.onTransferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isShareDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false,\n      isHistorySettingDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.sysAdminDeleteRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      this.setState({\n        isDeleteDialogOpen: false,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  onTransferRepo = (owner) => {\n    seafileAPI.sysAdminTransferRepo(this.props.repo.id, owner.email).then((res) => {\n      this.props.onTransferRepo(res.data);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.toggleTransferDialog();\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Share':\n        this.toggleShareDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      case 'History Setting':\n        this.toggleHistorySettingDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShareDialogOpen: !this.state.isShareDialogOpen});\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  toggleHistorySettingDialog = () => {\n    this.setState({isHistorySettingDialogOpen: !this.state.isHistorySettingDialogOpen});\n  }\n\n  renderRepoName = () => {\n    const { repo } = this.props;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  getOperations = () => {\n    const { repo } = this.props;\n    let operations = ['Delete', 'Transfer'];\n    if (!repo.encrypted) {\n      operations.push('Share');\n    }\n    operations.push('History Setting');\n    return operations;\n  }\n\n  render () {\n    const { repo } = this.props;\n    const {\n      isOpIconShown,\n      isShareDialogOpen,\n      isDeleteDialogOpen,\n      isTransferDialogOpen,\n      isHistorySettingDialogOpen\n    } = this.state;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    const index = repo.owner_email.indexOf('@seafile_group');\n    let isGroupOwnedRepo = index != -1;\n    let departmentID;\n    if (isGroupOwnedRepo) {\n      departmentID = repo.owner_email.substring(0, index);\n    }\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{`${repo.file_count} / ${Utils.bytesToSize(repo.size)}`}</td>\n          <td>{repo.id}</td>\n          <td>\n            {isGroupOwnedRepo ?\n              <Link to={`${siteRoot}sys/departments/${departmentID}/`}>{repo.owner_name}</Link> :\n              <UserLink email={repo.owner_email} name={repo.owner_name} />\n            }\n          </td>\n          <td>\n            {(!isGroupOwnedRepo && isOpIconShown) &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isShareDialogOpen &&\n          <ModalPortal>\n            <SysAdminShareDialog\n              itemName={repo.name}\n              itemPath={'/'}\n              repoID={repo.id}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        }\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        }\n        {isTransferDialogOpen &&\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.name}\n              submit={this.onTransferRepo}\n              canTransferToDept={false}\n              toggleDialog={this.toggleTransferDialog}\n            />\n          </ModalPortal>\n        }\n        {isHistorySettingDialogOpen &&\n          <ModalPortal>\n            <SysAdminLibHistorySettingDialog\n              repoID={repo.id}\n              itemName={repo.name}\n              toggleDialog={this.toggleHistorySettingDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport ReposNav from './repos-nav';\nimport Content from './repos';\n\nclass AllRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      sortBy: '',\n      isCreateRepoDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage, sortBy } = this.state;\n    this.setState({\n      sortBy: urlParams.get('order_by') || sortBy,\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateRepoDialog = () => {\n    this.setState({isCreateRepoDialogOpen: !this.state.isCreateRepoDialogOpen});\n  }\n\n  getReposByPage = (page) => {\n    const { perPage, sortBy } = this.state;\n    seafileAPI.sysAdminListAllRepos(page, perPage, sortBy).then((res) => {\n      this.setState({\n        loading: false,\n        repos: res.data.repos,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getReposByPage(currentPage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  }\n\n  createRepo = (repoName, Owner) => {\n    seafileAPI.sysAdminCreateRepo(repoName, Owner).then(res => {\n      this.state.repos.unshift(res.data);\n      this.setState({\n        repos: this.state.repos\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by name or ID')}\n      submit={this.searchRepos}\n    />;\n  }\n\n  searchRepos = (repoNameOrID) => {\n    navigate(`${siteRoot}sys/search-libraries/?name_or_id=${encodeURIComponent(repoNameOrID)}`);\n  }\n\n  render() {\n    let { isCreateRepoDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleCreateRepoDialog}>\n            <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n          </Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                sortBy={this.state.sortBy}\n                sortItems={this.sortItems}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                onDeleteRepo={this.onDeleteRepo}\n                onTransferRepo={this.onTransferRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateRepoDialogOpen &&\n        <SysAdminCreateRepoDialog\n          createRepo={this.createRepo}\n          toggleDialog={this.toggleCreateRepoDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default AllRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ReposNav from './repos-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"33%\">{gettext('Name')}</th>\n                <th width=\"34%\">ID</th>\n                <th width=\"33%\">{gettext('Description')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item}/>);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return table;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const item = this.props.item;\n    return (\n      <tr>\n        <td><Link to={`${siteRoot}sys/libraries/${item.id}/`}>{item.name}</Link></td>\n        <td>{item.id}</td>\n        <td>{item.description}</td>\n      </tr>\n    );\n  }\n}\n\nclass SystemRepo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSystemRepoInfo().then((res) => {\n      let items = [];\n      items.push(res.data);\n      this.setState({\n        items: items,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"system\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SystemRepo;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UserLink from '../user-link';\nimport ReposNav from './repos-nav';\n\nconst { trashReposExpireDays } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No deleted libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <p className=\"mt-4 small text-secondary\">{gettext('Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.').replace('{trashReposExpireDays}', trashReposExpireDays)}</p>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"43%\">{gettext('Name')}</th>\n                <th width=\"27%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Deleted Time')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onRestoreRepo={this.props.onRestoreRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isDeleteRepoDialogOpen: false,\n      isRestoreRepoDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onDeleteRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminDeleteTrashRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRestoreRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminRestoreTrashRepo(repo.id).then((res) => {\n      this.props.onRestoreRepo(repo);\n      let message = gettext('Successfully restored the library.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleDeleteRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen});\n  }\n\n  toggleRestoreRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRestoreRepoDialogOpen: !this.state.isRestoreRepoDialogOpen});\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Restore':\n        translateResult = gettext('Restore');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Restore':\n        this.toggleRestoreRepoDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteRepoDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  render () {\n    const { repo } = this.props;\n    const { isOpIconShown, isDeleteRepoDialogOpen, isRestoreRepoDialogOpen } = this.state;\n    const iconUrl = Utils.getLibIconUrl(repo);\n    const iconTitle = Utils.getLibIconTitle(repo);\n    const repoName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.name) + '</span>';\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{repo.name}</td>\n          <td>\n            {repo.owner.indexOf('@seafile_group') == -1 ?\n              <UserLink email={repo.owner} name={repo.owner_name} /> :\n              repo.group_name}\n          </td>\n          <td>{moment(repo.delete_time).fromNow()}</td>\n          <td>\n            {isOpIconShown && (\n              <OpMenu\n                operations={['Restore', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            )}\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete Library')}\n              message={gettext('Are you sure you want to delete {placeholder} completely?').replace('{placeholder}', repoName)}\n              executeOperation={this.onDeleteRepo}\n              confirmBtnText={gettext('Delete')}\n              toggleDialog={this.toggleDeleteRepoDialog}\n            />\n          </ModalPortal>\n        }\n        {isRestoreRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Restore Library')}\n              message={gettext('Are you sure you want to restore {placeholder}?').replace('{placeholder}', repoName)}\n              executeOperation={this.onRestoreRepo}\n              confirmBtnText={gettext('Restore')}\n              toggleDialog={this.toggleRestoreRepoDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass TrashRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      isCleanTrashDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCleanTrashDialog = () => {\n    this.setState({isCleanTrashDialogOpen: !this.state.isCleanTrashDialogOpen});\n  }\n\n  getReposByPage = (page) => {\n    let perPage = this.state.perPage;\n    seafileAPI.sysAdminListTrashRepos(page, perPage).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onRestoreRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  cleanTrash = () => {\n    seafileAPI.sysAdminCleanTrashRepos().then(res => {\n      this.setState({repos: []});\n      toaster.success(gettext('Successfully cleared trash.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by owner')}\n      submit={this.searchRepos}\n    />;\n  }\n\n  searchRepos = (owner) => {\n    seafileAPI.sysAdminSearchTrashRepos(owner).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: null,\n        errorMsg: '', // necessary!\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    const { isCleanTrashDialogOpen } = this.state;\n\n    // enable 'search': <MainPanelTopbar search={this.getSearch()}>\n    return (\n      <Fragment>\n        {this.state.repos.length ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.toggleCleanTrashDialog}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"trash\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                pageInfo={this.state.pageInfo}\n                onDeleteRepo={this.onDeleteRepo}\n                onRestoreRepo={this.onRestoreRepo}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCleanTrashDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clear Trash')}\n            message={gettext('Are you sure you want to clear trash?')}\n            executeOperation={this.cleanTrash}\n            confirmBtnText={gettext('Clear')}\n            toggleDialog={this.toggleCleanTrashDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TrashRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './repos';\n\n\nclass SearchRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      repos: []\n    };\n  }\n\n  componentDidMount() {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name_or_id') || ''\n    }, this.getRepos);\n  }\n\n  getRepos = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchRepos(name).then((res) => {\n      this.setState({\n        loading: false,\n        repos: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  searchRepos = () => {\n    this.getRepos();\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Libraries')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name or ID.')}</p>\n                <Form>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name or ID')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.searchRepos}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.repos}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchRepos;\n","class Dirent {\n  constructor(obj) {\n    this.name = obj.obj_name;\n    this.mtime = obj.last_update;\n    this.size = obj.file_size;\n    this.is_file = obj.is_file;\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nexport default Dirent;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { isSystemRepo, currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        {isSystemRepo ?\n          <a href={`${siteRoot}sys/system-library/`}>{gettext('System')}</a> :\n          <a href={`${siteRoot}sys/all-libraries/`}>{gettext('All')}</a>\n        }\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport Loading from '../../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  deleteDirent = (e) => {\n    e.preventDefault();\n    this.props.deleteDirent(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown, isDeleteDialogOpen } = this.state;\n    let { dirent, fromSystemRepo } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && fromSystemRepo &&\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.deleteDirent}></a>\n            }\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{dirent.size}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport CreateFolderDialog from '../../../components/dialog/create-folder-dialog';\nimport Dirent from '../../../models/system-admin/dirent';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport DirPathBar from './dir-path-bar';\nimport DirContent from './dir-content';\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      isSystemRepo: false,\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  toggleNewFolderDialog = () => {\n    this.setState({isNewFolderDialogOpen: !this.state.isNewFolderDialogOpen});\n  }\n\n  createNewFolder = (path) => {\n    let folderName = Utils.getFileName(path);\n    seafileAPI.sysAdminCreateSysRepoFolder(this.props.repoID, this.state.path, folderName).then(res => {\n      let new_dirent = new Dirent(res.data);\n      let direntList = this.state.direntList;\n      direntList.unshift(new_dirent);\n      this.setState({\n        direntList: direntList\n      });\n      this.toggleNewFolderDialog();\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoDirents(repoID, path).then(res => {\n      const { is_system_library: isSystemRepo, repo_name: repoName, dirent_list } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        isSystemRepo: isSystemRepo,\n        direntList: direntList,\n        path: path,\n      }, () => {\n        let url = siteRoot + 'sys/libraries/' + repoID + '/' + encodeURIComponent(this.state.repoName) + Utils.encodePath(path);\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminDeleteRepoDirent(this.props.repoID, path).then(res => {\n      toaster.success(gettext('Successfully deleted 1 item.'));\n      let direntList = this.state.direntList.filter(item => {\n        return item.name != dirent.name;\n      });\n      this.setState({\n        direntList: direntList\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminGetRepoFileDownloadURL(this.props.repoID, path).then(res => {\n      location.href = res.data.download_url;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    seafileAPI.sydAdminGetSysRepoItemUploadURL(path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data.upload_link, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'is_file': true,\n          'obj_name': fileObj.name,\n          'file_size': Utils.bytesToSize(fileObj.size),\n          'last_update': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.state.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, isSystemRepo, path,\n      isNewFolderDialogOpen } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        {isSystemRepo ?\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n              <Button className=\"operation-item\" onClick={this.toggleNewFolderDialog}>{gettext('New Folder')}</Button>\n            </Fragment>\n          </MainPanelTopbar> : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                isSystemRepo={isSystemRepo}\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                fromSystemRepo={isSystemRepo}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n        {isNewFolderDialogOpen &&\n          <CreateFolderDialog\n            parentPath={path}\n            checkDuplicatedName={this.checkDuplicatedName}\n            onAddFolder={this.createNewFolder}\n            addFolderCancel={this.toggleNewFolderDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\n\nconst propTypes = {\n  createGroup: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminCreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      ownerEmail: '',\n      errMessage: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({groupName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let groupName = this.state.groupName.trim();\n    this.props.createGroup(groupName, this.state.ownerEmail);\n  }\n\n  handleSelectChange = (option) => {\n    // option can be null\n    this.setState({\n      ownerEmail: option ? option.email : ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"groupName\">{gettext('Name')}</Label>\n              <Input\n                id=\"groupName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.groupName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n              <Label className=\"mt-2\">\n                {gettext('Owner')}\n                <span className=\"small text-secondary\">{gettext('(If left blank, owner will be admin)')}</span>\n              </Label>\n              <UserSelect\n                isMulti={false}\n                className=\"reviewer-select\"\n                placeholder={gettext('Select a user')}\n                onSelectChange={this.handleSelectChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminCreateGroupDialog.propTypes = propTypes;\n\nexport default SysAdminCreateGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\nconst propTypes = {\n  groupName: PropTypes.string.isRequired,\n  transferGroup: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminTransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      submitBtnDisabled: true\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      submitBtnDisabled: option == null\n    });\n  }\n\n  submit = () => {\n    const receiver = this.state.selectedOption.email;\n    this.props.transferGroup(receiver);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const { submitBtnDisabled } = this.state;\n    const groupName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.groupName) +'</span>';\n    const msg = gettext('Transfer Group {placeholder} to').replace('{placeholder}', groupName);\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: msg}}></span>\n        </ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Select a user')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={submitBtnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminTransferGroupDialog.propTypes = propTypes;\n\nexport default SysAdminTransferGroupDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport EmptyTip from '../../../components/empty-tip';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminTransferGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"40%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteGroup={this.props.deleteGroup}\n                  transferGroup={this.props.transferGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTransferDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  deleteGroup = () => {\n    this.props.deleteGroup(this.props.item.id);\n  }\n\n  transferGroup = (receiver) => {\n    this.props.transferGroup(this.props.item.id, receiver);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    let groupName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', groupName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={groupUrl}>{item.name}</Link></td>\n          <td>\n            {item.owner == 'system admin' ?\n              '--' :\n              <UserLink email={item.owner} name={item.owner_name} />\n            }\n          </td>\n          <td>\n            <span title={moment(item.created_at).format('llll')}>{moment(item.created_at).fromNow()}</span>\n          </td>\n          <td>\n            {(isOpIconShown && item.owner != 'system admin') &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n          <SysAdminTransferGroupDialog\n            groupName={item.name}\n            transferGroup={this.transferGroup}\n            toggleDialog={this.toggleTransferDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-group-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './groups-content';\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: {},\n      perPage: 25,\n      isCreateGroupDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getGroupListByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateGroupDialog = () => {\n    this.setState({isCreateGroupDialogOpen: !this.state.isCreateGroupDialogOpen});\n  }\n\n  getGroupListByPage = (page) => {\n    seafileAPI.sysAdminListAllGroups(page, this.state.perPage).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.groups,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getGroupListByPage(1);\n    });\n  }\n\n  createGroup = (groupName, OnwerEmail) => {\n    seafileAPI.sysAdminCreateNewGroup(groupName, OnwerEmail).then(res => {\n      let newGroupList = this.state.groupList;\n      newGroupList.unshift(res.data);\n      this.setState({\n        groupList: newGroupList\n      });\n      this.toggleCreateGroupDialog();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search groups by name')}\n      submit={this.searchGroups}\n    />;\n  }\n\n  searchGroups = (name) => {\n    navigate(`${siteRoot}sys/search-groups/?name=${encodeURIComponent(name)}`);\n  }\n\n  render() {\n    let { isCreateGroupDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Fragment>\n            <Button className=\"operation-item\" onClick={this.toggleCreateGroupDialog}>{gettext('New Group')}</Button>\n            <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/groupadmin/export-excel/`}>{gettext('Export Excel')}</a>\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                pageInfo={this.state.pageInfo}\n                deleteGroup={this.deleteGroup}\n                transferGroup={this.transferGroup}\n                getListByPage={this.getGroupListByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateGroupDialogOpen &&\n          <SysAdminCreateGroupDialog\n            createGroup={this.createGroup}\n            toggleDialog={this.toggleCreateGroupDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './groups-content';\n\nclass SearchGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: null\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name') || ''\n    }, this.getGroups);\n  }\n\n  getGroups = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchGroups(name).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Groups')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getGroups}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.groupList}\n                  deleteGroup={this.deleteGroup}\n                  transferGroup={this.transferGroup}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchGroups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired,\n  groupID: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'repos', urlPart: 'groups/' + this.props.groupID + '/libraries', text: gettext('Libraries')},\n      {name: 'members', urlPart: 'groups/' + this.props.groupID + '/members', text: gettext('Members')}\n    ];\n  }\n\n  render() {\n    const { groupName, currentItem } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/groups/`}>{gettext('Groups')}</Link> / {groupName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Shared By')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  unshareRepo={this.props.unshareRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isUnshareRepoDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleUnshareRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isUnshareRepoDialogOpen: !this.state.isUnshareRepoDialogOpen});\n  }\n\n  unshareRepo = () => {\n    const { item } = this.props;\n    this.props.unshareRepo(item.repo_id, item.name);\n    this.toggleUnshareRepoDialog();\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    repo.id = item.repo_id;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <a href={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</a>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  }\n\n  render() {\n    let { isOpIconShown, isUnshareRepoDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n\n    let repoName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to unshare {placeholder} ?').replace('{placeholder}', repoName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>\n            <UserLink email={item.shared_by} name={item.shared_by_name} />\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unshare')} onClick={this.toggleUnshareRepoDialog}></a>\n          </td>\n        </tr>\n        {isUnshareRepoDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Unshare Library')}\n            message={dialogMsg}\n            executeOperation={this.unshareRepo}\n            confirmBtnText={gettext('Unshare')}\n            toggleDialog={this.toggleUnshareRepoDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass GroupRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListGroupRepos(this.props.groupID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.libraries,\n        groupName: res.data.group_name\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  unshareRepo = (repoID, repoName) => {\n    seafileAPI.sysAdminUnshareRepoFromGroup(this.props.groupID, repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({\n        repoList: newRepoList\n      });\n      const msg = gettext('Successfully unshared library {placeholder}')\n        .replace('{placeholder}', repoName);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n              currentItem=\"repos\"\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                unshareRepo={this.unshareRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default GroupRepos;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addMembers: PropTypes.func.isRequired\n};\n\nclass SysAdminGroupAddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOptions: null,\n      isSubmitBtnDisabled: true\n    };\n  }\n\n  handleSelectChange = (options) => {\n    this.setState({\n      selectedOptions: options,\n      isSubmitBtnDisabled: !options.length\n    });\n  }\n\n  addMembers = () => {\n    let emails = this.state.selectedOptions.map(item => item.email);\n    this.props.addMembers(emails);\n    this.props.toggle();\n  }\n\n  render() {\n    const { isSubmitBtnDisabled } = this.state;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"reviewer-select\"\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.addMembers} disabled={isSubmitBtnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminGroupAddMemberDialog.propTypes = propTypes;\n\nexport default SysAdminGroupAddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  roleOptions: PropTypes.array.isRequired,\n  currentRole: PropTypes.string.isRequired,\n  onRoleChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminGroupRoleEditor extends React.Component {\n\n  translateRoles = (role) => {\n    switch (role) {\n      case 'Member':\n        return gettext('Member');\n      case 'Admin':\n        return gettext('Admin');\n      default:\n        return role;\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.roleOptions}\n        currentOption={this.props.currentRole}\n        onOptionChanged={this.props.onRoleChanged}\n        translateOption={this.translateRoles}\n      />\n    );\n  }\n}\n\nSysAdminGroupRoleEditor.propTypes = propTypes;\n\nexport default SysAdminGroupRoleEditor;","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminGroupAddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog';\nimport SysAdminGroupRoleEditor from '../../../components/select-editor/sysadmin-group-role-editor';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"55%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  removeMember={this.props.removeMember}\n                  updateMemberRole={this.props.updateMemberRole}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  removeMember = () => {\n    const { item } = this.props;\n    this.props.removeMember(item.email, item.name);\n    this.toggleDeleteDialog();\n  }\n\n  updateMemberRole = (role) => {\n    this.props.updateMemberRole(this.props.item.email, role);\n  }\n\n  render() {\n    let { isOpIconShown, isDeleteDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to remove {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={item.avatar_url} alt=\"\" className=\"rounded-circle\" width=\"24\" /></td>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            {item.role == 'Owner' ?\n              gettext('Owner') :\n              <SysAdminGroupRoleEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                roleOptions={['Member', 'Admin']}\n                currentRole={item.role}\n                onRoleChanged={this.updateMemberRole}\n              />\n            }\n          </td>\n          <td>\n            {item.role != 'Owner' &&\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} onClick={this.toggleDeleteDialog}></a>\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Remove Member')}\n            message={dialogMsg}\n            executeOperation={this.removeMember}\n            confirmBtnText={gettext('Remove')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass GroupMembers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      memberList: [],\n      pageInfo: {},\n      currentPage: 1,\n      perPage: 25,\n      isAddMemberDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      perPage: parseInt(urlParams.get('per_page') || perPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListGroupMembers(this.props.groupID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        memberList: res.data.members,\n        groupName: res.data.group_name,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  toggleAddMemgerDialog = () => {\n    this.setState({isAddMemberDialogOpen: !this.state.isAddMemberDialogOpen});\n  }\n\n  addMembers = (emails) => {\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then(res => {\n      let newMemberList = res.data.success;\n      if (newMemberList.length) {\n        this.setState({\n          memberList: newMemberList.concat(this.state.memberList)\n        });\n        newMemberList.map(item => {\n          const msg = gettext('Successfully added {email_placeholder}')\n            .replace('{email_placeholder}', item.email);\n          toaster.success(msg);\n        });\n      }\n      res.data.failed.map(item => {\n        const msg = gettext('Failed to add {email_placeholder}: {error_msg_placeholder}')\n          .replace('{email_placeholder}', item.email)\n          .replace('{error_msg_placeholder}', item.error_msg);\n        toaster.danger(msg, {duration: 3});\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  removeMember = (email, name) => {\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, email).then(res => {\n      let newRepoList = this.state.memberList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n      toaster.success(gettext('Successfully removed {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMemberRole = (email, role) => {\n    let isAdmin = role == 'Admin';\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, email, isAdmin).then(res => {\n      let newRepoList = this.state.memberList.map(item => {\n        if (item.email == email) {\n          item.role = role;\n        }\n        return item;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { isAddMemberDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddMemgerDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              currentItem=\"members\"\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.memberList}\n                removeMember={this.removeMember}\n                updateMemberRole={this.updateMemberRole}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getListByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddMemberDialogOpen &&\n          <SysAdminGroupAddMemberDialog\n            addMembers={this.addMembers}\n            toggle={this.toggleAddMemgerDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default GroupMembers;\n","import React from 'react';\nimport '../../../css/org-department-item.css';\n\nclass Departments extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"h-100 org-departments\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Departments;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  parentGroupID: PropTypes.string,\n  toggle: PropTypes.func.isRequired,\n  onAddNewDepartment: PropTypes.func.isRequired\n};\n\nclass AddDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      let parentGroup = -1;\n      if (this.props.parentGroupID) {\n        parentGroup = this.props.parentGroupID;\n      }\n      seafileAPI.sysAdminAddNewDepartment(parentGroup, this.state.departName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onAddNewDepartment(res.data);\n      }).catch(error => {\n        let errorMsg = gettext(error.response.data.error_msg);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      departName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    let header = this.props.parentGroupID ? gettext('New Sub-department') : gettext('New Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.departName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddDepartDialog.propTypes = propTypes;\n\nexport default AddDepartDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  groupID: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n  name: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired\n};\n\nclass RenameDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departmentName: this.props.name,\n      errMessage: ''\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminRenameDepartment(this.props.groupID, this.state.departmentName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onDepartmentNameChanged(res.data);\n        toaster.success(gettext('Success'));\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departmentName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      departmentName: e.target.value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.select();\n  }\n\n  render() {\n    let header = gettext('Rename Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departmentName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departmentName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.departmentName}\n                onChange={this.handleChange}\n                innerRef={this.newInput}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRenameDepartmentDialog.propTypes = propTypes;\n\nexport default RenameDepartmentDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDeleteDepartment: PropTypes.func.isRequired\n};\n\nclass DeleteDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteDepart = () => {\n    this.props.toggle();\n    const { group } = this.props;\n    seafileAPI.sysAdminDeleteDepartment(group.id).then((res) => {\n      this.props.onDeleteDepartment(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { group } = this.props;\n\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(group.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Department')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: tipMessage}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteDepart}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteDepartmentDialog.propTypes = propTypes;\n\nexport default DeleteDepartmentDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.number.isRequired,\n  onSetQuota: PropTypes.func.isRequired,\n};\n\nclass SetGroupQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      errMessage: '',\n    };\n  }\n\n  setGroupQuota = () => {\n    const numberReg = /^[1-9]\\d*$/im;\n    let quota = this.state.quota;\n    if ((quota.length && numberReg.test(quota)) || quota == -2) {\n      this.setState({ errMessage: '' });\n      let newQuota = this.state.quota == -2 ? this.state.quota : this.state.quota * 1000000;\n      seafileAPI.sysAdminUpdateDepartmentQuota(this.props.groupID, newQuota).then((res) => {\n        this.props.toggle();\n        this.props.onSetQuota(res.data);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      const err = gettext('Quota is invalid.');\n      this.setState({ errMessage: err });\n    }\n  }\n\n  handleChange = (e) => {\n    const quota = e.target.value.trim();\n    this.setState({ quota: quota });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.setGroupQuota();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input\n              onKeyPress={this.handleKeyPress}\n              value={this.state.quota}\n              onChange={this.handleChange}\n              autoFocus={true}\n            />\n            <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n          </InputGroup>\n          <p className=\"tip\">\n            <br/><span>{gettext('An integer that is greater than 0 or equal to -2.')}</span><br/>\n            <span>{gettext('Tip: -2 means no limit.')}</span>\n          </p>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.setGroupQuota}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetGroupQuotaDialog.propTypes = propTypes;\n\nexport default SetGroupQuotaDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils.js';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport ModalPortal from '../../../components/modal-portal';\nimport RenameDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';\nimport DeleteDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog';\n\nconst GroupItemPropTypes = {\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  group: PropTypes.object.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired,\n  onDeleteDepartment: PropTypes.func.isRequired,\n  onSetDepartmentQuota: PropTypes.func.isRequired\n};\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isRenameDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Rename':\n        this.toggleRenameDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleRenameDialog = () => {\n    this.setState({\n      isRenameDialogOpen: !this.state.isRenameDialogOpen\n    });\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({\n      isDeleteDialogOpen: !this.state.isDeleteDialogOpen\n    });\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({\n      isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen\n    });\n  }\n\n  render() {\n    const { group } = this.props;\n    const { highlight, isOpIconShown, isRenameDialogOpen, isDeleteDialogOpen, isSetQuotaDialogOpen } = this.state;\n    const newHref = siteRoot+ 'sys/departments/' + group.id + '/';\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><Link to={newHref}>{group.name}</Link></td>\n          <td>{moment(group.created_at).fromNow()}</td>\n          <td>\n            {Utils.bytesToSize(group.quota)}{' '}\n            <span onClick={this.toggleSetQuotaDialog} title={gettext('Edit')} className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={['Rename', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen && (\n          <ModalPortal>\n            <DeleteDepartmentDialog\n              group={group}\n              onDeleteDepartment={this.props.onDeleteDepartment}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        )}\n        {isSetQuotaDialogOpen && (\n          <ModalPortal>\n            <SetGroupQuotaDialog\n              groupID={group.id}\n              onSetQuota={this.props.onSetDepartmentQuota}\n              toggle={this.toggleSetQuotaDialog}\n            />\n          </ModalPortal>\n        )}\n        {isRenameDialogOpen && (\n          <RenameDepartmentDialog\n            groupID={group.id}\n            name={group.name}\n            toggle={this.toggleRenameDialog}\n            onDepartmentNameChanged={this.props.onDepartmentNameChanged}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default GroupItem;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass DepartmentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: null,\n      groupID: '',\n      isShowAddDepartDialog: false,\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listDepartments();\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  listDepartments = () => {\n    seafileAPI.sysAdminListAllDepartments().then(res => {\n      this.setState({ groups: res.data.data });\n    });\n  }\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog });\n  }\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  }\n\n  onAddNewDepartment = (newDepartment) => {\n    const { groups } = this.state;\n    groups.unshift(newDepartment);\n    this.setState({\n      groups: groups\n    });\n  }\n\n  onDeleteDepartment = (id) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter((item) => item.id != id)\n    });\n  }\n\n  onSetDepartmentQuota = (target) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.map((item) => {\n        if (item.id == target.id) {\n          item.quota = target.quota;\n        }\n        return item;\n      })\n    });\n  }\n\n  render() {\n    const groups = this.state.groups;\n    const topbarChildren = (\n      <Fragment>\n        <button className='btn btn-secondary operation-item' title={gettext('New Department')} onClick={this.toggleAddDepartDialog}>{gettext('New Department')}\n        </button>\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onAddNewDepartment={this.onAddNewDepartment}\n              groupID={this.state.groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          {topbarChildren}\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">{gettext('Departments')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {groups && groups.length > 0 ?\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"40%\">{gettext('Name')}</th>\n                      <th width=\"25%\">{gettext('Created At')}</th>\n                      <th width=\"20%\">{gettext('Quota')}</th>\n                      <th width=\"15%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {groups.map((group, index) => {\n                      return(\n                        <Fragment key={group.id}>\n                          <GroupItem\n                            group={group}\n                            isItemFreezed={this.state.isItemFreezed}\n                            onFreezedItem={this.onFreezedItem}\n                            onUnfreezedItem={this.onUnfreezedItem}\n                            onDepartmentNameChanged={this.onDepartmentNameChanged}\n                            onDeleteDepartment={this.onDeleteDepartment}\n                            onSetDepartmentQuota={this.onSetDepartmentQuota}\n                          />\n                        </Fragment>\n                      );\n                    })}\n                  </tbody>\n                </table>\n                :\n                <p className=\"no-group\">{gettext('No departments')}</p>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DepartmentList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID:  PropTypes.string.isRequired,\n  onAddNewMembers: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const emails = this.state.selectedOption.map(item => item.email);\n    this.refs.orgSelect.clearSelect();\n    this.setState({ errMessage: [] });\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then((res) => {\n      this.setState({ selectedOption: null });\n      if (res.data.failed.length > 0) {\n        this.setState({ errMessage: res.data.failed[0].error_msg });\n      }\n      if (res.data.success.length > 0) {\n        this.props.onAddNewMembers(res.data.success);\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            ref=\"orgSelect\"\n            isMulti={true}\n            className='org-add-member-select'\n          />\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onAddNewRepo: PropTypes.func.isRequired\n};\n\nclass AddRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminAddRepoInDepartment(this.props.groupID, this.state.repoName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onAddNewRepo(res.data);\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.repoName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddRepoDialog.propTypes = propTypes;\n\nexport default AddRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport RenameDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-member-dialog';\nimport AddRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog';\nimport { siteRoot, gettext, lang } from '../../../utils/constants';\n\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentDetailPropTypes = {\n  groupID: PropTypes.string,\n  currentItem: PropTypes.string.isRequired,\n  onAddNewDepartment: PropTypes.func,\n  onAddNewMembers: PropTypes.func,\n  onAddNewRepo: PropTypes.func,\n  children: PropTypes.object\n};\n\nclass Department extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      ancestorGroups: [],\n      isShowAddDepartmentDialog: false,\n      isShowAddMemberDialog: false,\n      isShowRenameDepartmentDialog: false,\n      isShowAddRepoDialog: false\n    };\n\n    this.navItems = [\n      {name: 'subDepartments', urlPart: '/', text: gettext('Sub-departments')},\n      {name: 'members', urlPart: '/members/', text: gettext('Members')},\n      {name: 'repos', urlPart: '/libraries/', text: gettext('Libraries')}\n    ];\n  }\n\n  componentDidMount() {\n    const groupID = this.props.groupID;\n    this.getDepartmentInfo(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.getDepartmentInfo(nextProps.groupID);\n    }\n  }\n\n  getDepartmentInfo = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({\n        ancestorGroups: res.data.ancestor_groups,\n        groupName: res.data.name,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groupName: dept.name\n    });\n  }\n\n  toggleRenameDepartmentDialog = () => {\n    this.setState({ isShowRenameDepartmentDialog: !this.state.isShowRenameDepartmentDialog });\n  }\n\n  toggleAddRepoDialog = () => {\n    this.setState({ isShowAddRepoDialog: !this.state.isShowAddRepoDialog });\n  }\n\n  toggleAddMemberDialog = () => {\n    this.setState({ isShowAddMemberDialog: !this.state.isShowAddMemberDialog });\n  }\n\n  toggleAddDepartmentDialog = () => {\n    this.setState({ isShowAddDepartmentDialog: !this.state.isShowAddDepartmentDialog});\n  }\n\n  render() {\n    const { groupID, currentItem } = this.props;\n    const { groupName } = this.state;\n\n    const topBtn = 'btn btn-secondary operation-item';\n    const topbarChildren = (\n      <Fragment>\n        {groupID &&\n          <Fragment>\n            <button className={topBtn} title={gettext('Rename Department')} onClick={this.toggleRenameDepartmentDialog}>{gettext('Rename Department')}</button>\n            {currentItem == 'subDepartments' && <button className={topBtn} title={gettext('New Sub-department')} onClick={this.toggleAddDepartmentDialog}>{gettext('New Sub-department')}</button>}\n            {currentItem == 'members' && <button className={topBtn} title={gettext('Add Member')} onClick={this.toggleAddMemberDialog}>{gettext('Add Member')}</button>}\n            {currentItem == 'repos' && <button className={topBtn} onClick={this.toggleAddRepoDialog} title={gettext('New Library')}>{gettext('New Library')}</button>}\n          </Fragment>\n        }\n        {this.state.isShowRenameDepartmentDialog && (\n          <ModalPortal>\n            <RenameDepartmentDialog\n              groupID={groupID}\n              name={groupName}\n              toggle={this.toggleRenameDepartmentDialog}\n              onDepartmentNameChanged={this.onDepartmentNameChanged}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddMemberDialog && (\n          <ModalPortal>\n            <AddMemberDialog\n              toggle={this.toggleAddMemberDialog}\n              onAddNewMembers={this.props.onAddNewMembers}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddRepoDialog && (\n          <ModalPortal>\n            <AddRepoDialog\n              toggle={this.toggleAddRepoDialog}\n              onAddNewRepo={this.props.onAddNewRepo}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddDepartmentDialog && (\n          <ModalPortal>\n            <AddDepartmentDialog\n              onAddNewDepartment={this.props.onAddNewDepartment}\n              parentGroupID={groupID}\n              toggle={this.toggleAddDepartmentDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          {topbarChildren}\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">\n                  {groupID ?\n                    <Link to={siteRoot + 'sys/departments/'}>{gettext('Departments')}</Link>\n                    : <span>{gettext('Departments')}</span>\n                  }\n                  {this.state.ancestorGroups.map(ancestor => {\n                    let newHref = siteRoot + 'sys/departments/' + ancestor.id + '/';\n                    return <span key={ancestor.id}>{' / '}<Link to={newHref}>{ancestor.name}</Link></span>;\n                  })}\n                  {groupID && <span>{' / '}{groupName}</span>}\n                </h3>\n              </div>\n            </div>\n\n            <ul className=\"nav border-bottom mx-4\">\n              {this.navItems.map((item, index) => {\n                return (\n                  <li className=\"nav-item mr-2\" key={index}>\n                    <Link to={`${siteRoot}sys/departments/${groupID}${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n                  </li>\n                );\n              })}\n            </ul>\n            {this.props.children}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nDepartment.propTypes = DepartmentDetailPropTypes;\n\nexport default Department;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport Department from './department';\n\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst SubDepartmentsPropTypes = {\n  groupID: PropTypes.string\n};\n\nclass SubDepartments extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      groups: []\n    };\n  }\n\n  componentDidMount() {\n    this.listSubDepartments(this.props.groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listSubDepartments(nextProps.groupID);\n    }\n  }\n\n  listSubDepartments = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({groups: res.data.groups});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onSubDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onAddNewDepartment = (newDepartment) => {\n    const { groups } = this.state;\n    groups.unshift(newDepartment);\n    this.setState({\n      groups: groups\n    });\n  }\n\n  onDeleteDepartment = (id) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter(item => item.id != id)\n    });\n  }\n\n  onSetDepartmentQuota = (target) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.map((item) => {\n        if (item.id == target.id) {\n          item.quota = target.quota;\n        }\n        return item;\n      })\n    });\n  }\n\n  render() {\n    const { groups } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Department\n        groupID={groupID}\n        currentItem=\"subDepartments\"\n        onAddNewDepartment={this.onAddNewDepartment}\n      >\n        <div className=\"cur-view-content\">\n          {groups && groups.length > 0 ?\n            <table>\n              <thead>\n                <tr>\n                  <th width=\"40%\">{gettext('Name')}</th>\n                  <th width=\"25%\">{gettext('Created At')}</th>\n                  <th width=\"20%\">{gettext('Quota')}</th>\n                  <th width=\"15%\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {groups.map((group, index) => {\n                  return(\n                    <GroupItem\n                      key={group.id}\n                      isItemFreezed={this.state.isItemFreezed}\n                      onFreezedItem={this.onFreezedItem}\n                      onUnfreezedItem={this.onUnfreezedItem}\n                      onDepartmentNameChanged={this.onSubDepartmentNameChanged}\n                      group={group}\n                      onDeleteDepartment={this.onDeleteDepartment}\n                      onSetDepartmentQuota={this.onSetDepartmentQuota}\n                    />\n                  );\n                })}\n              </tbody>\n            </table>\n            : <p className=\"no-group\">{gettext('No sub-departments')}</p>\n          }\n        </div>\n      </Department>\n    );\n  }\n}\n\nSubDepartments.propTypes = SubDepartmentsPropTypes;\n\nexport default SubDepartments;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  member: PropTypes.object.isRequired,\n  groupID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass DeleteMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteMember = () => {\n    const userEmail = this.props.member.email;\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, userEmail).then((res) => {\n      if (res.data.success) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.member.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Member')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteMember}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteMemberDialog.propTypes = propTypes;\n\nexport default DeleteMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport RoleEditor from '../../../components/select-editor/role-editor';\nimport UserLink from '../user-link';\n\nconst MemberItemPropTypes = {\n  groupID: PropTypes.string.isRequired,\n  member: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onMemberChanged: PropTypes.func.isRequired,\n  showDeleteMemberDialog: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n};\n\nclass MemberItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showRoleMenu: false,\n    };\n    this.roles = ['Admin', 'Member'];\n  }\n\n  onMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: false });\n  }\n\n  toggleMemberRoleMenu = () => {\n    this.setState({ showRoleMenu: !this.state.showRoleMenu });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? true : false;\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, this.props.member.email, isAdmin).then((res) => {\n      this.props.onMemberChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.setState({\n      highlight: false\n    });\n  }\n\n  render() {\n    const member = this.props.member;\n    const highlight = this.state.highlight;\n    if (member.role === 'Owner') return null;\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={member.avatar_url} alt=\"member-header\" width=\"24\" className=\"avatar\"/></td>\n        <td><UserLink email={member.email} name={member.name} /></td>\n        <td>\n          <RoleEditor\n            isTextMode={true}\n            isEditIconShow={highlight}\n            currentRole={member.role}\n            roles={this.roles}\n            onRoleChanged={this.onChangeUserRole}\n            toggleItemFreezed={this.props.toggleItemFreezed}\n          />\n        </td>\n        {!this.props.isItemFreezed ?\n          <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteMemberDialog.bind(this, member)}>\n            <span className={`sf2-icon-x3 action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n          </td> : <td></td>\n        }\n      </tr>\n    );\n  }\n}\n\nMemberItem.propTypes = MemberItemPropTypes;\n\nexport default MemberItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport ModalPortal from '../../../components/modal-portal';\nimport DeleteMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport MemberItem from './member-item';\nimport Department from './department';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentMembersPropTypes = {\n  groupID: PropTypes.string,\n};\n\nclass DepartmentMembers extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      members: [],\n      membersErrorMsg: '',\n      currentPageInfo: {\n      },\n      currentPage: 1,\n      perPage: 25,\n      deletedMember: {},\n      showDeleteMemberDialog: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      const { groupID } = this.props;\n      this.listMembers(groupID, this.state.currentPage, this.state.perPage);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listMembers(nextProps.groupID, this.state.currentPage, this.state.perPage);\n    }\n  }\n\n  listMembers = (groupID, page, perPage) => {\n    seafileAPI.sysAdminListGroupMembers(groupID, page, perPage).then((res) => {\n      this.setState({\n        members: res.data.members,\n        currentPageInfo: res.data.page_info\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({membersErrorMsg: errMessage});\n    });\n  }\n\n  getPreviousPageList = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page - 1, this.state.perPage);\n  }\n\n  getNextPageList = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page + 1, this.state.perPage);\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.listMembers(this.props.groupID, 1, perPage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteMemberDialog: false,\n    });\n  }\n\n  onMemberChanged = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page, this.state.perPage);\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  }\n\n  showDeleteMemberDialog = (member) => {\n    this.setState({ showDeleteMemberDialog: true, deletedMember: member });\n  }\n\n  onAddNewMembers = (newMembers) => {\n    const { members } = this.state;\n    members.unshift(...newMembers);\n    this.setState({ members });\n  }\n\n  render() {\n    const { members, membersErrorMsg } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Fragment>\n        <Department\n          groupID={groupID}\n          currentItem=\"members\"\n          onAddNewMembers={this.onAddNewMembers}\n        >\n          <div className=\"cur-view-content\">\n            {membersErrorMsg ? <p className=\"error text-center\">{membersErrorMsg}</p> :\n              members.length == 0 ?\n                <p className=\"no-member\">{gettext('No members')}</p> :\n                <Fragment>\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"15%\">{gettext('Role')}</th>\n                        <th width=\"30%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {members.map((member, index) => {\n                        return (\n                          <Fragment key={index}>\n                            <MemberItem\n                              member={member}\n                              showDeleteMemberDialog={this.showDeleteMemberDialog}\n                              isItemFreezed={this.state.isItemFreezed}\n                              onMemberChanged={this.onMemberChanged}\n                              toggleItemFreezed={this.toggleItemFreezed}\n                              groupID={groupID}\n                            />\n                          </Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  {this.state.currentPageInfo &&\n                  <Paginator\n                    gotoPreviousPage={this.getPreviousPageList}\n                    gotoNextPage={this.getNextPageList}\n                    currentPage={this.state.currentPageInfo.current_page}\n                    hasNextPage={this.state.currentPageInfo.has_next_page}\n                    curPerPage={this.state.perPage}\n                    resetPerPage={this.resetPerPage}\n                  />\n                  }\n                </Fragment>\n            }\n          </div>\n        </Department>\n        {this.state.showDeleteMemberDialog && (\n          <ModalPortal>\n            <DeleteMemberDialog\n              toggle={this.toggleCancel}\n              onMemberChanged={this.onMemberChanged}\n              member={this.state.deletedMember}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDepartmentMembers.propTypes = DepartmentMembersPropTypes;\n\nexport default DepartmentMembers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nclass DeleteRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteRepo = () => {\n    seafileAPI.sysAdminDeleteRepoInDepartment(this.props.groupID, this.props.repo.repo_id).then((res) => {\n      if (res.data.success) {\n        this.props.onRepoChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { repo } = this.props;\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(repo.name || repo.repo_name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Library')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteRepo}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onRepoChanged: PropTypes.func.isRequired\n};\n\nDeleteRepoDialog.propTypes = propTypes;\n\nexport default DeleteRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils.js';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nconst RepoItemPropTypes = {\n  repo: PropTypes.object.isRequired,\n  showDeleteRepoDialog: PropTypes.func.isRequired\n};\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  }\n\n  render() {\n    const { repo } = this.props;\n    const repoName = repo.name || repo.repo_name;\n    const highlight = this.state.highlight;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} width=\"24\" alt={gettext('icon')}/></td>\n        { enableSysAdminViewRepo ?\n          <td><a href={`${siteRoot}sys/libraries/${repo.repo_id}/${encodeURIComponent(repoName)}/`}>{repoName}</a></td>\n          :\n          <td>{repoName}</td>\n        }\n        <td>{Utils.bytesToSize(repo.size)}</td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteRepoDialog.bind(this, repo)}>\n          <span className={`sf2-icon-delete action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoItem.propTypes = RepoItemPropTypes;\n\nexport default RepoItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport ModalPortal from '../../../components/modal-portal';\nimport DeleteRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport RepoItem from './repo-item';\nimport Department from './department';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentDetailPropTypes = {\n  groupID: PropTypes.string,\n};\n\nclass DepartmentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      deletedRepo: {},\n      showDeleteRepoDialog: false\n    };\n  }\n\n  componentDidMount() {\n    const { groupID } = this.props;\n    this.listGroupRepo(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listGroupRepo(nextProps.groupID);\n    }\n  }\n\n  listGroupRepo = (groupID) => {\n    seafileAPI.sysAdminListGroupRepos(groupID).then(res => {\n      this.setState({ repos: res.data.libraries });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteRepoDialog: false\n    });\n  }\n\n  onRepoChanged = () => {\n    this.listGroupRepo(this.props.groupID);\n  }\n\n  showDeleteRepoDialog = (repo) => {\n    this.setState({ showDeleteRepoDialog: true, deletedRepo: repo });\n  }\n\n  onAddNewRepo = (newRepo) => {\n    const { repos } = this.state;\n    repos.unshift(newRepo);\n    this.setState({ repos });\n  }\n\n  render() {\n    const { repos } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Fragment>\n        <Department groupID={groupID} currentItem=\"repos\" onAddNewRepo={this.onAddNewRepo}>\n          {repos.length > 0 ?\n            <div className=\"cur-view-content\">\n              <table>\n                <thead>\n                  <tr>\n                    <th width=\"5%\"></th>\n                    <th width=\"50%\">{gettext('Name')}</th>\n                    <th width=\"30%\">{gettext('Size')}</th>\n                    <th width=\"15%\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {repos.map((repo, index) => {\n                    return (\n                      <RepoItem key={index} repo={repo} showDeleteRepoDialog={this.showDeleteRepoDialog} />\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n            : <p className=\"no-libraty\">{gettext('No libraries')}</p>\n          }\n        </Department>\n        {this.state.showDeleteRepoDialog && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              toggle={this.toggleCancel}\n              onRepoChanged={this.onRepoChanged}\n              repo={this.state.deletedRepo}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDepartmentDetail.propTypes = DepartmentDetailPropTypes;\n\nexport default DepartmentDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'shareLinks', urlPart:'share-links', text: gettext('Share Links')},\n      {name: 'uploadLinks', urlPart:'upload-links', text: gettext('Upload Links')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage + 1);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    this.props.sortItems('ctime');\n  }\n\n  sortByCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('view_cnt');\n  }\n\n  render() {\n    const {\n      loading, errorMsg, items,\n      perPage, currentPage, hasNextPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n        </EmptyTip>\n      );\n\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Created At')} {sortBy == 'ctime' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"10%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByCount}>{gettext('Count')} {sortBy == 'view_cnt' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteShareLink={this.props.deleteShareLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteShareLink = () => {\n    this.props.deleteShareLink(this.props.item.token);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td>{item.obj_name}</td>\n        <td>{item.token}</td>\n        <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n        <td>{moment(item.ctime).fromNow()}</td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteShareLink}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass ShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      shareLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      sortBy: '',\n      sortOrder: 'asc'\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage, sortBy, sortOrder } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      sortBy: urlParams.get('order_by') || sortBy,\n      sortOrder: urlParams.get('direction') || sortOrder\n    }, () => {\n      this.getShareLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getShareLinksByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    seafileAPI.sysAdminListShareLinks(page, perPage, sortBy, sortOrder).then((res) => {\n      this.setState({\n        shareLinkList: res.data.share_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getShareLinksByPage(currentPage);\n    });\n  }\n\n  deleteShareLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteShareLink(linkToken).then(res => {\n      let newShareLinkList = this.state.shareLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({shareLinkList: newShareLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getShareLinksByPage(this.initPage));\n  }\n\n  render() {\n    let { shareLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />  \n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"shareLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={shareLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getShareLinksByPage={this.getShareLinksByPage}\n                resetPerPage={this.resetPerPage}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                deleteShareLink={this.deleteShareLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default ShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No upload links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{gettext('Count')}</th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteUploadLink={this.props.deleteUploadLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteUploadLink = () => {\n    this.props.deleteUploadLink(this.props.item.token);\n  }\n\n  renderExpiration = () => {\n    let item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>{item.path}</td>\n          <td>{item.token}</td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.view_cnt}</td>\n          <td>{this.renderExpiration()}</td>\n          <td>\n            <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteUploadLink}></a>\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass UploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      uploadLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUploadLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getUploadLinksByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAllUploadLinks(page, perPage).then((res) => {\n      this.setState({\n        uploadLinkList: res.data.upload_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteUploadLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteUploadLink(linkToken).then(res => {\n      let newUploadLinkList = this.state.uploadLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({uploadLinkList: newUploadLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getUploadLinksByPage(this.initPage));\n  }\n\n  render() {\n    let { uploadLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"uploadLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={uploadLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getUploadLinksByPage={this.getUploadLinksByPage}\n                resetPerPage={this.resetPerPage}\n                deleteUploadLink={this.deleteUploadLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UploadLinks;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addOrg: PropTypes.func.isRequired\n};\n\nclass SysAdminAddOrgDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      passwordAgain: '',\n      errorMsg: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name, email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (name.trim() !='' &&\n      email.trim() != '' &&\n      password.trim() != '' &&\n      passwordAgain.trim() != '') {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    }, this.checkSubmitBtnActive);\n  }\n\n  handleSubmit = () => {\n    let { name, email, password, passwordAgain } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    const data = {\n      orgName: name.trim(),\n      ownerEmail: email.trim(),\n      password: password.trim()\n    };\n    this.props.addOrg(data);\n    this.toggle();\n  }\n\n  render() {\n    const { errorMsg, password, passwordAgain, email, name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Organization')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Name')}</Label>\n              <Input value={name} onChange={this.inputName} />\n            </FormGroup>\n            <FormGroup>\n              <Label>\n                {gettext('Owner')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('Owner can use admin panel in an organization, must be a new account.')}></span>\n              </Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <Input type=\"password\" value={password} onChange={this.inputPassword} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type=\"password\" value={passwordAgain} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddOrgDialog.propTypes = propTypes;\n\nexport default SysAdminAddOrgDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport toaster from '../../../components/toast';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No organizations')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Creator')}</th>\n                <th width=\"20%\">{gettext('Role')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  updateRole={this.props.updateRole}\n                  deleteOrg={this.props.deleteOrg}\n                />);\n              })}\n            </tbody>\n          </table>\n          {this.props.currentPage &&\n          <Paginator\n            currentPage={this.props.currentPage}\n            hasNextPage={this.props.hasNextPage}\n            curPerPage={this.props.curPerPage}\n            resetPerPage={this.props.resetPerPage}\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false,\n      deleteDialogMsg: '',\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen}, () => {\n      if (this.state.isDeleteDialogOpen) {\n        seafileAPI.sysAdminGetOrg(this.props.item.org_id).then((res) => {\n          let orgName = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.org_name) + '</span>';\n          let userCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.users_count) + '</span>';\n          let repoCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.repos_count) + '</span>';\n          let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?')\n            .replace('{placeholder}', orgName) + '<br/>' +\n            gettext('{userCount} user(s) and {repoCount} libraries of this organization will also be deleted.')\n              .replace('{userCount}', userCount)\n              .replace('{repoCount}', repoCount);\n          this.setState({deleteDialogMsg: deleteDialogMsg});\n        }).catch(error => {\n          let errorMsg = Utils.getErrorMsg(error);\n          toaster.danger(errorMsg);\n        });\n      }\n    });\n  }\n\n  updateRole = (role) => {\n    this.props.updateRole(this.props.item.org_id, role);\n  }\n\n  deleteOrg = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteOrg(this.props.item.org_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, deleteDialogMsg } = this.state;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>{item.org_name}</Link></td>\n          <td>\n            <UserLink email={item.creator_email} name={item.creator_name} />\n          </td>\n          <td>\n            <SysAdminUserRoleEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentRole={item.role}\n              roleOptions={availableRoles}\n              onRoleChanged={this.updateRole}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota > 0 ? Utils.bytesToSize(item.quota) : '--'}`}</td>\n          <td>{moment(item.ctime).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Organization')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteOrg}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminAddOrgDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-org-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './orgs-content';\n\n\nclass Orgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgList: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false,\n      isAddOrgDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListOrgs(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organizations,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  }\n\n  toggleAddOrgDialog = () => {\n    this.setState({isAddOrgDialogOpen: !this.state.isAddOrgDialogOpen});\n  }\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addOrg = (data) => {\n    const { orgName, ownerEmail, password } = data;\n    seafileAPI.sysAdminAddOrg(orgName, ownerEmail, password).then(res => {\n      let orgList = this.state.orgList;\n      orgList.unshift(res.data);\n      this.setState({orgList: orgList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search organizations')}\n      submit={this.searchItems}\n    />;\n  }\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-organizations/?query=${encodeURIComponent(keyword)}`);\n  }\n\n  render() {\n    const { isAddOrgDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddOrgDialog}>{gettext('Add Organization')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.orgList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getItemsByPage}\n                updateRole={this.updateRole}\n                deleteOrg={this.deleteOrg}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddOrgDialogOpen &&\n          <SysAdminAddOrgDialog\n            addOrg={this.addOrg}\n            toggleDialog={this.toggleAddOrgDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Orgs;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './orgs-content';\n\n\nclass SearchOrgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      orgList: []\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      query: params.get('query') || ''\n    }, this.getItems);\n  }\n\n  getItems = () => {\n    seafileAPI.sysAdminSearchOrgs(this.state.query.trim()).then(res => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organization_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  }\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Organizations')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" id=\"name\" value={query} onChange={this.handleInputChange} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.orgList}\n                  updateRole={this.updateRole}\n                  deleteOrg={this.deleteOrg}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchOrgs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateName: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgNameDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: this.props.name,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      name: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateName(this.state.name.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Name')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={name}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgNameDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgNameDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateValue: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgMaxUserNumberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { value, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set max number of members')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                className=\"form-control\"\n                value={value}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgMaxUserNumberDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgMaxUserNumberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'users', urlPart: 'users', text: gettext('Members')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')},\n      {name: 'repos', urlPart: 'libraries', text: gettext('Libraries')},\n      //{name: 'traffic', urlPart: 'traffic', text: gettext('traffic')},\n      //{name: 'settings', urlPart: 'settings', text: gettext('Settings')}\n    ];\n  }\n\n  render() {\n    const { currentItem, orgID, orgName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/organizations/`}>{gettext('Organizations')}</Link> / {orgName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/organizations/${orgID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Row, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, serviceURL } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetOrgQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminSetOrgNameDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog';\nimport SysAdminSetOrgMaxUserNumberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetQuotaDialogOpen: false,\n      isSetNameDialogOpen: false,\n      isSetMaxUserNumberDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleSetNameDialog = () => {\n    this.setState({isSetNameDialogOpen: !this.state.isSetNameDialogOpen});\n  }\n\n  toggleSetMaxUserNumberDialog = () => {\n    this.setState({isSetMaxUserNumberDialogOpen: !this.state.isSetMaxUserNumberDialogOpen});\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, orgInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const { org_name, users_count, max_user_number, groups_count, quota, quota_usage, enable_saml_login, url_prefix, metadata_url, domain } = this.props.orgInfo;\n      const { isSetQuotaDialogOpen, isSetNameDialogOpen, isSetMaxUserNumberDialogOpen } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {org_name}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Number of members')}</dt>\n            <dd className=\"info-item-content\">{users_count}</dd>\n\n            {max_user_number &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Max number of members')}</dt>\n                <dd className=\"info-item-content\">\n                  {max_user_number}\n                  {this.showEditIcon(this.toggleSetMaxUserNumberDialog)}\n                </dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Number of groups')}</dt>\n            <dd className=\"info-item-content\">{groups_count}</dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(quota_usage)} / ${quota > 0 ? Utils.bytesToSize(quota) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n            {enable_saml_login && \n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('SAML Config')}</dt>\n                <dd className=\"info-item-content\">\n                  <Row className=\"my-4\">\n                    <Col md=\"3\">{gettext('Custom SAML Login URL')}</Col>\n                    <Col md=\"6\">{`${serviceURL}/org/custom/${url_prefix}`}</Col>\n                  </Row>\n                </dd>\n                <dd className=\"info-item-content\">\n                  <Row className=\"my-4\">\n                    <Col md=\"3\">{gettext('App Federation Metadata URL')}</Col>\n                    <Col md=\"6\">{metadata_url}</Col>\n                  </Row>\n                </dd>\n                <dd className=\"info-item-content\">\n                  <Row className=\"my-4\">\n                    <Col md=\"3\">{gettext('Email Domain')}</Col>\n                    <Col md=\"6\">{domain}</Col>\n                  </Row>\n                </dd>\n              </Fragment>\n            }\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetOrgQuotaDialog\n            updateQuota={this.props.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {isSetNameDialogOpen &&\n          <SysAdminSetOrgNameDialog\n            name={org_name}\n            updateName={this.props.updateName}\n            toggle={this.toggleSetNameDialog}\n          />\n          }\n          {isSetMaxUserNumberDialogOpen &&\n          <SysAdminSetOrgMaxUserNumberDialog\n            value={max_user_number}\n            updateValue={this.props.updateMaxUserNumber}\n            toggle={this.toggleSetMaxUserNumberDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass OrgInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        orgInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateQuota = (quota) => {\n    const data = {quota: quota};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        quota: res.data.quota\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set quota.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateName = (orgName) => {\n    const data = {orgName: orgName};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        org_name: res.data.org_name\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set name.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMaxUserNumber = (newValue) => {\n    const data = {maxUserNumber: newValue};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        max_user_number: res.data.max_user_number\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set max number of members.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { orgInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav currentItem=\"info\" orgID={this.props.orgID} orgName={orgInfo.org_name} />\n            <div className=\"cur-view-content\">\n              <Content\n                orgID={this.props.orgID}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                orgInfo={this.state.orgInfo}\n                updateQuota={this.updateQuota}\n                updateName={this.updateName}\n                updateMaxUserNumber={this.updateMaxUserNumber}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  statusOptions: PropTypes.array.isRequired,\n  currentStatus: PropTypes.string.isRequired,\n  onStatusChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserMembershipEditor extends React.Component {\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'is_org_staff':\n        return gettext('Admin');\n      case 'not_is_org_staff':\n        return gettext('Member');\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.statusOptions}\n        currentOption={this.props.currentStatus}\n        onOptionChanged={this.props.onStatusChanged}\n        translateOption={this.translateStatus}\n      />\n    );\n  }\n}\n\nSysAdminUserMembershipEditor.propTypes = propTypes;\n\nexport default SysAdminUserMembershipEditor;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, username } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport SysAdminUserStatusEditor from '../../../components/select-editor/sysadmin-user-status-editor';\nimport SysAdminUserMembershipEditor from '../../../components/select-editor/sysadmin-user-membership-editor';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"15%\">{gettext('Membership')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"25%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  updateStatus={this.props.updateStatus}\n                  updateMembership={this.props.updateMembership}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isResetPasswordDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetPasswordDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleResetPasswordDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen});\n  }\n\n  updateStatus= (statusValue) => {\n    this.props.updateStatus(this.props.item.email, statusValue);\n  }\n\n  updateMembership= (membershipValue) => {\n    this.props.updateMembership(this.props.item.email, membershipValue);\n  }\n\n  deleteUser = () => {\n    const { item } = this.props;\n    this.props.deleteUser(item.org_id, item.email);\n  }\n\n  resetPassword = () => {\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isResetPasswordDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    let resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            <SysAdminUserStatusEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.active ? 'active' : 'inactive'}\n              statusOptions={['active', 'inactive']}\n              onStatusChanged={this.updateStatus}\n            />\n          </td>\n          <td>\n            <SysAdminUserMembershipEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.is_org_staff ? 'is_org_staff' : 'not_is_org_staff'}\n              statusOptions={['is_org_staff', 'not_is_org_staff']}\n              onStatusChanged={this.updateMembership}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {(isOpIconShown && item.email != username) &&\n            <OpMenu\n              operations={['Delete', 'Reset Password']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Member')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isResetPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetPasswordDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgUsers(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.users\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  addUser = (newUserInfo) => {\n    const { email, name, password } = newUserInfo;\n    seafileAPI.sysAdminAddOrgUser(this.props.orgID, email, name, password).then(res => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (orgID, email) => {\n    seafileAPI.sysAdminDeleteOrgUser(orgID, email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateStatus = (email, statusValue) => {\n    const isActive = statusValue == 'active';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'active', isActive).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.active = res.data.active;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMembership = (email, membershipValue) => {\n    const isOrgStaff = membershipValue == 'is_org_staff';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'is_org_staff', isOrgStaff).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.is_org_staff = res.data.is_org_staff;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddUserDialogOpen, orgName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}> \n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"users\"\n              orgID={this.props.orgID}\n              orgName={orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                updateStatus={this.updateStatus}\n                updateMembership={this.updateMembership}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Creator')}</th>\n                <th width=\"30%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteGroup={this.props.deleteGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteGroup = () => {\n    this.toggleDeleteDialog();\n    this.props.deleteGroup(this.props.item.group_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.group_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.group_id}/libraries/` :\n      `${siteRoot}sys/departments/${item.group_id}/`;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><a href={groupUrl}>{item.group_name}</a></td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      groupList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgGroups(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.group_id != groupID;\n      });\n      this.setState({groupList: newGroupList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"groups\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                deleteGroup={this.deleteGroup}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgGroups;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"35%\">{gettext('ID')}</th>\n                <th width=\"20%\">{gettext('Owner')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteRepo={this.props.deleteRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.repo_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.repo_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{item.repo_name}</td>\n          <td>{item.repo_id}</td>\n          <td>\n            {!item.owner_email ?\n              '--' :\n              item.owner_email.indexOf('@seafile_group') == -1 ?\n              <UserLink email={item.owner_email} name={item.owner_name} /> :\n              item.owner_name\n            }\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgRepos(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"repos\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgRepos;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addInstitution: PropTypes.func.isRequired\n};\n\nclass SysAdminAddInstitutionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addInstitution(this.state.value.trim());\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add institution')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <p>{gettext('Name')}</p>\n            <FormGroup>\n              <Input\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddInstitutionDialog.propTypes = propTypes;\n\nexport default SysAdminAddInstitutionDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport SysAdminAddInstitutionDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No institutions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"75%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteInstitution={this.props.deleteInstitution}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteInstitution = () => {\n    this.props.deleteInstitution(this.props.item.id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const institutionName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', institutionName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/institutions/${item.id}/info/`}>{item.name}</Link></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Institution')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteInstitution}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Institutions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddInstitutionDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionsByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutions(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        institutionList: res.data.institution_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionsByPage(this.initPage));\n  }\n\n  toggleAddInstitutionDialog = () => {\n    this.setState({isAddInstitutionDialogOpen: !this.state.isAddInstitutionDialogOpen});\n  }\n\n  addInstitution = (name) => {\n    seafileAPI.sysAdminAddInstitution(name).then(res => {\n      let institutionList = this.state.institutionList;\n      institutionList.push(res.data);\n      this.setState({institutionList: institutionList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteInstitution = (institutionID) => {\n    seafileAPI.sysAdminDeleteInstitution(institutionID).then(res => {\n      let institutionList = this.state.institutionList.filter(inst => {\n        return inst.id != institutionID;\n      });\n      this.setState({institutionList: institutionList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddInstitutionDialogOpen, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddInstitutionDialog}>{gettext('Add Institution')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Institutions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.institutionList}\n                deleteInstitution={this.deleteInstitution}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionsByPage={this.getInstitutionsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddInstitutionDialogOpen &&\n          <SysAdminAddInstitutionDialog\n            addInstitution={this.addInstitution}\n            toggle={this.toggleAddInstitutionDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Institutions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'members', urlPart: 'members', text: gettext('Members')},\n      {name: 'admins', urlPart: 'admins', text: gettext('Admins')},\n    ];\n  }\n\n  render() {\n    const { currentItem, institutionID, institutionName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/institutions/`}>{gettext('Institutions')}</Link> / {institutionName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/institutions/${institutionID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetInstitutionQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetQuotaDialogOpen: false,\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, institutionInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const { name, user_count, quota_total, quota_used } = institutionInfo;\n      const { isSetQuotaDialogOpen } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {name}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Number of members')}</dt>\n            <dd className=\"info-item-content\">{user_count}</dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(quota_used)} / ${quota_total > 0 ? Utils.bytesToSize(quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetInstitutionQuotaDialog\n            updateQuota={this.props.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass InstitutionInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        institutionInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateQuota = (quota) => {\n    seafileAPI.sysAdminUpdateInstitution(this.props.institutionID, quota).then(res => {\n      const newInstitutionInfo = Object.assign(this.state.institutionInfo, {\n        quota_total: res.data.quota_total,\n      });\n      this.setState({institutionInfo: newInstitutionInfo});\n      toaster.success(gettext('Successfully set quota.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n\n  render() {\n    const { institutionInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav currentItem=\"info\" institutionID={this.props.institutionID} institutionName={institutionInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                institutionInfo={this.state.institutionInfo}\n                updateQuota={this.updateQuota}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: [],\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const emails = this.state.selectedOption.map(item => item.email);\n    this.props.addUser(emails);\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            isMulti={true}\n            className='org-add-member-select'\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  setAdmin={this.props.setAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleSetAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isSetAdminDialogOpen: !this.state.isSetAdminDialogOpen});\n  }\n\n  setAdmin = () => {\n    this.props.setAdmin(this.props.item.email);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Delete':\n        this.props.deleteUser(this.props.item.email);\n        break;\n      case 'Set Admin':\n        this.toggleSetAdminDialog();\n        break;\n    }\n  }\n\n  getOperations = () => {\n    let operations = [];\n    if (!this.props.item.is_institution_admin) {\n      operations.push('Set Admin');\n    }\n    operations.push('Delete');\n    return operations;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Set Admin':\n        translateResult = gettext('Set Admin');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isSetAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const dialogMsg = gettext('Are you sure you want to set {placeholder} as Admin?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={this.getOperations()}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isSetAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Set Admin')}\n            message={dialogMsg}\n            executeOperation={this.setAdmin}\n            toggleDialog={this.toggleSetAdminDialog}\n            confirmBtnText={gettext('Set Admin')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass InstitutionUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddUserDialogOpen: false\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionUsersByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionUsersByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutionUsers(this.props.institutionID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  setAdmin = (email) => {\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, true).then(res => {\n      let userList = this.state.userList.map(user => {\n        if (user.email == email) {\n          user.is_institution_admin = true;\n        }\n        return user;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionUsersByPage(this.initPage));\n  }\n\n  addUser = (emails) => {\n    seafileAPI.sysAdminAddInstitutionUserBatch(this.props.institutionID, emails).then(res => {\n      this.toggleAddUserDialog();\n      let successArray = res.data.success;\n      let failedArray = res.data.failed;\n      if (successArray.length) {\n        let newUserList = this.state.userList.concat(successArray);\n        this.setState({userList: newUserList});\n      }\n      failedArray.map((item) => {\n        toaster.danger(item.error_msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddUserDialogOpen, institutionName, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"members\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                setAdmin={this.setAdmin}\n                deleteUser={this.deleteUser}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionUsersByPage={this.getInstitutionUsersByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <AddMemberDialog\n            addUser={this.addUser}\n            toggle={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No admins')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  revokeAdmin={this.props.revokeAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isRevokeAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleRevokeAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  }\n\n  revokeAdmin = () => {\n    this.props.revokeAdmin(this.props.item);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isRevokeAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Revoke Admin']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass InstitutionAdmins extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n    seafileAPI.sysAdminListInstitutionAdmins(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  revokeAdmin = (item) => {\n    const email = item.email;\n    const name = item.name;\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, false).then(res => {\n      let userList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { institutionName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"admins\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                revokeAdmin={this.revokeAdmin}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionAdmins;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'loginLogs', urlPart:'logs/login', text: gettext('Login')},\n      {name: 'fileAccessLogs', urlPart:'logs/file-access', text: gettext('File Access')},\n      {name: 'fileUpdateLogs', urlPart:'logs/file-update', text: gettext('File Update')},\n      {name: 'sharePermissionLogs', urlPart:'logs/share-permission', text: gettext('Permission')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport moment from 'moment';\n\nclass LogsExportExcelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      startDateStr: '',\n      endDateStr: '',\n      errMsg: '',\n    };\n  }\n\n  downloadExcel = () => {\n    if (!this.isValidDateStr()) {\n      return;\n    }\n    let { startDateStr, endDateStr } = this.state;\n    let url = siteRoot;\n\n    switch (this.props.logType) {\n      case 'login':\n        url += 'sys/loginadmin/export-excel/';\n        break;\n      case 'fileAccess':\n        url += 'sys/log/fileaudit/export-excel/';\n        break;\n      case 'fileUpdate':\n        url += 'sys/log/fileupdate/export-excel/';\n        break;\n      case 'sharePermission':\n        url += 'sys/log/permaudit/export-excel/';\n        break;\n    }\n    location.href = url + '?start=' + startDateStr + '&end=' + endDateStr;\n    this.props.toggle();\n  }\n\n  isValidDateStr = () => {\n    let { startDateStr, endDateStr } = this.state;\n    if (moment(startDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(endDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(startDateStr).isBefore(endDateStr)\n    ) {\n      return true;\n    } else {\n      this.setState({\n        errMsg: gettext('Date Invalid.')\n      });\n      return false;\n    }\n  }\n\n  handleStartChange = (e) => {\n    const startDateStr = e.target.value.trim();\n    this.setState({\n      startDateStr: startDateStr,\n      errMsg: ''\n    });\n  }\n\n  handleEndChange = (e) => {\n    const endDateStr = e.target.value.trim();\n    this.setState({\n      endDateStr: endDateStr,\n      errMsg: '',\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Choose date')}</ModalHeader>\n        <ModalBody>\n          <FormGroup>\n            <Label>{gettext('Start date')}</Label>\n            <Input\n              value={this.state.startDateStr}\n              onChange={this.handleStartChange}\n              placeholder='yyyy-mm-dd'\n              autoFocus={true}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label>{gettext('End date')}</Label>\n            <Input\n              value={this.state.endDateStr}\n              onChange={this.handleEndChange}\n              placeholder='yyyy-mm-dd'\n            />\n          </FormGroup>\n          {this.state.errMsg &&\n            <Alert className=\"mt-2\" color=\"danger\">\n              {gettext(this.state.errMsg)}\n            </Alert>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.downloadExcel}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  logType: PropTypes.string.isRequired,\n};\n\nLogsExportExcelDialog.propTypes = propTypes;\n\nexport default LogsExportExcelDialog;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport { Button } from 'reactstrap';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.log_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass LoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.login_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"loginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'login'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default LoginLogs;\n","import React from 'react';\nimport { gettext } from '../../../utils/constants';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\n\nclass FilterMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { \n      isMenuShown: false\n    };  \n  }\n\n  toggleMenu = () => {\n    this.setState({\n      isMenuShown: !this.state.isMenuShown\n    }, () => {\n      this.props.toggleFreezeItem(this.state.isMenuShown);\n    });\n  }\n\n  onItemClick = () => {\n    this.props.filterItems();\n    this.props.toggleFreezeItem(false);\n  }\n\n  render() {\n    const { filterBy } = this.props;\n    return (\n      <Dropdown isOpen={this.state.isMenuShown} toggle={this.toggleMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isMenuShown}\n        />\n        <DropdownMenu>\n          <DropdownItem onClick={this.onItemClick}>{gettext('only show {placeholder}').replace('{placeholder}', filterBy)}</DropdownItem>\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nexport default FilterMenu;\n","import React from 'react';\nimport { Button } from 'reactstrap';\n\nclass ToggleFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { filterBy } = this.props;\n    return (\n      <Button\n        color='secondary'\n        className=\"my-2 mr-2\"\n        onClick={this.props.toggleFilter}\n      >   \n        <span className=\"text-primary\">{filterBy}</span>\n        <span className=\"ml-2 close\" style={{fontSize: '1.2rem'}}>x</span>\n      </Button>\n    );\n\n  }\n\n}\n\nexport default ToggleFilter;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport { Button } from 'reactstrap';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport LogsNav from './logs-nav';\nimport FilterMenu from './file-access-item-menu';\nimport ToggleFilter from './file-access-toggle-filter';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  toggleFilterByUser = () => {\n    this.props.filterByUser(null);\n  }\n\n  toggleFilterByRepo = () => {\n    this.props.filterByRepo(null);\n  }\n\n  toggleFreezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  }\n\n  render() {\n    const {\n      loading, errorMsg, items, \n      userFilteredBy, repoFilteredBy,\n      perPage, currentPage, hasNextPage\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file access logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <div>\n            {userFilteredBy && (\n              <ToggleFilter\n                filterBy={items[0].name}\n                toggleFilter={this.toggleFilterByUser}\n              />\n            )}\n            {repoFilteredBy && (\n              <ToggleFilter\n                filterBy={items[0].repo_name}\n                toggleFilter={this.toggleFilterByRepo}\n              />\n            )}\n          </div>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('IP')}{' / '}{gettext('Device')}</th>\n                <th width=\"20%\">{gettext('Date')}</th>\n                <th width=\"15%\">{gettext('Library')}</th>\n                <th width=\"15%\">{gettext('File')}{' / '}{gettext('Folder')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    isFreezed={this.state.isItemFreezed}\n                    toggleFreezeItem={this.toggleFreezeItem}\n                    userFilteredBy={userFilteredBy}\n                    repoFilteredBy={repoFilteredBy}\n                    filterByUser={this.props.filterByUser}\n                    filterByRepo={this.props.filterByRepo}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlighted: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isFreezed) {\n      this.setState({\n        isHighlighted: true,\n        isOpIconShown: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isFreezed) {\n      this.setState({\n        isHighlighted: false,\n        isOpIconShown: false\n      });\n    }\n  }\n\n  filterByUser = () => {\n    const { item } = this.props;\n    this.props.filterByUser(item.email);\n  }\n\n  filterByRepo = () => {\n    const { item } = this.props;\n    this.props.filterByRepo(item.repo_id);\n  }\n\n  toggleFreezeItem = (freezed) => {\n    this.props.toggleFreezeItem(freezed);\n    if (!freezed) {\n      this.setState({\n        isHighlighted: false,\n        isOpIconShown: false\n      });\n    }\n  }\n\n  render() {\n    const { isHighlighted, isOpIconShown } = this.state;\n    const { item, userFilteredBy, repoFilteredBy } = this.props;\n    return (\n      <tr className={isHighlighted ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>\n          <UserLink email={item.email} name={item.name} />\n          {isOpIconShown && !userFilteredBy && (\n            <FilterMenu\n              filterBy={item.name}\n              filterItems={this.filterByUser}\n              toggleFreezeItem={this.toggleFreezeItem}\n            />\n          )}\n        </td>\n        <td>{item.event_type}</td>\n        <td>{item.ip}{' / '}{item.device || '--'}</td>\n        <td>{moment(item.time).fromNow()}</td>\n        <td>\n          {item.repo_name ? item.repo_name : gettext('Deleted')}\n          {isOpIconShown && item.repo_name && !repoFilteredBy && (\n            <FilterMenu\n              filterBy={item.repo_name}\n              filterItems={this.filterByRepo}\n              toggleFreezeItem={this.toggleFreezeItem}\n            />\n          )}\n        </td>\n        <td>{item.file_or_dir_name}</td>\n      </tr>\n    );\n  }\n}\n\nclass FileAccessLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      userFilteredBy: urlParams.get('email'),\n      repoFilteredBy: urlParams.get('repo_id')\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    const { perPage, userFilteredBy, repoFilteredBy } = this.state;\n    seafileAPI.sysAdminListFileAccessLogs(page, perPage, userFilteredBy, repoFilteredBy).then((res) => {\n      this.setState({\n        logList: res.data.file_access_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  updateURL = (obj) => {\n    let url = new URL(location.href);\n    let searchParams = new URLSearchParams(url.search);\n    for (let key in obj) {\n      obj[key] == null ? \n        searchParams.delete(key) :\n        searchParams.set(key, obj[key]);\n    }\n    url.search = searchParams.toString();\n    navigate(url.toString());\n  }\n\n  filterByUser = (email) => {\n    this.setState({\n      userFilteredBy: email \n    }, () => {\n      this.getLogsByPage(this.initPage);\n      this.updateURL({'email': email});\n    });\n  }\n\n  filterByRepo = (repoID) => {\n    this.setState({\n      repoFilteredBy: repoID \n    }, () => {\n      this.getLogsByPage(this.initPage);\n      this.updateURL({'repo_id': repoID});\n    });\n  } \n\n  render() {\n    const {\n      logList,\n      userFilteredBy, repoFilteredBy, \n      currentPage, perPage, hasNextPage,\n      isExportExcelDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileAccessLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                userFilteredBy={userFilteredBy}\n                repoFilteredBy={repoFilteredBy}\n                filterByUser={this.filterByUser}\n                filterByRepo={this.filterByRepo}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileAccess'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileAccessLogs;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport { Button } from 'reactstrap';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport ModalPortal from '../../../components/modal-portal';\nimport CommitDetails from '../../../components/dialog/commit-details';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file update logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('Date')}</th>\n                <th width=\"25%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Action')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isCommitDetailsDialogOpen: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n\n  toggleCommitDetailsDialog = () => {\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  }\n\n  showCommitDetails = (e) => {\n    e.preventDefault();\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>{moment(item.time).fromNow()}</td>\n          <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n          <td>\n            {item.file_operation}\n            {item.repo_name && !item.repo_encrypted &&\n              <a className=\"ml-1\" href=\"#\" onClick={this.showCommitDetails}>{gettext('Details')}</a>\n            }\n          </td>\n        </tr>\n        {this.state.isCommitDetailsDialogOpen &&\n          <ModalPortal>\n            <CommitDetails\n              repoID={item.repo_id}\n              commitID={item.commit_id}\n              commitTime={item.time}\n              toggleDialog={this.toggleCommitDetailsDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass FileUpdateLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListFileUpdateLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.file_update_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileUpdateLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileUpdate'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileUpdateLogs;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsNav from './logs-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No permission logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"15%\">{gettext('Share From')}</th>\n                <th width=\"15%\">{gettext('Share To')}</th>\n                <th width=\"10%\">{gettext('Actions')}</th>\n                <th width=\"13%\">{gettext('Permission')}</th>\n                <th width=\"20%\">{gettext('Library')}</th>\n                <th width=\"12%\">{gettext('Folder')}</th>\n                <th width=\"15%\">{gettext('Date')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  getActionTextByEType = (etype) => {\n    if (etype.indexOf('add') != -1) {\n      return gettext('Add');\n    } else if (etype.indexOf('modify') != -1) {\n      return gettext('Modify');\n    } else if (etype.indexOf('delete') != -1) {\n      return gettext('Delete');\n    } else {\n      return '';\n    }\n  }\n\n  getShareTo = (item) => {\n    switch(item.share_type) {\n      case 'user':\n        return <UserLink email={item.to_user_email} name={item.to_user_name} />;\n      case 'group':\n        return <Link to={`${siteRoot}sys/groups/${item.to_group_id}/libraries/`}>{item.to_group_name}</Link>;\n      case 'department':\n        return <Link to={`${siteRoot}sys/departments/${item.to_group_id}/`}>{item.to_group_name}</Link>;\n      case 'all':\n        return <Link to={`${siteRoot}org/`}>{gettext('All')}</Link>;\n      default:\n        return gettext('Deleted');\n    }\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.from_user_email} name={item.from_user_name} /></td>\n        <td>{this.getShareTo(item)}</td>\n        <td>{this.getActionTextByEType(item.etype)}</td>\n        <td>{Utils.sharePerms(item.permission)}</td>\n        <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n        <td>{item.folder}</td>\n        <td>{moment(item.date).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass SharePermissionLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListSharePermissionLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.share_permission_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"sharePermissionLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'sharePermission'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharePermissionLogs;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  headingText: PropTypes.string.isRequired,\n  children: PropTypes.object.isRequired\n};\n\nclass Section extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { headingText, children} = this.props;\n    return (\n      <div className=\"mb-4\">\n        <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{headingText}</h4>\n        {children}\n      </div>\n    );\n  }\n}\n\nSection.propTypes = propTypes;\n\nexport default Section;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col, Label } from 'reactstrap';\n\nconst propTypes = {\n  displayName: PropTypes.string.isRequired,\n  helpTip: PropTypes.string,\n  mainContent: PropTypes.object.isRequired,\n  extraContent: PropTypes.object\n};\n\nclass SettingItemBase extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { helpTip, displayName, mainContent, extraContent } = this.props;\n    return (\n      <Fragment>\n        <Row className=\"my-4\">\n          <Col md=\"3\">\n            <Label className=\"web-setting-label\">{displayName}</Label>\n          </Col>\n          <Col md=\"5\">\n            {mainContent}\n            {helpTip && <p className=\"small text-secondary mt-1\">{helpTip}</p>}\n          </Col>\n          <Col md=\"4\">\n            {extraContent}\n          </Col>\n        </Row>\n      </Fragment>\n    );\n  }\n}\n\nSettingItemBase.propTypes = propTypes;\n\nexport default SettingItemBase;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  inputType: PropTypes.string,\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string,PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isBtnsShown: false,\n      value: this.props.value\n    };\n  }\n\n  toggleBtns = () => {\n    this.setState({isBtnsShown: !this.state.isBtnsShown});\n  }\n\n  hideBtns = (e) => {\n    if (!this.state.isBtnsShown) {\n      return;\n    }\n    if (this.props.value != this.state.value) {\n      this.setState({value: this.props.value});\n    }\n    this.toggleBtns();\n  }\n\n  onInputChange = (e) => {\n    this.setState({ value: e.target.value });\n  }\n\n  onSubmit = (e) => {\n    const value = this.state.value.trim();\n    if (value != this.props.value) {\n      this.props.saveSetting(this.props.keyText, value);\n    }\n    this.toggleBtns();\n  }\n\n  render() {\n    const { isBtnsShown, value } = this.state;\n    const { helpTip, displayName, inputType } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <Input type={inputType || 'text'} className={inputType == 'textarea' ? 'web-setting-textarea' : ''} onChange={this.onInputChange} onFocus={this.toggleBtns} onBlur={this.hideBtns} value={value} />\n        }\n        extraContent={\n          isBtnsShown ?\n            <Fragment>\n              <Button className=\"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit\" onMouseDown={this.onSubmit} title={gettext('Submit')}></Button>\n              <Button className=\"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel\" title={gettext('Cancel')}></Button>\n            </Fragment> : null\n        }\n      />\n    );\n  }\n}\n\nWebSettingInput.propTypes = propTypes;\n\nexport default WebSettingInput;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  postFile: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  helpTip: PropTypes.string.isRequired,\n  fileWidth: PropTypes.number.isRequired,\n  fileHeight: PropTypes.number.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingFile extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n  }\n\n  uploadFile = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    this.props.postFile(file, this.props.keyText);\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  render() {\n    const { helpTip, filePath, fileWidth, fileHeight, displayName } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <img src={filePath + '?t=' + new Date().getTime()} alt={displayName} width={fileWidth} height={fileHeight} className=\"mb-1\" />\n        }\n        extraContent={\n          <Fragment>\n            <Button color=\"secondary\" onClick={this.openFileInput}>{gettext('Change')}</Button>\n            <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInput} />\n          </Fragment>\n        }\n      />\n    );\n  }\n}\n\nWebSettingFile.propTypes = propTypes;\n\nexport default WebSettingFile;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingCheckbox extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputChecked: this.props.value\n    };\n  }\n\n  onInputChange = (e) => {\n    const checked = e.target.checked;\n    const valueToNum = checked ? 1 : 0;\n    this.setState({\n      inputChecked: checked\n    });\n    this.props.saveSetting(this.props.keyText, valueToNum);\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n    const { helpTip, displayName } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        mainContent={\n          <Fragment>\n            <Input className=\"ml-0\" checked={inputChecked} type='checkbox' onChange={this.onInputChange} />\n            <p className=\"ml-4\">{helpTip}</p>\n          </Fragment>\n        }\n      />\n    );\n  }\n}\n\nWebSettingCheckbox.propTypes = propTypes;\n\nexport default WebSettingCheckbox;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro, mediaUrl, logoPath, faviconPath, loginBGPath } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Section from './section';\nimport InputItem from './input-item';\nimport FileItem from './file-item';\nimport CheckboxItem from './checkbox-item';\n\nimport '../../../css/system-admin-web-settings.css';\n\nclass WebSettings extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      config_dict: null,\n      logoPath: mediaUrl + logoPath,\n      faviconPath: mediaUrl + faviconPath,\n      loginBGPath: mediaUrl + loginBGPath\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysSettingInfo().then((res) => {\n      this.setState({\n        loading: false,\n        config_dict: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  saveSetting = (key, value) => {\n    seafileAPI.sysAdminSetSysSettingInfo(key, value).then((res) => {\n      this.setState({\n        config_dict: res.data\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  postFile = (file, fileType) => {\n    let postFile;\n    if (fileType == 'Logo') {\n      postFile = seafileAPI.sysAdminUpdateLogo(file);\n    } else if (fileType == 'Favicon') {\n      postFile = seafileAPI.sysAdminUpdateFavicon(file);\n    } else if (fileType == 'loginBGImage') {\n      postFile = seafileAPI.sysAdminUpdateLoginBG(file);\n    }\n    postFile.then((res) => {\n      if (fileType == 'Logo') {\n        this.setState({\n          logoPath: res.data.logo_path\n        });\n      } else if (fileType == 'Favicon') {\n        this.setState({\n          faviconPath: res.data.favicon_path\n        });\n      } else if (fileType == 'loginBGImage') {\n        this.setState({\n          loginBGPath: res.data.login_bg_image_path\n        });\n      }\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg, config_dict, logoPath, faviconPath, loginBGPath } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Settings')}</h3>\n            </div>\n            <div className=\"cur-view-content container mw-100\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) && config_dict &&\n              <Fragment>\n                <p className=\"small text-secondary my-4\">{gettext('Note: Settings via web interface are saved in database table (seahub-db/constance_config). They have a higher priority over the settings in config files.')}</p>\n\n                <Section headingText='URL'>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SERVICE_URL'\n                      keyText='SERVICE_URL'\n                      value={config_dict['SERVICE_URL']}\n                      helpTip={gettext('The URL of the server, like https://seafile.example.com or http://192.168.1.2:8000')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='FILE_SERVER_ROOT'\n                      keyText='FILE_SERVER_ROOT'\n                      value={config_dict['FILE_SERVER_ROOT']}\n                      helpTip={gettext('The internal URL for downloading/uploading files. Users will not be able to download/upload files if this is not set correctly. If you config Seafile behind Nginx/Apache, it should be SERVICE_URL/seafhttp, like https://seafile.example.com/seafhttp .')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Branding')}>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_TITLE'\n                      keyText='SITE_TITLE'\n                      value={config_dict['SITE_TITLE']}\n                      helpTip={gettext('Site title shown in a browser tab')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_NAME'\n                      keyText='SITE_NAME'\n                      value={config_dict['SITE_NAME']}\n                      helpTip={gettext('Site name used in email sending')}\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Logo'\n                      keyText='Logo'\n                      filePath={logoPath}\n                      fileWidth={256}\n                      fileHeight={64}\n                      helpTip='logo.png, 256px * 64px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Favicon'\n                      keyText='Favicon'\n                      filePath={faviconPath}\n                      fileWidth={32}\n                      fileHeight={32}\n                      helpTip='favicon.ico, 32px * 32px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName={gettext('Login Background Image')}\n                      keyText='loginBGImage'\n                      filePath={loginBGPath}\n                      fileWidth={240}\n                      fileHeight={160}\n                      helpTip='login-bg.jpg, 2400px * 1600px'\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_BRANDING_CSS'\n                      keyText='ENABLE_BRANDING_CSS'\n                      value={config_dict['ENABLE_BRANDING_CSS']}\n                      helpTip={gettext('Use custom CSS')}\n                    />\n                    <InputItem\n                      inputType=\"textarea\"\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('Custom CSS')}\n                      keyText='CUSTOM_CSS'\n                      value={config_dict['CUSTOM_CSS']}\n                      helpTip=''\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('User')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('allow new registrations')}\n                      keyText='ENABLE_SIGNUP'\n                      value={config_dict['ENABLE_SIGNUP']}\n                      helpTip={gettext('Allow new user registrations. Uncheck this to prevent anyone from creating a new account.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('activate after registration')}\n                      keyText='ACTIVATE_AFTER_REGISTRATION'\n                      value={config_dict['ACTIVATE_AFTER_REGISTRATION']}\n                      helpTip={gettext('Activate user immediately after registration. If unchecked, a user need to be activated by administrator or via activation email')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('send activation email')}\n                      keyText='REGISTRATION_SEND_MAIL'\n                      value={config_dict['REGISTRATION_SEND_MAIL']}\n                      helpTip={gettext('Send activation Email after user registration.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('keep sign in')}\n                      keyText='LOGIN_REMEMBER_DAYS'\n                      value={config_dict['LOGIN_REMEMBER_DAYS']}\n                      helpTip={gettext('Number of days that keep user sign in.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='LOGIN_ATTEMPT_LIMIT'\n                      keyText='LOGIN_ATTEMPT_LIMIT'\n                      value={config_dict['LOGIN_ATTEMPT_LIMIT']}\n                      helpTip={gettext('The maximum number of failed login attempts before showing CAPTCHA.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='FREEZE_USER_ON_LOGIN_FAILED'\n                      keyText='FREEZE_USER_ON_LOGIN_FAILED'\n                      value={config_dict['FREEZE_USER_ON_LOGIN_FAILED']}\n                      helpTip={gettext('Freeze user account when failed login attempts exceed limit.')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Groups')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_SHARE_TO_ALL_GROUPS'\n                    keyText='ENABLE_SHARE_TO_ALL_GROUPS'\n                    value={config_dict['ENABLE_SHARE_TO_ALL_GROUPS']}\n                    helpTip={gettext('Enable users to share libraries to any groups in the system.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Password')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='strong password'\n                      keyText='USER_STRONG_PASSWORD_REQUIRED'\n                      value={config_dict['USER_STRONG_PASSWORD_REQUIRED']}\n                      helpTip={gettext('Force user to use a strong password when sign up or change password.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='force password change'\n                      keyText='FORCE_PASSWORD_CHANGE'\n                      value={config_dict['FORCE_PASSWORD_CHANGE']}\n                      helpTip={gettext('Force user to change password when account is newly added or reset by admin')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password minimum length')}\n                      keyText='USER_PASSWORD_MIN_LENGTH'\n                      value={config_dict['USER_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an account password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password strength level')}\n                      keyText='USER_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['USER_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of an account password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='enable two factor authentication'\n                      keyText='ENABLE_TWO_FACTOR_AUTH'\n                      value={config_dict['ENABLE_TWO_FACTOR_AUTH']}\n                      helpTip={gettext('Enable two factor authentication')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Library')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='library history'\n                      keyText='ENABLE_REPO_HISTORY_SETTING'\n                      value={config_dict['ENABLE_REPO_HISTORY_SETTING']}\n                      helpTip={gettext('Allow user to change library history settings')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='encrypted library'\n                      keyText='ENABLE_ENCRYPTED_LIBRARY'\n                      value={config_dict['ENABLE_ENCRYPTED_LIBRARY']}\n                      helpTip={gettext('Allow user to create encrypted libraries')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('library password minimum length')}\n                      keyText='REPO_PASSWORD_MIN_LENGTH'\n                      value={config_dict['REPO_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an encrypted library password should include.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link force password')}\n                      keyText='SHARE_LINK_FORCE_USE_PASSWORD'\n                      value={config_dict['SHARE_LINK_FORCE_USE_PASSWORD']}\n                      helpTip={gettext('Force user use password when generating share/upload link.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link password minimum length')}\n                      keyText='SHARE_LINK_PASSWORD_MIN_LENGTH'\n                      value={config_dict['SHARE_LINK_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters a share/upload link password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link password strength level')}\n                      keyText='SHARE_LINK_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['SHARE_LINK_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of a share/upload link password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_USER_CLEAN_TRASH'\n                      keyText='ENABLE_USER_CLEAN_TRASH'\n                      value={config_dict['ENABLE_USER_CLEAN_TRASH']}\n                      helpTip={gettext('Allow user to clean library trash')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Online Preview')}>\n                  <InputItem\n                    inputType=\"textarea\"\n                    saveSetting={this.saveSetting}\n                    displayName={gettext('text file extensions')}\n                    keyText='TEXT_PREVIEW_EXT'\n                    value={config_dict['TEXT_PREVIEW_EXT']}\n                    helpTip={gettext('Extensions of text files that can be online previewed, each suffix is separated by a comma.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Sync')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    keyText='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    value={config_dict['DISABLE_SYNC_WITH_ANY_FOLDER']}\n                    helpTip={gettext('If turn on, the desktop clients will not be able to sync a folder outside the default Seafile folder.')}\n                  />\n                </Section>\n\n                {isPro && <Section headingText={gettext('Terms')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_TERMS_AND_CONDITIONS'\n                    keyText='ENABLE_TERMS_AND_CONDITIONS'\n                    value={config_dict['ENABLE_TERMS_AND_CONDITIONS']}\n                    helpTip={gettext('Enable system admin to add Terms and Conditions, and all users will have to accept the terms.')}\n                  />\n                </Section>}\n              </Fragment>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default WebSettings;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addNotification: PropTypes.func.isRequired\n};\n\nclass SysAdminAddSysNotificationDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addNotification(this.state.value.trim());\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add new notification')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"textarea\"\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddSysNotificationDialog.propTypes = propTypes;\n\nexport default SysAdminAddSysNotificationDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminAddSysNotificationDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No notifications')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"95%\">{gettext('Notification Detail')}</th>\n              <th width=\"5%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                item={item}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                deleteNotification={this.props.deleteNotification}\n                setToCurrent={this.props.setToCurrent}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteNotification = () => {\n    this.props.deleteNotification(this.props.item.id);\n    this.toggleDeleteDialog();\n  }\n\n  setToCurrent = () => {\n    this.props.setToCurrent(this.props.item.id);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Set to current':\n        this.setToCurrent();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Set to current':\n        translateResult = gettext('Set to current');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  getOperations = () => {\n    const { item } = this.props;\n    let operations = [];\n    if (!item.is_current) {\n      operations.push('Set to current');\n    }\n    operations.push('Delete');\n    return operations;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            {item.msg}\n            {item.is_current &&\n              <span className=\"small text-orange\">{gettext('(current notification)')}</span>\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Notification')}\n            message={gettext('Are you sure you want to delete the notification ?')}\n            toggleDialog={this.toggleDeleteDialog}\n            executeOperation={this.deleteNotification}\n            confirmBtnText={gettext('Delete')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Notifications extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      notificationList: [],\n      isAddNotificationDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListAllSysNotifications().then((res) => {\n      this.setState({\n        loading: false,\n        notificationList: res.data.notifications\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddNotificationDialog = () => {\n    this.setState({isAddNotificationDialogOpen: !this.state.isAddNotificationDialogOpen});\n  }\n\n  addNotification = (msg) => {\n    seafileAPI.sysAdminAddSysNotification(msg).then(res => {\n      let notificationList = this.state.notificationList;\n      notificationList.unshift(res.data.notification);\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteNotification = (id) => {\n    seafileAPI.sysAdminDeleteSysNotification(id).then(res => {\n      let notificationList = this.state.notificationList.filter(item => {\n        return item.id != id;\n      });\n      this.setState({notificationList: notificationList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setToCurrent = (id) => {\n    seafileAPI.sysAdminSetSysNotificationToCurrent(id).then(res => {\n      let notificationList = this.state.notificationList.map(item => {\n        if (item.id == id) {\n          item.is_current = true;\n        } else {\n          item.is_current = false;\n        }\n        return item;\n      });\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddNotificationDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddNotificationDialog}>{gettext('Add new notification')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Notifications')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.notificationList}\n                deleteNotification={this.deleteNotification}\n                setToCurrent={this.setToCurrent}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddNotificationDialogOpen &&\n          <SysAdminAddSysNotificationDialog\n            addNotification={this.addNotification}\n            toggle={this.toggleAddNotificationDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Notifications;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\n\n\nconst tablePropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  records: PropTypes.array.isRequired,\n};\n\nclass Table extends Component {\n\n  render() {\n    let { loading, errorMsg, records } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      return (\n        <table width=\"100%\" className=\"table table-hover table-vcenter\">\n          <thead>\n            <tr>\n              <th width=\"16%\">{gettext('Library')}</th>\n              <th width=\"30%\">ID</th>\n              <th width=\"30%\">{gettext('Path')}</th>\n              <th width=\"12%\">{gettext('Label')}</th>\n              <th width=\"12%\">{gettext('Suggestion')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {records.map((record, index) => {\n              return (\n                <Item key={index} record={record} />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nTable.propTypes = tablePropTypes;\n\n\nconst itemPropTypes = {\n  record: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    let record = this.props.record;\n\n    return (\n      <tr>\n        <td>{record.repo_name}</td>\n        <td>{record.repo_id}</td>\n        <td>{record.path}</td>\n        <td>{record.detail.label}</td>\n        <td>{record.detail.suggestion}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\n\nclass FileScanRecords extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      records: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listFileScanRecords().then((res) => {\n      this.setState({\n        loading: false,\n        records: res.data.record_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"content-scan-records\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Content Scan Records')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Table\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                records={this.state.records}\n              />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FileScanRecords;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst WorkWeixinDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass WorkWeixinDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar && member.avatar.length > 0) {\n        avatar = member.avatar.substring(0, member.avatar.length - 1) + '100';// get smaller avatar\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{'名称'}</th>\n                <th width=\"20%\">{'手机号'}</th>\n                <th width=\"30%\">{'邮箱'}</th>\n                <th width=\"15%\">{'已添加'}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{'成员列表为空'}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentMembersList.propTypes = WorkWeixinDepartmentMembersListPropTypes;\n\nexport default WorkWeixinDepartmentMembersList;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { gettext, isPro } from '../../../utils/constants';\n\nconst WorkWeixinDepartmentsTreeNodePropTypes = {\n  index: PropTypes.number,\n  department: PropTypes.object.isRequired,\n  isChildrenShow: PropTypes.bool.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreeNode extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChildrenShow: false,\n      dropdownOpen: false,\n      active: false,\n    };\n  }\n\n  toggleChildren = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({\n      isChildrenShow: !this.state.isChildrenShow,\n    });\n  };\n\n  dropdownToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onMouseEnter = () => {\n    this.setState({ active: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.state.dropdownOpen) return;\n    this.setState({ active: false });\n  };\n\n  importDepartmentDialogToggle = (depart) => {\n    this.setState({ active: false });\n    this.props.importDepartmentDialogToggle(depart);\n  }\n\n  componentDidMount() {\n    if (this.props.index === 0) {\n      this.setState({ isChildrenShow: true });\n      this.props.onChangeDepartment(this.props.department.id);\n    }\n  }\n\n  renderTreeNodes = (departmentsTree) => {\n    if (departmentsTree.length > 0) {\n      return departmentsTree.map((department) => {\n        return (\n          <WorkWeixinDepartmentsTreeNode\n            key={department.id}\n            department={department}\n            isChildrenShow={this.state.isChildrenShow}\n            onChangeDepartment={this.props.onChangeDepartment}\n            checkedDepartmentId={this.props.checkedDepartmentId}\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n          />\n        );\n      });\n    }\n  };\n\n  changeDept = (departmentID) => {\n    const { department, checkedDepartmentId } = this.props;\n    this.props.onChangeDepartment(departmentID);\n    if (checkedDepartmentId === department.id && !this.state.isChildrenShow) {\n      this.setState({ isChildrenShow: true });\n    }\n  }\n\n  render() {\n    const { isChildrenShow, department, checkedDepartmentId } = this.props;\n    let toggleClass = classNames({\n      'folder-toggle-icon fa fa-caret-down': department.children && this.state.isChildrenShow,\n      'folder-toggle-icon fa fa-caret-right': department.children && !this.state.isChildrenShow,\n    });\n    let nodeInnerClass = classNames({\n      'tree-node-inner': true,\n      'tree-node-inner-hover': this.state.active,\n      'tree-node-hight-light': checkedDepartmentId === department.id\n    });\n    return (\n      <Fragment>\n        {isChildrenShow &&\n          <div\n            className={nodeInnerClass}\n            onClick={() => this.changeDept(department.id)}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <span className=\"tree-node-icon\" onClick={(e) => this.toggleChildren(e)}>\n              <i className={toggleClass}></i>\n            </span>\n            <span className=\"tree-node-text\">{department.name}</span>\n            {isPro &&\n            <Dropdown\n              isOpen={this.state.dropdownOpen}\n              toggle={(e) => this.dropdownToggle(e)}\n              direction=\"down\"\n              style={this.state.active ? {} : { opacity: 0 }}\n            >\n              <DropdownToggle\n                tag='i'\n                className='fa fa-ellipsis-v cursor-pointer attr-action-icon'\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.dropdownOpen}\n              >\n              </DropdownToggle>\n              <DropdownMenu className=\"drop-list\" right={true}>\n                <DropdownItem\n                  onClick={this.importDepartmentDialogToggle.bind(this, department)}\n                  id={department.id}\n                >{'导入部门'}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </div>\n        }\n        {this.state.isChildrenShow &&\n          <div className=\"department-children\">\n            {department.children && this.renderTreeNodes(department.children)}\n          </div>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreeNode.propTypes = WorkWeixinDepartmentsTreeNodePropTypes;\n\nexport default WorkWeixinDepartmentsTreeNode;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport WorkWeixinDepartmentsTreeNode from './work-weixin-departments-tree-node';\n\nconst WorkWeixinDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <WorkWeixinDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreePanel.propTypes = WorkWeixinDepartmentsTreePanelPropTypes;\n\nexport default WorkWeixinDepartmentsTreePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loading from '../loading';\n\nconst propTypes = {\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n  onImportDepartmentSubmit: PropTypes.func.isRequired,\n  departmentsCount: PropTypes.number.isRequired,\n  membersCount: PropTypes.number.isRequired,\n  departmentName: PropTypes.string.isRequired,\n};\n\nclass ImportWorkWeixinDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : false,\n    };\n  }\n\n  toggle = () => {\n    this.props.importDepartmentDialogToggle(null);\n  };\n\n  handleSubmit = () => {\n    this.props.onImportDepartmentSubmit();\n    this.setState({ isLoading : true });\n  };\n\n  render() {\n    const { departmentsCount, membersCount, departmentName } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{'导入部门 '}</span><span className=\"op-target\" title={departmentName}>{departmentName}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{'将要导入 '}<strong>{departmentsCount}</strong>{' 个部门，其中包括 '}<strong>{membersCount}</strong>{' 个成员'}</p>\n          {this.state.isLoading && <Loading/>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{'取消'}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{'导入'}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportWorkWeixinDepartmentDialog.propTypes = propTypes;\n\nexport default ImportWorkWeixinDepartmentDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport deepCopy from 'deep-copy';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport { WorkWeixinDepartmentMembersList, WorkWeixinDepartmentsTreePanel } from './work-weixin';\nimport ImportWorkWeixinDepartmentDialog from '../../components/dialog/import-work-weixin-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\n\nclass WorkWeixinDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = deepCopy(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getWorkWeixinDepartmentsList = (departmentID) => {\n    seafileAPI.adminListWorkWeixinDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getWorkWeixinDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListWorkWeixinDepartmentMembers(department_id, {fetch_child: true}).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  };\n\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getWorkWeixinDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('未选择成员', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddWorkWeixinUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' 成功导入', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  }\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getWorkWeixinDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportWorkWeixinDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getWorkWeixinDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? '部门 ' + success.department_name + ' 导入成功' : success.api_user_name + ' 导入成功' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  }\n\n  componentDidMount() {\n    this.getWorkWeixinDepartmentsList(null);\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"operation-item\" onClick={this.onSubmit}>{'导入用户'}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{'企业微信集成'}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <WorkWeixinDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <WorkWeixinDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportWorkWeixinDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default WorkWeixinDepartments;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst DingtalkDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass DingtalkDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar && member.avatar.length > 0) {\n        avatar = member.avatar;\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{'名称'}</th>\n                <th width=\"20%\">{'手机号'}</th>\n                <th width=\"30%\">{'邮箱'}</th>\n                <th width=\"15%\">{'已添加'}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{'成员列表为空'}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentMembersList.propTypes = DingtalkDepartmentMembersListPropTypes;\n\nexport default DingtalkDepartmentMembersList;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { gettext, isPro } from '../../../utils/constants';\n\nconst DingtalkDepartmentsTreeNodePropTypes = {\n  index: PropTypes.number,\n  department: PropTypes.object.isRequired,\n  isChildrenShow: PropTypes.bool.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreeNode extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChildrenShow: false,\n      dropdownOpen: false,\n      active: false,\n    };\n  }\n\n  toggleChildren = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({\n      isChildrenShow: !this.state.isChildrenShow,\n    });\n  };\n\n  dropdownToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onMouseEnter = () => {\n    this.setState({ active: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.state.dropdownOpen) return;\n    this.setState({ active: false });\n  };\n\n  importDepartmentDialogToggle = (depart) => {\n    this.setState({ active: false });\n    this.props.importDepartmentDialogToggle(depart);\n  }\n\n  componentDidMount() {\n    if (this.props.index === 0) {\n      this.setState({ isChildrenShow: true });\n      this.props.onChangeDepartment(this.props.department.id);\n    }\n  }\n\n  renderTreeNodes = (departmentsTree) => {\n    if (departmentsTree.length > 0) {\n      return departmentsTree.map((department) => {\n        return (\n          <DingtalkDepartmentsTreeNode\n            key={department.id}\n            department={department}\n            isChildrenShow={this.state.isChildrenShow}\n            onChangeDepartment={this.props.onChangeDepartment}\n            checkedDepartmentId={this.props.checkedDepartmentId}\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n          />\n        );\n      });\n    }\n  };\n\n  changeDept = (departmentID) => {\n    const { department, checkedDepartmentId } = this.props;\n    this.props.onChangeDepartment(departmentID);\n    if (checkedDepartmentId === department.id && !this.state.isChildrenShow) {\n      this.setState({ isChildrenShow: true });\n    }\n  }\n\n  render() {\n    const { isChildrenShow, department, checkedDepartmentId } = this.props;\n    let toggleClass = classNames({\n      'folder-toggle-icon fa fa-caret-down': department.children && this.state.isChildrenShow,\n      'folder-toggle-icon fa fa-caret-right': department.children && !this.state.isChildrenShow,\n    });\n    let nodeInnerClass = classNames({\n      'tree-node-inner': true,\n      'tree-node-inner-hover': this.state.active,\n      'tree-node-hight-light': checkedDepartmentId === department.id\n    });\n    return (\n      <Fragment>\n        {isChildrenShow &&\n          <div\n            className={nodeInnerClass}\n            onClick={() => this.changeDept(department.id)}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <span className=\"tree-node-icon\" onClick={(e) => this.toggleChildren(e)}>\n              <i className={toggleClass}></i>\n            </span>\n            <span className=\"tree-node-text\">{department.name}</span>\n            {isPro &&\n            <Dropdown\n              isOpen={this.state.dropdownOpen}\n              toggle={(e) => this.dropdownToggle(e)}\n              direction=\"down\"\n              style={this.state.active ? {} : { opacity: 0 }}\n            >\n              <DropdownToggle\n                tag='i'\n                className='fa fa-ellipsis-v cursor-pointer attr-action-icon'\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.dropdownOpen}\n              >\n              </DropdownToggle>\n              <DropdownMenu className=\"drop-list\" right={true}>\n                <DropdownItem\n                  onClick={this.importDepartmentDialogToggle.bind(this, department)}\n                  id={department.id}\n                >{'导入部门'}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </div>\n        }\n        {this.state.isChildrenShow &&\n          <div className=\"department-children\">\n            {department.children && this.renderTreeNodes(department.children)}\n          </div>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDingtalkDepartmentsTreeNode.propTypes = DingtalkDepartmentsTreeNodePropTypes;\n\nexport default DingtalkDepartmentsTreeNode;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport DingtalkDepartmentsTreeNode from './dingtalk-departments-tree-node';\n\nconst DingtalkDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <DingtalkDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentsTreePanel.propTypes = DingtalkDepartmentsTreePanelPropTypes;\n\nexport default DingtalkDepartmentsTreePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loading from '../loading';\n\nconst propTypes = {\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n  onImportDepartmentSubmit: PropTypes.func.isRequired,\n  departmentsCount: PropTypes.number.isRequired,\n  membersCount: PropTypes.number.isRequired,\n  departmentName: PropTypes.string.isRequired,\n};\n\nclass ImportDingtalkDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : false,\n    };\n  }\n\n  toggle = () => {\n    this.props.importDepartmentDialogToggle(null);\n  };\n\n  handleSubmit = () => {\n    this.props.onImportDepartmentSubmit();\n    this.setState({ isLoading : true });\n  };\n\n  render() {\n    const { departmentsCount, membersCount, departmentName } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{'导入部门 '}</span><span className=\"op-target\" title={departmentName}>{departmentName}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{'将要导入 '}<strong>{departmentsCount}</strong>{' 个部门，其中包括 '}<strong>{membersCount}</strong>{' 个成员'}</p>\n          {this.state.isLoading && <Loading/>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{'取消'}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{'导入'}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportDingtalkDepartmentDialog.propTypes = propTypes;\n\nexport default ImportDingtalkDepartmentDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport deepCopy from 'deep-copy';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\nimport toaster from '../../components/toast';\nimport { DingtalkDepartmentMembersList, DingtalkDepartmentsTreePanel } from './dingtalk';\nimport ImportDingtalkDepartmentDialog from '../../components/dialog/import-dingtalk-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\nimport '../../css/dingtalk-departments.css';\n\nclass DingtalkDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = deepCopy(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getDingtalkDepartmentsList = (departmentID) => {\n    seafileAPI.adminListDingtalkDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getDingtalkDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListDingtalkDepartmentMembers(department_id).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  }\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getDingtalkDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('未选择成员', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddDingtalkUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' 成功导入', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  }\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getDingtalkDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportDingtalkDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getDingtalkDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? '部门 ' + success.department_name + ' 导入成功' : success.api_user_name + ' 导入成功' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  }\n\n  componentDidMount() {\n    this.getDingtalkDepartmentsList(null);\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"operation-item\" onClick={this.onSubmit}>{'导入用户'}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{'钉钉集成'}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <DingtalkDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <DingtalkDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportDingtalkDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DingtalkDepartments;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getItemsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getItemsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No invitations')}</h2>\n        </EmptyTip>\n      );\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Inviter')}</th>\n                <th width=\"20%\">{gettext('Accepter')}</th>\n                <th width=\"9%\">{gettext('Type')}</th>\n                <th width=\"14%\">{gettext('Invited at')}</th>\n                <th width=\"14%\">{gettext('Accepted at')}</th>\n                <th width=\"18%\">{gettext('Expired at')}</th>\n                <th width=\"5%\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.deleteItem();\n        break;\n      default:\n        break;\n    }\n  }\n\n  getInviteTypeText = () => {\n    let translateResult = '';\n    switch (this.props.item.invite_type) {\n      case 'Guest':\n        translateResult = gettext('Guest');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const {\n      isOpIconShown\n    } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.inviter_email} name={item.inviter_name} />\n          </td>\n          <td>\n            {item.accept_time ?\n              <UserLink email={item.accepter_email} name={item.accepter_name} /> :\n              item.accepter_email\n            }\n          </td>\n          <td>{this.getInviteTypeText()}</td>\n          <td>\n            <span title={moment(item.invite_time).format('llll')}>{moment(item.invite_time).fromNow()}</span>\n          </td>\n          <td>\n            {item.accept_time ?\n              <span title={moment(item.accept_time).format('llll')}>{moment(item.accept_time).fromNow()}</span> :\n              '--'\n            }\n          </td>\n          <td>\n            {item.is_expired ?\n              <span className=\"text-red\">{moment(item.expire_time).format('YYYY-MM-DD HH:mm')}</span> :\n              moment(item.expire_time).format('YYYY-MM-DD HH:mm')\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Invitations extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      totalItemCount: 0,\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInvitations(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.invitation_list,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (targetItem) => {\n    const token = targetItem.token;\n    seafileAPI.sysAdminDeleteInvitation(token).then(res => {\n      let items = this.state.items.filter(item => {\n        return item.token != token;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteItemInBatch = () => {\n    seafileAPI.sysAdminDeleteExpiredInvitations().then(res => {\n      const prevItems = this.state.items;\n      const items = this.state.items.filter(item => !item.is_expired || item.accept_time);\n      if (items.length < prevItems.length) {\n        this.setState({\n          items: items\n        });\n        toaster.success(gettext('Operation succeeded.'));\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.deleteItemInBatch}>{gettext('Delete Expired Invitations')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invitations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getItemsByPage={this.getItemsByPage}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Invitations;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { SimpleEditor } from '@seafile/seafile-editor';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string,\n  content: PropTypes.string,\n  onCommit: PropTypes.func.isRequired,\n  onCloseEditorDialog: PropTypes.func.isRequired,\n};\n\nclass TermsEditorDialog extends React.Component {\n\n  static defaultProps = {\n    title: gettext('Terms'),\n  }\n\n  onKeyDown = (event) => {\n    event.stopPropagation();\n  }\n\n  toggle = () => {\n    if (this.isContentChanged()) {\n      let currentContent = this.getCurrentContent();\n      this.props.onCommit(currentContent);\n    }\n    this.props.onCloseEditorDialog();\n  }\n\n  isContentChanged = () => {\n    return this.simpleEditor.hasContentChange();\n  }\n\n  getCurrentContent = () => {\n    let markdownContent = this.simpleEditor.getMarkdown();\n    return markdownContent;\n  }\n\n  setSimpleEditorRef = (editor) => {\n    this.simpleEditor = editor;\n  }\n\n  render() {\n    let { content, title } = this.props;\n    return (\n      <Modal\n        isOpen={true}\n        toggle={this.toggle}\n        onKeyDown={this.onKeyDown}\n        wrapClassName={'conditions-editor-dialog-wrapper'}\n        className={'conditions-editor-dialog'}\n        contentClassName={'conditions-editor-dialog-content'}\n        size={'lg'}\n        style={{width: 770}}\n      >\n        <ModalHeader className=\"conditions-editor-dialog-title\" toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody className={'conditions-editor-dialog-main'}>\n          <SimpleEditor\n            onRef={this.setSimpleEditorRef.bind(this)}\n            value={content || ''}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nTermsEditorDialog.propTypes = propTypes;\n\nexport default TermsEditorDialog;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport TermsPreviewWidget from '../../terms-preview-widget';\nimport TermsEditorDialog from '../terms-editor-dialog';\n\nimport '../../../css/terms-conditions-editor.css';\n\nconst propTypes = {\n  isUpdate: PropTypes.bool,\n  oldTermObj: PropTypes.object,\n  addTerm: PropTypes.func,\n  updateTerm: PropTypes.func,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass AddOrUpdateTermDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      versionNumber: '',\n      text: '',\n      isActive: true,\n      errorMsg: '',\n      isConditionsEditorDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    let oldTermObj = this.props.oldTermObj;\n    if (oldTermObj) {\n      this.setState({\n        name: oldTermObj.name,\n        versionNumber: oldTermObj.version_number,\n        text: oldTermObj.text,\n        isActive: !(oldTermObj.activate_time === ''),\n      });\n    }\n  }\n\n  handleNameChange = (e) => {\n    this.setState({name: e.target.value.trim()});\n  }\n\n  handleVersionNumberChange = (e) => {\n    this.setState({versionNumber: e.target.value.trim()});\n  }\n\n  handleTextChange = (e) => {\n    this.setState({text: e.target.value.trim()});\n  }\n\n  setActive = () => {\n    this.setState({isActive: true});\n  }\n\n  setInActive = () => {\n    this.setState({isActive: false});\n  }\n\n  addTerm = () => {\n    let { name, versionNumber, text, isActive } = this.state;\n    if (name === '') {\n      this.setState({errMsg: gettext('Name is required.')});\n      return;\n    }\n    if (versionNumber === '') {\n      this.setState({errMsg: gettext('Version Number is required.')});\n      return;\n    }\n    if (isNaN(versionNumber)) {\n      this.setState({errMsg: gettext('Version Number must be a number.')});\n      return;\n    }\n    if (text === '') {\n      this.setState({errMsg: gettext('Text is required.')});\n      return;\n    }\n    if (this.props.isUpdate) {\n      this.props.updateTerm(name, versionNumber, text, isActive);\n    } else {\n      this.props.addTerm(name, versionNumber, text, isActive);\n    }\n  }\n\n  onContentClick = () => {\n    this.setState({isConditionsEditorDialogShow: !this.state.isConditionsEditorDialogShow});\n  }\n\n  onCloseEditorDialog = () => {\n    this.setState({isConditionsEditorDialogShow: false});\n  }\n\n  onUpdateContent = (content) => {\n    this.setState({ text: content });\n  }\n\n  render() {\n    let title = this.props.isUpdate ? gettext('Update Terms and Conditions') : gettext('Add Terms and Conditions');\n    return (\n      <Fragment>\n        <Modal isOpen={true} toggle={this.props.toggle}>\n          <ModalHeader toggle={this.props.toggle}>{title}</ModalHeader>\n          <ModalBody>\n            <FormGroup>\n              <Label for=\"name\">{gettext('Name')}</Label>\n              <Input id=\"name\" value={this.state.name} onChange={this.handleNameChange}/>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Version Number')}</Label>\n              <Input value={this.state.versionNumber} onChange={this.handleVersionNumberChange}/>\n            </FormGroup>\n            <FormGroup className=\"form-content\">\n              <Label>{gettext('Text')}</Label>\n              <TermsPreviewWidget content={this.state.text} onContentClick={this.onContentClick}/>\n            </FormGroup>\n            <FormGroup tag=\"fieldset\">\n              <Label>{gettext('Activated')}</Label>\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"radio\" checked={this.state.isActive} onChange={this.setActive} />\n                  {' '}{gettext('On')}\n                </Label>\n              </FormGroup>\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"radio\" checked={!this.state.isActive} onChange={this.setInActive} />\n                  {' '}{gettext('Off')}\n                </Label>\n              </FormGroup>\n            </FormGroup>\n            {this.state.errMsg && <Alert color=\"danger\">{this.state.errMsg}</Alert>}\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.addTerm}>{gettext('Submit')}</Button>\n          </ModalFooter>\n        </Modal>\n        {this.state.isConditionsEditorDialogShow && (\n          <TermsEditorDialog\n            content={this.state.text}\n            onCommit={this.onUpdateContent}\n            onCloseEditorDialog={this.onCloseEditorDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nAddOrUpdateTermDialog.propTypes = propTypes;\n\nexport default AddOrUpdateTermDialog;\n","const hrefReg = /\\[.+\\]\\(\\S+\\)|<img src=(\\S+).+\\/>|!\\[\\]\\(\\S+\\)|<\\S+>/g,\n  imageReg1 = /^<img src=\"(\\S+)\" .+\\/>/,\n  imageReg2 = /^!\\[\\]\\((\\S+)\\)/,\n  linkReg1 = /^\\[.+\\]\\(\\S+\\)/,\n  linkReg2 = /^<\\S+>$/;\n\nconst getLinks = (hrefs) => {\n  const hrefObj = {\n    links: [],\n    images: []\n  };\n  hrefs.forEach((href) => {\n    if (href.search(linkReg1) >= 0 || href.search(linkReg2) >= 0) {\n      hrefObj.links.push(href);\n    } else {\n      let imageSrcs = href.match(imageReg1);\n      let imageSrcs1 = href.match(imageReg2);\n      if (imageSrcs) {\n        hrefObj.images.push(imageSrcs[1]);\n      } else if (imageSrcs1) {\n        hrefObj.images.push(imageSrcs1[1]);\n      }\n    }\n  });\n  return hrefObj;\n};\n\n\nconst getPreviewContent = (markdownContent) => {\n  let previewText = '';\n  let newMarkdownContent = markdownContent.replace(hrefReg, '');\n  for (let index = 0; index < newMarkdownContent.length; index++) {\n    if (newMarkdownContent[index] === '#') {\n      continue;\n    } else if (newMarkdownContent[index] === '\\n') {\n      previewText += ' ';\n    } else {\n      previewText += newMarkdownContent[index];\n    }\n    if (previewText.length === 30) {\n      break;\n    }\n  }\n\n  const hrefs = markdownContent.match(hrefReg);\n  if (hrefs) {\n    const { images, links } = getLinks(hrefs);\n    return { previewText, images, links };\n  }\n  return { previewText, images: [], links: [] };\n};\n\n\nexport default getPreviewContent;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport TermsPreviewWidget from '../terms-preview-widget';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string,\n  content: PropTypes.string,\n  onClosePreviewDialog: PropTypes.func.isRequired,\n};\n\nclass TermsPreviewDialog extends React.Component {\n\n  static defaultProps = {\n    title: gettext('Terms'),\n  }\n\n\n  toggle = () => {\n    this.props.onClosePreviewDialog();\n  }\n\n  render() {\n    let { title, content } = this.props;\n    return (\n      <Modal\n        isOpen={true}\n        size={'lg'}\n        style={{width: 600}}\n        wrapClassName={'conditions-perview-wrapper'}\n        toggle={this.toggle}\n      >\n        <ModalHeader toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody>\n          <TermsPreviewWidget content={content} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nTermsPreviewDialog.propTypes = propTypes;\n\nexport default TermsPreviewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport getPreviewContent from '../../../utils/markdown-utils';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TermsPerviewDialog from '../../../components/dialog/terms-preview-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\n\nconst propsTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      itemContent: '...',\n      isOpIconShown: false,\n      isUpdateDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTermsPerviewDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let mdFile = this.props.item.text;\n    processor.process(mdFile).then((result) => {\n      let innerHtml = String(result);\n      this.setState({itemContent: innerHtml});\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.item.text !== this.props.item.text) {\n      let mdFile = nextProps.item.text;\n      processor.process(mdFile).then((result) => {\n        let innerHtml = String(result);\n        this.setState({itemContent: innerHtml});\n      });\n    }\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  toggleUpdateDialog = (e) => {\n    this.setState({isUpdateDialogOpen: !this.state.isUpdateDialogOpen});\n  }\n\n  toggleDeleteDialog = (e) => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTermsContentDialog = (e) => {\n    this.setState({isTermsPerviewDialogOpen: !this.state.isTermsPerviewDialogOpen});\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Update':\n        this.toggleUpdateDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  deleteTerm = () => {\n    this.props.deleteTerm(this.props.item.id);\n    this.toggleDeleteDialog();\n  }\n\n  updateTerm = (name, versionNumber, text, isActive) => {\n    this.props.updateTerm(this.props.item.id, name, versionNumber, text, isActive);\n    this.toggleUpdateDialog();\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Update':\n        translateResult = gettext('Update');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    let { item } = this.props;\n    let { isDeleteDialogOpen, isUpdateDialogOpen, isTermsPerviewDialogOpen } = this.state;\n    let previewContent = getPreviewContent(item.text);\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>{item.name}</td>\n          <td>{item.version_number}</td>\n          <td className=\"ellipsis\">\n            <a href='#' onClick={this.toggleTermsContentDialog}>{previewContent.previewText}</a>\n          </td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.activate_time ? moment(item.activate_time).fromNow() : '--'}</td>\n          <td>\n            {this.state.isOpIconShown &&\n              <OpMenu\n                operations={['Update', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete T&C')}\n              message={deleteDialogMsg}\n              toggleDialog={this.toggleDeleteDialog}\n              executeOperation={this.deleteTerm}\n              confirmBtnText={gettext('Delete')}\n            />\n          </ModalPortal>\n        }\n        {isUpdateDialogOpen &&\n          <ModalPortal>\n            <AddOrUpdateTermDialog\n              updateTerm={this.updateTerm}\n              toggle={this.toggleUpdateDialog}\n              isUpdate={true}\n              oldTermObj={item}\n            />\n          </ModalPortal>\n        }\n        {isTermsPerviewDialogOpen &&\n          <ModalPortal>\n            <TermsPerviewDialog\n              content={item.text}\n              onClosePreviewDialog={this.toggleTermsContentDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = propsTypes;\n\nexport default Item;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Item from './item';\n\nconst propTypes = {\n  loading: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n  errorMsg: PropTypes.string,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No terms and conditions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Version')}</th>\n                <th width=\"25%\">{gettext('Text')}</th>\n                <th width=\"20%\">{gettext('Created')}</th>\n                <th width=\"20%\">{gettext('Activated')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    deleteTerm={this.props.deleteTerm}\n                    updateTerm={this.props.updateTerm}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = propTypes;\n\nexport default Content;\n\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './content';\n\nclass TermsAndConditions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      termList: [],\n      isAddTermDialogOpen: false,\n    };\n  }\n\n  toggleAddTermDialog = () => {\n    this.setState({isAddTermDialogOpen: !this.state.isAddTermDialogOpen});\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListTermsAndConditions().then((res) => {\n      this.setState({\n        termList: res.data.term_and_condition_list,\n        loading: false,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  addTerm = (name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminAddTermAndCondition(name, versionNumber, text, isActive).then(res => {\n      // After adding the terms, you need to refresh the page.\n      location.reload();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateTerm = (termID, name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminUpdateTermAndCondition(termID, name, versionNumber, text, isActive).then(res => {\n      let termList = this.state.termList.map(item => {\n        if (item.id == termID) {\n          return res.data;\n        } else {\n          return item;\n        }\n      });\n      this.setState({termList: termList});\n      toaster.success(gettext('Update succeeded.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteTerm = (termID) => {\n    seafileAPI.sysAdminDeleteTermAndCondition(termID).then(res => {\n      let termList = this.state.termList.filter(item => item.id != termID);\n      this.setState({termList: termList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { termList, isAddTermDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddTermDialog}>{gettext('Add')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Terms and Conditions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={termList}\n                deleteTerm={this.deleteTerm}\n                updateTerm={this.updateTerm}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddTermDialogOpen &&\n        <ModalPortal>\n          <AddOrUpdateTermDialog\n            isUpdate={false}\n            addTerm={this.addTerm}\n            toggle={this.toggleAddTermDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TermsAndConditions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all', text: gettext('All')},\n      {name: 'unhandled', urlPart: 'unhandled', text: gettext('Unhandled')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/virus-files/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"27%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass AllVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listVirusFiles(page, perPage).then((res) => {\n      const data = res.data;\n      this.setState({\n        loading: false,\n        virusFiles: data.virus_file_list,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AllVirusFiles;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  }\n\n  toggleItemSelected = (e) => {\n    this.props.toggleItemSelected(this.props.virusFile, e.target.checked);\n  }\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td className=\"text-center\">\n          <input type=\"checkbox\" checked={virusFile.isSelected} onChange={this.toggleItemSelected} />\n        </td>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage,\n      isAllItemsSelected\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"text-center\">\n                  <input type=\"checkbox\" checked={isAllItemsSelected} onChange={this.props.toggleAllSelected} />\n                </th>\n                <th width=\"24%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                    toggleItemSelected={this.props.toggleItemSelected}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass UnhandledVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n\n      isAllItemsSelected: false,\n      selectedItems: [],\n\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    const hasHandled = false;\n    seafileAPI.listVirusFiles(page, perPage, hasHandled).then((res) => {\n      const data = res.data;\n      const items = data.virus_file_list.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        loading: false,\n        virusFiles: items,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  toggleAllSelected = () => {\n    this.setState((prevState) => ({\n      isAllItemsSelected: !prevState.isAllItemsSelected,\n      virusFiles: this.state.virusFiles.map((item) => {\n        item.isSelected = !prevState.isAllItemsSelected;\n        return item;\n      })\n    }));\n  }\n\n  toggleItemSelected = (targetItem, isSelected) => {\n    this.setState({\n      virusFiles: this.state.virusFiles.map((item) => {\n        if (item === targetItem) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    }, () => {\n      this.setState({\n        isAllItemsSelected: !this.state.virusFiles.some(item => !item.isSelected)\n      });\n    });\n  }\n\n  handleSelectedItems = (op) => {\n    // op: 'delete-virus', 'ignore-virus'\n    const virusIDs = this.state.virusFiles\n      .filter(item => {\n        if (op == 'delete-virus') {\n          return item.isSelected && !item.has_deleted;\n        } else {\n          return item.isSelected && !item.has_ignored;\n        }\n      })\n      .map(item => item.virus_id);\n    seafileAPI.batchProcessVirusFiles(virusIDs, op).then((res) => {\n      let fileList = this.state.virusFiles;\n      res.data.success.forEach(item => {\n        let file = fileList.find(file => file.virus_id == item.virus_id);\n        if (op == 'delete-virus') {\n          file.has_deleted = true;\n        } else {\n          file.has_ignored = true;\n        }\n      });\n      this.setState({\n        virusFiles: fileList\n      });\n\n      res.data.failed.forEach(item => {\n        const file = fileList.find(file => file.virus_id == item.virus_id);\n        let errMsg = op == 'delete-virus' ?\n          gettext('Failed to delete %(virus_file) from library %(library): %(error_msg)') :\n          gettext('Failed to ignore %(virus_file) from library %(library): %(error_msg)');\n        errMsg = errMsg.replace('%(virus_file)', file.file_path)\n          .replace('%(library)', file.repo_name)\n          .replace('%(error_msg)', item.error_msg);\n        toaster.danger(errMsg);\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  deleteSelectedItems = () => {\n    const op = 'delete-virus';\n    this.handleSelectedItems(op);\n  }\n\n  ignoreSelectedItems = () => {\n    const op = 'ignore-virus';\n    this.handleSelectedItems(op);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.virusFiles.some(item => item.isSelected) ? (\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button onClick={this.deleteSelectedItems} className=\"operation-item\">{gettext('Delete')}</Button>\n              <Button onClick={this.ignoreSelectedItems} className=\"operation-item\">{gettext('Ignore')}</Button>\n            </Fragment>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"unhandled\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n                isAllItemsSelected={this.state.isAllItemsSelected}\n                toggleAllSelected={this.toggleAllSelected}\n                toggleItemSelected={this.toggleItemSelected}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UnhandledVirusFiles;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass LogsNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'adminOperationLogs', urlPart:'admin-logs/operation', text: gettext('Admin Operation Logs')},\n      {name: 'adminLoginLogs', urlPart:'admin-logs/login', text: gettext('Admin Login Logs')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nLogsNav.propTypes = propTypes;\n\nexport default LogsNav;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, enableSysAdminViewRepo, isPro } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin operation logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Operation')}</th>\n                <th width=\"50%\">{gettext('Detail')}</th>\n                <th width=\"15%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  getOperationText = (operationType) => {\n    switch (operationType) {\n      case 'repo_create': return gettext('Create Library');\n      case 'repo_delete': return gettext('Delete Library');\n      case 'repo_transfer': return gettext('Transfer Library');\n      case 'group_create': return gettext('Create Group');\n      case 'group_transfer': return gettext('Transfer Group');\n      case 'group_delete': return gettext('Delete Group');\n      case 'user_add': return gettext('Add User');\n      case 'user_delete': return gettext('Delete User');\n      default: return '';\n    }\n  }\n\n  getOperationDetail = (item) => {\n    let detail = item.detail;\n\n    let ownerPageUrl = '';\n    if (detail.owner) {\n      ownerPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.owner) + '/';\n    }\n    let userPageUrl = '';\n    if (detail.email) {\n      userPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.email) + '/';\n    }\n    let detailText = '';\n    let repoPageUrl = '';\n    let groupPageUrl = '';\n    if (item.operation == 'repo_create' || item.operation == 'repo_delete' || item.operation == 'repo_transfer') {\n      repoPageUrl = siteRoot + 'sys/libraries/' + detail.id + '/' + encodeURIComponent(detail.name) + '/';\n    }\n    if (item.operation == 'group_create' || item.operation == 'group_delete' || item.operation == 'group_transfer') {\n      groupPageUrl = siteRoot + 'sys/groups/' + detail.id + '/libraries/';\n    }\n\n    switch (item.operation) {\n      case 'repo_create':\n        detailText = gettext('Created library {library_name} with {owner} as its owner')\n          .replace('{owner}', '<a href=\"' + ownerPageUrl + '\">' + detail.owner + '</a>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'repo_delete':\n        detailText = gettext('Deleted library {library_name}')\n          .replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'repo_transfer':\n        detailText = gettext('Transferred library {library_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'group_create':\n        detailText = gettext('Created group {group_name}')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_transfer':\n        detailText = gettext('Transferred group {group_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_delete':\n        detailText = gettext('Deleted group {group_name}')\n          .replace('{group_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'user_add':\n        detailText = gettext('Added user {user}')\n          .replace('{user}', '<a href=\"' + userPageUrl + '\">' + detail.email+ '</a>');\n        return detailText;\n\n      case 'user_delete':\n        detailText = gettext('Deleted user {user}')\n          .replace('{user}', '<span class=\"font-weight-bold\">' + detail.email+ '</span>');\n        return detailText;\n\n      default: return '';\n    }\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{this.getOperationText(item.operation)}</td>\n        <td>\n          <span dangerouslySetInnerHTML={{__html: this.getOperationDetail(item)}}></span>\n        </td>\n        <td>{moment(item.datetime).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass AdminOperationLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminOperationLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminOperationLogs;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.login_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass AdminLoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminLoginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminLoginLogs;\n","import React, { Component, Fragment } from 'react';\nimport Account from '../../components/common/account';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../../components/toast';\nimport moment from 'moment';\nimport MainPanelTopbar from './main-panel-topbar';\n\nclass AbuseReports extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      abuseReportList: [],\n    };\n  }\n\n  listAbuseReports = () => {\n    seafileAPI.sysAdminListAbuseReports().then((res) => {\n      this.setState({\n        abuseReportList: res.data.abuse_report_list,\n      });\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  updateAbuseReport = (handled, abuseReportId) => {\n    seafileAPI.sysAdminUpdateAbuseReport(handled, abuseReportId).then((res) => {\n      const abuseReportList = this.state.abuseReportList.map((item, index) => {\n        if (item.id === abuseReportId) {\n          item.handled = res.data.handled;\n        }\n        return item;\n      });\n      this.setState({\n        abuseReportList: abuseReportList,\n      });\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAbuseReports();\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    const AbuseReportList = this.state.abuseReportList.map((item, index) => {\n      const handled = (!item.handled).toString();\n      const abuseReportId = item.id;\n      const fileUrl = siteRoot + 'lib/' + item.repo_id + '/file' + item.file_path;\n      return (\n        <tr key={index}>\n          <td>{item.repo_name}</td>\n          <td><a href={fileUrl} target=\"_blank\">{item.file_path}</a></td>\n          <td>{item.reporter}</td>\n          <td>{item.abuse_type}</td>\n          <td>{item.description}</td>\n          <td>{moment(item.time).format('YYYY-MM-DD')}</td>\n          <td><p onClick={this.updateAbuseReport.bind(this, handled, abuseReportId)}\n            className=\"op-target ellipsis ellipsis-op-target cursor-pointer\"\n          >{gettext(item.handled.toString())}</p></td>\n        </tr>\n      );\n    });\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Abuse Reports')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table className={`table-hover`}>\n                <thead>\n                    <tr>\n                      <th width=\"20%\">{gettext('Library')}</th>\n                      <th width=\"20%\">{gettext('File')}</th>\n                      <th width=\"10%\">{gettext('Reporter')}</th>\n                      <th width=\"15%\">{gettext('Abuse Type')}</th>\n                      <th width=\"20%\">{gettext('Description')}</th>\n                      <th width=\"10%\">{gettext('Time')}</th>\n                      <th width=\"5%\">{gettext('Handled')}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                  {AbuseReportList}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AbuseReports;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { Router } from '@gatsbyjs/reach-router';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nimport SidePanel from './side-panel';\nimport MainPanel from './main-panel';\n\nimport Info from './info';\n\nimport StatisticFile from './statistic/statistic-file';\nimport StatisticStorage from './statistic/statistic-storage';\nimport StatisticTraffic from './statistic/statistic-traffic';\nimport StatisticUsers from './statistic/statistic-users';\nimport StatisticReport from './statistic/statistic-reports';\n\nimport DesktopDevices from './devices/desktop-devices';\nimport MobileDevices from './devices/mobile-devices';\nimport DeviceErrors from './devices/devices-errors';\n\nimport Users from './users/users';\nimport AdminUsers from './users/admin-users';\nimport LDAPImportedUsers from './users/ldap-imported-users';\nimport LDAPUsers from './users/ldap-users';\nimport SearchUsers from './users/search-users';\nimport User from './users/user-info';\nimport UserOwnedRepos from './users/user-repos';\nimport UserSharedRepos from './users/user-shared-repos';\nimport UserLinks from './users/user-links';\nimport UserGroups from './users/user-groups';\n\nimport AllRepos from './repos/all-repos';\nimport SystemRepo from './repos/system-repo';\nimport TrashRepos from './repos/trash-repos';\nimport SearchRepos from './repos/search-repos';\nimport DirView from './repos/dir-view';\n\nimport Groups from './groups/groups';\nimport SearchGroups from './groups/search-groups';\nimport GroupRepos from './groups/group-repos';\nimport GroupMembers from './groups/group-members';\n\nimport Departments from './departments/departments';\nimport DepartmentList from './departments/department-list';\nimport SubDepartments from './departments/sub-departments';\nimport DepartmentMembers from './departments/department-members';\nimport DepartmentLibraries from './departments/department-libraries';\n\nimport ShareLinks from './links/share-links';\nimport UploadLinks from './links/upload-links';\n\nimport Orgs from './orgs/orgs';\nimport SearchOrgs from './orgs/search-orgs';\nimport OrgInfo from './orgs/org-info';\nimport OrgUsers from './orgs/org-users';\nimport OrgGroups from './orgs/org-groups';\nimport OrgRepos from './orgs/org-repos';\n\nimport Institutions from './institutions/institutions';\nimport InstitutionInfo from './institutions/institution-info';\nimport InstitutionUsers from './institutions/institution-users';\nimport InstitutionAdmins from './institutions/institution-admins';\n\nimport LoginLogs from './logs-page/login-logs';\nimport FileAccessLogs from './logs-page/file-access-logs';\nimport FileUpdateLogs from './logs-page/file-update-logs';\nimport SharePermissionLogs from './logs-page/share-permission-logs';\n\nimport WebSettings from './web-settings/web-settings';\nimport Notifications from './notifications/notifications';\nimport FileScanRecords from './file-scan-records';\nimport WorkWeixinDepartments from './work-weixin-departments';\nimport DingtalkDepartments from './dingtalk-departments';\nimport Invitations from './invitations/invitations';\nimport TermsAndConditions from './terms-and-conditions/terms-and-conditions';\n\nimport AllVirusFiles from './virus-scan/all-virus-files';\nimport UnhandledVirusFiles from './virus-scan/unhandled-virus-files';\n\nimport AdminOperationLogs from './admin-logs/operation-logs';\nimport AdminLoginLogs from './admin-logs/login-logs';\n\nimport AbuseReports from './abuse-reports';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\n\nclass SysAdmin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidePanelClosed: false,\n      currentTab: 'file-scan'\n    };\n  }\n\n  componentDidMount() {\n    let href = window.location.href.split('/');\n    let currentTab = href[href.length - 2];\n\n    const pageList = [\n      {\n        tab: 'devices',\n        urlPartList: ['desktop-devices', 'mobile-devices', 'device-errors']\n      },\n      {\n        tab: 'libraries',\n        urlPartList: ['all-libraries', 'search-libraries', 'system-library', 'trash-libraries', 'libraries/']\n      },\n      {\n        tab: 'statistic',\n        urlPartList: ['statistics/file', 'statistics/storage', 'statistics/user', 'statistics/traffic', 'statistics/reports']\n      },\n      {\n        tab: 'users',\n        urlPartList: ['users/', 'search-users/']\n      },\n      {\n        tab: 'groups',\n        urlPartList: ['groups/', 'search-groups/']\n      },\n      {\n        tab: 'organizations',\n        urlPartList: ['organizations/', 'search-organizations/']\n      },\n      {\n        tab: 'links',\n        urlPartList: ['share-links/', 'upload-links/']\n      },\n      {\n        tab: 'institutions',\n        urlPartList: ['institutions/']\n      },\n      {\n        tab: 'termsandconditions',\n        urlPartList: ['terms-and-conditions/']\n      },\n      {\n        tab: 'departments',\n        urlPartList: ['departments/']\n      },\n      {\n        tab: 'logs',\n        urlPartList: ['logs/']\n      },\n      {\n        tab: 'virus-files',\n        urlPartList: ['virus-files/']\n      },\n      {\n        tab: 'adminLogs',\n        urlPartList: ['admin-logs/']\n      }\n    ];\n    const tmpTab = this.getCurrentTabForPageList(pageList);\n    currentTab = tmpTab ? tmpTab : currentTab;\n\n    this.setState({currentTab: currentTab});\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  getCurrentTabForPageList = (pageList) => {\n    let urlPartList, tab;\n    const urlBase = `${siteRoot}sys/`;\n    for (let i = 0, len = pageList.length; i < len; i++) {\n      urlPartList = pageList[i].urlPartList;\n      tab = pageList[i].tab;\n      for (let j = 0, jlen = urlPartList.length; j < jlen; j++) {\n        if (location.href.indexOf(`${urlBase}${urlPartList[j]}`) != -1) {\n          return tab;\n        }\n      }\n    }\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({isSidePanelClosed: !this.state.isSidePanelClosed});\n  }\n\n  tabItemClick = (param) => {\n    this.setState({currentTab: param});\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    const { currentTab, isSidePanelClosed } = this.state;\n    const commonProps = {\n      toggleSidePanel: this.toggleSidePanel\n    };\n\n    return (\n      <div id=\"main\">\n        <SidePanel\n          isSidePanelClosed={isSidePanelClosed}\n          onCloseSidePanel={this.onCloseSidePanel}\n          currentTab={currentTab}\n          tabItemClick={this.tabItemClick}\n        />\n        <MainPanel>\n          <Router className=\"reach-router\">\n            <Info path={siteRoot + 'sys/info'} {...commonProps} />\n            <StatisticFile path={siteRoot + 'sys/statistics/file'} {...commonProps} />\n            <StatisticStorage path={siteRoot + 'sys/statistics/storage'} {...commonProps} />\n            <StatisticUsers path={siteRoot + 'sys/statistics/user'} {...commonProps} />\n            <StatisticTraffic path={siteRoot + 'sys/statistics/traffic'} {...commonProps} />\n            <StatisticReport path={siteRoot + 'sys/statistics/reports'} {...commonProps} />\n            <DesktopDevices path={siteRoot + 'sys/desktop-devices'} {...commonProps} />\n            <MobileDevices path={siteRoot + 'sys/mobile-devices'} {...commonProps} />\n            <DeviceErrors path={siteRoot + 'sys/device-errors'} {...commonProps} />\n            <AllRepos path={siteRoot + 'sys/all-libraries'} {...commonProps} />\n            <SystemRepo path={siteRoot + 'sys/system-library'} {...commonProps} />\n            <TrashRepos path={siteRoot + 'sys/trash-libraries'} {...commonProps} />\n            <SearchRepos path={siteRoot + 'sys/search-libraries'} {...commonProps} />\n            <DirView path={siteRoot + 'sys/libraries/:repoID/*'} {...commonProps} />\n            <WebSettings path={siteRoot + 'sys/web-settings'} {...commonProps} />\n            <Notifications path={siteRoot + 'sys/notifications'} {...commonProps} />\n            <Groups path={siteRoot + 'sys/groups'} {...commonProps} />\n            <SearchGroups path={siteRoot + 'sys/search-groups'} {...commonProps} />\n            <GroupRepos path={siteRoot + 'sys/groups/:groupID/libraries'} {...commonProps} />\n            <GroupMembers path={siteRoot + 'sys/groups/:groupID/members'} {...commonProps} />\n            <Departments path={siteRoot + 'sys/departments'}>\n              <DepartmentList path='/' {...commonProps} />\n              <SubDepartments path='/:groupID' {...commonProps} />\n              <DepartmentMembers path='/:groupID/members' {...commonProps} />\n              <DepartmentLibraries path='/:groupID/libraries' {...commonProps} />\n            </Departments>\n            <ShareLinks path={siteRoot + 'sys/share-links'} {...commonProps} />\n            <UploadLinks path={siteRoot + 'sys/upload-links'} {...commonProps} />\n            <Orgs path={siteRoot + 'sys/organizations'} {...commonProps} />\n            <SearchOrgs path={siteRoot + 'sys/search-organizations'} {...commonProps} />\n            <OrgInfo path={siteRoot + 'sys/organizations/:orgID/info'} {...commonProps} />\n            <OrgUsers path={siteRoot + 'sys/organizations/:orgID/users'} {...commonProps} />\n            <OrgGroups path={siteRoot + 'sys/organizations/:orgID/groups'} {...commonProps} />\n            <OrgRepos path={siteRoot + 'sys/organizations/:orgID/libraries'} {...commonProps} />\n            <Institutions path={siteRoot + 'sys/institutions'} {...commonProps} />\n            <InstitutionInfo path={siteRoot + 'sys/institutions/:institutionID/info'} {...commonProps} />\n            <InstitutionUsers path={siteRoot + 'sys/institutions/:institutionID/members'} {...commonProps} />\n            <InstitutionAdmins path={siteRoot + 'sys/institutions/:institutionID/admins'} {...commonProps} />\n            <LoginLogs path={siteRoot + 'sys/logs/login'} {...commonProps} />\n            <FileAccessLogs path={siteRoot + 'sys/logs/file-access'} {...commonProps} />\n            <FileUpdateLogs path={siteRoot + 'sys/logs/file-update'} {...commonProps} />\n            <SharePermissionLogs path={siteRoot + 'sys/logs/share-permission'} {...commonProps} />\n            <AdminOperationLogs path={siteRoot + 'sys/admin-logs/operation'} {...commonProps} />\n            <AdminLoginLogs path={siteRoot + 'sys/admin-logs/login'} {...commonProps} />\n\n            <Users path={siteRoot + 'sys/users'} {...commonProps} />\n            <AdminUsers path={siteRoot + 'sys/users/admins'} {...commonProps} />\n            <LDAPImportedUsers path={siteRoot + 'sys/users/ldap-imported'} {...commonProps} />\n            <LDAPUsers path={siteRoot + 'sys/users/ldap'} {...commonProps} />\n            <SearchUsers path={siteRoot + 'sys/search-users'} {...commonProps} />\n            <User path={siteRoot + 'sys/users/:email'} {...commonProps} />\n            <UserOwnedRepos path={siteRoot + 'sys/users/:email/owned-libraries'} {...commonProps} />\n            <UserSharedRepos path={siteRoot + 'sys/users/:email/shared-libraries'} {...commonProps} />\n            <UserLinks path={siteRoot + 'sys/users/:email/shared-links'} {...commonProps} />\n            <UserGroups path={siteRoot + 'sys/users/:email/groups'} {...commonProps} />\n\n            <Invitations path={siteRoot + 'sys/invitations'} {...commonProps} />\n            <TermsAndConditions path={siteRoot + 'sys/terms-and-conditions/'} {...commonProps} />\n\n            <AllVirusFiles path={siteRoot + 'sys/virus-files/all'} {...commonProps} />\n            <UnhandledVirusFiles path={siteRoot + 'sys/virus-files/unhandled'} {...commonProps} />\n\n            <FileScanRecords path={siteRoot + 'sys/file-scan-records'} {...commonProps} />\n            <WorkWeixinDepartments path={siteRoot + 'sys/work-weixin'} {...commonProps} />\n            <DingtalkDepartments path={siteRoot + 'sys/dingtalk'} {...commonProps} />\n            <AbuseReports path={siteRoot + 'sys/abuse-reports'} {...commonProps} />\n          </Router>\n        </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SysAdmin />, document.getElementById('wrapper'));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport '../../css/commit-details.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  commitID: PropTypes.string.isRequired,\n  commitTime: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass CommitDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    const {repoID, commitID} = this.props;\n    seafileAPI.getCommitDetails(repoID, commitID).then((res) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        commitDetails: res.data\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  render() {\n    const { toggleDialog, commitTime} = this.props;\n    return (\n      <Modal isOpen={true} centered={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Modification Details')}</ModalHeader>\n        <ModalBody>\n          <p className=\"small\">{moment(this.props.commitTime).format('YYYY-MM-DD HH:mm:ss')}</p>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  renderDetails = (data) => {\n    const detailsData = [\n      {type: 'new', title: gettext('New files')},\n      {type: 'removed', title: gettext('Deleted files')},\n      {type: 'renamed', title: gettext('Renamed or Moved files')},\n      {type: 'modified', title: gettext('Modified files')},\n      {type: 'newdir', title: gettext('New directories')},\n      {type: 'deldir', title: gettext('Deleted directories')}\n    ];\n\n    let showDesc = true;\n    for (let i = 0, len = detailsData.length; i < len; i++) {\n      if (data[detailsData[i].type].length) {\n        showDesc = false;\n        break;\n      }\n    }\n    if (showDesc) {\n      return <p>{data.cmt_desc}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        {detailsData.map((item, index) => {\n          if (!data[item.type].length) {\n            return;\n          }\n          return (\n            <React.Fragment key={index}>\n              <h6>{item.title}</h6>\n              <ul>\n                {\n                  data[item.type].map((item, index) => {\n                    return <li key={index} dangerouslySetInnerHTML={{__html: item}} className=\"commit-detail-item\"></li>;\n                  })\n                }\n              </ul>\n            </React.Fragment>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const {isLoading, errorMsg, commitDetails} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return this.renderDetails(commitDetails);\n  }\n}\n\nCommitDetails.propTypes = propTypes;\n\nexport default CommitDetails;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Chart\", {\n  enumerable: true,\n  get: function get() {\n    return _chart[\"default\"];\n  }\n});\nexports.defaults = exports.Scatter = exports.Bubble = exports.Polar = exports.Radar = exports.HorizontalBar = exports.Bar = exports.Line = exports.Pie = exports.Doughnut = exports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _chart = _interopRequireDefault(require(\"chart.js\"));\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _keyBy = _interopRequireDefault(require(\"lodash/keyBy\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar NODE_ENV = typeof process !== 'undefined' && process.env && process.env.NODE_ENV;\n\nvar ChartComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(ChartComponent, _React$Component);\n\n  var _super = _createSuper(ChartComponent);\n\n  function ChartComponent() {\n    var _this;\n\n    _classCallCheck(this, ChartComponent);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnClick\", function (event) {\n      var instance = _this.chartInstance;\n      var _this$props = _this.props,\n          getDatasetAtEvent = _this$props.getDatasetAtEvent,\n          getElementAtEvent = _this$props.getElementAtEvent,\n          getElementsAtEvent = _this$props.getElementsAtEvent,\n          onElementsClick = _this$props.onElementsClick;\n      getDatasetAtEvent && getDatasetAtEvent(instance.getDatasetAtEvent(event), event);\n      getElementAtEvent && getElementAtEvent(instance.getElementAtEvent(event), event);\n      getElementsAtEvent && getElementsAtEvent(instance.getElementsAtEvent(event), event);\n      onElementsClick && onElementsClick(instance.getElementsAtEvent(event), event); // Backward compatibility\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", function (element) {\n      _this.element = element;\n    });\n\n    _this.chartInstance = undefined;\n    return _this;\n  }\n\n  _createClass(ChartComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.renderChart();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.redraw) {\n        this.destroyChart();\n        this.renderChart();\n        return;\n      }\n\n      this.updateChart();\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var _this$props2 = this.props,\n          redraw = _this$props2.redraw,\n          type = _this$props2.type,\n          options = _this$props2.options,\n          plugins = _this$props2.plugins,\n          legend = _this$props2.legend,\n          height = _this$props2.height,\n          width = _this$props2.width;\n\n      if (nextProps.redraw === true) {\n        return true;\n      }\n\n      if (height !== nextProps.height || width !== nextProps.width) {\n        return true;\n      }\n\n      if (type !== nextProps.type) {\n        return true;\n      }\n\n      if (!(0, _isEqual[\"default\"])(legend, nextProps.legend)) {\n        return true;\n      }\n\n      if (!(0, _isEqual[\"default\"])(options, nextProps.options)) {\n        return true;\n      }\n\n      var nextData = this.transformDataProp(nextProps);\n\n      if (!(0, _isEqual[\"default\"])(this.shadowDataProp, nextData)) {\n        return true;\n      }\n\n      return !(0, _isEqual[\"default\"])(plugins, nextProps.plugins);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyChart();\n    }\n  }, {\n    key: \"transformDataProp\",\n    value: function transformDataProp(props) {\n      var data = props.data;\n\n      if (typeof data == 'function') {\n        var node = this.element;\n        return data(node);\n      } else {\n        return data;\n      }\n    } // Chart.js directly mutates the data.dataset objects by adding _meta proprerty\n    // this makes impossible to compare the current and next data changes\n    // therefore we memoize the data prop while sending a fake to Chart.js for mutation.\n    // see https://github.com/chartjs/Chart.js/blob/master/src/core/core.controller.js#L615-L617\n\n  }, {\n    key: \"memoizeDataProps\",\n    value: function memoizeDataProps() {\n      if (!this.props.data) {\n        return;\n      }\n\n      var data = this.transformDataProp(this.props);\n      this.shadowDataProp = _objectSpread(_objectSpread({}, data), {}, {\n        datasets: data.datasets && data.datasets.map(function (set) {\n          return _objectSpread({}, set);\n        })\n      });\n      this.saveCurrentDatasets(); // to remove the dataset metadata from this chart when the chart is destroyed\n\n      return data;\n    }\n  }, {\n    key: \"checkDatasets\",\n    value: function checkDatasets(datasets) {\n      var isDev = NODE_ENV !== 'production' && NODE_ENV !== 'prod';\n      var usingCustomKeyProvider = this.props.datasetKeyProvider !== ChartComponent.getLabelAsKey;\n      var multipleDatasets = datasets.length > 1;\n\n      if (isDev && multipleDatasets && !usingCustomKeyProvider) {\n        var shouldWarn = false;\n        datasets.forEach(function (dataset) {\n          if (!dataset.label) {\n            shouldWarn = true;\n          }\n        });\n\n        if (shouldWarn) {\n          console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the \"label\" property on each dataset is used. Alternatively, you may provide a \"datasetKeyProvider\" as a prop that returns a unique key.');\n        }\n      }\n    }\n  }, {\n    key: \"getCurrentDatasets\",\n    value: function getCurrentDatasets() {\n      return this.chartInstance && this.chartInstance.config.data && this.chartInstance.config.data.datasets || [];\n    }\n  }, {\n    key: \"saveCurrentDatasets\",\n    value: function saveCurrentDatasets() {\n      var _this2 = this;\n\n      this.datasets = this.datasets || {};\n      var currentDatasets = this.getCurrentDatasets();\n      currentDatasets.forEach(function (d) {\n        _this2.datasets[_this2.props.datasetKeyProvider(d)] = d;\n      });\n    }\n  }, {\n    key: \"updateChart\",\n    value: function updateChart() {\n      var _this3 = this;\n\n      var options = this.props.options;\n      var data = this.memoizeDataProps(this.props);\n      if (!this.chartInstance) return;\n\n      if (options) {\n        this.chartInstance.options = _chart[\"default\"].helpers.configMerge(this.chartInstance.options, options);\n      } // Pipe datasets to chart instance datasets enabling\n      // seamless transitions\n\n\n      var currentDatasets = this.getCurrentDatasets();\n      var nextDatasets = data.datasets || [];\n      this.checkDatasets(currentDatasets);\n      var currentDatasetsIndexed = (0, _keyBy[\"default\"])(currentDatasets, this.props.datasetKeyProvider); // We can safely replace the dataset array, as long as we retain the _meta property\n      // on each dataset.\n\n      this.chartInstance.config.data.datasets = nextDatasets.map(function (next) {\n        var current = currentDatasetsIndexed[_this3.props.datasetKeyProvider(next)];\n\n        if (current && current.type === next.type && next.data) {\n          // Be robust to no data. Relevant for other update mechanisms as in chartjs-plugin-streaming.\n          // The data array must be edited in place. As chart.js adds listeners to it.\n          current.data.splice(next.data.length);\n          next.data.forEach(function (point, pid) {\n            current.data[pid] = next.data[pid];\n          });\n\n          var _data = next.data,\n              otherProps = _objectWithoutProperties(next, [\"data\"]); // Merge properties. Notice a weakness here. If a property is removed\n          // from next, it will be retained by current and never disappears.\n          // Workaround is to set value to null or undefined in next.\n\n\n          return _objectSpread(_objectSpread({}, current), otherProps);\n        } else {\n          return next;\n        }\n      });\n\n      var datasets = data.datasets,\n          rest = _objectWithoutProperties(data, [\"datasets\"]);\n\n      this.chartInstance.config.data = _objectSpread(_objectSpread({}, this.chartInstance.config.data), rest);\n      this.chartInstance.update();\n    }\n  }, {\n    key: \"renderChart\",\n    value: function renderChart() {\n      var _this$props3 = this.props,\n          options = _this$props3.options,\n          legend = _this$props3.legend,\n          type = _this$props3.type,\n          plugins = _this$props3.plugins;\n      var node = this.element;\n      var data = this.memoizeDataProps();\n\n      if (typeof legend !== 'undefined' && !(0, _isEqual[\"default\"])(ChartComponent.defaultProps.legend, legend)) {\n        options.legend = legend;\n      }\n\n      this.chartInstance = new _chart[\"default\"](node, {\n        type: type,\n        data: data,\n        options: options,\n        plugins: plugins\n      });\n    }\n  }, {\n    key: \"destroyChart\",\n    value: function destroyChart() {\n      if (!this.chartInstance) {\n        return;\n      } // Put all of the datasets that have existed in the chart back on the chart\n      // so that the metadata associated with this chart get destroyed.\n      // This allows the datasets to be used in another chart. This can happen,\n      // for example, in a tabbed UI where the chart gets created each time the\n      // tab gets switched to the chart and uses the same data).\n\n\n      this.saveCurrentDatasets();\n      var datasets = Object.values(this.datasets);\n      this.chartInstance.config.data.datasets = datasets;\n      this.chartInstance.destroy();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          height = _this$props4.height,\n          width = _this$props4.width,\n          id = _this$props4.id;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"canvas\", {\n        ref: this.ref,\n        height: height,\n        width: width,\n        id: id,\n        onClick: this.handleOnClick\n      });\n    }\n  }]);\n\n  return ChartComponent;\n}(_react[\"default\"].Component);\n\n_defineProperty(ChartComponent, \"getLabelAsKey\", function (d) {\n  return d.label;\n});\n\n_defineProperty(ChartComponent, \"propTypes\", {\n  data: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].func]).isRequired,\n  getDatasetAtEvent: _propTypes[\"default\"].func,\n  getElementAtEvent: _propTypes[\"default\"].func,\n  getElementsAtEvent: _propTypes[\"default\"].func,\n  height: _propTypes[\"default\"].number,\n  legend: _propTypes[\"default\"].object,\n  onElementsClick: _propTypes[\"default\"].func,\n  options: _propTypes[\"default\"].object,\n  plugins: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].object),\n  redraw: _propTypes[\"default\"].bool,\n  type: function type(props, propName, componentName) {\n    if (!_chart[\"default\"].controllers[props[propName]]) {\n      return new Error('Invalid chart type `' + props[propName] + '` supplied to' + ' `' + componentName + '`.');\n    }\n  },\n  width: _propTypes[\"default\"].number,\n  datasetKeyProvider: _propTypes[\"default\"].func\n});\n\n_defineProperty(ChartComponent, \"defaultProps\", {\n  legend: {\n    display: true,\n    position: 'bottom'\n  },\n  type: 'doughnut',\n  height: 150,\n  width: 300,\n  redraw: false,\n  options: {},\n  datasetKeyProvider: ChartComponent.getLabelAsKey\n});\n\nvar _default = ChartComponent;\nexports[\"default\"] = _default;\n\nvar Doughnut = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Doughnut, _React$Component2);\n\n  var _super2 = _createSuper(Doughnut);\n\n  function Doughnut() {\n    _classCallCheck(this, Doughnut);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(Doughnut, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref) {\n          return _this4.chartInstance = _ref && _ref.chartInstance;\n        },\n        type: \"doughnut\"\n      }));\n    }\n  }]);\n\n  return Doughnut;\n}(_react[\"default\"].Component);\n\nexports.Doughnut = Doughnut;\n\nvar Pie = /*#__PURE__*/function (_React$Component3) {\n  _inherits(Pie, _React$Component3);\n\n  var _super3 = _createSuper(Pie);\n\n  function Pie() {\n    _classCallCheck(this, Pie);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Pie, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref2) {\n          return _this5.chartInstance = _ref2 && _ref2.chartInstance;\n        },\n        type: \"pie\"\n      }));\n    }\n  }]);\n\n  return Pie;\n}(_react[\"default\"].Component);\n\nexports.Pie = Pie;\n\nvar Line = /*#__PURE__*/function (_React$Component4) {\n  _inherits(Line, _React$Component4);\n\n  var _super4 = _createSuper(Line);\n\n  function Line() {\n    _classCallCheck(this, Line);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(Line, [{\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref3) {\n          return _this6.chartInstance = _ref3 && _ref3.chartInstance;\n        },\n        type: \"line\"\n      }));\n    }\n  }]);\n\n  return Line;\n}(_react[\"default\"].Component);\n\nexports.Line = Line;\n\nvar Bar = /*#__PURE__*/function (_React$Component5) {\n  _inherits(Bar, _React$Component5);\n\n  var _super5 = _createSuper(Bar);\n\n  function Bar() {\n    _classCallCheck(this, Bar);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(Bar, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref4) {\n          return _this7.chartInstance = _ref4 && _ref4.chartInstance;\n        },\n        type: \"bar\"\n      }));\n    }\n  }]);\n\n  return Bar;\n}(_react[\"default\"].Component);\n\nexports.Bar = Bar;\n\nvar HorizontalBar = /*#__PURE__*/function (_React$Component6) {\n  _inherits(HorizontalBar, _React$Component6);\n\n  var _super6 = _createSuper(HorizontalBar);\n\n  function HorizontalBar() {\n    _classCallCheck(this, HorizontalBar);\n\n    return _super6.apply(this, arguments);\n  }\n\n  _createClass(HorizontalBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref5) {\n          return _this8.chartInstance = _ref5 && _ref5.chartInstance;\n        },\n        type: \"horizontalBar\"\n      }));\n    }\n  }]);\n\n  return HorizontalBar;\n}(_react[\"default\"].Component);\n\nexports.HorizontalBar = HorizontalBar;\n\nvar Radar = /*#__PURE__*/function (_React$Component7) {\n  _inherits(Radar, _React$Component7);\n\n  var _super7 = _createSuper(Radar);\n\n  function Radar() {\n    _classCallCheck(this, Radar);\n\n    return _super7.apply(this, arguments);\n  }\n\n  _createClass(Radar, [{\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref6) {\n          return _this9.chartInstance = _ref6 && _ref6.chartInstance;\n        },\n        type: \"radar\"\n      }));\n    }\n  }]);\n\n  return Radar;\n}(_react[\"default\"].Component);\n\nexports.Radar = Radar;\n\nvar Polar = /*#__PURE__*/function (_React$Component8) {\n  _inherits(Polar, _React$Component8);\n\n  var _super8 = _createSuper(Polar);\n\n  function Polar() {\n    _classCallCheck(this, Polar);\n\n    return _super8.apply(this, arguments);\n  }\n\n  _createClass(Polar, [{\n    key: \"render\",\n    value: function render() {\n      var _this10 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref7) {\n          return _this10.chartInstance = _ref7 && _ref7.chartInstance;\n        },\n        type: \"polarArea\"\n      }));\n    }\n  }]);\n\n  return Polar;\n}(_react[\"default\"].Component);\n\nexports.Polar = Polar;\n\nvar Bubble = /*#__PURE__*/function (_React$Component9) {\n  _inherits(Bubble, _React$Component9);\n\n  var _super9 = _createSuper(Bubble);\n\n  function Bubble() {\n    _classCallCheck(this, Bubble);\n\n    return _super9.apply(this, arguments);\n  }\n\n  _createClass(Bubble, [{\n    key: \"render\",\n    value: function render() {\n      var _this11 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref8) {\n          return _this11.chartInstance = _ref8 && _ref8.chartInstance;\n        },\n        type: \"bubble\"\n      }));\n    }\n  }]);\n\n  return Bubble;\n}(_react[\"default\"].Component);\n\nexports.Bubble = Bubble;\n\nvar Scatter = /*#__PURE__*/function (_React$Component10) {\n  _inherits(Scatter, _React$Component10);\n\n  var _super10 = _createSuper(Scatter);\n\n  function Scatter() {\n    _classCallCheck(this, Scatter);\n\n    return _super10.apply(this, arguments);\n  }\n\n  _createClass(Scatter, [{\n    key: \"render\",\n    value: function render() {\n      var _this12 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref9) {\n          return _this12.chartInstance = _ref9 && _ref9.chartInstance;\n        },\n        type: \"scatter\"\n      }));\n    }\n  }]);\n\n  return Scatter;\n}(_react[\"default\"].Component);\n\nexports.Scatter = Scatter;\nvar defaults = _chart[\"default\"].defaults;\nexports.defaults = defaults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro } from '../../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  unlinkDevice: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminUnlinkDevice extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputChecked: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      inputChecked: e.target.checked\n    });\n  }\n\n  unlinkDevice = () => {\n    this.props.toggleDialog();\n    this.props.unlinkDevice(this.state.inputChecked);\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n    const toggle = this.props.toggleDialog;\n    return (\n      <Modal isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          {isPro &&\n          <div className=\"d-flex align-items-center\">\n            <input id=\"delete-files\" className=\"mr-1\" type=\"checkbox\" checked={inputChecked} onChange={this.handleInputChange} />\n            <label htmlFor=\"delete-files\" className=\"m-0\">{gettext('Delete files from this device the next time it comes online.')}</label>\n          </div>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.unlinkDevice}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminUnlinkDevice.propTypes = propTypes;\n\nexport default SysAdminUnlinkDevice;\n","/*!\n * Chart.js v2.9.4\n * https://www.chartjs.org\n * (c) 2020 Chart.js Contributors\n * Released under the MIT License\n */\n(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(function() { try { return require('moment'); } catch(e) { } }()) :\ntypeof define === 'function' && define.amd ? define(['require'], function(require) { return factory(function() { try { return require('moment'); } catch(e) { } }()); }) :\n(global = global || self, global.Chart = factory(global.moment));\n}(this, (function (moment) { 'use strict';\n\nmoment = moment && moment.hasOwnProperty('default') ? moment['default'] : moment;\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nfunction getCjsExportFromNamespace (n) {\n\treturn n && n['default'] || n;\n}\n\nvar colorName = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\n\nvar conversions = createCommonjsModule(function (module) {\n/* MIT license */\n\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nvar reverseKeywords = {};\nfor (var key in colorName) {\n\tif (colorName.hasOwnProperty(key)) {\n\t\treverseKeywords[colorName[key]] = key;\n\t}\n}\n\nvar convert = module.exports = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\n// hide .channels and .labels properties\nfor (var model in convert) {\n\tif (convert.hasOwnProperty(model)) {\n\t\tif (!('channels' in convert[model])) {\n\t\t\tthrow new Error('missing channels property: ' + model);\n\t\t}\n\n\t\tif (!('labels' in convert[model])) {\n\t\t\tthrow new Error('missing channel labels property: ' + model);\n\t\t}\n\n\t\tif (convert[model].labels.length !== convert[model].channels) {\n\t\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t\t}\n\n\t\tvar channels = convert[model].channels;\n\t\tvar labels = convert[model].labels;\n\t\tdelete convert[model].channels;\n\t\tdelete convert[model].labels;\n\t\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\t\tObject.defineProperty(convert[model], 'labels', {value: labels});\n\t}\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar l;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tvar rdif;\n\tvar gdif;\n\tvar bdif;\n\tvar h;\n\tvar s;\n\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar v = Math.max(r, g, b);\n\tvar diff = v - Math.min(r, g, b);\n\tvar diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = s = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar h = convert.rgb.hsl(rgb)[0];\n\tvar w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar c;\n\tvar m;\n\tvar y;\n\tvar k;\n\n\tk = Math.min(1 - r, 1 - g, 1 - b);\n\tc = (1 - r - k) / (1 - k) || 0;\n\tm = (1 - g - k) / (1 - k) || 0;\n\ty = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\nfunction comparativeDistance(x, y) {\n\treturn (\n\t\tMath.pow(x[0] - y[0], 2) +\n\t\tMath.pow(x[1] - y[1], 2) +\n\t\tMath.pow(x[2] - y[2], 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tvar reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tvar currentClosestDistance = Infinity;\n\tvar currentClosestKeyword;\n\n\tfor (var keyword in colorName) {\n\t\tif (colorName.hasOwnProperty(keyword)) {\n\t\t\tvar value = colorName[keyword];\n\n\t\t\t// Compute comparative distance\n\t\t\tvar distance = comparativeDistance(rgb, value);\n\n\t\t\t// Check if its less, if so set as closest\n\t\t\tif (distance < currentClosestDistance) {\n\t\t\t\tcurrentClosestDistance = distance;\n\t\t\t\tcurrentClosestKeyword = keyword;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn colorName[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tvar y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tvar z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tvar xyz = convert.rgb.xyz(rgb);\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tvar h = hsl[0] / 360;\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar t1;\n\tvar t2;\n\tvar t3;\n\tvar rgb;\n\tvar val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tt1 = 2 * l - t2;\n\n\trgb = [0, 0, 0];\n\tfor (var i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tvar h = hsl[0];\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar smin = s;\n\tvar lmin = Math.max(l, 0.01);\n\tvar sv;\n\tvar v;\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tv = (l + s) / 2;\n\tsv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tvar h = hsv[0] / 60;\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar hi = Math.floor(h) % 6;\n\n\tvar f = h - Math.floor(h);\n\tvar p = 255 * v * (1 - s);\n\tvar q = 255 * v * (1 - (s * f));\n\tvar t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tvar h = hsv[0];\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar vmin = Math.max(v, 0.01);\n\tvar lmin;\n\tvar sl;\n\tvar l;\n\n\tl = (2 - s) * v;\n\tlmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tvar h = hwb[0] / 360;\n\tvar wh = hwb[1] / 100;\n\tvar bl = hwb[2] / 100;\n\tvar ratio = wh + bl;\n\tvar i;\n\tvar v;\n\tvar f;\n\tvar n;\n\n\t// wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\ti = Math.floor(6 * h);\n\tv = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tn = wh + f * (v - wh); // linear interpolation\n\n\tvar r;\n\tvar g;\n\tvar b;\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v; g = n; b = wh; break;\n\t\tcase 1: r = n; g = v; b = wh; break;\n\t\tcase 2: r = wh; g = v; b = n; break;\n\t\tcase 3: r = wh; g = n; b = v; break;\n\t\tcase 4: r = n; g = wh; b = v; break;\n\t\tcase 5: r = v; g = wh; b = n; break;\n\t}\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tvar c = cmyk[0] / 100;\n\tvar m = cmyk[1] / 100;\n\tvar y = cmyk[2] / 100;\n\tvar k = cmyk[3] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = 1 - Math.min(1, c * (1 - k) + k);\n\tg = 1 - Math.min(1, m * (1 - k) + k);\n\tb = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tvar x = xyz[0] / 100;\n\tvar y = xyz[1] / 100;\n\tvar z = xyz[2] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar x;\n\tvar y;\n\tvar z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tvar y2 = Math.pow(y, 3);\n\tvar x2 = Math.pow(x, 3);\n\tvar z2 = Math.pow(z, 3);\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar hr;\n\tvar h;\n\tvar c;\n\n\thr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tc = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tvar l = lch[0];\n\tvar c = lch[1];\n\tvar h = lch[2];\n\tvar a;\n\tvar b;\n\tvar hr;\n\n\thr = h / 360 * 2 * Math.PI;\n\ta = c * Math.cos(hr);\n\tb = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\tvar value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tvar ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\n\t// we use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tvar ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tvar color = args % 10;\n\n\t// handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tvar mult = (~~(args > 50) + 1) * 0.5;\n\tvar r = ((color & 1) * mult) * 255;\n\tvar g = (((color >> 1) & 1) * mult) * 255;\n\tvar b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// handle greyscale\n\tif (args >= 232) {\n\t\tvar c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tvar rem;\n\tvar r = Math.floor(args / 36) / 5 * 255;\n\tvar g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tvar b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tvar integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tvar match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tvar colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(function (char) {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tvar integer = parseInt(colorString, 16);\n\tvar r = (integer >> 16) & 0xFF;\n\tvar g = (integer >> 8) & 0xFF;\n\tvar b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar max = Math.max(Math.max(r, g), b);\n\tvar min = Math.min(Math.min(r, g), b);\n\tvar chroma = (max - min);\n\tvar grayscale;\n\tvar hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma + 4;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar c = 1;\n\tvar f = 0;\n\n\tif (l < 0.5) {\n\t\tc = 2.0 * s * l;\n\t} else {\n\t\tc = 2.0 * s * (1.0 - l);\n\t}\n\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\n\tvar c = s * v;\n\tvar f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tvar h = hcg[0] / 360;\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tvar pure = [0, 0, 0];\n\tvar hi = (h % 1) * 6;\n\tvar v = hi % 1;\n\tvar w = 1 - v;\n\tvar mg = 0;\n\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar v = c + g * (1.0 - c);\n\tvar f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar l = g * (1.0 - c) + 0.5 * c;\n\tvar s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\tvar v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tvar w = hwb[1] / 100;\n\tvar b = hwb[2] / 100;\n\tvar v = 1 - b;\n\tvar c = v - w;\n\tvar g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tvar val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tvar integer = (val << 16) + (val << 8) + val;\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tvar val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n});\nvar conversions_1 = conversions.rgb;\nvar conversions_2 = conversions.hsl;\nvar conversions_3 = conversions.hsv;\nvar conversions_4 = conversions.hwb;\nvar conversions_5 = conversions.cmyk;\nvar conversions_6 = conversions.xyz;\nvar conversions_7 = conversions.lab;\nvar conversions_8 = conversions.lch;\nvar conversions_9 = conversions.hex;\nvar conversions_10 = conversions.keyword;\nvar conversions_11 = conversions.ansi16;\nvar conversions_12 = conversions.ansi256;\nvar conversions_13 = conversions.hcg;\nvar conversions_14 = conversions.apple;\nvar conversions_15 = conversions.gray;\n\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tvar graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tvar models = Object.keys(conversions);\n\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tvar graph = buildGraph();\n\tvar queue = [fromModel]; // unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tvar current = queue.pop();\n\t\tvar adjacents = Object.keys(conversions[current]);\n\n\t\tfor (var len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tvar adjacent = adjacents[i];\n\t\t\tvar node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tvar path = [graph[toModel].parent, toModel];\n\tvar fn = conversions[graph[toModel].parent][toModel];\n\n\tvar cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nvar route = function (fromModel) {\n\tvar graph = deriveBFS(fromModel);\n\tvar conversion = {};\n\n\tvar models = Object.keys(graph);\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tvar toModel = models[i];\n\t\tvar node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// no possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\nvar convert = {};\n\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\tvar result = fn(args);\n\n\t\t// we're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (var len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tvar routes = route(fromModel);\n\tvar routeModels = Object.keys(routes);\n\n\trouteModels.forEach(function (toModel) {\n\t\tvar fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nvar colorConvert = convert;\n\nvar colorName$1 = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\n\n/* MIT license */\n\n\nvar colorString = {\n   getRgba: getRgba,\n   getHsla: getHsla,\n   getRgb: getRgb,\n   getHsl: getHsl,\n   getHwb: getHwb,\n   getAlpha: getAlpha,\n\n   hexString: hexString,\n   rgbString: rgbString,\n   rgbaString: rgbaString,\n   percentString: percentString,\n   percentaString: percentaString,\n   hslString: hslString,\n   hslaString: hslaString,\n   hwbString: hwbString,\n   keyword: keyword\n};\n\nfunction getRgba(string) {\n   if (!string) {\n      return;\n   }\n   var abbr =  /^#([a-fA-F0-9]{3,4})$/i,\n       hex =  /^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,\n       rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/i,\n       per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/i,\n       keyword = /(\\w+)/;\n\n   var rgb = [0, 0, 0],\n       a = 1,\n       match = string.match(abbr),\n       hexAlpha = \"\";\n   if (match) {\n      match = match[1];\n      hexAlpha = match[3];\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match[i] + match[i], 16);\n      }\n      if (hexAlpha) {\n         a = Math.round((parseInt(hexAlpha + hexAlpha, 16) / 255) * 100) / 100;\n      }\n   }\n   else if (match = string.match(hex)) {\n      hexAlpha = match[2];\n      match = match[1];\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match.slice(i * 2, i * 2 + 2), 16);\n      }\n      if (hexAlpha) {\n         a = Math.round((parseInt(hexAlpha, 16) / 255) * 100) / 100;\n      }\n   }\n   else if (match = string.match(rgba)) {\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match[i + 1]);\n      }\n      a = parseFloat(match[4]);\n   }\n   else if (match = string.match(per)) {\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n      }\n      a = parseFloat(match[4]);\n   }\n   else if (match = string.match(keyword)) {\n      if (match[1] == \"transparent\") {\n         return [0, 0, 0, 0];\n      }\n      rgb = colorName$1[match[1]];\n      if (!rgb) {\n         return;\n      }\n   }\n\n   for (var i = 0; i < rgb.length; i++) {\n      rgb[i] = scale(rgb[i], 0, 255);\n   }\n   if (!a && a != 0) {\n      a = 1;\n   }\n   else {\n      a = scale(a, 0, 1);\n   }\n   rgb[3] = a;\n   return rgb;\n}\n\nfunction getHsla(string) {\n   if (!string) {\n      return;\n   }\n   var hsl = /^hsla?\\(\\s*([+-]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)/;\n   var match = string.match(hsl);\n   if (match) {\n      var alpha = parseFloat(match[4]);\n      var h = scale(parseInt(match[1]), 0, 360),\n          s = scale(parseFloat(match[2]), 0, 100),\n          l = scale(parseFloat(match[3]), 0, 100),\n          a = scale(isNaN(alpha) ? 1 : alpha, 0, 1);\n      return [h, s, l, a];\n   }\n}\n\nfunction getHwb(string) {\n   if (!string) {\n      return;\n   }\n   var hwb = /^hwb\\(\\s*([+-]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)/;\n   var match = string.match(hwb);\n   if (match) {\n    var alpha = parseFloat(match[4]);\n      var h = scale(parseInt(match[1]), 0, 360),\n          w = scale(parseFloat(match[2]), 0, 100),\n          b = scale(parseFloat(match[3]), 0, 100),\n          a = scale(isNaN(alpha) ? 1 : alpha, 0, 1);\n      return [h, w, b, a];\n   }\n}\n\nfunction getRgb(string) {\n   var rgba = getRgba(string);\n   return rgba && rgba.slice(0, 3);\n}\n\nfunction getHsl(string) {\n  var hsla = getHsla(string);\n  return hsla && hsla.slice(0, 3);\n}\n\nfunction getAlpha(string) {\n   var vals = getRgba(string);\n   if (vals) {\n      return vals[3];\n   }\n   else if (vals = getHsla(string)) {\n      return vals[3];\n   }\n   else if (vals = getHwb(string)) {\n      return vals[3];\n   }\n}\n\n// generators\nfunction hexString(rgba, a) {\n   var a = (a !== undefined && rgba.length === 3) ? a : rgba[3];\n   return \"#\" + hexDouble(rgba[0]) \n              + hexDouble(rgba[1])\n              + hexDouble(rgba[2])\n              + (\n                 (a >= 0 && a < 1)\n                 ? hexDouble(Math.round(a * 255))\n                 : \"\"\n              );\n}\n\nfunction rgbString(rgba, alpha) {\n   if (alpha < 1 || (rgba[3] && rgba[3] < 1)) {\n      return rgbaString(rgba, alpha);\n   }\n   return \"rgb(\" + rgba[0] + \", \" + rgba[1] + \", \" + rgba[2] + \")\";\n}\n\nfunction rgbaString(rgba, alpha) {\n   if (alpha === undefined) {\n      alpha = (rgba[3] !== undefined ? rgba[3] : 1);\n   }\n   return \"rgba(\" + rgba[0] + \", \" + rgba[1] + \", \" + rgba[2]\n           + \", \" + alpha + \")\";\n}\n\nfunction percentString(rgba, alpha) {\n   if (alpha < 1 || (rgba[3] && rgba[3] < 1)) {\n      return percentaString(rgba, alpha);\n   }\n   var r = Math.round(rgba[0]/255 * 100),\n       g = Math.round(rgba[1]/255 * 100),\n       b = Math.round(rgba[2]/255 * 100);\n\n   return \"rgb(\" + r + \"%, \" + g + \"%, \" + b + \"%)\";\n}\n\nfunction percentaString(rgba, alpha) {\n   var r = Math.round(rgba[0]/255 * 100),\n       g = Math.round(rgba[1]/255 * 100),\n       b = Math.round(rgba[2]/255 * 100);\n   return \"rgba(\" + r + \"%, \" + g + \"%, \" + b + \"%, \" + (alpha || rgba[3] || 1) + \")\";\n}\n\nfunction hslString(hsla, alpha) {\n   if (alpha < 1 || (hsla[3] && hsla[3] < 1)) {\n      return hslaString(hsla, alpha);\n   }\n   return \"hsl(\" + hsla[0] + \", \" + hsla[1] + \"%, \" + hsla[2] + \"%)\";\n}\n\nfunction hslaString(hsla, alpha) {\n   if (alpha === undefined) {\n      alpha = (hsla[3] !== undefined ? hsla[3] : 1);\n   }\n   return \"hsla(\" + hsla[0] + \", \" + hsla[1] + \"%, \" + hsla[2] + \"%, \"\n           + alpha + \")\";\n}\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\nfunction hwbString(hwb, alpha) {\n   if (alpha === undefined) {\n      alpha = (hwb[3] !== undefined ? hwb[3] : 1);\n   }\n   return \"hwb(\" + hwb[0] + \", \" + hwb[1] + \"%, \" + hwb[2] + \"%\"\n           + (alpha !== undefined && alpha !== 1 ? \", \" + alpha : \"\") + \")\";\n}\n\nfunction keyword(rgb) {\n  return reverseNames[rgb.slice(0, 3)];\n}\n\n// helpers\nfunction scale(num, min, max) {\n   return Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n  var str = num.toString(16).toUpperCase();\n  return (str.length < 2) ? \"0\" + str : str;\n}\n\n\n//create a list of reverse color names\nvar reverseNames = {};\nfor (var name in colorName$1) {\n   reverseNames[colorName$1[name]] = name;\n}\n\n/* MIT license */\n\n\n\nvar Color = function (obj) {\n\tif (obj instanceof Color) {\n\t\treturn obj;\n\t}\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(obj);\n\t}\n\n\tthis.valid = false;\n\tthis.values = {\n\t\trgb: [0, 0, 0],\n\t\thsl: [0, 0, 0],\n\t\thsv: [0, 0, 0],\n\t\thwb: [0, 0, 0],\n\t\tcmyk: [0, 0, 0, 0],\n\t\talpha: 1\n\t};\n\n\t// parse Color() argument\n\tvar vals;\n\tif (typeof obj === 'string') {\n\t\tvals = colorString.getRgba(obj);\n\t\tif (vals) {\n\t\t\tthis.setValues('rgb', vals);\n\t\t} else if (vals = colorString.getHsla(obj)) {\n\t\t\tthis.setValues('hsl', vals);\n\t\t} else if (vals = colorString.getHwb(obj)) {\n\t\t\tthis.setValues('hwb', vals);\n\t\t}\n\t} else if (typeof obj === 'object') {\n\t\tvals = obj;\n\t\tif (vals.r !== undefined || vals.red !== undefined) {\n\t\t\tthis.setValues('rgb', vals);\n\t\t} else if (vals.l !== undefined || vals.lightness !== undefined) {\n\t\t\tthis.setValues('hsl', vals);\n\t\t} else if (vals.v !== undefined || vals.value !== undefined) {\n\t\t\tthis.setValues('hsv', vals);\n\t\t} else if (vals.w !== undefined || vals.whiteness !== undefined) {\n\t\t\tthis.setValues('hwb', vals);\n\t\t} else if (vals.c !== undefined || vals.cyan !== undefined) {\n\t\t\tthis.setValues('cmyk', vals);\n\t\t}\n\t}\n};\n\nColor.prototype = {\n\tisValid: function () {\n\t\treturn this.valid;\n\t},\n\trgb: function () {\n\t\treturn this.setSpace('rgb', arguments);\n\t},\n\thsl: function () {\n\t\treturn this.setSpace('hsl', arguments);\n\t},\n\thsv: function () {\n\t\treturn this.setSpace('hsv', arguments);\n\t},\n\thwb: function () {\n\t\treturn this.setSpace('hwb', arguments);\n\t},\n\tcmyk: function () {\n\t\treturn this.setSpace('cmyk', arguments);\n\t},\n\n\trgbArray: function () {\n\t\treturn this.values.rgb;\n\t},\n\thslArray: function () {\n\t\treturn this.values.hsl;\n\t},\n\thsvArray: function () {\n\t\treturn this.values.hsv;\n\t},\n\thwbArray: function () {\n\t\tvar values = this.values;\n\t\tif (values.alpha !== 1) {\n\t\t\treturn values.hwb.concat([values.alpha]);\n\t\t}\n\t\treturn values.hwb;\n\t},\n\tcmykArray: function () {\n\t\treturn this.values.cmyk;\n\t},\n\trgbaArray: function () {\n\t\tvar values = this.values;\n\t\treturn values.rgb.concat([values.alpha]);\n\t},\n\thslaArray: function () {\n\t\tvar values = this.values;\n\t\treturn values.hsl.concat([values.alpha]);\n\t},\n\talpha: function (val) {\n\t\tif (val === undefined) {\n\t\t\treturn this.values.alpha;\n\t\t}\n\t\tthis.setValues('alpha', val);\n\t\treturn this;\n\t},\n\n\tred: function (val) {\n\t\treturn this.setChannel('rgb', 0, val);\n\t},\n\tgreen: function (val) {\n\t\treturn this.setChannel('rgb', 1, val);\n\t},\n\tblue: function (val) {\n\t\treturn this.setChannel('rgb', 2, val);\n\t},\n\thue: function (val) {\n\t\tif (val) {\n\t\t\tval %= 360;\n\t\t\tval = val < 0 ? 360 + val : val;\n\t\t}\n\t\treturn this.setChannel('hsl', 0, val);\n\t},\n\tsaturation: function (val) {\n\t\treturn this.setChannel('hsl', 1, val);\n\t},\n\tlightness: function (val) {\n\t\treturn this.setChannel('hsl', 2, val);\n\t},\n\tsaturationv: function (val) {\n\t\treturn this.setChannel('hsv', 1, val);\n\t},\n\twhiteness: function (val) {\n\t\treturn this.setChannel('hwb', 1, val);\n\t},\n\tblackness: function (val) {\n\t\treturn this.setChannel('hwb', 2, val);\n\t},\n\tvalue: function (val) {\n\t\treturn this.setChannel('hsv', 2, val);\n\t},\n\tcyan: function (val) {\n\t\treturn this.setChannel('cmyk', 0, val);\n\t},\n\tmagenta: function (val) {\n\t\treturn this.setChannel('cmyk', 1, val);\n\t},\n\tyellow: function (val) {\n\t\treturn this.setChannel('cmyk', 2, val);\n\t},\n\tblack: function (val) {\n\t\treturn this.setChannel('cmyk', 3, val);\n\t},\n\n\thexString: function () {\n\t\treturn colorString.hexString(this.values.rgb);\n\t},\n\trgbString: function () {\n\t\treturn colorString.rgbString(this.values.rgb, this.values.alpha);\n\t},\n\trgbaString: function () {\n\t\treturn colorString.rgbaString(this.values.rgb, this.values.alpha);\n\t},\n\tpercentString: function () {\n\t\treturn colorString.percentString(this.values.rgb, this.values.alpha);\n\t},\n\thslString: function () {\n\t\treturn colorString.hslString(this.values.hsl, this.values.alpha);\n\t},\n\thslaString: function () {\n\t\treturn colorString.hslaString(this.values.hsl, this.values.alpha);\n\t},\n\thwbString: function () {\n\t\treturn colorString.hwbString(this.values.hwb, this.values.alpha);\n\t},\n\tkeyword: function () {\n\t\treturn colorString.keyword(this.values.rgb, this.values.alpha);\n\t},\n\n\trgbNumber: function () {\n\t\tvar rgb = this.values.rgb;\n\t\treturn (rgb[0] << 16) | (rgb[1] << 8) | rgb[2];\n\t},\n\n\tluminosity: function () {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tvar rgb = this.values.rgb;\n\t\tvar lum = [];\n\t\tfor (var i = 0; i < rgb.length; i++) {\n\t\t\tvar chan = rgb[i] / 255;\n\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\n\t\t}\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast: function (color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tvar lum1 = this.luminosity();\n\t\tvar lum2 = color2.luminosity();\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel: function (color2) {\n\t\tvar contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7.1) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tdark: function () {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tvar rgb = this.values.rgb;\n\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n\t\treturn yiq < 128;\n\t},\n\n\tlight: function () {\n\t\treturn !this.dark();\n\t},\n\n\tnegate: function () {\n\t\tvar rgb = [];\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\trgb[i] = 255 - this.values.rgb[i];\n\t\t}\n\t\tthis.setValues('rgb', rgb);\n\t\treturn this;\n\t},\n\n\tlighten: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[2] += hsl[2] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tdarken: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[2] -= hsl[2] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tsaturate: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[1] += hsl[1] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tdesaturate: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[1] -= hsl[1] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\twhiten: function (ratio) {\n\t\tvar hwb = this.values.hwb;\n\t\thwb[1] += hwb[1] * ratio;\n\t\tthis.setValues('hwb', hwb);\n\t\treturn this;\n\t},\n\n\tblacken: function (ratio) {\n\t\tvar hwb = this.values.hwb;\n\t\thwb[2] += hwb[2] * ratio;\n\t\tthis.setValues('hwb', hwb);\n\t\treturn this;\n\t},\n\n\tgreyscale: function () {\n\t\tvar rgb = this.values.rgb;\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\tthis.setValues('rgb', [val, val, val]);\n\t\treturn this;\n\t},\n\n\tclearer: function (ratio) {\n\t\tvar alpha = this.values.alpha;\n\t\tthis.setValues('alpha', alpha - (alpha * ratio));\n\t\treturn this;\n\t},\n\n\topaquer: function (ratio) {\n\t\tvar alpha = this.values.alpha;\n\t\tthis.setValues('alpha', alpha + (alpha * ratio));\n\t\treturn this;\n\t},\n\n\trotate: function (degrees) {\n\t\tvar hsl = this.values.hsl;\n\t\tvar hue = (hsl[0] + degrees) % 360;\n\t\thsl[0] = hue < 0 ? 360 + hue : hue;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\t/**\n\t * Ported from sass implementation in C\n\t * https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t */\n\tmix: function (mixinColor, weight) {\n\t\tvar color1 = this;\n\t\tvar color2 = mixinColor;\n\t\tvar p = weight === undefined ? 0.5 : weight;\n\n\t\tvar w = 2 * p - 1;\n\t\tvar a = color1.alpha() - color2.alpha();\n\n\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n\t\tvar w2 = 1 - w1;\n\n\t\treturn this\n\t\t\t.rgb(\n\t\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\t\tw1 * color1.blue() + w2 * color2.blue()\n\t\t\t)\n\t\t\t.alpha(color1.alpha() * p + color2.alpha() * (1 - p));\n\t},\n\n\ttoJSON: function () {\n\t\treturn this.rgb();\n\t},\n\n\tclone: function () {\n\t\t// NOTE(SB): using node-clone creates a dependency to Buffer when using browserify,\n\t\t// making the final build way to big to embed in Chart.js. So let's do it manually,\n\t\t// assuming that values to clone are 1 dimension arrays containing only numbers,\n\t\t// except 'alpha' which is a number.\n\t\tvar result = new Color();\n\t\tvar source = this.values;\n\t\tvar target = result.values;\n\t\tvar value, type;\n\n\t\tfor (var prop in source) {\n\t\t\tif (source.hasOwnProperty(prop)) {\n\t\t\t\tvalue = source[prop];\n\t\t\t\ttype = ({}).toString.call(value);\n\t\t\t\tif (type === '[object Array]') {\n\t\t\t\t\ttarget[prop] = value.slice(0);\n\t\t\t\t} else if (type === '[object Number]') {\n\t\t\t\t\ttarget[prop] = value;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('unexpected color value:', value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nColor.prototype.spaces = {\n\trgb: ['red', 'green', 'blue'],\n\thsl: ['hue', 'saturation', 'lightness'],\n\thsv: ['hue', 'saturation', 'value'],\n\thwb: ['hue', 'whiteness', 'blackness'],\n\tcmyk: ['cyan', 'magenta', 'yellow', 'black']\n};\n\nColor.prototype.maxes = {\n\trgb: [255, 255, 255],\n\thsl: [360, 100, 100],\n\thsv: [360, 100, 100],\n\thwb: [360, 100, 100],\n\tcmyk: [100, 100, 100, 100]\n};\n\nColor.prototype.getValues = function (space) {\n\tvar values = this.values;\n\tvar vals = {};\n\n\tfor (var i = 0; i < space.length; i++) {\n\t\tvals[space.charAt(i)] = values[space][i];\n\t}\n\n\tif (values.alpha !== 1) {\n\t\tvals.a = values.alpha;\n\t}\n\n\t// {r: 255, g: 255, b: 255, a: 0.4}\n\treturn vals;\n};\n\nColor.prototype.setValues = function (space, vals) {\n\tvar values = this.values;\n\tvar spaces = this.spaces;\n\tvar maxes = this.maxes;\n\tvar alpha = 1;\n\tvar i;\n\n\tthis.valid = true;\n\n\tif (space === 'alpha') {\n\t\talpha = vals;\n\t} else if (vals.length) {\n\t\t// [10, 10, 10]\n\t\tvalues[space] = vals.slice(0, space.length);\n\t\talpha = vals[space.length];\n\t} else if (vals[space.charAt(0)] !== undefined) {\n\t\t// {r: 10, g: 10, b: 10}\n\t\tfor (i = 0; i < space.length; i++) {\n\t\t\tvalues[space][i] = vals[space.charAt(i)];\n\t\t}\n\n\t\talpha = vals.a;\n\t} else if (vals[spaces[space][0]] !== undefined) {\n\t\t// {red: 10, green: 10, blue: 10}\n\t\tvar chans = spaces[space];\n\n\t\tfor (i = 0; i < space.length; i++) {\n\t\t\tvalues[space][i] = vals[chans[i]];\n\t\t}\n\n\t\talpha = vals.alpha;\n\t}\n\n\tvalues.alpha = Math.max(0, Math.min(1, (alpha === undefined ? values.alpha : alpha)));\n\n\tif (space === 'alpha') {\n\t\treturn false;\n\t}\n\n\tvar capped;\n\n\t// cap values of the space prior converting all values\n\tfor (i = 0; i < space.length; i++) {\n\t\tcapped = Math.max(0, Math.min(maxes[space][i], values[space][i]));\n\t\tvalues[space][i] = Math.round(capped);\n\t}\n\n\t// convert to all the other color spaces\n\tfor (var sname in spaces) {\n\t\tif (sname !== space) {\n\t\t\tvalues[sname] = colorConvert[space][sname](values[space]);\n\t\t}\n\t}\n\n\treturn true;\n};\n\nColor.prototype.setSpace = function (space, args) {\n\tvar vals = args[0];\n\n\tif (vals === undefined) {\n\t\t// color.rgb()\n\t\treturn this.getValues(space);\n\t}\n\n\t// color.rgb(10, 10, 10)\n\tif (typeof vals === 'number') {\n\t\tvals = Array.prototype.slice.call(args);\n\t}\n\n\tthis.setValues(space, vals);\n\treturn this;\n};\n\nColor.prototype.setChannel = function (space, index, val) {\n\tvar svalues = this.values[space];\n\tif (val === undefined) {\n\t\t// color.red()\n\t\treturn svalues[index];\n\t} else if (val === svalues[index]) {\n\t\t// color.red(color.red())\n\t\treturn this;\n\t}\n\n\t// color.red(100)\n\tsvalues[index] = val;\n\tthis.setValues(space, svalues);\n\n\treturn this;\n};\n\nif (typeof window !== 'undefined') {\n\twindow.Color = Color;\n}\n\nvar chartjsColor = Color;\n\nfunction isValidKey(key) {\r\n\treturn ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\r\n}\r\n\r\n/**\r\n * @namespace Chart.helpers\r\n */\r\nvar helpers = {\r\n\t/**\r\n\t * An empty function that can be used, for example, for optional callback.\r\n\t */\r\n\tnoop: function() {},\r\n\r\n\t/**\r\n\t * Returns a unique id, sequentially generated from a global variable.\r\n\t * @returns {number}\r\n\t * @function\r\n\t */\r\n\tuid: (function() {\r\n\t\tvar id = 0;\r\n\t\treturn function() {\r\n\t\t\treturn id++;\r\n\t\t};\r\n\t}()),\r\n\r\n\t/**\r\n\t * Returns true if `value` is neither null nor undefined, else returns false.\r\n\t * @param {*} value - The value to test.\r\n\t * @returns {boolean}\r\n\t * @since 2.7.0\r\n\t */\r\n\tisNullOrUndef: function(value) {\r\n\t\treturn value === null || typeof value === 'undefined';\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if `value` is an array (including typed arrays), else returns false.\r\n\t * @param {*} value - The value to test.\r\n\t * @returns {boolean}\r\n\t * @function\r\n\t */\r\n\tisArray: function(value) {\r\n\t\tif (Array.isArray && Array.isArray(value)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar type = Object.prototype.toString.call(value);\r\n\t\tif (type.substr(0, 7) === '[object' && type.substr(-6) === 'Array]') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if `value` is an object (excluding null), else returns false.\r\n\t * @param {*} value - The value to test.\r\n\t * @returns {boolean}\r\n\t * @since 2.7.0\r\n\t */\r\n\tisObject: function(value) {\r\n\t\treturn value !== null && Object.prototype.toString.call(value) === '[object Object]';\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if `value` is a finite number, else returns false\r\n\t * @param {*} value  - The value to test.\r\n\t * @returns {boolean}\r\n\t */\r\n\tisFinite: function(value) {\r\n\t\treturn (typeof value === 'number' || value instanceof Number) && isFinite(value);\r\n\t},\r\n\r\n\t/**\r\n\t * Returns `value` if defined, else returns `defaultValue`.\r\n\t * @param {*} value - The value to return if defined.\r\n\t * @param {*} defaultValue - The value to return if `value` is undefined.\r\n\t * @returns {*}\r\n\t */\r\n\tvalueOrDefault: function(value, defaultValue) {\r\n\t\treturn typeof value === 'undefined' ? defaultValue : value;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns value at the given `index` in array if defined, else returns `defaultValue`.\r\n\t * @param {Array} value - The array to lookup for value at `index`.\r\n\t * @param {number} index - The index in `value` to lookup for value.\r\n\t * @param {*} defaultValue - The value to return if `value[index]` is undefined.\r\n\t * @returns {*}\r\n\t */\r\n\tvalueAtIndexOrDefault: function(value, index, defaultValue) {\r\n\t\treturn helpers.valueOrDefault(helpers.isArray(value) ? value[index] : value, defaultValue);\r\n\t},\r\n\r\n\t/**\r\n\t * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\r\n\t * value returned by `fn`. If `fn` is not a function, this method returns undefined.\r\n\t * @param {function} fn - The function to call.\r\n\t * @param {Array|undefined|null} args - The arguments with which `fn` should be called.\r\n\t * @param {object} [thisArg] - The value of `this` provided for the call to `fn`.\r\n\t * @returns {*}\r\n\t */\r\n\tcallback: function(fn, args, thisArg) {\r\n\t\tif (fn && typeof fn.call === 'function') {\r\n\t\t\treturn fn.apply(thisArg, args);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Note(SB) for performance sake, this method should only be used when loopable type\r\n\t * is unknown or in none intensive code (not called often and small loopable). Else\r\n\t * it's preferable to use a regular for() loop and save extra function calls.\r\n\t * @param {object|Array} loopable - The object or array to be iterated.\r\n\t * @param {function} fn - The function to call for each item.\r\n\t * @param {object} [thisArg] - The value of `this` provided for the call to `fn`.\r\n\t * @param {boolean} [reverse] - If true, iterates backward on the loopable.\r\n\t */\r\n\teach: function(loopable, fn, thisArg, reverse) {\r\n\t\tvar i, len, keys;\r\n\t\tif (helpers.isArray(loopable)) {\r\n\t\t\tlen = loopable.length;\r\n\t\t\tif (reverse) {\r\n\t\t\t\tfor (i = len - 1; i >= 0; i--) {\r\n\t\t\t\t\tfn.call(thisArg, loopable[i], i);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t\tfn.call(thisArg, loopable[i], i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (helpers.isObject(loopable)) {\r\n\t\t\tkeys = Object.keys(loopable);\r\n\t\t\tlen = keys.length;\r\n\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\tfn.call(thisArg, loopable[keys[i]], keys[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\r\n\t * @see https://stackoverflow.com/a/14853974\r\n\t * @param {Array} a0 - The array to compare\r\n\t * @param {Array} a1 - The array to compare\r\n\t * @returns {boolean}\r\n\t */\r\n\tarrayEquals: function(a0, a1) {\r\n\t\tvar i, ilen, v0, v1;\r\n\r\n\t\tif (!a0 || !a1 || a0.length !== a1.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = a0.length; i < ilen; ++i) {\r\n\t\t\tv0 = a0[i];\r\n\t\t\tv1 = a1[i];\r\n\r\n\t\t\tif (v0 instanceof Array && v1 instanceof Array) {\r\n\t\t\t\tif (!helpers.arrayEquals(v0, v1)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else if (v0 !== v1) {\r\n\t\t\t\t// NOTE: two different object instances will never be equal: {x:20} != {x:20}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns a deep copy of `source` without keeping references on objects and arrays.\r\n\t * @param {*} source - The value to clone.\r\n\t * @returns {*}\r\n\t */\r\n\tclone: function(source) {\r\n\t\tif (helpers.isArray(source)) {\r\n\t\t\treturn source.map(helpers.clone);\r\n\t\t}\r\n\r\n\t\tif (helpers.isObject(source)) {\r\n\t\t\tvar target = Object.create(source);\r\n\t\t\tvar keys = Object.keys(source);\r\n\t\t\tvar klen = keys.length;\r\n\t\t\tvar k = 0;\r\n\r\n\t\t\tfor (; k < klen; ++k) {\r\n\t\t\t\ttarget[keys[k]] = helpers.clone(source[keys[k]]);\r\n\t\t\t}\r\n\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\treturn source;\r\n\t},\r\n\r\n\t/**\r\n\t * The default merger when Chart.helpers.merge is called without merger option.\r\n\t * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\r\n\t * @private\r\n\t */\r\n\t_merger: function(key, target, source, options) {\r\n\t\tif (!isValidKey(key)) {\r\n\t\t\t// We want to ensure we do not copy prototypes over\r\n\t\t\t// as this can pollute global namespaces\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tval = target[key];\r\n\t\tvar sval = source[key];\r\n\r\n\t\tif (helpers.isObject(tval) && helpers.isObject(sval)) {\r\n\t\t\thelpers.merge(tval, sval, options);\r\n\t\t} else {\r\n\t\t\ttarget[key] = helpers.clone(sval);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Merges source[key] in target[key] only if target[key] is undefined.\r\n\t * @private\r\n\t */\r\n\t_mergerIf: function(key, target, source) {\r\n\t\tif (!isValidKey(key)) {\r\n\t\t\t// We want to ensure we do not copy prototypes over\r\n\t\t\t// as this can pollute global namespaces\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tval = target[key];\r\n\t\tvar sval = source[key];\r\n\r\n\t\tif (helpers.isObject(tval) && helpers.isObject(sval)) {\r\n\t\t\thelpers.mergeIf(tval, sval);\r\n\t\t} else if (!target.hasOwnProperty(key)) {\r\n\t\t\ttarget[key] = helpers.clone(sval);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Recursively deep copies `source` properties into `target` with the given `options`.\r\n\t * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\r\n\t * @param {object} target - The target object in which all sources are merged into.\r\n\t * @param {object|object[]} source - Object(s) to merge into `target`.\r\n\t * @param {object} [options] - Merging options:\r\n\t * @param {function} [options.merger] - The merge method (key, target, source, options)\r\n\t * @returns {object} The `target` object.\r\n\t */\r\n\tmerge: function(target, source, options) {\r\n\t\tvar sources = helpers.isArray(source) ? source : [source];\r\n\t\tvar ilen = sources.length;\r\n\t\tvar merge, i, keys, klen, k;\r\n\r\n\t\tif (!helpers.isObject(target)) {\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tmerge = options.merger || helpers._merger;\r\n\r\n\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\tsource = sources[i];\r\n\t\t\tif (!helpers.isObject(source)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tkeys = Object.keys(source);\r\n\t\t\tfor (k = 0, klen = keys.length; k < klen; ++k) {\r\n\t\t\t\tmerge(keys[k], target, source, options);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t},\r\n\r\n\t/**\r\n\t * Recursively deep copies `source` properties into `target` *only* if not defined in target.\r\n\t * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\r\n\t * @param {object} target - The target object in which all sources are merged into.\r\n\t * @param {object|object[]} source - Object(s) to merge into `target`.\r\n\t * @returns {object} The `target` object.\r\n\t */\r\n\tmergeIf: function(target, source) {\r\n\t\treturn helpers.merge(target, source, {merger: helpers._mergerIf});\r\n\t},\r\n\r\n\t/**\r\n\t * Applies the contents of two or more objects together into the first object.\r\n\t * @param {object} target - The target object in which all objects are merged into.\r\n\t * @param {object} arg1 - Object containing additional properties to merge in target.\r\n\t * @param {object} argN - Additional objects containing properties to merge in target.\r\n\t * @returns {object} The `target` object.\r\n\t */\r\n\textend: Object.assign || function(target) {\r\n\t\treturn helpers.merge(target, [].slice.call(arguments, 1), {\r\n\t\t\tmerger: function(key, dst, src) {\r\n\t\t\t\tdst[key] = src[key];\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Basic javascript inheritance based on the model created in Backbone.js\r\n\t */\r\n\tinherits: function(extensions) {\r\n\t\tvar me = this;\r\n\t\tvar ChartElement = (extensions && extensions.hasOwnProperty('constructor')) ? extensions.constructor : function() {\r\n\t\t\treturn me.apply(this, arguments);\r\n\t\t};\r\n\r\n\t\tvar Surrogate = function() {\r\n\t\t\tthis.constructor = ChartElement;\r\n\t\t};\r\n\r\n\t\tSurrogate.prototype = me.prototype;\r\n\t\tChartElement.prototype = new Surrogate();\r\n\t\tChartElement.extend = helpers.inherits;\r\n\r\n\t\tif (extensions) {\r\n\t\t\thelpers.extend(ChartElement.prototype, extensions);\r\n\t\t}\r\n\r\n\t\tChartElement.__super__ = me.prototype;\r\n\t\treturn ChartElement;\r\n\t},\r\n\r\n\t_deprecated: function(scope, value, previous, current) {\r\n\t\tif (value !== undefined) {\r\n\t\t\tconsole.warn(scope + ': \"' + previous +\r\n\t\t\t\t'\" is deprecated. Please use \"' + current + '\" instead');\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar helpers_core = helpers;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.callback instead.\r\n * @function Chart.helpers.callCallback\r\n * @deprecated since version 2.6.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers.callCallback = helpers.callback;\r\n\r\n/**\r\n * Provided for backward compatibility, use Array.prototype.indexOf instead.\r\n * Array.prototype.indexOf compatibility: Chrome, Opera, Safari, FF1.5+, IE9+\r\n * @function Chart.helpers.indexOf\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers.indexOf = function(array, item, fromIndex) {\r\n\treturn Array.prototype.indexOf.call(array, item, fromIndex);\r\n};\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.valueOrDefault instead.\r\n * @function Chart.helpers.getValueOrDefault\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers.getValueOrDefault = helpers.valueOrDefault;\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.valueAtIndexOrDefault instead.\r\n * @function Chart.helpers.getValueAtIndexOrDefault\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers.getValueAtIndexOrDefault = helpers.valueAtIndexOrDefault;\n\n/**\r\n * Easing functions adapted from Robert Penner's easing equations.\r\n * @namespace Chart.helpers.easingEffects\r\n * @see http://www.robertpenner.com/easing/\r\n */\r\nvar effects = {\r\n\tlinear: function(t) {\r\n\t\treturn t;\r\n\t},\r\n\r\n\teaseInQuad: function(t) {\r\n\t\treturn t * t;\r\n\t},\r\n\r\n\teaseOutQuad: function(t) {\r\n\t\treturn -t * (t - 2);\r\n\t},\r\n\r\n\teaseInOutQuad: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * t * t;\r\n\t\t}\r\n\t\treturn -0.5 * ((--t) * (t - 2) - 1);\r\n\t},\r\n\r\n\teaseInCubic: function(t) {\r\n\t\treturn t * t * t;\r\n\t},\r\n\r\n\teaseOutCubic: function(t) {\r\n\t\treturn (t = t - 1) * t * t + 1;\r\n\t},\r\n\r\n\teaseInOutCubic: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * t * t * t;\r\n\t\t}\r\n\t\treturn 0.5 * ((t -= 2) * t * t + 2);\r\n\t},\r\n\r\n\teaseInQuart: function(t) {\r\n\t\treturn t * t * t * t;\r\n\t},\r\n\r\n\teaseOutQuart: function(t) {\r\n\t\treturn -((t = t - 1) * t * t * t - 1);\r\n\t},\r\n\r\n\teaseInOutQuart: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * t * t * t * t;\r\n\t\t}\r\n\t\treturn -0.5 * ((t -= 2) * t * t * t - 2);\r\n\t},\r\n\r\n\teaseInQuint: function(t) {\r\n\t\treturn t * t * t * t * t;\r\n\t},\r\n\r\n\teaseOutQuint: function(t) {\r\n\t\treturn (t = t - 1) * t * t * t * t + 1;\r\n\t},\r\n\r\n\teaseInOutQuint: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * t * t * t * t * t;\r\n\t\t}\r\n\t\treturn 0.5 * ((t -= 2) * t * t * t * t + 2);\r\n\t},\r\n\r\n\teaseInSine: function(t) {\r\n\t\treturn -Math.cos(t * (Math.PI / 2)) + 1;\r\n\t},\r\n\r\n\teaseOutSine: function(t) {\r\n\t\treturn Math.sin(t * (Math.PI / 2));\r\n\t},\r\n\r\n\teaseInOutSine: function(t) {\r\n\t\treturn -0.5 * (Math.cos(Math.PI * t) - 1);\r\n\t},\r\n\r\n\teaseInExpo: function(t) {\r\n\t\treturn (t === 0) ? 0 : Math.pow(2, 10 * (t - 1));\r\n\t},\r\n\r\n\teaseOutExpo: function(t) {\r\n\t\treturn (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1;\r\n\t},\r\n\r\n\teaseInOutExpo: function(t) {\r\n\t\tif (t === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (t === 1) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * Math.pow(2, 10 * (t - 1));\r\n\t\t}\r\n\t\treturn 0.5 * (-Math.pow(2, -10 * --t) + 2);\r\n\t},\r\n\r\n\teaseInCirc: function(t) {\r\n\t\tif (t >= 1) {\r\n\t\t\treturn t;\r\n\t\t}\r\n\t\treturn -(Math.sqrt(1 - t * t) - 1);\r\n\t},\r\n\r\n\teaseOutCirc: function(t) {\r\n\t\treturn Math.sqrt(1 - (t = t - 1) * t);\r\n\t},\r\n\r\n\teaseInOutCirc: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn -0.5 * (Math.sqrt(1 - t * t) - 1);\r\n\t\t}\r\n\t\treturn 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\r\n\t},\r\n\r\n\teaseInElastic: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\tvar p = 0;\r\n\t\tvar a = 1;\r\n\t\tif (t === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (t === 1) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif (!p) {\r\n\t\t\tp = 0.3;\r\n\t\t}\r\n\t\tif (a < 1) {\r\n\t\t\ta = 1;\r\n\t\t\ts = p / 4;\r\n\t\t} else {\r\n\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t}\r\n\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));\r\n\t},\r\n\r\n\teaseOutElastic: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\tvar p = 0;\r\n\t\tvar a = 1;\r\n\t\tif (t === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (t === 1) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif (!p) {\r\n\t\t\tp = 0.3;\r\n\t\t}\r\n\t\tif (a < 1) {\r\n\t\t\ta = 1;\r\n\t\t\ts = p / 4;\r\n\t\t} else {\r\n\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t}\r\n\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;\r\n\t},\r\n\r\n\teaseInOutElastic: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\tvar p = 0;\r\n\t\tvar a = 1;\r\n\t\tif (t === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif ((t /= 0.5) === 2) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif (!p) {\r\n\t\t\tp = 0.45;\r\n\t\t}\r\n\t\tif (a < 1) {\r\n\t\t\ta = 1;\r\n\t\t\ts = p / 4;\r\n\t\t} else {\r\n\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t}\r\n\t\tif (t < 1) {\r\n\t\t\treturn -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));\r\n\t\t}\r\n\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p) * 0.5 + 1;\r\n\t},\r\n\teaseInBack: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\treturn t * t * ((s + 1) * t - s);\r\n\t},\r\n\r\n\teaseOutBack: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\treturn (t = t - 1) * t * ((s + 1) * t + s) + 1;\r\n\t},\r\n\r\n\teaseInOutBack: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\r\n\t\t}\r\n\t\treturn 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\r\n\t},\r\n\r\n\teaseInBounce: function(t) {\r\n\t\treturn 1 - effects.easeOutBounce(1 - t);\r\n\t},\r\n\r\n\teaseOutBounce: function(t) {\r\n\t\tif (t < (1 / 2.75)) {\r\n\t\t\treturn 7.5625 * t * t;\r\n\t\t}\r\n\t\tif (t < (2 / 2.75)) {\r\n\t\t\treturn 7.5625 * (t -= (1.5 / 2.75)) * t + 0.75;\r\n\t\t}\r\n\t\tif (t < (2.5 / 2.75)) {\r\n\t\t\treturn 7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375;\r\n\t\t}\r\n\t\treturn 7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375;\r\n\t},\r\n\r\n\teaseInOutBounce: function(t) {\r\n\t\tif (t < 0.5) {\r\n\t\t\treturn effects.easeInBounce(t * 2) * 0.5;\r\n\t\t}\r\n\t\treturn effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\r\n\t}\r\n};\r\n\r\nvar helpers_easing = {\r\n\teffects: effects\r\n};\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.easing.effects instead.\r\n * @function Chart.helpers.easingEffects\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers_core.easingEffects = effects;\n\nvar PI = Math.PI;\r\nvar RAD_PER_DEG = PI / 180;\r\nvar DOUBLE_PI = PI * 2;\r\nvar HALF_PI = PI / 2;\r\nvar QUARTER_PI = PI / 4;\r\nvar TWO_THIRDS_PI = PI * 2 / 3;\r\n\r\n/**\r\n * @namespace Chart.helpers.canvas\r\n */\r\nvar exports$1 = {\r\n\t/**\r\n\t * Clears the entire canvas associated to the given `chart`.\r\n\t * @param {Chart} chart - The chart for which to clear the canvas.\r\n\t */\r\n\tclear: function(chart) {\r\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\r\n\t},\r\n\r\n\t/**\r\n\t * Creates a \"path\" for a rectangle with rounded corners at position (x, y) with a\r\n\t * given size (width, height) and the same `radius` for all corners.\r\n\t * @param {CanvasRenderingContext2D} ctx - The canvas 2D Context.\r\n\t * @param {number} x - The x axis of the coordinate for the rectangle starting point.\r\n\t * @param {number} y - The y axis of the coordinate for the rectangle starting point.\r\n\t * @param {number} width - The rectangle's width.\r\n\t * @param {number} height - The rectangle's height.\r\n\t * @param {number} radius - The rounded amount (in pixels) for the four corners.\r\n\t * @todo handle `radius` as top-left, top-right, bottom-right, bottom-left array/object?\r\n\t */\r\n\troundedRect: function(ctx, x, y, width, height, radius) {\r\n\t\tif (radius) {\r\n\t\t\tvar r = Math.min(radius, height / 2, width / 2);\r\n\t\t\tvar left = x + r;\r\n\t\t\tvar top = y + r;\r\n\t\t\tvar right = x + width - r;\r\n\t\t\tvar bottom = y + height - r;\r\n\r\n\t\t\tctx.moveTo(x, top);\r\n\t\t\tif (left < right && top < bottom) {\r\n\t\t\t\tctx.arc(left, top, r, -PI, -HALF_PI);\r\n\t\t\t\tctx.arc(right, top, r, -HALF_PI, 0);\r\n\t\t\t\tctx.arc(right, bottom, r, 0, HALF_PI);\r\n\t\t\t\tctx.arc(left, bottom, r, HALF_PI, PI);\r\n\t\t\t} else if (left < right) {\r\n\t\t\t\tctx.moveTo(left, y);\r\n\t\t\t\tctx.arc(right, top, r, -HALF_PI, HALF_PI);\r\n\t\t\t\tctx.arc(left, top, r, HALF_PI, PI + HALF_PI);\r\n\t\t\t} else if (top < bottom) {\r\n\t\t\t\tctx.arc(left, top, r, -PI, 0);\r\n\t\t\t\tctx.arc(left, bottom, r, 0, PI);\r\n\t\t\t} else {\r\n\t\t\t\tctx.arc(left, top, r, -PI, PI);\r\n\t\t\t}\r\n\t\t\tctx.closePath();\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t} else {\r\n\t\t\tctx.rect(x, y, width, height);\r\n\t\t}\r\n\t},\r\n\r\n\tdrawPoint: function(ctx, style, radius, x, y, rotation) {\r\n\t\tvar type, xOffset, yOffset, size, cornerRadius;\r\n\t\tvar rad = (rotation || 0) * RAD_PER_DEG;\r\n\r\n\t\tif (style && typeof style === 'object') {\r\n\t\t\ttype = style.toString();\r\n\t\t\tif (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.translate(x, y);\r\n\t\t\t\tctx.rotate(rad);\r\n\t\t\t\tctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\r\n\t\t\t\tctx.restore();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isNaN(radius) || radius <= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tctx.beginPath();\r\n\r\n\t\tswitch (style) {\r\n\t\t// Default includes circle\r\n\t\tdefault:\r\n\t\t\tctx.arc(x, y, radius, 0, DOUBLE_PI);\r\n\t\t\tctx.closePath();\r\n\t\t\tbreak;\r\n\t\tcase 'triangle':\r\n\t\t\tctx.moveTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n\t\t\trad += TWO_THIRDS_PI;\r\n\t\t\tctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n\t\t\trad += TWO_THIRDS_PI;\r\n\t\t\tctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n\t\t\tctx.closePath();\r\n\t\t\tbreak;\r\n\t\tcase 'rectRounded':\r\n\t\t\t// NOTE: the rounded rect implementation changed to use `arc` instead of\r\n\t\t\t// `quadraticCurveTo` since it generates better results when rect is\r\n\t\t\t// almost a circle. 0.516 (instead of 0.5) produces results with visually\r\n\t\t\t// closer proportion to the previous impl and it is inscribed in the\r\n\t\t\t// circle with `radius`. For more details, see the following PRs:\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/5597\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/5858\r\n\t\t\tcornerRadius = radius * 0.516;\r\n\t\t\tsize = radius - cornerRadius;\r\n\t\t\txOffset = Math.cos(rad + QUARTER_PI) * size;\r\n\t\t\tyOffset = Math.sin(rad + QUARTER_PI) * size;\r\n\t\t\tctx.arc(x - xOffset, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\r\n\t\t\tctx.arc(x + yOffset, y - xOffset, cornerRadius, rad - HALF_PI, rad);\r\n\t\t\tctx.arc(x + xOffset, y + yOffset, cornerRadius, rad, rad + HALF_PI);\r\n\t\t\tctx.arc(x - yOffset, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\r\n\t\t\tctx.closePath();\r\n\t\t\tbreak;\r\n\t\tcase 'rect':\r\n\t\t\tif (!rotation) {\r\n\t\t\t\tsize = Math.SQRT1_2 * radius;\r\n\t\t\t\tctx.rect(x - size, y - size, 2 * size, 2 * size);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\trad += QUARTER_PI;\r\n\t\t\t/* falls through */\r\n\t\tcase 'rectRot':\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + yOffset, y - xOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tctx.lineTo(x - yOffset, y + xOffset);\r\n\t\t\tctx.closePath();\r\n\t\t\tbreak;\r\n\t\tcase 'crossRot':\r\n\t\t\trad += QUARTER_PI;\r\n\t\t\t/* falls through */\r\n\t\tcase 'cross':\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tctx.moveTo(x + yOffset, y - xOffset);\r\n\t\t\tctx.lineTo(x - yOffset, y + xOffset);\r\n\t\t\tbreak;\r\n\t\tcase 'star':\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tctx.moveTo(x + yOffset, y - xOffset);\r\n\t\t\tctx.lineTo(x - yOffset, y + xOffset);\r\n\t\t\trad += QUARTER_PI;\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tctx.moveTo(x + yOffset, y - xOffset);\r\n\t\t\tctx.lineTo(x - yOffset, y + xOffset);\r\n\t\t\tbreak;\r\n\t\tcase 'line':\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tbreak;\r\n\t\tcase 'dash':\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t\tctx.lineTo(x + Math.cos(rad) * radius, y + Math.sin(rad) * radius);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tctx.fill();\r\n\t\tctx.stroke();\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if the point is inside the rectangle\r\n\t * @param {object} point - The point to test\r\n\t * @param {object} area - The rectangle\r\n\t * @returns {boolean}\r\n\t * @private\r\n\t */\r\n\t_isPointInArea: function(point, area) {\r\n\t\tvar epsilon = 1e-6; // 1e-6 is margin in pixels for accumulated error.\r\n\r\n\t\treturn point.x > area.left - epsilon && point.x < area.right + epsilon &&\r\n\t\t\tpoint.y > area.top - epsilon && point.y < area.bottom + epsilon;\r\n\t},\r\n\r\n\tclipArea: function(ctx, area) {\r\n\t\tctx.save();\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\r\n\t\tctx.clip();\r\n\t},\r\n\r\n\tunclipArea: function(ctx) {\r\n\t\tctx.restore();\r\n\t},\r\n\r\n\tlineTo: function(ctx, previous, target, flip) {\r\n\t\tvar stepped = target.steppedLine;\r\n\t\tif (stepped) {\r\n\t\t\tif (stepped === 'middle') {\r\n\t\t\t\tvar midpoint = (previous.x + target.x) / 2.0;\r\n\t\t\t\tctx.lineTo(midpoint, flip ? target.y : previous.y);\r\n\t\t\t\tctx.lineTo(midpoint, flip ? previous.y : target.y);\r\n\t\t\t} else if ((stepped === 'after' && !flip) || (stepped !== 'after' && flip)) {\r\n\t\t\t\tctx.lineTo(previous.x, target.y);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(target.x, previous.y);\r\n\t\t\t}\r\n\t\t\tctx.lineTo(target.x, target.y);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!target.tension) {\r\n\t\t\tctx.lineTo(target.x, target.y);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tctx.bezierCurveTo(\r\n\t\t\tflip ? previous.controlPointPreviousX : previous.controlPointNextX,\r\n\t\t\tflip ? previous.controlPointPreviousY : previous.controlPointNextY,\r\n\t\t\tflip ? target.controlPointNextX : target.controlPointPreviousX,\r\n\t\t\tflip ? target.controlPointNextY : target.controlPointPreviousY,\r\n\t\t\ttarget.x,\r\n\t\t\ttarget.y);\r\n\t}\r\n};\r\n\r\nvar helpers_canvas = exports$1;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.canvas.clear instead.\r\n * @namespace Chart.helpers.clear\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers_core.clear = exports$1.clear;\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.canvas.roundedRect instead.\r\n * @namespace Chart.helpers.drawRoundedRectangle\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers_core.drawRoundedRectangle = function(ctx) {\r\n\tctx.beginPath();\r\n\texports$1.roundedRect.apply(exports$1, arguments);\r\n};\n\nvar defaults = {\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_set: function(scope, values) {\r\n\t\treturn helpers_core.merge(this[scope] || (this[scope] = {}), values);\r\n\t}\r\n};\r\n\r\n// TODO(v3): remove 'global' from namespace.  all default are global and\r\n// there's inconsistency around which options are under 'global'\r\ndefaults._set('global', {\r\n\tdefaultColor: 'rgba(0,0,0,0.1)',\r\n\tdefaultFontColor: '#666',\r\n\tdefaultFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n\tdefaultFontSize: 12,\r\n\tdefaultFontStyle: 'normal',\r\n\tdefaultLineHeight: 1.2,\r\n\tshowLines: true\r\n});\r\n\r\nvar core_defaults = defaults;\n\nvar valueOrDefault = helpers_core.valueOrDefault;\r\n\r\n/**\r\n * Converts the given font object into a CSS font string.\r\n * @param {object} font - A font object.\r\n * @return {string} The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\r\n * @private\r\n */\r\nfunction toFontString(font) {\r\n\tif (!font || helpers_core.isNullOrUndef(font.size) || helpers_core.isNullOrUndef(font.family)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (font.style ? font.style + ' ' : '')\r\n\t\t+ (font.weight ? font.weight + ' ' : '')\r\n\t\t+ font.size + 'px '\r\n\t\t+ font.family;\r\n}\r\n\r\n/**\r\n * @alias Chart.helpers.options\r\n * @namespace\r\n */\r\nvar helpers_options = {\r\n\t/**\r\n\t * Converts the given line height `value` in pixels for a specific font `size`.\r\n\t * @param {number|string} value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\r\n\t * @param {number} size - The font size (in pixels) used to resolve relative `value`.\r\n\t * @returns {number} The effective line height in pixels (size * 1.2 if value is invalid).\r\n\t * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\r\n\t * @since 2.7.0\r\n\t */\r\n\ttoLineHeight: function(value, size) {\r\n\t\tvar matches = ('' + value).match(/^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/);\r\n\t\tif (!matches || matches[1] === 'normal') {\r\n\t\t\treturn size * 1.2;\r\n\t\t}\r\n\r\n\t\tvalue = +matches[2];\r\n\r\n\t\tswitch (matches[3]) {\r\n\t\tcase 'px':\r\n\t\t\treturn value;\r\n\t\tcase '%':\r\n\t\t\tvalue /= 100;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn size * value;\r\n\t},\r\n\r\n\t/**\r\n\t * Converts the given value into a padding object with pre-computed width/height.\r\n\t * @param {number|object} value - If a number, set the value to all TRBL component,\r\n\t *  else, if and object, use defined properties and sets undefined ones to 0.\r\n\t * @returns {object} The padding values (top, right, bottom, left, width, height)\r\n\t * @since 2.7.0\r\n\t */\r\n\ttoPadding: function(value) {\r\n\t\tvar t, r, b, l;\r\n\r\n\t\tif (helpers_core.isObject(value)) {\r\n\t\t\tt = +value.top || 0;\r\n\t\t\tr = +value.right || 0;\r\n\t\t\tb = +value.bottom || 0;\r\n\t\t\tl = +value.left || 0;\r\n\t\t} else {\r\n\t\t\tt = r = b = l = +value || 0;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop: t,\r\n\t\t\tright: r,\r\n\t\t\tbottom: b,\r\n\t\t\tleft: l,\r\n\t\t\theight: t + b,\r\n\t\t\twidth: l + r\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Parses font options and returns the font object.\r\n\t * @param {object} options - A object that contains font options to be parsed.\r\n\t * @return {object} The font object.\r\n\t * @todo Support font.* options and renamed to toFont().\r\n\t * @private\r\n\t */\r\n\t_parseFont: function(options) {\r\n\t\tvar globalDefaults = core_defaults.global;\r\n\t\tvar size = valueOrDefault(options.fontSize, globalDefaults.defaultFontSize);\r\n\t\tvar font = {\r\n\t\t\tfamily: valueOrDefault(options.fontFamily, globalDefaults.defaultFontFamily),\r\n\t\t\tlineHeight: helpers_core.options.toLineHeight(valueOrDefault(options.lineHeight, globalDefaults.defaultLineHeight), size),\r\n\t\t\tsize: size,\r\n\t\t\tstyle: valueOrDefault(options.fontStyle, globalDefaults.defaultFontStyle),\r\n\t\t\tweight: null,\r\n\t\t\tstring: ''\r\n\t\t};\r\n\r\n\t\tfont.string = toFontString(font);\r\n\t\treturn font;\r\n\t},\r\n\r\n\t/**\r\n\t * Evaluates the given `inputs` sequentially and returns the first defined value.\r\n\t * @param {Array} inputs - An array of values, falling back to the last value.\r\n\t * @param {object} [context] - If defined and the current value is a function, the value\r\n\t * is called with `context` as first argument and the result becomes the new input.\r\n\t * @param {number} [index] - If defined and the current value is an array, the value\r\n\t * at `index` become the new input.\r\n\t * @param {object} [info] - object to return information about resolution in\r\n\t * @param {boolean} [info.cacheable] - Will be set to `false` if option is not cacheable.\r\n\t * @since 2.7.0\r\n\t */\r\n\tresolve: function(inputs, context, index, info) {\r\n\t\tvar cacheable = true;\r\n\t\tvar i, ilen, value;\r\n\r\n\t\tfor (i = 0, ilen = inputs.length; i < ilen; ++i) {\r\n\t\t\tvalue = inputs[i];\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (context !== undefined && typeof value === 'function') {\r\n\t\t\t\tvalue = value(context);\r\n\t\t\t\tcacheable = false;\r\n\t\t\t}\r\n\t\t\tif (index !== undefined && helpers_core.isArray(value)) {\r\n\t\t\t\tvalue = value[index];\r\n\t\t\t\tcacheable = false;\r\n\t\t\t}\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tif (info && !cacheable) {\r\n\t\t\t\t\tinfo.cacheable = false;\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\n\n/**\r\n * @alias Chart.helpers.math\r\n * @namespace\r\n */\r\nvar exports$2 = {\r\n\t/**\r\n\t * Returns an array of factors sorted from 1 to sqrt(value)\r\n\t * @private\r\n\t */\r\n\t_factorize: function(value) {\r\n\t\tvar result = [];\r\n\t\tvar sqrt = Math.sqrt(value);\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 1; i < sqrt; i++) {\r\n\t\t\tif (value % i === 0) {\r\n\t\t\t\tresult.push(i);\r\n\t\t\t\tresult.push(value / i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (sqrt === (sqrt | 0)) { // if value is a square number\r\n\t\t\tresult.push(sqrt);\r\n\t\t}\r\n\r\n\t\tresult.sort(function(a, b) {\r\n\t\t\treturn a - b;\r\n\t\t}).pop();\r\n\t\treturn result;\r\n\t},\r\n\r\n\tlog10: Math.log10 || function(x) {\r\n\t\tvar exponent = Math.log(x) * Math.LOG10E; // Math.LOG10E = 1 / Math.LN10.\r\n\t\t// Check for whole powers of 10,\r\n\t\t// which due to floating point rounding error should be corrected.\r\n\t\tvar powerOf10 = Math.round(exponent);\r\n\t\tvar isPowerOf10 = x === Math.pow(10, powerOf10);\r\n\r\n\t\treturn isPowerOf10 ? powerOf10 : exponent;\r\n\t}\r\n};\r\n\r\nvar helpers_math = exports$2;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.math.log10 instead.\r\n * @namespace Chart.helpers.log10\r\n * @deprecated since version 2.9.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers_core.log10 = exports$2.log10;\n\nvar getRtlAdapter = function(rectX, width) {\r\n\treturn {\r\n\t\tx: function(x) {\r\n\t\t\treturn rectX + rectX + width - x;\r\n\t\t},\r\n\t\tsetWidth: function(w) {\r\n\t\t\twidth = w;\r\n\t\t},\r\n\t\ttextAlign: function(align) {\r\n\t\t\tif (align === 'center') {\r\n\t\t\t\treturn align;\r\n\t\t\t}\r\n\t\t\treturn align === 'right' ? 'left' : 'right';\r\n\t\t},\r\n\t\txPlus: function(x, value) {\r\n\t\t\treturn x - value;\r\n\t\t},\r\n\t\tleftForLtr: function(x, itemWidth) {\r\n\t\t\treturn x - itemWidth;\r\n\t\t},\r\n\t};\r\n};\r\n\r\nvar getLtrAdapter = function() {\r\n\treturn {\r\n\t\tx: function(x) {\r\n\t\t\treturn x;\r\n\t\t},\r\n\t\tsetWidth: function(w) { // eslint-disable-line no-unused-vars\r\n\t\t},\r\n\t\ttextAlign: function(align) {\r\n\t\t\treturn align;\r\n\t\t},\r\n\t\txPlus: function(x, value) {\r\n\t\t\treturn x + value;\r\n\t\t},\r\n\t\tleftForLtr: function(x, _itemWidth) { // eslint-disable-line no-unused-vars\r\n\t\t\treturn x;\r\n\t\t},\r\n\t};\r\n};\r\n\r\nvar getAdapter = function(rtl, rectX, width) {\r\n\treturn rtl ? getRtlAdapter(rectX, width) : getLtrAdapter();\r\n};\r\n\r\nvar overrideTextDirection = function(ctx, direction) {\r\n\tvar style, original;\r\n\tif (direction === 'ltr' || direction === 'rtl') {\r\n\t\tstyle = ctx.canvas.style;\r\n\t\toriginal = [\r\n\t\t\tstyle.getPropertyValue('direction'),\r\n\t\t\tstyle.getPropertyPriority('direction'),\r\n\t\t];\r\n\r\n\t\tstyle.setProperty('direction', direction, 'important');\r\n\t\tctx.prevTextDirection = original;\r\n\t}\r\n};\r\n\r\nvar restoreTextDirection = function(ctx) {\r\n\tvar original = ctx.prevTextDirection;\r\n\tif (original !== undefined) {\r\n\t\tdelete ctx.prevTextDirection;\r\n\t\tctx.canvas.style.setProperty('direction', original[0], original[1]);\r\n\t}\r\n};\r\n\r\nvar helpers_rtl = {\r\n\tgetRtlAdapter: getAdapter,\r\n\toverrideTextDirection: overrideTextDirection,\r\n\trestoreTextDirection: restoreTextDirection,\r\n};\n\nvar helpers$1 = helpers_core;\r\nvar easing = helpers_easing;\r\nvar canvas = helpers_canvas;\r\nvar options = helpers_options;\r\nvar math = helpers_math;\r\nvar rtl = helpers_rtl;\nhelpers$1.easing = easing;\nhelpers$1.canvas = canvas;\nhelpers$1.options = options;\nhelpers$1.math = math;\nhelpers$1.rtl = rtl;\n\nfunction interpolate(start, view, model, ease) {\r\n\tvar keys = Object.keys(model);\r\n\tvar i, ilen, key, actual, origin, target, type, c0, c1;\r\n\r\n\tfor (i = 0, ilen = keys.length; i < ilen; ++i) {\r\n\t\tkey = keys[i];\r\n\r\n\t\ttarget = model[key];\r\n\r\n\t\t// if a value is added to the model after pivot() has been called, the view\r\n\t\t// doesn't contain it, so let's initialize the view to the target value.\r\n\t\tif (!view.hasOwnProperty(key)) {\r\n\t\t\tview[key] = target;\r\n\t\t}\r\n\r\n\t\tactual = view[key];\r\n\r\n\t\tif (actual === target || key[0] === '_') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (!start.hasOwnProperty(key)) {\r\n\t\t\tstart[key] = actual;\r\n\t\t}\r\n\r\n\t\torigin = start[key];\r\n\r\n\t\ttype = typeof target;\r\n\r\n\t\tif (type === typeof origin) {\r\n\t\t\tif (type === 'string') {\r\n\t\t\t\tc0 = chartjsColor(origin);\r\n\t\t\t\tif (c0.valid) {\r\n\t\t\t\t\tc1 = chartjsColor(target);\r\n\t\t\t\t\tif (c1.valid) {\r\n\t\t\t\t\t\tview[key] = c1.mix(c0, ease).rgbString();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (helpers$1.isFinite(origin) && helpers$1.isFinite(target)) {\r\n\t\t\t\tview[key] = origin + (target - origin) * ease;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tview[key] = target;\r\n\t}\r\n}\r\n\r\nvar Element = function(configuration) {\r\n\thelpers$1.extend(this, configuration);\r\n\tthis.initialize.apply(this, arguments);\r\n};\r\n\r\nhelpers$1.extend(Element.prototype, {\r\n\t_type: undefined,\r\n\r\n\tinitialize: function() {\r\n\t\tthis.hidden = false;\r\n\t},\r\n\r\n\tpivot: function() {\r\n\t\tvar me = this;\r\n\t\tif (!me._view) {\r\n\t\t\tme._view = helpers$1.extend({}, me._model);\r\n\t\t}\r\n\t\tme._start = {};\r\n\t\treturn me;\r\n\t},\r\n\r\n\ttransition: function(ease) {\r\n\t\tvar me = this;\r\n\t\tvar model = me._model;\r\n\t\tvar start = me._start;\r\n\t\tvar view = me._view;\r\n\r\n\t\t// No animation -> No Transition\r\n\t\tif (!model || ease === 1) {\r\n\t\t\tme._view = helpers$1.extend({}, model);\r\n\t\t\tme._start = null;\r\n\t\t\treturn me;\r\n\t\t}\r\n\r\n\t\tif (!view) {\r\n\t\t\tview = me._view = {};\r\n\t\t}\r\n\r\n\t\tif (!start) {\r\n\t\t\tstart = me._start = {};\r\n\t\t}\r\n\r\n\t\tinterpolate(start, view, model, ease);\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\ttooltipPosition: function() {\r\n\t\treturn {\r\n\t\t\tx: this._model.x,\r\n\t\t\ty: this._model.y\r\n\t\t};\r\n\t},\r\n\r\n\thasValue: function() {\r\n\t\treturn helpers$1.isNumber(this._model.x) && helpers$1.isNumber(this._model.y);\r\n\t}\r\n});\r\n\r\nElement.extend = helpers$1.inherits;\r\n\r\nvar core_element = Element;\n\nvar exports$3 = core_element.extend({\r\n\tchart: null, // the animation associated chart instance\r\n\tcurrentStep: 0, // the current animation step\r\n\tnumSteps: 60, // default number of steps\r\n\teasing: '', // the easing to use for this animation\r\n\trender: null, // render function used by the animation service\r\n\r\n\tonAnimationProgress: null, // user specified callback to fire on each step of the animation\r\n\tonAnimationComplete: null, // user specified callback to fire when the animation finishes\r\n});\r\n\r\nvar core_animation = exports$3;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.Animation instead\r\n * @prop Chart.Animation#animationObject\r\n * @deprecated since version 2.6.0\r\n * @todo remove at version 3\r\n */\r\nObject.defineProperty(exports$3.prototype, 'animationObject', {\r\n\tget: function() {\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.Animation#chart instead\r\n * @prop Chart.Animation#chartInstance\r\n * @deprecated since version 2.6.0\r\n * @todo remove at version 3\r\n */\r\nObject.defineProperty(exports$3.prototype, 'chartInstance', {\r\n\tget: function() {\r\n\t\treturn this.chart;\r\n\t},\r\n\tset: function(value) {\r\n\t\tthis.chart = value;\r\n\t}\r\n});\n\ncore_defaults._set('global', {\r\n\tanimation: {\r\n\t\tduration: 1000,\r\n\t\teasing: 'easeOutQuart',\r\n\t\tonProgress: helpers$1.noop,\r\n\t\tonComplete: helpers$1.noop\r\n\t}\r\n});\r\n\r\nvar core_animations = {\r\n\tanimations: [],\r\n\trequest: null,\r\n\r\n\t/**\r\n\t * @param {Chart} chart - The chart to animate.\r\n\t * @param {Chart.Animation} animation - The animation that we will animate.\r\n\t * @param {number} duration - The animation duration in ms.\r\n\t * @param {boolean} lazy - if true, the chart is not marked as animating to enable more responsive interactions\r\n\t */\r\n\taddAnimation: function(chart, animation, duration, lazy) {\r\n\t\tvar animations = this.animations;\r\n\t\tvar i, ilen;\r\n\r\n\t\tanimation.chart = chart;\r\n\t\tanimation.startTime = Date.now();\r\n\t\tanimation.duration = duration;\r\n\r\n\t\tif (!lazy) {\r\n\t\t\tchart.animating = true;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = animations.length; i < ilen; ++i) {\r\n\t\t\tif (animations[i].chart === chart) {\r\n\t\t\t\tanimations[i] = animation;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tanimations.push(animation);\r\n\r\n\t\t// If there are no animations queued, manually kickstart a digest, for lack of a better word\r\n\t\tif (animations.length === 1) {\r\n\t\t\tthis.requestAnimationFrame();\r\n\t\t}\r\n\t},\r\n\r\n\tcancelAnimation: function(chart) {\r\n\t\tvar index = helpers$1.findIndex(this.animations, function(animation) {\r\n\t\t\treturn animation.chart === chart;\r\n\t\t});\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.animations.splice(index, 1);\r\n\t\t\tchart.animating = false;\r\n\t\t}\r\n\t},\r\n\r\n\trequestAnimationFrame: function() {\r\n\t\tvar me = this;\r\n\t\tif (me.request === null) {\r\n\t\t\t// Skip animation frame requests until the active one is executed.\r\n\t\t\t// This can happen when processing mouse events, e.g. 'mousemove'\r\n\t\t\t// and 'mouseout' events will trigger multiple renders.\r\n\t\t\tme.request = helpers$1.requestAnimFrame.call(window, function() {\r\n\t\t\t\tme.request = null;\r\n\t\t\t\tme.startDigest();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tstartDigest: function() {\r\n\t\tvar me = this;\r\n\r\n\t\tme.advance();\r\n\r\n\t\t// Do we have more stuff to animate?\r\n\t\tif (me.animations.length > 0) {\r\n\t\t\tme.requestAnimationFrame();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tadvance: function() {\r\n\t\tvar animations = this.animations;\r\n\t\tvar animation, chart, numSteps, nextStep;\r\n\t\tvar i = 0;\r\n\r\n\t\t// 1 animation per chart, so we are looping charts here\r\n\t\twhile (i < animations.length) {\r\n\t\t\tanimation = animations[i];\r\n\t\t\tchart = animation.chart;\r\n\t\t\tnumSteps = animation.numSteps;\r\n\r\n\t\t\t// Make sure that currentStep starts at 1\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/6104\r\n\t\t\tnextStep = Math.floor((Date.now() - animation.startTime) / animation.duration * numSteps) + 1;\r\n\t\t\tanimation.currentStep = Math.min(nextStep, numSteps);\r\n\r\n\t\t\thelpers$1.callback(animation.render, [chart, animation], chart);\r\n\t\t\thelpers$1.callback(animation.onAnimationProgress, [animation], chart);\r\n\r\n\t\t\tif (animation.currentStep >= numSteps) {\r\n\t\t\t\thelpers$1.callback(animation.onAnimationComplete, [animation], chart);\r\n\t\t\t\tchart.animating = false;\r\n\t\t\t\tanimations.splice(i, 1);\r\n\t\t\t} else {\r\n\t\t\t\t++i;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\n\nvar resolve = helpers$1.options.resolve;\r\n\r\nvar arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'];\r\n\r\n/**\r\n * Hooks the array methods that add or remove values ('push', pop', 'shift', 'splice',\r\n * 'unshift') and notify the listener AFTER the array has been altered. Listeners are\r\n * called on the 'onData*' callbacks (e.g. onDataPush, etc.) with same arguments.\r\n */\r\nfunction listenArrayEvents(array, listener) {\r\n\tif (array._chartjs) {\r\n\t\tarray._chartjs.listeners.push(listener);\r\n\t\treturn;\r\n\t}\r\n\r\n\tObject.defineProperty(array, '_chartjs', {\r\n\t\tconfigurable: true,\r\n\t\tenumerable: false,\r\n\t\tvalue: {\r\n\t\t\tlisteners: [listener]\r\n\t\t}\r\n\t});\r\n\r\n\tarrayEvents.forEach(function(key) {\r\n\t\tvar method = 'onData' + key.charAt(0).toUpperCase() + key.slice(1);\r\n\t\tvar base = array[key];\r\n\r\n\t\tObject.defineProperty(array, key, {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: false,\r\n\t\t\tvalue: function() {\r\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\t\t\tvar res = base.apply(this, args);\r\n\r\n\t\t\t\thelpers$1.each(array._chartjs.listeners, function(object) {\r\n\t\t\t\t\tif (typeof object[method] === 'function') {\r\n\t\t\t\t\t\tobject[method].apply(object, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * Removes the given array event listener and cleanup extra attached properties (such as\r\n * the _chartjs stub and overridden methods) if array doesn't have any more listeners.\r\n */\r\nfunction unlistenArrayEvents(array, listener) {\r\n\tvar stub = array._chartjs;\r\n\tif (!stub) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar listeners = stub.listeners;\r\n\tvar index = listeners.indexOf(listener);\r\n\tif (index !== -1) {\r\n\t\tlisteners.splice(index, 1);\r\n\t}\r\n\r\n\tif (listeners.length > 0) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tarrayEvents.forEach(function(key) {\r\n\t\tdelete array[key];\r\n\t});\r\n\r\n\tdelete array._chartjs;\r\n}\r\n\r\n// Base class for all dataset controllers (line, bar, etc)\r\nvar DatasetController = function(chart, datasetIndex) {\r\n\tthis.initialize(chart, datasetIndex);\r\n};\r\n\r\nhelpers$1.extend(DatasetController.prototype, {\r\n\r\n\t/**\r\n\t * Element type used to generate a meta dataset (e.g. Chart.element.Line).\r\n\t * @type {Chart.core.element}\r\n\t */\r\n\tdatasetElementType: null,\r\n\r\n\t/**\r\n\t * Element type used to generate a meta data (e.g. Chart.element.Point).\r\n\t * @type {Chart.core.element}\r\n\t */\r\n\tdataElementType: null,\r\n\r\n\t/**\r\n\t * Dataset element option keys to be resolved in _resolveDatasetElementOptions.\r\n\t * A derived controller may override this to resolve controller-specific options.\r\n\t * The keys defined here are for backward compatibility for legend styles.\r\n\t * @private\r\n\t */\r\n\t_datasetElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderCapStyle',\r\n\t\t'borderColor',\r\n\t\t'borderDash',\r\n\t\t'borderDashOffset',\r\n\t\t'borderJoinStyle',\r\n\t\t'borderWidth'\r\n\t],\r\n\r\n\t/**\r\n\t * Data element option keys to be resolved in _resolveDataElementOptions.\r\n\t * A derived controller may override this to resolve controller-specific options.\r\n\t * The keys defined here are for backward compatibility for legend styles.\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderWidth',\r\n\t\t'pointStyle'\r\n\t],\r\n\r\n\tinitialize: function(chart, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tme.chart = chart;\r\n\t\tme.index = datasetIndex;\r\n\t\tme.linkScales();\r\n\t\tme.addElements();\r\n\t\tme._type = me.getMeta().type;\r\n\t},\r\n\r\n\tupdateIndex: function(datasetIndex) {\r\n\t\tthis.index = datasetIndex;\r\n\t},\r\n\r\n\tlinkScales: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar chart = me.chart;\r\n\t\tvar scales = chart.scales;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar scalesOpts = chart.options.scales;\r\n\r\n\t\tif (meta.xAxisID === null || !(meta.xAxisID in scales) || dataset.xAxisID) {\r\n\t\t\tmeta.xAxisID = dataset.xAxisID || scalesOpts.xAxes[0].id;\r\n\t\t}\r\n\t\tif (meta.yAxisID === null || !(meta.yAxisID in scales) || dataset.yAxisID) {\r\n\t\t\tmeta.yAxisID = dataset.yAxisID || scalesOpts.yAxes[0].id;\r\n\t\t}\r\n\t},\r\n\r\n\tgetDataset: function() {\r\n\t\treturn this.chart.data.datasets[this.index];\r\n\t},\r\n\r\n\tgetMeta: function() {\r\n\t\treturn this.chart.getDatasetMeta(this.index);\r\n\t},\r\n\r\n\tgetScaleForId: function(scaleID) {\r\n\t\treturn this.chart.scales[scaleID];\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScaleId: function() {\r\n\t\treturn this.getMeta().yAxisID;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScaleId: function() {\r\n\t\treturn this.getMeta().xAxisID;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScale: function() {\r\n\t\treturn this.getScaleForId(this._getValueScaleId());\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScale: function() {\r\n\t\treturn this.getScaleForId(this._getIndexScaleId());\r\n\t},\r\n\r\n\treset: function() {\r\n\t\tthis._update(true);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tdestroy: function() {\r\n\t\tif (this._data) {\r\n\t\t\tunlistenArrayEvents(this._data, this);\r\n\t\t}\r\n\t},\r\n\r\n\tcreateMetaDataset: function() {\r\n\t\tvar me = this;\r\n\t\tvar type = me.datasetElementType;\r\n\t\treturn type && new type({\r\n\t\t\t_chart: me.chart,\r\n\t\t\t_datasetIndex: me.index\r\n\t\t});\r\n\t},\r\n\r\n\tcreateMetaData: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar type = me.dataElementType;\r\n\t\treturn type && new type({\r\n\t\t\t_chart: me.chart,\r\n\t\t\t_datasetIndex: me.index,\r\n\t\t\t_index: index\r\n\t\t});\r\n\t},\r\n\r\n\taddElements: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar data = me.getDataset().data || [];\r\n\t\tvar metaData = meta.data;\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = data.length; i < ilen; ++i) {\r\n\t\t\tmetaData[i] = metaData[i] || me.createMetaData(i);\r\n\t\t}\r\n\r\n\t\tmeta.dataset = meta.dataset || me.createMetaDataset();\r\n\t},\r\n\r\n\taddElementAndReset: function(index) {\r\n\t\tvar element = this.createMetaData(index);\r\n\t\tthis.getMeta().data.splice(index, 0, element);\r\n\t\tthis.updateElement(element, index, true);\r\n\t},\r\n\r\n\tbuildOrUpdateElements: function() {\r\n\t\tvar me = this;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar data = dataset.data || (dataset.data = []);\r\n\r\n\t\t// In order to correctly handle data addition/deletion animation (an thus simulate\r\n\t\t// real-time charts), we need to monitor these data modifications and synchronize\r\n\t\t// the internal meta data accordingly.\r\n\t\tif (me._data !== data) {\r\n\t\t\tif (me._data) {\r\n\t\t\t\t// This case happens when the user replaced the data array instance.\r\n\t\t\t\tunlistenArrayEvents(me._data, me);\r\n\t\t\t}\r\n\r\n\t\t\tif (data && Object.isExtensible(data)) {\r\n\t\t\t\tlistenArrayEvents(data, me);\r\n\t\t\t}\r\n\t\t\tme._data = data;\r\n\t\t}\r\n\r\n\t\t// Re-sync meta data in case the user replaced the data array or if we missed\r\n\t\t// any updates and so make sure that we handle number of datapoints changing.\r\n\t\tme.resyncElements();\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the merged user-supplied and default dataset-level options\r\n\t * @private\r\n\t */\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tme._config = helpers$1.merge(Object.create(null), [\r\n\t\t\tme.chart.options.datasets[me._type],\r\n\t\t\tme.getDataset(),\r\n\t\t], {\r\n\t\t\tmerger: function(key, target, source) {\r\n\t\t\t\tif (key !== '_meta' && key !== 'data') {\r\n\t\t\t\t\thelpers$1._merger(key, target, source);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_update: function(reset) {\r\n\t\tvar me = this;\r\n\t\tme._configure();\r\n\t\tme._cachedDataOpts = null;\r\n\t\tme.update(reset);\r\n\t},\r\n\r\n\tupdate: helpers$1.noop,\r\n\r\n\ttransition: function(easingValue) {\r\n\t\tvar meta = this.getMeta();\r\n\t\tvar elements = meta.data || [];\r\n\t\tvar ilen = elements.length;\r\n\t\tvar i = 0;\r\n\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\telements[i].transition(easingValue);\r\n\t\t}\r\n\r\n\t\tif (meta.dataset) {\r\n\t\t\tmeta.dataset.transition(easingValue);\r\n\t\t}\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar meta = this.getMeta();\r\n\t\tvar elements = meta.data || [];\r\n\t\tvar ilen = elements.length;\r\n\t\tvar i = 0;\r\n\r\n\t\tif (meta.dataset) {\r\n\t\t\tmeta.dataset.draw();\r\n\t\t}\r\n\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\telements[i].draw();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Returns a set of predefined style properties that should be used to represent the dataset\r\n\t * or the data if the index is specified\r\n\t * @param {number} index - data index\r\n\t * @return {IStyleInterface} style object\r\n\t */\r\n\tgetStyle: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar dataset = meta.dataset;\r\n\t\tvar style;\r\n\r\n\t\tme._configure();\r\n\t\tif (dataset && index === undefined) {\r\n\t\t\tstyle = me._resolveDatasetElementOptions(dataset || {});\r\n\t\t} else {\r\n\t\t\tindex = index || 0;\r\n\t\t\tstyle = me._resolveDataElementOptions(meta.data[index] || {}, index);\r\n\t\t}\r\n\r\n\t\tif (style.fill === false || style.fill === null) {\r\n\t\t\tstyle.backgroundColor = style.borderColor;\r\n\t\t}\r\n\r\n\t\treturn style;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDatasetElementOptions: function(element, hover) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar datasetOpts = me._config;\r\n\t\tvar custom = element.custom || {};\r\n\t\tvar options = chart.options.elements[me.datasetElementType.prototype._type] || {};\r\n\t\tvar elementOptions = me._datasetElementOptions;\r\n\t\tvar values = {};\r\n\t\tvar i, ilen, key, readKey;\r\n\r\n\t\t// Scriptable options\r\n\t\tvar context = {\r\n\t\t\tchart: chart,\r\n\t\t\tdataset: me.getDataset(),\r\n\t\t\tdatasetIndex: me.index,\r\n\t\t\thover: hover\r\n\t\t};\r\n\r\n\t\tfor (i = 0, ilen = elementOptions.length; i < ilen; ++i) {\r\n\t\t\tkey = elementOptions[i];\r\n\t\t\treadKey = hover ? 'hover' + key.charAt(0).toUpperCase() + key.slice(1) : key;\r\n\t\t\tvalues[key] = resolve([\r\n\t\t\t\tcustom[readKey],\r\n\t\t\t\tdatasetOpts[readKey],\r\n\t\t\t\toptions[readKey]\r\n\t\t\t], context);\r\n\t\t}\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDataElementOptions: function(element, index) {\r\n\t\tvar me = this;\r\n\t\tvar custom = element && element.custom;\r\n\t\tvar cached = me._cachedDataOpts;\r\n\t\tif (cached && !custom) {\r\n\t\t\treturn cached;\r\n\t\t}\r\n\t\tvar chart = me.chart;\r\n\t\tvar datasetOpts = me._config;\r\n\t\tvar options = chart.options.elements[me.dataElementType.prototype._type] || {};\r\n\t\tvar elementOptions = me._dataElementOptions;\r\n\t\tvar values = {};\r\n\r\n\t\t// Scriptable options\r\n\t\tvar context = {\r\n\t\t\tchart: chart,\r\n\t\t\tdataIndex: index,\r\n\t\t\tdataset: me.getDataset(),\r\n\t\t\tdatasetIndex: me.index\r\n\t\t};\r\n\r\n\t\t// `resolve` sets cacheable to `false` if any option is indexed or scripted\r\n\t\tvar info = {cacheable: !custom};\r\n\r\n\t\tvar keys, i, ilen, key;\r\n\r\n\t\tcustom = custom || {};\r\n\r\n\t\tif (helpers$1.isArray(elementOptions)) {\r\n\t\t\tfor (i = 0, ilen = elementOptions.length; i < ilen; ++i) {\r\n\t\t\t\tkey = elementOptions[i];\r\n\t\t\t\tvalues[key] = resolve([\r\n\t\t\t\t\tcustom[key],\r\n\t\t\t\t\tdatasetOpts[key],\r\n\t\t\t\t\toptions[key]\r\n\t\t\t\t], context, index, info);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tkeys = Object.keys(elementOptions);\r\n\t\t\tfor (i = 0, ilen = keys.length; i < ilen; ++i) {\r\n\t\t\t\tkey = keys[i];\r\n\t\t\t\tvalues[key] = resolve([\r\n\t\t\t\t\tcustom[key],\r\n\t\t\t\t\tdatasetOpts[elementOptions[key]],\r\n\t\t\t\t\tdatasetOpts[key],\r\n\t\t\t\t\toptions[key]\r\n\t\t\t\t], context, index, info);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (info.cacheable) {\r\n\t\t\tme._cachedDataOpts = Object.freeze(values);\r\n\t\t}\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\tremoveHoverStyle: function(element) {\r\n\t\thelpers$1.merge(element._model, element.$previousStyle || {});\r\n\t\tdelete element.$previousStyle;\r\n\t},\r\n\r\n\tsetHoverStyle: function(element) {\r\n\t\tvar dataset = this.chart.data.datasets[element._datasetIndex];\r\n\t\tvar index = element._index;\r\n\t\tvar custom = element.custom || {};\r\n\t\tvar model = element._model;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\telement.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = resolve([custom.hoverBackgroundColor, dataset.hoverBackgroundColor, getHoverColor(model.backgroundColor)], undefined, index);\r\n\t\tmodel.borderColor = resolve([custom.hoverBorderColor, dataset.hoverBorderColor, getHoverColor(model.borderColor)], undefined, index);\r\n\t\tmodel.borderWidth = resolve([custom.hoverBorderWidth, dataset.hoverBorderWidth, model.borderWidth], undefined, index);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_removeDatasetHoverStyle: function() {\r\n\t\tvar element = this.getMeta().dataset;\r\n\r\n\t\tif (element) {\r\n\t\t\tthis.removeHoverStyle(element);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_setDatasetHoverStyle: function() {\r\n\t\tvar element = this.getMeta().dataset;\r\n\t\tvar prev = {};\r\n\t\tvar i, ilen, key, keys, hoverOptions, model;\r\n\r\n\t\tif (!element) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmodel = element._model;\r\n\t\thoverOptions = this._resolveDatasetElementOptions(element, true);\r\n\r\n\t\tkeys = Object.keys(hoverOptions);\r\n\t\tfor (i = 0, ilen = keys.length; i < ilen; ++i) {\r\n\t\t\tkey = keys[i];\r\n\t\t\tprev[key] = model[key];\r\n\t\t\tmodel[key] = hoverOptions[key];\r\n\t\t}\r\n\r\n\t\telement.$previousStyle = prev;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tresyncElements: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar data = me.getDataset().data;\r\n\t\tvar numMeta = meta.data.length;\r\n\t\tvar numData = data.length;\r\n\r\n\t\tif (numData < numMeta) {\r\n\t\t\tmeta.data.splice(numData, numMeta - numData);\r\n\t\t} else if (numData > numMeta) {\r\n\t\t\tme.insertElements(numMeta, numData - numMeta);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinsertElements: function(start, count) {\r\n\t\tfor (var i = 0; i < count; ++i) {\r\n\t\t\tthis.addElementAndReset(start + i);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataPush: function() {\r\n\t\tvar count = arguments.length;\r\n\t\tthis.insertElements(this.getDataset().data.length - count, count);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataPop: function() {\r\n\t\tthis.getMeta().data.pop();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataShift: function() {\r\n\t\tthis.getMeta().data.shift();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataSplice: function(start, count) {\r\n\t\tthis.getMeta().data.splice(start, count);\r\n\t\tthis.insertElements(start, arguments.length - 2);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataUnshift: function() {\r\n\t\tthis.insertElements(0, arguments.length);\r\n\t}\r\n});\r\n\r\nDatasetController.extend = helpers$1.inherits;\r\n\r\nvar core_datasetController = DatasetController;\n\nvar TAU = Math.PI * 2;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {\r\n\t\tarc: {\r\n\t\t\tbackgroundColor: core_defaults.global.defaultColor,\r\n\t\t\tborderColor: '#fff',\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderAlign: 'center'\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction clipArc(ctx, arc) {\r\n\tvar startAngle = arc.startAngle;\r\n\tvar endAngle = arc.endAngle;\r\n\tvar pixelMargin = arc.pixelMargin;\r\n\tvar angleMargin = pixelMargin / arc.outerRadius;\r\n\tvar x = arc.x;\r\n\tvar y = arc.y;\r\n\r\n\t// Draw an inner border by cliping the arc and drawing a double-width border\r\n\t// Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\r\n\tctx.beginPath();\r\n\tctx.arc(x, y, arc.outerRadius, startAngle - angleMargin, endAngle + angleMargin);\r\n\tif (arc.innerRadius > pixelMargin) {\r\n\t\tangleMargin = pixelMargin / arc.innerRadius;\r\n\t\tctx.arc(x, y, arc.innerRadius - pixelMargin, endAngle + angleMargin, startAngle - angleMargin, true);\r\n\t} else {\r\n\t\tctx.arc(x, y, pixelMargin, endAngle + Math.PI / 2, startAngle - Math.PI / 2);\r\n\t}\r\n\tctx.closePath();\r\n\tctx.clip();\r\n}\r\n\r\nfunction drawFullCircleBorders(ctx, vm, arc, inner) {\r\n\tvar endAngle = arc.endAngle;\r\n\tvar i;\r\n\r\n\tif (inner) {\r\n\t\tarc.endAngle = arc.startAngle + TAU;\r\n\t\tclipArc(ctx, arc);\r\n\t\tarc.endAngle = endAngle;\r\n\t\tif (arc.endAngle === arc.startAngle && arc.fullCircles) {\r\n\t\t\tarc.endAngle += TAU;\r\n\t\t\tarc.fullCircles--;\r\n\t\t}\r\n\t}\r\n\r\n\tctx.beginPath();\r\n\tctx.arc(arc.x, arc.y, arc.innerRadius, arc.startAngle + TAU, arc.startAngle, true);\r\n\tfor (i = 0; i < arc.fullCircles; ++i) {\r\n\t\tctx.stroke();\r\n\t}\r\n\r\n\tctx.beginPath();\r\n\tctx.arc(arc.x, arc.y, vm.outerRadius, arc.startAngle, arc.startAngle + TAU);\r\n\tfor (i = 0; i < arc.fullCircles; ++i) {\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\nfunction drawBorder(ctx, vm, arc) {\r\n\tvar inner = vm.borderAlign === 'inner';\r\n\r\n\tif (inner) {\r\n\t\tctx.lineWidth = vm.borderWidth * 2;\r\n\t\tctx.lineJoin = 'round';\r\n\t} else {\r\n\t\tctx.lineWidth = vm.borderWidth;\r\n\t\tctx.lineJoin = 'bevel';\r\n\t}\r\n\r\n\tif (arc.fullCircles) {\r\n\t\tdrawFullCircleBorders(ctx, vm, arc, inner);\r\n\t}\r\n\r\n\tif (inner) {\r\n\t\tclipArc(ctx, arc);\r\n\t}\r\n\r\n\tctx.beginPath();\r\n\tctx.arc(arc.x, arc.y, vm.outerRadius, arc.startAngle, arc.endAngle);\r\n\tctx.arc(arc.x, arc.y, arc.innerRadius, arc.endAngle, arc.startAngle, true);\r\n\tctx.closePath();\r\n\tctx.stroke();\r\n}\r\n\r\nvar element_arc = core_element.extend({\r\n\t_type: 'arc',\r\n\r\n\tinLabelRange: function(mouseX) {\r\n\t\tvar vm = this._view;\r\n\r\n\t\tif (vm) {\r\n\t\t\treturn (Math.pow(mouseX - vm.x, 2) < Math.pow(vm.radius + vm.hoverRadius, 2));\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tinRange: function(chartX, chartY) {\r\n\t\tvar vm = this._view;\r\n\r\n\t\tif (vm) {\r\n\t\t\tvar pointRelativePosition = helpers$1.getAngleFromPoint(vm, {x: chartX, y: chartY});\r\n\t\t\tvar angle = pointRelativePosition.angle;\r\n\t\t\tvar distance = pointRelativePosition.distance;\r\n\r\n\t\t\t// Sanitise angle range\r\n\t\t\tvar startAngle = vm.startAngle;\r\n\t\t\tvar endAngle = vm.endAngle;\r\n\t\t\twhile (endAngle < startAngle) {\r\n\t\t\t\tendAngle += TAU;\r\n\t\t\t}\r\n\t\t\twhile (angle > endAngle) {\r\n\t\t\t\tangle -= TAU;\r\n\t\t\t}\r\n\t\t\twhile (angle < startAngle) {\r\n\t\t\t\tangle += TAU;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if within the range of the open/close angle\r\n\t\t\tvar betweenAngles = (angle >= startAngle && angle <= endAngle);\r\n\t\t\tvar withinRadius = (distance >= vm.innerRadius && distance <= vm.outerRadius);\r\n\r\n\t\t\treturn (betweenAngles && withinRadius);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tgetCenterPoint: function() {\r\n\t\tvar vm = this._view;\r\n\t\tvar halfAngle = (vm.startAngle + vm.endAngle) / 2;\r\n\t\tvar halfRadius = (vm.innerRadius + vm.outerRadius) / 2;\r\n\t\treturn {\r\n\t\t\tx: vm.x + Math.cos(halfAngle) * halfRadius,\r\n\t\t\ty: vm.y + Math.sin(halfAngle) * halfRadius\r\n\t\t};\r\n\t},\r\n\r\n\tgetArea: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn Math.PI * ((vm.endAngle - vm.startAngle) / (2 * Math.PI)) * (Math.pow(vm.outerRadius, 2) - Math.pow(vm.innerRadius, 2));\r\n\t},\r\n\r\n\ttooltipPosition: function() {\r\n\t\tvar vm = this._view;\r\n\t\tvar centreAngle = vm.startAngle + ((vm.endAngle - vm.startAngle) / 2);\r\n\t\tvar rangeFromCentre = (vm.outerRadius - vm.innerRadius) / 2 + vm.innerRadius;\r\n\r\n\t\treturn {\r\n\t\t\tx: vm.x + (Math.cos(centreAngle) * rangeFromCentre),\r\n\t\t\ty: vm.y + (Math.sin(centreAngle) * rangeFromCentre)\r\n\t\t};\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar vm = this._view;\r\n\t\tvar pixelMargin = (vm.borderAlign === 'inner') ? 0.33 : 0;\r\n\t\tvar arc = {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y,\r\n\t\t\tinnerRadius: vm.innerRadius,\r\n\t\t\touterRadius: Math.max(vm.outerRadius - pixelMargin, 0),\r\n\t\t\tpixelMargin: pixelMargin,\r\n\t\t\tstartAngle: vm.startAngle,\r\n\t\t\tendAngle: vm.endAngle,\r\n\t\t\tfullCircles: Math.floor(vm.circumference / TAU)\r\n\t\t};\r\n\t\tvar i;\r\n\r\n\t\tctx.save();\r\n\r\n\t\tctx.fillStyle = vm.backgroundColor;\r\n\t\tctx.strokeStyle = vm.borderColor;\r\n\r\n\t\tif (arc.fullCircles) {\r\n\t\t\tarc.endAngle = arc.startAngle + TAU;\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.arc(arc.x, arc.y, arc.outerRadius, arc.startAngle, arc.endAngle);\r\n\t\t\tctx.arc(arc.x, arc.y, arc.innerRadius, arc.endAngle, arc.startAngle, true);\r\n\t\t\tctx.closePath();\r\n\t\t\tfor (i = 0; i < arc.fullCircles; ++i) {\r\n\t\t\t\tctx.fill();\r\n\t\t\t}\r\n\t\t\tarc.endAngle = arc.startAngle + vm.circumference % TAU;\r\n\t\t}\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(arc.x, arc.y, arc.outerRadius, arc.startAngle, arc.endAngle);\r\n\t\tctx.arc(arc.x, arc.y, arc.innerRadius, arc.endAngle, arc.startAngle, true);\r\n\t\tctx.closePath();\r\n\t\tctx.fill();\r\n\r\n\t\tif (vm.borderWidth) {\r\n\t\t\tdrawBorder(ctx, vm, arc);\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\t}\r\n});\n\nvar valueOrDefault$1 = helpers$1.valueOrDefault;\r\n\r\nvar defaultColor = core_defaults.global.defaultColor;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {\r\n\t\tline: {\r\n\t\t\ttension: 0.4,\r\n\t\t\tbackgroundColor: defaultColor,\r\n\t\t\tborderWidth: 3,\r\n\t\t\tborderColor: defaultColor,\r\n\t\t\tborderCapStyle: 'butt',\r\n\t\t\tborderDash: [],\r\n\t\t\tborderDashOffset: 0.0,\r\n\t\t\tborderJoinStyle: 'miter',\r\n\t\t\tcapBezierPoints: true,\r\n\t\t\tfill: true, // do we fill in the area between the line and its base axis\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar element_line = core_element.extend({\r\n\t_type: 'line',\r\n\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar vm = me._view;\r\n\t\tvar ctx = me._chart.ctx;\r\n\t\tvar spanGaps = vm.spanGaps;\r\n\t\tvar points = me._children.slice(); // clone array\r\n\t\tvar globalDefaults = core_defaults.global;\r\n\t\tvar globalOptionLineElements = globalDefaults.elements.line;\r\n\t\tvar lastDrawnIndex = -1;\r\n\t\tvar closePath = me._loop;\r\n\t\tvar index, previous, currentVM;\r\n\r\n\t\tif (!points.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (me._loop) {\r\n\t\t\tfor (index = 0; index < points.length; ++index) {\r\n\t\t\t\tprevious = helpers$1.previousItem(points, index);\r\n\t\t\t\t// If the line has an open path, shift the point array\r\n\t\t\t\tif (!points[index]._view.skip && previous._view.skip) {\r\n\t\t\t\t\tpoints = points.slice(index).concat(points.slice(0, index));\r\n\t\t\t\t\tclosePath = spanGaps;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// If the line has a close path, add the first point again\r\n\t\t\tif (closePath) {\r\n\t\t\t\tpoints.push(points[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.save();\r\n\r\n\t\t// Stroke Line Options\r\n\t\tctx.lineCap = vm.borderCapStyle || globalOptionLineElements.borderCapStyle;\r\n\r\n\t\t// IE 9 and 10 do not support line dash\r\n\t\tif (ctx.setLineDash) {\r\n\t\t\tctx.setLineDash(vm.borderDash || globalOptionLineElements.borderDash);\r\n\t\t}\r\n\r\n\t\tctx.lineDashOffset = valueOrDefault$1(vm.borderDashOffset, globalOptionLineElements.borderDashOffset);\r\n\t\tctx.lineJoin = vm.borderJoinStyle || globalOptionLineElements.borderJoinStyle;\r\n\t\tctx.lineWidth = valueOrDefault$1(vm.borderWidth, globalOptionLineElements.borderWidth);\r\n\t\tctx.strokeStyle = vm.borderColor || globalDefaults.defaultColor;\r\n\r\n\t\t// Stroke Line\r\n\t\tctx.beginPath();\r\n\r\n\t\t// First point moves to it's starting position no matter what\r\n\t\tcurrentVM = points[0]._view;\r\n\t\tif (!currentVM.skip) {\r\n\t\t\tctx.moveTo(currentVM.x, currentVM.y);\r\n\t\t\tlastDrawnIndex = 0;\r\n\t\t}\r\n\r\n\t\tfor (index = 1; index < points.length; ++index) {\r\n\t\t\tcurrentVM = points[index]._view;\r\n\t\t\tprevious = lastDrawnIndex === -1 ? helpers$1.previousItem(points, index) : points[lastDrawnIndex];\r\n\r\n\t\t\tif (!currentVM.skip) {\r\n\t\t\t\tif ((lastDrawnIndex !== (index - 1) && !spanGaps) || lastDrawnIndex === -1) {\r\n\t\t\t\t\t// There was a gap and this is the first point after the gap\r\n\t\t\t\t\tctx.moveTo(currentVM.x, currentVM.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Line to next point\r\n\t\t\t\t\thelpers$1.canvas.lineTo(ctx, previous._view, currentVM);\r\n\t\t\t\t}\r\n\t\t\t\tlastDrawnIndex = index;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (closePath) {\r\n\t\t\tctx.closePath();\r\n\t\t}\r\n\r\n\t\tctx.stroke();\r\n\t\tctx.restore();\r\n\t}\r\n});\n\nvar valueOrDefault$2 = helpers$1.valueOrDefault;\r\n\r\nvar defaultColor$1 = core_defaults.global.defaultColor;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {\r\n\t\tpoint: {\r\n\t\t\tradius: 3,\r\n\t\t\tpointStyle: 'circle',\r\n\t\t\tbackgroundColor: defaultColor$1,\r\n\t\t\tborderColor: defaultColor$1,\r\n\t\t\tborderWidth: 1,\r\n\t\t\t// Hover\r\n\t\t\thitRadius: 1,\r\n\t\t\thoverRadius: 4,\r\n\t\t\thoverBorderWidth: 1\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction xRange(mouseX) {\r\n\tvar vm = this._view;\r\n\treturn vm ? (Math.abs(mouseX - vm.x) < vm.radius + vm.hitRadius) : false;\r\n}\r\n\r\nfunction yRange(mouseY) {\r\n\tvar vm = this._view;\r\n\treturn vm ? (Math.abs(mouseY - vm.y) < vm.radius + vm.hitRadius) : false;\r\n}\r\n\r\nvar element_point = core_element.extend({\r\n\t_type: 'point',\r\n\r\n\tinRange: function(mouseX, mouseY) {\r\n\t\tvar vm = this._view;\r\n\t\treturn vm ? ((Math.pow(mouseX - vm.x, 2) + Math.pow(mouseY - vm.y, 2)) < Math.pow(vm.hitRadius + vm.radius, 2)) : false;\r\n\t},\r\n\r\n\tinLabelRange: xRange,\r\n\tinXRange: xRange,\r\n\tinYRange: yRange,\r\n\r\n\tgetCenterPoint: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y\r\n\t\t};\r\n\t},\r\n\r\n\tgetArea: function() {\r\n\t\treturn Math.PI * Math.pow(this._view.radius, 2);\r\n\t},\r\n\r\n\ttooltipPosition: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y,\r\n\t\t\tpadding: vm.radius + vm.borderWidth\r\n\t\t};\r\n\t},\r\n\r\n\tdraw: function(chartArea) {\r\n\t\tvar vm = this._view;\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar pointStyle = vm.pointStyle;\r\n\t\tvar rotation = vm.rotation;\r\n\t\tvar radius = vm.radius;\r\n\t\tvar x = vm.x;\r\n\t\tvar y = vm.y;\r\n\t\tvar globalDefaults = core_defaults.global;\r\n\t\tvar defaultColor = globalDefaults.defaultColor; // eslint-disable-line no-shadow\r\n\r\n\t\tif (vm.skip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Clipping for Points.\r\n\t\tif (chartArea === undefined || helpers$1.canvas._isPointInArea(vm, chartArea)) {\r\n\t\t\tctx.strokeStyle = vm.borderColor || defaultColor;\r\n\t\t\tctx.lineWidth = valueOrDefault$2(vm.borderWidth, globalDefaults.elements.point.borderWidth);\r\n\t\t\tctx.fillStyle = vm.backgroundColor || defaultColor;\r\n\t\t\thelpers$1.canvas.drawPoint(ctx, pointStyle, radius, x, y, rotation);\r\n\t\t}\r\n\t}\r\n});\n\nvar defaultColor$2 = core_defaults.global.defaultColor;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {\r\n\t\trectangle: {\r\n\t\t\tbackgroundColor: defaultColor$2,\r\n\t\t\tborderColor: defaultColor$2,\r\n\t\t\tborderSkipped: 'bottom',\r\n\t\t\tborderWidth: 0\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction isVertical(vm) {\r\n\treturn vm && vm.width !== undefined;\r\n}\r\n\r\n/**\r\n * Helper function to get the bounds of the bar regardless of the orientation\r\n * @param bar {Chart.Element.Rectangle} the bar\r\n * @return {Bounds} bounds of the bar\r\n * @private\r\n */\r\nfunction getBarBounds(vm) {\r\n\tvar x1, x2, y1, y2, half;\r\n\r\n\tif (isVertical(vm)) {\r\n\t\thalf = vm.width / 2;\r\n\t\tx1 = vm.x - half;\r\n\t\tx2 = vm.x + half;\r\n\t\ty1 = Math.min(vm.y, vm.base);\r\n\t\ty2 = Math.max(vm.y, vm.base);\r\n\t} else {\r\n\t\thalf = vm.height / 2;\r\n\t\tx1 = Math.min(vm.x, vm.base);\r\n\t\tx2 = Math.max(vm.x, vm.base);\r\n\t\ty1 = vm.y - half;\r\n\t\ty2 = vm.y + half;\r\n\t}\r\n\r\n\treturn {\r\n\t\tleft: x1,\r\n\t\ttop: y1,\r\n\t\tright: x2,\r\n\t\tbottom: y2\r\n\t};\r\n}\r\n\r\nfunction swap(orig, v1, v2) {\r\n\treturn orig === v1 ? v2 : orig === v2 ? v1 : orig;\r\n}\r\n\r\nfunction parseBorderSkipped(vm) {\r\n\tvar edge = vm.borderSkipped;\r\n\tvar res = {};\r\n\r\n\tif (!edge) {\r\n\t\treturn res;\r\n\t}\r\n\r\n\tif (vm.horizontal) {\r\n\t\tif (vm.base > vm.x) {\r\n\t\t\tedge = swap(edge, 'left', 'right');\r\n\t\t}\r\n\t} else if (vm.base < vm.y) {\r\n\t\tedge = swap(edge, 'bottom', 'top');\r\n\t}\r\n\r\n\tres[edge] = true;\r\n\treturn res;\r\n}\r\n\r\nfunction parseBorderWidth(vm, maxW, maxH) {\r\n\tvar value = vm.borderWidth;\r\n\tvar skip = parseBorderSkipped(vm);\r\n\tvar t, r, b, l;\r\n\r\n\tif (helpers$1.isObject(value)) {\r\n\t\tt = +value.top || 0;\r\n\t\tr = +value.right || 0;\r\n\t\tb = +value.bottom || 0;\r\n\t\tl = +value.left || 0;\r\n\t} else {\r\n\t\tt = r = b = l = +value || 0;\r\n\t}\r\n\r\n\treturn {\r\n\t\tt: skip.top || (t < 0) ? 0 : t > maxH ? maxH : t,\r\n\t\tr: skip.right || (r < 0) ? 0 : r > maxW ? maxW : r,\r\n\t\tb: skip.bottom || (b < 0) ? 0 : b > maxH ? maxH : b,\r\n\t\tl: skip.left || (l < 0) ? 0 : l > maxW ? maxW : l\r\n\t};\r\n}\r\n\r\nfunction boundingRects(vm) {\r\n\tvar bounds = getBarBounds(vm);\r\n\tvar width = bounds.right - bounds.left;\r\n\tvar height = bounds.bottom - bounds.top;\r\n\tvar border = parseBorderWidth(vm, width / 2, height / 2);\r\n\r\n\treturn {\r\n\t\touter: {\r\n\t\t\tx: bounds.left,\r\n\t\t\ty: bounds.top,\r\n\t\t\tw: width,\r\n\t\t\th: height\r\n\t\t},\r\n\t\tinner: {\r\n\t\t\tx: bounds.left + border.l,\r\n\t\t\ty: bounds.top + border.t,\r\n\t\t\tw: width - border.l - border.r,\r\n\t\t\th: height - border.t - border.b\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction inRange(vm, x, y) {\r\n\tvar skipX = x === null;\r\n\tvar skipY = y === null;\r\n\tvar bounds = !vm || (skipX && skipY) ? false : getBarBounds(vm);\r\n\r\n\treturn bounds\r\n\t\t&& (skipX || x >= bounds.left && x <= bounds.right)\r\n\t\t&& (skipY || y >= bounds.top && y <= bounds.bottom);\r\n}\r\n\r\nvar element_rectangle = core_element.extend({\r\n\t_type: 'rectangle',\r\n\r\n\tdraw: function() {\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar vm = this._view;\r\n\t\tvar rects = boundingRects(vm);\r\n\t\tvar outer = rects.outer;\r\n\t\tvar inner = rects.inner;\r\n\r\n\t\tctx.fillStyle = vm.backgroundColor;\r\n\t\tctx.fillRect(outer.x, outer.y, outer.w, outer.h);\r\n\r\n\t\tif (outer.w === inner.w && outer.h === inner.h) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tctx.save();\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(outer.x, outer.y, outer.w, outer.h);\r\n\t\tctx.clip();\r\n\t\tctx.fillStyle = vm.borderColor;\r\n\t\tctx.rect(inner.x, inner.y, inner.w, inner.h);\r\n\t\tctx.fill('evenodd');\r\n\t\tctx.restore();\r\n\t},\r\n\r\n\theight: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn vm.base - vm.y;\r\n\t},\r\n\r\n\tinRange: function(mouseX, mouseY) {\r\n\t\treturn inRange(this._view, mouseX, mouseY);\r\n\t},\r\n\r\n\tinLabelRange: function(mouseX, mouseY) {\r\n\t\tvar vm = this._view;\r\n\t\treturn isVertical(vm)\r\n\t\t\t? inRange(vm, mouseX, null)\r\n\t\t\t: inRange(vm, null, mouseY);\r\n\t},\r\n\r\n\tinXRange: function(mouseX) {\r\n\t\treturn inRange(this._view, mouseX, null);\r\n\t},\r\n\r\n\tinYRange: function(mouseY) {\r\n\t\treturn inRange(this._view, null, mouseY);\r\n\t},\r\n\r\n\tgetCenterPoint: function() {\r\n\t\tvar vm = this._view;\r\n\t\tvar x, y;\r\n\t\tif (isVertical(vm)) {\r\n\t\t\tx = vm.x;\r\n\t\t\ty = (vm.y + vm.base) / 2;\r\n\t\t} else {\r\n\t\t\tx = (vm.x + vm.base) / 2;\r\n\t\t\ty = vm.y;\r\n\t\t}\r\n\r\n\t\treturn {x: x, y: y};\r\n\t},\r\n\r\n\tgetArea: function() {\r\n\t\tvar vm = this._view;\r\n\r\n\t\treturn isVertical(vm)\r\n\t\t\t? vm.width * Math.abs(vm.y - vm.base)\r\n\t\t\t: vm.height * Math.abs(vm.x - vm.base);\r\n\t},\r\n\r\n\ttooltipPosition: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y\r\n\t\t};\r\n\t}\r\n});\n\nvar elements = {};\r\nvar Arc = element_arc;\r\nvar Line = element_line;\r\nvar Point = element_point;\r\nvar Rectangle = element_rectangle;\nelements.Arc = Arc;\nelements.Line = Line;\nelements.Point = Point;\nelements.Rectangle = Rectangle;\n\nvar deprecated = helpers$1._deprecated;\r\nvar valueOrDefault$3 = helpers$1.valueOrDefault;\r\n\r\ncore_defaults._set('bar', {\r\n\thover: {\r\n\t\tmode: 'label'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\ttype: 'category',\r\n\t\t\toffset: true,\r\n\t\t\tgridLines: {\r\n\t\t\t\toffsetGridLines: true\r\n\t\t\t}\r\n\t\t}],\r\n\r\n\t\tyAxes: [{\r\n\t\t\ttype: 'linear'\r\n\t\t}]\r\n\t}\r\n});\r\n\r\ncore_defaults._set('global', {\r\n\tdatasets: {\r\n\t\tbar: {\r\n\t\t\tcategoryPercentage: 0.8,\r\n\t\t\tbarPercentage: 0.9\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * Computes the \"optimal\" sample size to maintain bars equally sized while preventing overlap.\r\n * @private\r\n */\r\nfunction computeMinSampleSize(scale, pixels) {\r\n\tvar min = scale._length;\r\n\tvar prev, curr, i, ilen;\r\n\r\n\tfor (i = 1, ilen = pixels.length; i < ilen; ++i) {\r\n\t\tmin = Math.min(min, Math.abs(pixels[i] - pixels[i - 1]));\r\n\t}\r\n\r\n\tfor (i = 0, ilen = scale.getTicks().length; i < ilen; ++i) {\r\n\t\tcurr = scale.getPixelForTick(i);\r\n\t\tmin = i > 0 ? Math.min(min, Math.abs(curr - prev)) : min;\r\n\t\tprev = curr;\r\n\t}\r\n\r\n\treturn min;\r\n}\r\n\r\n/**\r\n * Computes an \"ideal\" category based on the absolute bar thickness or, if undefined or null,\r\n * uses the smallest interval (see computeMinSampleSize) that prevents bar overlapping. This\r\n * mode currently always generates bars equally sized (until we introduce scriptable options?).\r\n * @private\r\n */\r\nfunction computeFitCategoryTraits(index, ruler, options) {\r\n\tvar thickness = options.barThickness;\r\n\tvar count = ruler.stackCount;\r\n\tvar curr = ruler.pixels[index];\r\n\tvar min = helpers$1.isNullOrUndef(thickness)\r\n\t\t? computeMinSampleSize(ruler.scale, ruler.pixels)\r\n\t\t: -1;\r\n\tvar size, ratio;\r\n\r\n\tif (helpers$1.isNullOrUndef(thickness)) {\r\n\t\tsize = min * options.categoryPercentage;\r\n\t\tratio = options.barPercentage;\r\n\t} else {\r\n\t\t// When bar thickness is enforced, category and bar percentages are ignored.\r\n\t\t// Note(SB): we could add support for relative bar thickness (e.g. barThickness: '50%')\r\n\t\t// and deprecate barPercentage since this value is ignored when thickness is absolute.\r\n\t\tsize = thickness * count;\r\n\t\tratio = 1;\r\n\t}\r\n\r\n\treturn {\r\n\t\tchunk: size / count,\r\n\t\tratio: ratio,\r\n\t\tstart: curr - (size / 2)\r\n\t};\r\n}\r\n\r\n/**\r\n * Computes an \"optimal\" category that globally arranges bars side by side (no gap when\r\n * percentage options are 1), based on the previous and following categories. This mode\r\n * generates bars with different widths when data are not evenly spaced.\r\n * @private\r\n */\r\nfunction computeFlexCategoryTraits(index, ruler, options) {\r\n\tvar pixels = ruler.pixels;\r\n\tvar curr = pixels[index];\r\n\tvar prev = index > 0 ? pixels[index - 1] : null;\r\n\tvar next = index < pixels.length - 1 ? pixels[index + 1] : null;\r\n\tvar percent = options.categoryPercentage;\r\n\tvar start, size;\r\n\r\n\tif (prev === null) {\r\n\t\t// first data: its size is double based on the next point or,\r\n\t\t// if it's also the last data, we use the scale size.\r\n\t\tprev = curr - (next === null ? ruler.end - ruler.start : next - curr);\r\n\t}\r\n\r\n\tif (next === null) {\r\n\t\t// last data: its size is also double based on the previous point.\r\n\t\tnext = curr + curr - prev;\r\n\t}\r\n\r\n\tstart = curr - (curr - Math.min(prev, next)) / 2 * percent;\r\n\tsize = Math.abs(next - prev) / 2 * percent;\r\n\r\n\treturn {\r\n\t\tchunk: size / ruler.stackCount,\r\n\t\tratio: options.barPercentage,\r\n\t\tstart: start\r\n\t};\r\n}\r\n\r\nvar controller_bar = core_datasetController.extend({\r\n\r\n\tdataElementType: elements.Rectangle,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderSkipped',\r\n\t\t'borderWidth',\r\n\t\t'barPercentage',\r\n\t\t'barThickness',\r\n\t\t'categoryPercentage',\r\n\t\t'maxBarThickness',\r\n\t\t'minBarLength'\r\n\t],\r\n\r\n\tinitialize: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta, scaleOpts;\r\n\r\n\t\tcore_datasetController.prototype.initialize.apply(me, arguments);\r\n\r\n\t\tmeta = me.getMeta();\r\n\t\tmeta.stack = me.getDataset().stack;\r\n\t\tmeta.bar = true;\r\n\r\n\t\tscaleOpts = me._getIndexScale().options;\r\n\t\tdeprecated('bar chart', scaleOpts.barPercentage, 'scales.[x/y]Axes.barPercentage', 'dataset.barPercentage');\r\n\t\tdeprecated('bar chart', scaleOpts.barThickness, 'scales.[x/y]Axes.barThickness', 'dataset.barThickness');\r\n\t\tdeprecated('bar chart', scaleOpts.categoryPercentage, 'scales.[x/y]Axes.categoryPercentage', 'dataset.categoryPercentage');\r\n\t\tdeprecated('bar chart', me._getValueScale().options.minBarLength, 'scales.[x/y]Axes.minBarLength', 'dataset.minBarLength');\r\n\t\tdeprecated('bar chart', scaleOpts.maxBarThickness, 'scales.[x/y]Axes.maxBarThickness', 'dataset.maxBarThickness');\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar rects = me.getMeta().data;\r\n\t\tvar i, ilen;\r\n\r\n\t\tme._ruler = me.getRuler();\r\n\r\n\t\tfor (i = 0, ilen = rects.length; i < ilen; ++i) {\r\n\t\t\tme.updateElement(rects[i], i, reset);\r\n\t\t}\r\n\t},\r\n\r\n\tupdateElement: function(rectangle, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar options = me._resolveDataElementOptions(rectangle, index);\r\n\r\n\t\trectangle._xScale = me.getScaleForId(meta.xAxisID);\r\n\t\trectangle._yScale = me.getScaleForId(meta.yAxisID);\r\n\t\trectangle._datasetIndex = me.index;\r\n\t\trectangle._index = index;\r\n\t\trectangle._model = {\r\n\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\tborderColor: options.borderColor,\r\n\t\t\tborderSkipped: options.borderSkipped,\r\n\t\t\tborderWidth: options.borderWidth,\r\n\t\t\tdatasetLabel: dataset.label,\r\n\t\t\tlabel: me.chart.data.labels[index]\r\n\t\t};\r\n\r\n\t\tif (helpers$1.isArray(dataset.data[index])) {\r\n\t\t\trectangle._model.borderSkipped = null;\r\n\t\t}\r\n\r\n\t\tme._updateElementGeometry(rectangle, index, reset, options);\r\n\r\n\t\trectangle.pivot();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_updateElementGeometry: function(rectangle, index, reset, options) {\r\n\t\tvar me = this;\r\n\t\tvar model = rectangle._model;\r\n\t\tvar vscale = me._getValueScale();\r\n\t\tvar base = vscale.getBasePixel();\r\n\t\tvar horizontal = vscale.isHorizontal();\r\n\t\tvar ruler = me._ruler || me.getRuler();\r\n\t\tvar vpixels = me.calculateBarValuePixels(me.index, index, options);\r\n\t\tvar ipixels = me.calculateBarIndexPixels(me.index, index, ruler, options);\r\n\r\n\t\tmodel.horizontal = horizontal;\r\n\t\tmodel.base = reset ? base : vpixels.base;\r\n\t\tmodel.x = horizontal ? reset ? base : vpixels.head : ipixels.center;\r\n\t\tmodel.y = horizontal ? ipixels.center : reset ? base : vpixels.head;\r\n\t\tmodel.height = horizontal ? ipixels.size : undefined;\r\n\t\tmodel.width = horizontal ? undefined : ipixels.size;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the stacks based on groups and bar visibility.\r\n\t * @param {number} [last] - The dataset index\r\n\t * @returns {string[]} The list of stack IDs\r\n\t * @private\r\n\t */\r\n\t_getStacks: function(last) {\r\n\t\tvar me = this;\r\n\t\tvar scale = me._getIndexScale();\r\n\t\tvar metasets = scale._getMatchingVisibleMetas(me._type);\r\n\t\tvar stacked = scale.options.stacked;\r\n\t\tvar ilen = metasets.length;\r\n\t\tvar stacks = [];\r\n\t\tvar i, meta;\r\n\r\n\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\tmeta = metasets[i];\r\n\t\t\t// stacked   | meta.stack\r\n\t\t\t//           | found | not found | undefined\r\n\t\t\t// false     |   x   |     x     |     x\r\n\t\t\t// true      |       |     x     |\r\n\t\t\t// undefined |       |     x     |     x\r\n\t\t\tif (stacked === false || stacks.indexOf(meta.stack) === -1 ||\r\n\t\t\t\t(stacked === undefined && meta.stack === undefined)) {\r\n\t\t\t\tstacks.push(meta.stack);\r\n\t\t\t}\r\n\t\t\tif (meta.index === last) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn stacks;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the effective number of stacks based on groups and bar visibility.\r\n\t * @private\r\n\t */\r\n\tgetStackCount: function() {\r\n\t\treturn this._getStacks().length;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the stack index for the given dataset based on groups and bar visibility.\r\n\t * @param {number} [datasetIndex] - The dataset index\r\n\t * @param {string} [name] - The stack name to find\r\n\t * @returns {number} The stack index\r\n\t * @private\r\n\t */\r\n\tgetStackIndex: function(datasetIndex, name) {\r\n\t\tvar stacks = this._getStacks(datasetIndex);\r\n\t\tvar index = (name !== undefined)\r\n\t\t\t? stacks.indexOf(name)\r\n\t\t\t: -1; // indexOf returns -1 if element is not present\r\n\r\n\t\treturn (index === -1)\r\n\t\t\t? stacks.length - 1\r\n\t\t\t: index;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tgetRuler: function() {\r\n\t\tvar me = this;\r\n\t\tvar scale = me._getIndexScale();\r\n\t\tvar pixels = [];\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = me.getMeta().data.length; i < ilen; ++i) {\r\n\t\t\tpixels.push(scale.getPixelForValue(null, i, me.index));\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tpixels: pixels,\r\n\t\t\tstart: scale._startPixel,\r\n\t\t\tend: scale._endPixel,\r\n\t\t\tstackCount: me.getStackCount(),\r\n\t\t\tscale: scale\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Note: pixel values are not clamped to the scale area.\r\n\t * @private\r\n\t */\r\n\tcalculateBarValuePixels: function(datasetIndex, index, options) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar scale = me._getValueScale();\r\n\t\tvar isHorizontal = scale.isHorizontal();\r\n\t\tvar datasets = chart.data.datasets;\r\n\t\tvar metasets = scale._getMatchingVisibleMetas(me._type);\r\n\t\tvar value = scale._parseValue(datasets[datasetIndex].data[index]);\r\n\t\tvar minBarLength = options.minBarLength;\r\n\t\tvar stacked = scale.options.stacked;\r\n\t\tvar stack = me.getMeta().stack;\r\n\t\tvar start = value.start === undefined ? 0 : value.max >= 0 && value.min >= 0 ? value.min : value.max;\r\n\t\tvar length = value.start === undefined ? value.end : value.max >= 0 && value.min >= 0 ? value.max - value.min : value.min - value.max;\r\n\t\tvar ilen = metasets.length;\r\n\t\tvar i, imeta, ivalue, base, head, size, stackLength;\r\n\r\n\t\tif (stacked || (stacked === undefined && stack !== undefined)) {\r\n\t\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\t\timeta = metasets[i];\r\n\r\n\t\t\t\tif (imeta.index === datasetIndex) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (imeta.stack === stack) {\r\n\t\t\t\t\tstackLength = scale._parseValue(datasets[imeta.index].data[index]);\r\n\t\t\t\t\tivalue = stackLength.start === undefined ? stackLength.end : stackLength.min >= 0 && stackLength.max >= 0 ? stackLength.max : stackLength.min;\r\n\r\n\t\t\t\t\tif ((value.min < 0 && ivalue < 0) || (value.max >= 0 && ivalue > 0)) {\r\n\t\t\t\t\t\tstart += ivalue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbase = scale.getPixelForValue(start);\r\n\t\thead = scale.getPixelForValue(start + length);\r\n\t\tsize = head - base;\r\n\r\n\t\tif (minBarLength !== undefined && Math.abs(size) < minBarLength) {\r\n\t\t\tsize = minBarLength;\r\n\t\t\tif (length >= 0 && !isHorizontal || length < 0 && isHorizontal) {\r\n\t\t\t\thead = base - minBarLength;\r\n\t\t\t} else {\r\n\t\t\t\thead = base + minBarLength;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsize: size,\r\n\t\t\tbase: base,\r\n\t\t\thead: head,\r\n\t\t\tcenter: head + size / 2\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tcalculateBarIndexPixels: function(datasetIndex, index, ruler, options) {\r\n\t\tvar me = this;\r\n\t\tvar range = options.barThickness === 'flex'\r\n\t\t\t? computeFlexCategoryTraits(index, ruler, options)\r\n\t\t\t: computeFitCategoryTraits(index, ruler, options);\r\n\r\n\t\tvar stackIndex = me.getStackIndex(datasetIndex, me.getMeta().stack);\r\n\t\tvar center = range.start + (range.chunk * stackIndex) + (range.chunk / 2);\r\n\t\tvar size = Math.min(\r\n\t\t\tvalueOrDefault$3(options.maxBarThickness, Infinity),\r\n\t\t\trange.chunk * range.ratio);\r\n\r\n\t\treturn {\r\n\t\t\tbase: center - size / 2,\r\n\t\t\thead: center + size / 2,\r\n\t\t\tcenter: center,\r\n\t\t\tsize: size\r\n\t\t};\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar scale = me._getValueScale();\r\n\t\tvar rects = me.getMeta().data;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar ilen = rects.length;\r\n\t\tvar i = 0;\r\n\r\n\t\thelpers$1.canvas.clipArea(chart.ctx, chart.chartArea);\r\n\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\tvar val = scale._parseValue(dataset.data[i]);\r\n\t\t\tif (!isNaN(val.min) && !isNaN(val.max)) {\r\n\t\t\t\trects[i].draw();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thelpers$1.canvas.unclipArea(chart.ctx);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDataElementOptions: function() {\r\n\t\tvar me = this;\r\n\t\tvar values = helpers$1.extend({}, core_datasetController.prototype._resolveDataElementOptions.apply(me, arguments));\r\n\t\tvar indexOpts = me._getIndexScale().options;\r\n\t\tvar valueOpts = me._getValueScale().options;\r\n\r\n\t\tvalues.barPercentage = valueOrDefault$3(indexOpts.barPercentage, values.barPercentage);\r\n\t\tvalues.barThickness = valueOrDefault$3(indexOpts.barThickness, values.barThickness);\r\n\t\tvalues.categoryPercentage = valueOrDefault$3(indexOpts.categoryPercentage, values.categoryPercentage);\r\n\t\tvalues.maxBarThickness = valueOrDefault$3(indexOpts.maxBarThickness, values.maxBarThickness);\r\n\t\tvalues.minBarLength = valueOrDefault$3(valueOpts.minBarLength, values.minBarLength);\r\n\r\n\t\treturn values;\r\n\t}\r\n\r\n});\n\nvar valueOrDefault$4 = helpers$1.valueOrDefault;\r\nvar resolve$1 = helpers$1.options.resolve;\r\n\r\ncore_defaults._set('bubble', {\r\n\thover: {\r\n\t\tmode: 'single'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\ttype: 'linear', // bubble should probably use a linear scale by default\r\n\t\t\tposition: 'bottom',\r\n\t\t\tid: 'x-axis-0' // need an ID so datasets can reference the scale\r\n\t\t}],\r\n\t\tyAxes: [{\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left',\r\n\t\t\tid: 'y-axis-0'\r\n\t\t}]\r\n\t},\r\n\r\n\ttooltips: {\r\n\t\tcallbacks: {\r\n\t\t\ttitle: function() {\r\n\t\t\t\t// Title doesn't make sense for scatter since we format the data as a point\r\n\t\t\t\treturn '';\r\n\t\t\t},\r\n\t\t\tlabel: function(item, data) {\r\n\t\t\t\tvar datasetLabel = data.datasets[item.datasetIndex].label || '';\r\n\t\t\t\tvar dataPoint = data.datasets[item.datasetIndex].data[item.index];\r\n\t\t\t\treturn datasetLabel + ': (' + item.xLabel + ', ' + item.yLabel + ', ' + dataPoint.r + ')';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_bubble = core_datasetController.extend({\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tdataElementType: elements.Point,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderWidth',\r\n\t\t'hoverBackgroundColor',\r\n\t\t'hoverBorderColor',\r\n\t\t'hoverBorderWidth',\r\n\t\t'hoverRadius',\r\n\t\t'hitRadius',\r\n\t\t'pointStyle',\r\n\t\t'rotation'\r\n\t],\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar points = meta.data;\r\n\r\n\t\t// Update Points\r\n\t\thelpers$1.each(points, function(point, index) {\r\n\t\t\tme.updateElement(point, index, reset);\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tupdateElement: function(point, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar custom = point.custom || {};\r\n\t\tvar xScale = me.getScaleForId(meta.xAxisID);\r\n\t\tvar yScale = me.getScaleForId(meta.yAxisID);\r\n\t\tvar options = me._resolveDataElementOptions(point, index);\r\n\t\tvar data = me.getDataset().data[index];\r\n\t\tvar dsIndex = me.index;\r\n\r\n\t\tvar x = reset ? xScale.getPixelForDecimal(0.5) : xScale.getPixelForValue(typeof data === 'object' ? data : NaN, index, dsIndex);\r\n\t\tvar y = reset ? yScale.getBasePixel() : yScale.getPixelForValue(data, index, dsIndex);\r\n\r\n\t\tpoint._xScale = xScale;\r\n\t\tpoint._yScale = yScale;\r\n\t\tpoint._options = options;\r\n\t\tpoint._datasetIndex = dsIndex;\r\n\t\tpoint._index = index;\r\n\t\tpoint._model = {\r\n\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\tborderColor: options.borderColor,\r\n\t\t\tborderWidth: options.borderWidth,\r\n\t\t\thitRadius: options.hitRadius,\r\n\t\t\tpointStyle: options.pointStyle,\r\n\t\t\trotation: options.rotation,\r\n\t\t\tradius: reset ? 0 : options.radius,\r\n\t\t\tskip: custom.skip || isNaN(x) || isNaN(y),\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t};\r\n\r\n\t\tpoint.pivot();\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tsetHoverStyle: function(point) {\r\n\t\tvar model = point._model;\r\n\t\tvar options = point._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\tpoint.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t\tradius: model.radius\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault$4(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault$4(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault$4(options.hoverBorderWidth, options.borderWidth);\r\n\t\tmodel.radius = options.radius + options.hoverRadius;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDataElementOptions: function(point, index) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar custom = point.custom || {};\r\n\t\tvar data = dataset.data[index] || {};\r\n\t\tvar values = core_datasetController.prototype._resolveDataElementOptions.apply(me, arguments);\r\n\r\n\t\t// Scriptable options\r\n\t\tvar context = {\r\n\t\t\tchart: chart,\r\n\t\t\tdataIndex: index,\r\n\t\t\tdataset: dataset,\r\n\t\t\tdatasetIndex: me.index\r\n\t\t};\r\n\r\n\t\t// In case values were cached (and thus frozen), we need to clone the values\r\n\t\tif (me._cachedDataOpts === values) {\r\n\t\t\tvalues = helpers$1.extend({}, values);\r\n\t\t}\r\n\r\n\t\t// Custom radius resolution\r\n\t\tvalues.radius = resolve$1([\r\n\t\t\tcustom.radius,\r\n\t\t\tdata.r,\r\n\t\t\tme._config.radius,\r\n\t\t\tchart.options.elements.point.radius\r\n\t\t], context, index);\r\n\r\n\t\treturn values;\r\n\t}\r\n});\n\nvar valueOrDefault$5 = helpers$1.valueOrDefault;\r\n\r\nvar PI$1 = Math.PI;\r\nvar DOUBLE_PI$1 = PI$1 * 2;\r\nvar HALF_PI$1 = PI$1 / 2;\r\n\r\ncore_defaults._set('doughnut', {\r\n\tanimation: {\r\n\t\t// Boolean - Whether we animate the rotation of the Doughnut\r\n\t\tanimateRotate: true,\r\n\t\t// Boolean - Whether we animate scaling the Doughnut from the centre\r\n\t\tanimateScale: false\r\n\t},\r\n\thover: {\r\n\t\tmode: 'single'\r\n\t},\r\n\tlegendCallback: function(chart) {\r\n\t\tvar list = document.createElement('ul');\r\n\t\tvar data = chart.data;\r\n\t\tvar datasets = data.datasets;\r\n\t\tvar labels = data.labels;\r\n\t\tvar i, ilen, listItem, listItemSpan;\r\n\r\n\t\tlist.setAttribute('class', chart.id + '-legend');\r\n\t\tif (datasets.length) {\r\n\t\t\tfor (i = 0, ilen = datasets[0].data.length; i < ilen; ++i) {\r\n\t\t\t\tlistItem = list.appendChild(document.createElement('li'));\r\n\t\t\t\tlistItemSpan = listItem.appendChild(document.createElement('span'));\r\n\t\t\t\tlistItemSpan.style.backgroundColor = datasets[0].backgroundColor[i];\r\n\t\t\t\tif (labels[i]) {\r\n\t\t\t\t\tlistItem.appendChild(document.createTextNode(labels[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn list.outerHTML;\r\n\t},\r\n\tlegend: {\r\n\t\tlabels: {\r\n\t\t\tgenerateLabels: function(chart) {\r\n\t\t\t\tvar data = chart.data;\r\n\t\t\t\tif (data.labels.length && data.datasets.length) {\r\n\t\t\t\t\treturn data.labels.map(function(label, i) {\r\n\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\r\n\t\t\t\t\t\tvar style = meta.controller.getStyle(i);\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttext: label,\r\n\t\t\t\t\t\t\tfillStyle: style.backgroundColor,\r\n\t\t\t\t\t\t\tstrokeStyle: style.borderColor,\r\n\t\t\t\t\t\t\tlineWidth: style.borderWidth,\r\n\t\t\t\t\t\t\thidden: isNaN(data.datasets[0].data[i]) || meta.data[i].hidden,\r\n\r\n\t\t\t\t\t\t\t// Extra data used for toggling the correct item\r\n\t\t\t\t\t\t\tindex: i\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonClick: function(e, legendItem) {\r\n\t\t\tvar index = legendItem.index;\r\n\t\t\tvar chart = this.chart;\r\n\t\t\tvar i, ilen, meta;\r\n\r\n\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\t// toggle visibility of index if exists\r\n\t\t\t\tif (meta.data[index]) {\r\n\t\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tchart.update();\r\n\t\t}\r\n\t},\r\n\r\n\t// The percentage of the chart that we cut out of the middle.\r\n\tcutoutPercentage: 50,\r\n\r\n\t// The rotation of the chart, where the first data arc begins.\r\n\trotation: -HALF_PI$1,\r\n\r\n\t// The total circumference of the chart.\r\n\tcircumference: DOUBLE_PI$1,\r\n\r\n\t// Need to override these to give a nice default\r\n\ttooltips: {\r\n\t\tcallbacks: {\r\n\t\t\ttitle: function() {\r\n\t\t\t\treturn '';\r\n\t\t\t},\r\n\t\t\tlabel: function(tooltipItem, data) {\r\n\t\t\t\tvar dataLabel = data.labels[tooltipItem.index];\r\n\t\t\t\tvar value = ': ' + data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\r\n\r\n\t\t\t\tif (helpers$1.isArray(dataLabel)) {\r\n\t\t\t\t\t// show value on first line of multiline label\r\n\t\t\t\t\t// need to clone because we are changing the value\r\n\t\t\t\t\tdataLabel = dataLabel.slice();\r\n\t\t\t\t\tdataLabel[0] += value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdataLabel += value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn dataLabel;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_doughnut = core_datasetController.extend({\r\n\r\n\tdataElementType: elements.Arc,\r\n\r\n\tlinkScales: helpers$1.noop,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderWidth',\r\n\t\t'borderAlign',\r\n\t\t'hoverBackgroundColor',\r\n\t\t'hoverBorderColor',\r\n\t\t'hoverBorderWidth',\r\n\t],\r\n\r\n\t// Get index of the dataset in relation to the visible datasets. This allows determining the inner and outer radius correctly\r\n\tgetRingIndex: function(datasetIndex) {\r\n\t\tvar ringIndex = 0;\r\n\r\n\t\tfor (var j = 0; j < datasetIndex; ++j) {\r\n\t\t\tif (this.chart.isDatasetVisible(j)) {\r\n\t\t\t\t++ringIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ringIndex;\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar chartArea = chart.chartArea;\r\n\t\tvar opts = chart.options;\r\n\t\tvar ratioX = 1;\r\n\t\tvar ratioY = 1;\r\n\t\tvar offsetX = 0;\r\n\t\tvar offsetY = 0;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar arcs = meta.data;\r\n\t\tvar cutout = opts.cutoutPercentage / 100 || 0;\r\n\t\tvar circumference = opts.circumference;\r\n\t\tvar chartWeight = me._getRingWeight(me.index);\r\n\t\tvar maxWidth, maxHeight, i, ilen;\r\n\r\n\t\t// If the chart's circumference isn't a full circle, calculate size as a ratio of the width/height of the arc\r\n\t\tif (circumference < DOUBLE_PI$1) {\r\n\t\t\tvar startAngle = opts.rotation % DOUBLE_PI$1;\r\n\t\t\tstartAngle += startAngle >= PI$1 ? -DOUBLE_PI$1 : startAngle < -PI$1 ? DOUBLE_PI$1 : 0;\r\n\t\t\tvar endAngle = startAngle + circumference;\r\n\t\t\tvar startX = Math.cos(startAngle);\r\n\t\t\tvar startY = Math.sin(startAngle);\r\n\t\t\tvar endX = Math.cos(endAngle);\r\n\t\t\tvar endY = Math.sin(endAngle);\r\n\t\t\tvar contains0 = (startAngle <= 0 && endAngle >= 0) || endAngle >= DOUBLE_PI$1;\r\n\t\t\tvar contains90 = (startAngle <= HALF_PI$1 && endAngle >= HALF_PI$1) || endAngle >= DOUBLE_PI$1 + HALF_PI$1;\r\n\t\t\tvar contains180 = startAngle === -PI$1 || endAngle >= PI$1;\r\n\t\t\tvar contains270 = (startAngle <= -HALF_PI$1 && endAngle >= -HALF_PI$1) || endAngle >= PI$1 + HALF_PI$1;\r\n\t\t\tvar minX = contains180 ? -1 : Math.min(startX, startX * cutout, endX, endX * cutout);\r\n\t\t\tvar minY = contains270 ? -1 : Math.min(startY, startY * cutout, endY, endY * cutout);\r\n\t\t\tvar maxX = contains0 ? 1 : Math.max(startX, startX * cutout, endX, endX * cutout);\r\n\t\t\tvar maxY = contains90 ? 1 : Math.max(startY, startY * cutout, endY, endY * cutout);\r\n\t\t\tratioX = (maxX - minX) / 2;\r\n\t\t\tratioY = (maxY - minY) / 2;\r\n\t\t\toffsetX = -(maxX + minX) / 2;\r\n\t\t\toffsetY = -(maxY + minY) / 2;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n\t\t\tarcs[i]._options = me._resolveDataElementOptions(arcs[i], i);\r\n\t\t}\r\n\r\n\t\tchart.borderWidth = me.getMaxBorderWidth();\r\n\t\tmaxWidth = (chartArea.right - chartArea.left - chart.borderWidth) / ratioX;\r\n\t\tmaxHeight = (chartArea.bottom - chartArea.top - chart.borderWidth) / ratioY;\r\n\t\tchart.outerRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\r\n\t\tchart.innerRadius = Math.max(chart.outerRadius * cutout, 0);\r\n\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / (me._getVisibleDatasetWeightTotal() || 1);\r\n\t\tchart.offsetX = offsetX * chart.outerRadius;\r\n\t\tchart.offsetY = offsetY * chart.outerRadius;\r\n\r\n\t\tmeta.total = me.calculateTotal();\r\n\r\n\t\tme.outerRadius = chart.outerRadius - chart.radiusLength * me._getRingWeightOffset(me.index);\r\n\t\tme.innerRadius = Math.max(me.outerRadius - chart.radiusLength * chartWeight, 0);\r\n\r\n\t\tfor (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n\t\t\tme.updateElement(arcs[i], i, reset);\r\n\t\t}\r\n\t},\r\n\r\n\tupdateElement: function(arc, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar chartArea = chart.chartArea;\r\n\t\tvar opts = chart.options;\r\n\t\tvar animationOpts = opts.animation;\r\n\t\tvar centerX = (chartArea.left + chartArea.right) / 2;\r\n\t\tvar centerY = (chartArea.top + chartArea.bottom) / 2;\r\n\t\tvar startAngle = opts.rotation; // non reset case handled later\r\n\t\tvar endAngle = opts.rotation; // non reset case handled later\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar circumference = reset && animationOpts.animateRotate ? 0 : arc.hidden ? 0 : me.calculateCircumference(dataset.data[index]) * (opts.circumference / DOUBLE_PI$1);\r\n\t\tvar innerRadius = reset && animationOpts.animateScale ? 0 : me.innerRadius;\r\n\t\tvar outerRadius = reset && animationOpts.animateScale ? 0 : me.outerRadius;\r\n\t\tvar options = arc._options || {};\r\n\r\n\t\thelpers$1.extend(arc, {\r\n\t\t\t// Utility\r\n\t\t\t_datasetIndex: me.index,\r\n\t\t\t_index: index,\r\n\r\n\t\t\t// Desired view properties\r\n\t\t\t_model: {\r\n\t\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\t\tborderColor: options.borderColor,\r\n\t\t\t\tborderWidth: options.borderWidth,\r\n\t\t\t\tborderAlign: options.borderAlign,\r\n\t\t\t\tx: centerX + chart.offsetX,\r\n\t\t\t\ty: centerY + chart.offsetY,\r\n\t\t\t\tstartAngle: startAngle,\r\n\t\t\t\tendAngle: endAngle,\r\n\t\t\t\tcircumference: circumference,\r\n\t\t\t\touterRadius: outerRadius,\r\n\t\t\t\tinnerRadius: innerRadius,\r\n\t\t\t\tlabel: helpers$1.valueAtIndexOrDefault(dataset.label, index, chart.data.labels[index])\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar model = arc._model;\r\n\r\n\t\t// Set correct angles if not resetting\r\n\t\tif (!reset || !animationOpts.animateRotate) {\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tmodel.startAngle = opts.rotation;\r\n\t\t\t} else {\r\n\t\t\t\tmodel.startAngle = me.getMeta().data[index - 1]._model.endAngle;\r\n\t\t\t}\r\n\r\n\t\t\tmodel.endAngle = model.startAngle + model.circumference;\r\n\t\t}\r\n\r\n\t\tarc.pivot();\r\n\t},\r\n\r\n\tcalculateTotal: function() {\r\n\t\tvar dataset = this.getDataset();\r\n\t\tvar meta = this.getMeta();\r\n\t\tvar total = 0;\r\n\t\tvar value;\r\n\r\n\t\thelpers$1.each(meta.data, function(element, index) {\r\n\t\t\tvalue = dataset.data[index];\r\n\t\t\tif (!isNaN(value) && !element.hidden) {\r\n\t\t\t\ttotal += Math.abs(value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* if (total === 0) {\r\n\t\t\ttotal = NaN;\r\n\t\t}*/\r\n\r\n\t\treturn total;\r\n\t},\r\n\r\n\tcalculateCircumference: function(value) {\r\n\t\tvar total = this.getMeta().total;\r\n\t\tif (total > 0 && !isNaN(value)) {\r\n\t\t\treturn DOUBLE_PI$1 * (Math.abs(value) / total);\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t// gets the max border or hover width to properly scale pie charts\r\n\tgetMaxBorderWidth: function(arcs) {\r\n\t\tvar me = this;\r\n\t\tvar max = 0;\r\n\t\tvar chart = me.chart;\r\n\t\tvar i, ilen, meta, arc, controller, options, borderWidth, hoverWidth;\r\n\r\n\t\tif (!arcs) {\r\n\t\t\t// Find the outmost visible dataset\r\n\t\t\tfor (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\r\n\t\t\t\tif (chart.isDatasetVisible(i)) {\r\n\t\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\t\tarcs = meta.data;\r\n\t\t\t\t\tif (i !== me.index) {\r\n\t\t\t\t\t\tcontroller = meta.controller;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!arcs) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n\t\t\tarc = arcs[i];\r\n\t\t\tif (controller) {\r\n\t\t\t\tcontroller._configure();\r\n\t\t\t\toptions = controller._resolveDataElementOptions(arc, i);\r\n\t\t\t} else {\r\n\t\t\t\toptions = arc._options;\r\n\t\t\t}\r\n\t\t\tif (options.borderAlign !== 'inner') {\r\n\t\t\t\tborderWidth = options.borderWidth;\r\n\t\t\t\thoverWidth = options.hoverBorderWidth;\r\n\r\n\t\t\t\tmax = borderWidth > max ? borderWidth : max;\r\n\t\t\t\tmax = hoverWidth > max ? hoverWidth : max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn max;\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tsetHoverStyle: function(arc) {\r\n\t\tvar model = arc._model;\r\n\t\tvar options = arc._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\tarc.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault$5(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault$5(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault$5(options.hoverBorderWidth, options.borderWidth);\r\n\t},\r\n\r\n\t/**\r\n\t * Get radius length offset of the dataset in relation to the visible datasets weights. This allows determining the inner and outer radius correctly\r\n\t * @private\r\n\t */\r\n\t_getRingWeightOffset: function(datasetIndex) {\r\n\t\tvar ringWeightOffset = 0;\r\n\r\n\t\tfor (var i = 0; i < datasetIndex; ++i) {\r\n\t\t\tif (this.chart.isDatasetVisible(i)) {\r\n\t\t\t\tringWeightOffset += this._getRingWeight(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ringWeightOffset;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getRingWeight: function(dataSetIndex) {\r\n\t\treturn Math.max(valueOrDefault$5(this.chart.data.datasets[dataSetIndex].weight, 1), 0);\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the sum of all visibile data set weights.  This value can be 0.\r\n\t * @private\r\n\t */\r\n\t_getVisibleDatasetWeightTotal: function() {\r\n\t\treturn this._getRingWeightOffset(this.chart.data.datasets.length);\r\n\t}\r\n});\n\ncore_defaults._set('horizontalBar', {\r\n\thover: {\r\n\t\tmode: 'index',\r\n\t\taxis: 'y'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'bottom'\r\n\t\t}],\r\n\r\n\t\tyAxes: [{\r\n\t\t\ttype: 'category',\r\n\t\t\tposition: 'left',\r\n\t\t\toffset: true,\r\n\t\t\tgridLines: {\r\n\t\t\t\toffsetGridLines: true\r\n\t\t\t}\r\n\t\t}]\r\n\t},\r\n\r\n\telements: {\r\n\t\trectangle: {\r\n\t\t\tborderSkipped: 'left'\r\n\t\t}\r\n\t},\r\n\r\n\ttooltips: {\r\n\t\tmode: 'index',\r\n\t\taxis: 'y'\r\n\t}\r\n});\r\n\r\ncore_defaults._set('global', {\r\n\tdatasets: {\r\n\t\thorizontalBar: {\r\n\t\t\tcategoryPercentage: 0.8,\r\n\t\t\tbarPercentage: 0.9\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_horizontalBar = controller_bar.extend({\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScaleId: function() {\r\n\t\treturn this.getMeta().xAxisID;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScaleId: function() {\r\n\t\treturn this.getMeta().yAxisID;\r\n\t}\r\n});\n\nvar valueOrDefault$6 = helpers$1.valueOrDefault;\r\nvar resolve$2 = helpers$1.options.resolve;\r\nvar isPointInArea = helpers$1.canvas._isPointInArea;\r\n\r\ncore_defaults._set('line', {\r\n\tshowLines: true,\r\n\tspanGaps: false,\r\n\r\n\thover: {\r\n\t\tmode: 'label'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\ttype: 'category',\r\n\t\t\tid: 'x-axis-0'\r\n\t\t}],\r\n\t\tyAxes: [{\r\n\t\t\ttype: 'linear',\r\n\t\t\tid: 'y-axis-0'\r\n\t\t}]\r\n\t}\r\n});\r\n\r\nfunction scaleClip(scale, halfBorderWidth) {\r\n\tvar tickOpts = scale && scale.options.ticks || {};\r\n\tvar reverse = tickOpts.reverse;\r\n\tvar min = tickOpts.min === undefined ? halfBorderWidth : 0;\r\n\tvar max = tickOpts.max === undefined ? halfBorderWidth : 0;\r\n\treturn {\r\n\t\tstart: reverse ? max : min,\r\n\t\tend: reverse ? min : max\r\n\t};\r\n}\r\n\r\nfunction defaultClip(xScale, yScale, borderWidth) {\r\n\tvar halfBorderWidth = borderWidth / 2;\r\n\tvar x = scaleClip(xScale, halfBorderWidth);\r\n\tvar y = scaleClip(yScale, halfBorderWidth);\r\n\r\n\treturn {\r\n\t\ttop: y.end,\r\n\t\tright: x.end,\r\n\t\tbottom: y.start,\r\n\t\tleft: x.start\r\n\t};\r\n}\r\n\r\nfunction toClip(value) {\r\n\tvar t, r, b, l;\r\n\r\n\tif (helpers$1.isObject(value)) {\r\n\t\tt = value.top;\r\n\t\tr = value.right;\r\n\t\tb = value.bottom;\r\n\t\tl = value.left;\r\n\t} else {\r\n\t\tt = r = b = l = value;\r\n\t}\r\n\r\n\treturn {\r\n\t\ttop: t,\r\n\t\tright: r,\r\n\t\tbottom: b,\r\n\t\tleft: l\r\n\t};\r\n}\r\n\r\n\r\nvar controller_line = core_datasetController.extend({\r\n\r\n\tdatasetElementType: elements.Line,\r\n\r\n\tdataElementType: elements.Point,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_datasetElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderCapStyle',\r\n\t\t'borderColor',\r\n\t\t'borderDash',\r\n\t\t'borderDashOffset',\r\n\t\t'borderJoinStyle',\r\n\t\t'borderWidth',\r\n\t\t'cubicInterpolationMode',\r\n\t\t'fill'\r\n\t],\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: {\r\n\t\tbackgroundColor: 'pointBackgroundColor',\r\n\t\tborderColor: 'pointBorderColor',\r\n\t\tborderWidth: 'pointBorderWidth',\r\n\t\thitRadius: 'pointHitRadius',\r\n\t\thoverBackgroundColor: 'pointHoverBackgroundColor',\r\n\t\thoverBorderColor: 'pointHoverBorderColor',\r\n\t\thoverBorderWidth: 'pointHoverBorderWidth',\r\n\t\thoverRadius: 'pointHoverRadius',\r\n\t\tpointStyle: 'pointStyle',\r\n\t\tradius: 'pointRadius',\r\n\t\trotation: 'pointRotation'\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar line = meta.dataset;\r\n\t\tvar points = meta.data || [];\r\n\t\tvar options = me.chart.options;\r\n\t\tvar config = me._config;\r\n\t\tvar showLine = me._showLine = valueOrDefault$6(config.showLine, options.showLines);\r\n\t\tvar i, ilen;\r\n\r\n\t\tme._xScale = me.getScaleForId(meta.xAxisID);\r\n\t\tme._yScale = me.getScaleForId(meta.yAxisID);\r\n\r\n\t\t// Update Line\r\n\t\tif (showLine) {\r\n\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\r\n\t\t\tif (config.tension !== undefined && config.lineTension === undefined) {\r\n\t\t\t\tconfig.lineTension = config.tension;\r\n\t\t\t}\r\n\r\n\t\t\t// Utility\r\n\t\t\tline._scale = me._yScale;\r\n\t\t\tline._datasetIndex = me.index;\r\n\t\t\t// Data\r\n\t\t\tline._children = points;\r\n\t\t\t// Model\r\n\t\t\tline._model = me._resolveDatasetElementOptions(line);\r\n\r\n\t\t\tline.pivot();\r\n\t\t}\r\n\r\n\t\t// Update Points\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tme.updateElement(points[i], i, reset);\r\n\t\t}\r\n\r\n\t\tif (showLine && line._model.tension !== 0) {\r\n\t\t\tme.updateBezierControlPoints();\r\n\t\t}\r\n\r\n\t\t// Now pivot the point for animation\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tpoints[i].pivot();\r\n\t\t}\r\n\t},\r\n\r\n\tupdateElement: function(point, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar custom = point.custom || {};\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar datasetIndex = me.index;\r\n\t\tvar value = dataset.data[index];\r\n\t\tvar xScale = me._xScale;\r\n\t\tvar yScale = me._yScale;\r\n\t\tvar lineModel = meta.dataset._model;\r\n\t\tvar x, y;\r\n\r\n\t\tvar options = me._resolveDataElementOptions(point, index);\r\n\r\n\t\tx = xScale.getPixelForValue(typeof value === 'object' ? value : NaN, index, datasetIndex);\r\n\t\ty = reset ? yScale.getBasePixel() : me.calculatePointY(value, index, datasetIndex);\r\n\r\n\t\t// Utility\r\n\t\tpoint._xScale = xScale;\r\n\t\tpoint._yScale = yScale;\r\n\t\tpoint._options = options;\r\n\t\tpoint._datasetIndex = datasetIndex;\r\n\t\tpoint._index = index;\r\n\r\n\t\t// Desired view properties\r\n\t\tpoint._model = {\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t\tskip: custom.skip || isNaN(x) || isNaN(y),\r\n\t\t\t// Appearance\r\n\t\t\tradius: options.radius,\r\n\t\t\tpointStyle: options.pointStyle,\r\n\t\t\trotation: options.rotation,\r\n\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\tborderColor: options.borderColor,\r\n\t\t\tborderWidth: options.borderWidth,\r\n\t\t\ttension: valueOrDefault$6(custom.tension, lineModel ? lineModel.tension : 0),\r\n\t\t\tsteppedLine: lineModel ? lineModel.steppedLine : false,\r\n\t\t\t// Tooltip\r\n\t\t\thitRadius: options.hitRadius\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDatasetElementOptions: function(element) {\r\n\t\tvar me = this;\r\n\t\tvar config = me._config;\r\n\t\tvar custom = element.custom || {};\r\n\t\tvar options = me.chart.options;\r\n\t\tvar lineOptions = options.elements.line;\r\n\t\tvar values = core_datasetController.prototype._resolveDatasetElementOptions.apply(me, arguments);\r\n\r\n\t\t// The default behavior of lines is to break at null values, according\r\n\t\t// to https://github.com/chartjs/Chart.js/issues/2435#issuecomment-216718158\r\n\t\t// This option gives lines the ability to span gaps\r\n\t\tvalues.spanGaps = valueOrDefault$6(config.spanGaps, options.spanGaps);\r\n\t\tvalues.tension = valueOrDefault$6(config.lineTension, lineOptions.tension);\r\n\t\tvalues.steppedLine = resolve$2([custom.steppedLine, config.steppedLine, lineOptions.stepped]);\r\n\t\tvalues.clip = toClip(valueOrDefault$6(config.clip, defaultClip(me._xScale, me._yScale, values.borderWidth)));\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\tcalculatePointY: function(value, index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar yScale = me._yScale;\r\n\t\tvar sumPos = 0;\r\n\t\tvar sumNeg = 0;\r\n\t\tvar i, ds, dsMeta, stackedRightValue, rightValue, metasets, ilen;\r\n\r\n\t\tif (yScale.options.stacked) {\r\n\t\t\trightValue = +yScale.getRightValue(value);\r\n\t\t\tmetasets = chart._getSortedVisibleDatasetMetas();\r\n\t\t\tilen = metasets.length;\r\n\r\n\t\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\t\tdsMeta = metasets[i];\r\n\t\t\t\tif (dsMeta.index === datasetIndex) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tds = chart.data.datasets[dsMeta.index];\r\n\t\t\t\tif (dsMeta.type === 'line' && dsMeta.yAxisID === yScale.id) {\r\n\t\t\t\t\tstackedRightValue = +yScale.getRightValue(ds.data[index]);\r\n\t\t\t\t\tif (stackedRightValue < 0) {\r\n\t\t\t\t\t\tsumNeg += stackedRightValue || 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsumPos += stackedRightValue || 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (rightValue < 0) {\r\n\t\t\t\treturn yScale.getPixelForValue(sumNeg + rightValue);\r\n\t\t\t}\r\n\t\t\treturn yScale.getPixelForValue(sumPos + rightValue);\r\n\t\t}\r\n\t\treturn yScale.getPixelForValue(value);\r\n\t},\r\n\r\n\tupdateBezierControlPoints: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar lineModel = meta.dataset._model;\r\n\t\tvar area = chart.chartArea;\r\n\t\tvar points = meta.data || [];\r\n\t\tvar i, ilen, model, controlPoints;\r\n\r\n\t\t// Only consider points that are drawn in case the spanGaps option is used\r\n\t\tif (lineModel.spanGaps) {\r\n\t\t\tpoints = points.filter(function(pt) {\r\n\t\t\t\treturn !pt._model.skip;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction capControlPoint(pt, min, max) {\r\n\t\t\treturn Math.max(Math.min(pt, max), min);\r\n\t\t}\r\n\r\n\t\tif (lineModel.cubicInterpolationMode === 'monotone') {\r\n\t\t\thelpers$1.splineCurveMonotone(points);\r\n\t\t} else {\r\n\t\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\t\tmodel = points[i]._model;\r\n\t\t\t\tcontrolPoints = helpers$1.splineCurve(\r\n\t\t\t\t\thelpers$1.previousItem(points, i)._model,\r\n\t\t\t\t\tmodel,\r\n\t\t\t\t\thelpers$1.nextItem(points, i)._model,\r\n\t\t\t\t\tlineModel.tension\r\n\t\t\t\t);\r\n\t\t\t\tmodel.controlPointPreviousX = controlPoints.previous.x;\r\n\t\t\t\tmodel.controlPointPreviousY = controlPoints.previous.y;\r\n\t\t\t\tmodel.controlPointNextX = controlPoints.next.x;\r\n\t\t\t\tmodel.controlPointNextY = controlPoints.next.y;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (chart.options.elements.line.capBezierPoints) {\r\n\t\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\t\tmodel = points[i]._model;\r\n\t\t\t\tif (isPointInArea(model, area)) {\r\n\t\t\t\t\tif (i > 0 && isPointInArea(points[i - 1]._model, area)) {\r\n\t\t\t\t\t\tmodel.controlPointPreviousX = capControlPoint(model.controlPointPreviousX, area.left, area.right);\r\n\t\t\t\t\t\tmodel.controlPointPreviousY = capControlPoint(model.controlPointPreviousY, area.top, area.bottom);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i < points.length - 1 && isPointInArea(points[i + 1]._model, area)) {\r\n\t\t\t\t\t\tmodel.controlPointNextX = capControlPoint(model.controlPointNextX, area.left, area.right);\r\n\t\t\t\t\t\tmodel.controlPointNextY = capControlPoint(model.controlPointNextY, area.top, area.bottom);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar points = meta.data || [];\r\n\t\tvar area = chart.chartArea;\r\n\t\tvar canvas = chart.canvas;\r\n\t\tvar i = 0;\r\n\t\tvar ilen = points.length;\r\n\t\tvar clip;\r\n\r\n\t\tif (me._showLine) {\r\n\t\t\tclip = meta.dataset._model.clip;\r\n\r\n\t\t\thelpers$1.canvas.clipArea(chart.ctx, {\r\n\t\t\t\tleft: clip.left === false ? 0 : area.left - clip.left,\r\n\t\t\t\tright: clip.right === false ? canvas.width : area.right + clip.right,\r\n\t\t\t\ttop: clip.top === false ? 0 : area.top - clip.top,\r\n\t\t\t\tbottom: clip.bottom === false ? canvas.height : area.bottom + clip.bottom\r\n\t\t\t});\r\n\r\n\t\t\tmeta.dataset.draw();\r\n\r\n\t\t\thelpers$1.canvas.unclipArea(chart.ctx);\r\n\t\t}\r\n\r\n\t\t// Draw the points\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\tpoints[i].draw(area);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tsetHoverStyle: function(point) {\r\n\t\tvar model = point._model;\r\n\t\tvar options = point._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\tpoint.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t\tradius: model.radius\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault$6(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault$6(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault$6(options.hoverBorderWidth, options.borderWidth);\r\n\t\tmodel.radius = valueOrDefault$6(options.hoverRadius, options.radius);\r\n\t},\r\n});\n\nvar resolve$3 = helpers$1.options.resolve;\r\n\r\ncore_defaults._set('polarArea', {\r\n\tscale: {\r\n\t\ttype: 'radialLinear',\r\n\t\tangleLines: {\r\n\t\t\tdisplay: false\r\n\t\t},\r\n\t\tgridLines: {\r\n\t\t\tcircular: true\r\n\t\t},\r\n\t\tpointLabels: {\r\n\t\t\tdisplay: false\r\n\t\t},\r\n\t\tticks: {\r\n\t\t\tbeginAtZero: true\r\n\t\t}\r\n\t},\r\n\r\n\t// Boolean - Whether to animate the rotation of the chart\r\n\tanimation: {\r\n\t\tanimateRotate: true,\r\n\t\tanimateScale: true\r\n\t},\r\n\r\n\tstartAngle: -0.5 * Math.PI,\r\n\tlegendCallback: function(chart) {\r\n\t\tvar list = document.createElement('ul');\r\n\t\tvar data = chart.data;\r\n\t\tvar datasets = data.datasets;\r\n\t\tvar labels = data.labels;\r\n\t\tvar i, ilen, listItem, listItemSpan;\r\n\r\n\t\tlist.setAttribute('class', chart.id + '-legend');\r\n\t\tif (datasets.length) {\r\n\t\t\tfor (i = 0, ilen = datasets[0].data.length; i < ilen; ++i) {\r\n\t\t\t\tlistItem = list.appendChild(document.createElement('li'));\r\n\t\t\t\tlistItemSpan = listItem.appendChild(document.createElement('span'));\r\n\t\t\t\tlistItemSpan.style.backgroundColor = datasets[0].backgroundColor[i];\r\n\t\t\t\tif (labels[i]) {\r\n\t\t\t\t\tlistItem.appendChild(document.createTextNode(labels[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn list.outerHTML;\r\n\t},\r\n\tlegend: {\r\n\t\tlabels: {\r\n\t\t\tgenerateLabels: function(chart) {\r\n\t\t\t\tvar data = chart.data;\r\n\t\t\t\tif (data.labels.length && data.datasets.length) {\r\n\t\t\t\t\treturn data.labels.map(function(label, i) {\r\n\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\r\n\t\t\t\t\t\tvar style = meta.controller.getStyle(i);\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttext: label,\r\n\t\t\t\t\t\t\tfillStyle: style.backgroundColor,\r\n\t\t\t\t\t\t\tstrokeStyle: style.borderColor,\r\n\t\t\t\t\t\t\tlineWidth: style.borderWidth,\r\n\t\t\t\t\t\t\thidden: isNaN(data.datasets[0].data[i]) || meta.data[i].hidden,\r\n\r\n\t\t\t\t\t\t\t// Extra data used for toggling the correct item\r\n\t\t\t\t\t\t\tindex: i\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonClick: function(e, legendItem) {\r\n\t\t\tvar index = legendItem.index;\r\n\t\t\tvar chart = this.chart;\r\n\t\t\tvar i, ilen, meta;\r\n\r\n\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\r\n\t\t\t}\r\n\r\n\t\t\tchart.update();\r\n\t\t}\r\n\t},\r\n\r\n\t// Need to override these to give a nice default\r\n\ttooltips: {\r\n\t\tcallbacks: {\r\n\t\t\ttitle: function() {\r\n\t\t\t\treturn '';\r\n\t\t\t},\r\n\t\t\tlabel: function(item, data) {\r\n\t\t\t\treturn data.labels[item.index] + ': ' + item.yLabel;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_polarArea = core_datasetController.extend({\r\n\r\n\tdataElementType: elements.Arc,\r\n\r\n\tlinkScales: helpers$1.noop,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderWidth',\r\n\t\t'borderAlign',\r\n\t\t'hoverBackgroundColor',\r\n\t\t'hoverBorderColor',\r\n\t\t'hoverBorderWidth',\r\n\t],\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScaleId: function() {\r\n\t\treturn this.chart.scale.id;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScaleId: function() {\r\n\t\treturn this.chart.scale.id;\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar start = me.chart.options.startAngle || 0;\r\n\t\tvar starts = me._starts = [];\r\n\t\tvar angles = me._angles = [];\r\n\t\tvar arcs = meta.data;\r\n\t\tvar i, ilen, angle;\r\n\r\n\t\tme._updateRadius();\r\n\r\n\t\tmeta.count = me.countVisibleElements();\r\n\r\n\t\tfor (i = 0, ilen = dataset.data.length; i < ilen; i++) {\r\n\t\t\tstarts[i] = start;\r\n\t\t\tangle = me._computeAngle(i);\r\n\t\t\tangles[i] = angle;\r\n\t\t\tstart += angle;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n\t\t\tarcs[i]._options = me._resolveDataElementOptions(arcs[i], i);\r\n\t\t\tme.updateElement(arcs[i], i, reset);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_updateRadius: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar chartArea = chart.chartArea;\r\n\t\tvar opts = chart.options;\r\n\t\tvar minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\r\n\r\n\t\tchart.outerRadius = Math.max(minSize / 2, 0);\r\n\t\tchart.innerRadius = Math.max(opts.cutoutPercentage ? (chart.outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\r\n\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / chart.getVisibleDatasetCount();\r\n\r\n\t\tme.outerRadius = chart.outerRadius - (chart.radiusLength * me.index);\r\n\t\tme.innerRadius = me.outerRadius - chart.radiusLength;\r\n\t},\r\n\r\n\tupdateElement: function(arc, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar opts = chart.options;\r\n\t\tvar animationOpts = opts.animation;\r\n\t\tvar scale = chart.scale;\r\n\t\tvar labels = chart.data.labels;\r\n\r\n\t\tvar centerX = scale.xCenter;\r\n\t\tvar centerY = scale.yCenter;\r\n\r\n\t\t// var negHalfPI = -0.5 * Math.PI;\r\n\t\tvar datasetStartAngle = opts.startAngle;\r\n\t\tvar distance = arc.hidden ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\r\n\t\tvar startAngle = me._starts[index];\r\n\t\tvar endAngle = startAngle + (arc.hidden ? 0 : me._angles[index]);\r\n\r\n\t\tvar resetRadius = animationOpts.animateScale ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\r\n\t\tvar options = arc._options || {};\r\n\r\n\t\thelpers$1.extend(arc, {\r\n\t\t\t// Utility\r\n\t\t\t_datasetIndex: me.index,\r\n\t\t\t_index: index,\r\n\t\t\t_scale: scale,\r\n\r\n\t\t\t// Desired view properties\r\n\t\t\t_model: {\r\n\t\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\t\tborderColor: options.borderColor,\r\n\t\t\t\tborderWidth: options.borderWidth,\r\n\t\t\t\tborderAlign: options.borderAlign,\r\n\t\t\t\tx: centerX,\r\n\t\t\t\ty: centerY,\r\n\t\t\t\tinnerRadius: 0,\r\n\t\t\t\touterRadius: reset ? resetRadius : distance,\r\n\t\t\t\tstartAngle: reset && animationOpts.animateRotate ? datasetStartAngle : startAngle,\r\n\t\t\t\tendAngle: reset && animationOpts.animateRotate ? datasetStartAngle : endAngle,\r\n\t\t\t\tlabel: helpers$1.valueAtIndexOrDefault(labels, index, labels[index])\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tarc.pivot();\r\n\t},\r\n\r\n\tcountVisibleElements: function() {\r\n\t\tvar dataset = this.getDataset();\r\n\t\tvar meta = this.getMeta();\r\n\t\tvar count = 0;\r\n\r\n\t\thelpers$1.each(meta.data, function(element, index) {\r\n\t\t\tif (!isNaN(dataset.data[index]) && !element.hidden) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn count;\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tsetHoverStyle: function(arc) {\r\n\t\tvar model = arc._model;\r\n\t\tvar options = arc._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\t\tvar valueOrDefault = helpers$1.valueOrDefault;\r\n\r\n\t\tarc.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault(options.hoverBorderWidth, options.borderWidth);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_computeAngle: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar count = this.getMeta().count;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar meta = me.getMeta();\r\n\r\n\t\tif (isNaN(dataset.data[index]) || meta.data[index].hidden) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t// Scriptable options\r\n\t\tvar context = {\r\n\t\t\tchart: me.chart,\r\n\t\t\tdataIndex: index,\r\n\t\t\tdataset: dataset,\r\n\t\t\tdatasetIndex: me.index\r\n\t\t};\r\n\r\n\t\treturn resolve$3([\r\n\t\t\tme.chart.options.elements.arc.angle,\r\n\t\t\t(2 * Math.PI) / count\r\n\t\t], context, index);\r\n\t}\r\n});\n\ncore_defaults._set('pie', helpers$1.clone(core_defaults.doughnut));\r\ncore_defaults._set('pie', {\r\n\tcutoutPercentage: 0\r\n});\r\n\r\n// Pie charts are Doughnut chart with different defaults\r\nvar controller_pie = controller_doughnut;\n\nvar valueOrDefault$7 = helpers$1.valueOrDefault;\r\n\r\ncore_defaults._set('radar', {\r\n\tspanGaps: false,\r\n\tscale: {\r\n\t\ttype: 'radialLinear'\r\n\t},\r\n\telements: {\r\n\t\tline: {\r\n\t\t\tfill: 'start',\r\n\t\t\ttension: 0 // no bezier in radar\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_radar = core_datasetController.extend({\r\n\tdatasetElementType: elements.Line,\r\n\r\n\tdataElementType: elements.Point,\r\n\r\n\tlinkScales: helpers$1.noop,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_datasetElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderWidth',\r\n\t\t'borderColor',\r\n\t\t'borderCapStyle',\r\n\t\t'borderDash',\r\n\t\t'borderDashOffset',\r\n\t\t'borderJoinStyle',\r\n\t\t'fill'\r\n\t],\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: {\r\n\t\tbackgroundColor: 'pointBackgroundColor',\r\n\t\tborderColor: 'pointBorderColor',\r\n\t\tborderWidth: 'pointBorderWidth',\r\n\t\thitRadius: 'pointHitRadius',\r\n\t\thoverBackgroundColor: 'pointHoverBackgroundColor',\r\n\t\thoverBorderColor: 'pointHoverBorderColor',\r\n\t\thoverBorderWidth: 'pointHoverBorderWidth',\r\n\t\thoverRadius: 'pointHoverRadius',\r\n\t\tpointStyle: 'pointStyle',\r\n\t\tradius: 'pointRadius',\r\n\t\trotation: 'pointRotation'\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScaleId: function() {\r\n\t\treturn this.chart.scale.id;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScaleId: function() {\r\n\t\treturn this.chart.scale.id;\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar line = meta.dataset;\r\n\t\tvar points = meta.data || [];\r\n\t\tvar scale = me.chart.scale;\r\n\t\tvar config = me._config;\r\n\t\tvar i, ilen;\r\n\r\n\t\t// Compatibility: If the properties are defined with only the old name, use those values\r\n\t\tif (config.tension !== undefined && config.lineTension === undefined) {\r\n\t\t\tconfig.lineTension = config.tension;\r\n\t\t}\r\n\r\n\t\t// Utility\r\n\t\tline._scale = scale;\r\n\t\tline._datasetIndex = me.index;\r\n\t\t// Data\r\n\t\tline._children = points;\r\n\t\tline._loop = true;\r\n\t\t// Model\r\n\t\tline._model = me._resolveDatasetElementOptions(line);\r\n\r\n\t\tline.pivot();\r\n\r\n\t\t// Update Points\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tme.updateElement(points[i], i, reset);\r\n\t\t}\r\n\r\n\t\t// Update bezier control points\r\n\t\tme.updateBezierControlPoints();\r\n\r\n\t\t// Now pivot the point for animation\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tpoints[i].pivot();\r\n\t\t}\r\n\t},\r\n\r\n\tupdateElement: function(point, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar custom = point.custom || {};\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar scale = me.chart.scale;\r\n\t\tvar pointPosition = scale.getPointPositionForValue(index, dataset.data[index]);\r\n\t\tvar options = me._resolveDataElementOptions(point, index);\r\n\t\tvar lineModel = me.getMeta().dataset._model;\r\n\t\tvar x = reset ? scale.xCenter : pointPosition.x;\r\n\t\tvar y = reset ? scale.yCenter : pointPosition.y;\r\n\r\n\t\t// Utility\r\n\t\tpoint._scale = scale;\r\n\t\tpoint._options = options;\r\n\t\tpoint._datasetIndex = me.index;\r\n\t\tpoint._index = index;\r\n\r\n\t\t// Desired view properties\r\n\t\tpoint._model = {\r\n\t\t\tx: x, // value not used in dataset scale, but we want a consistent API between scales\r\n\t\t\ty: y,\r\n\t\t\tskip: custom.skip || isNaN(x) || isNaN(y),\r\n\t\t\t// Appearance\r\n\t\t\tradius: options.radius,\r\n\t\t\tpointStyle: options.pointStyle,\r\n\t\t\trotation: options.rotation,\r\n\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\tborderColor: options.borderColor,\r\n\t\t\tborderWidth: options.borderWidth,\r\n\t\t\ttension: valueOrDefault$7(custom.tension, lineModel ? lineModel.tension : 0),\r\n\r\n\t\t\t// Tooltip\r\n\t\t\thitRadius: options.hitRadius\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDatasetElementOptions: function() {\r\n\t\tvar me = this;\r\n\t\tvar config = me._config;\r\n\t\tvar options = me.chart.options;\r\n\t\tvar values = core_datasetController.prototype._resolveDatasetElementOptions.apply(me, arguments);\r\n\r\n\t\tvalues.spanGaps = valueOrDefault$7(config.spanGaps, options.spanGaps);\r\n\t\tvalues.tension = valueOrDefault$7(config.lineTension, options.elements.line.tension);\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\tupdateBezierControlPoints: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar area = me.chart.chartArea;\r\n\t\tvar points = meta.data || [];\r\n\t\tvar i, ilen, model, controlPoints;\r\n\r\n\t\t// Only consider points that are drawn in case the spanGaps option is used\r\n\t\tif (meta.dataset._model.spanGaps) {\r\n\t\t\tpoints = points.filter(function(pt) {\r\n\t\t\t\treturn !pt._model.skip;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction capControlPoint(pt, min, max) {\r\n\t\t\treturn Math.max(Math.min(pt, max), min);\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tmodel = points[i]._model;\r\n\t\t\tcontrolPoints = helpers$1.splineCurve(\r\n\t\t\t\thelpers$1.previousItem(points, i, true)._model,\r\n\t\t\t\tmodel,\r\n\t\t\t\thelpers$1.nextItem(points, i, true)._model,\r\n\t\t\t\tmodel.tension\r\n\t\t\t);\r\n\r\n\t\t\t// Prevent the bezier going outside of the bounds of the graph\r\n\t\t\tmodel.controlPointPreviousX = capControlPoint(controlPoints.previous.x, area.left, area.right);\r\n\t\t\tmodel.controlPointPreviousY = capControlPoint(controlPoints.previous.y, area.top, area.bottom);\r\n\t\t\tmodel.controlPointNextX = capControlPoint(controlPoints.next.x, area.left, area.right);\r\n\t\t\tmodel.controlPointNextY = capControlPoint(controlPoints.next.y, area.top, area.bottom);\r\n\t\t}\r\n\t},\r\n\r\n\tsetHoverStyle: function(point) {\r\n\t\tvar model = point._model;\r\n\t\tvar options = point._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\tpoint.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t\tradius: model.radius\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault$7(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault$7(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault$7(options.hoverBorderWidth, options.borderWidth);\r\n\t\tmodel.radius = valueOrDefault$7(options.hoverRadius, options.radius);\r\n\t}\r\n});\n\ncore_defaults._set('scatter', {\r\n\thover: {\r\n\t\tmode: 'single'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\tid: 'x-axis-1',    // need an ID so datasets can reference the scale\r\n\t\t\ttype: 'linear',    // scatter should not use a category axis\r\n\t\t\tposition: 'bottom'\r\n\t\t}],\r\n\t\tyAxes: [{\r\n\t\t\tid: 'y-axis-1',\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left'\r\n\t\t}]\r\n\t},\r\n\r\n\ttooltips: {\r\n\t\tcallbacks: {\r\n\t\t\ttitle: function() {\r\n\t\t\t\treturn '';     // doesn't make sense for scatter since data are formatted as a point\r\n\t\t\t},\r\n\t\t\tlabel: function(item) {\r\n\t\t\t\treturn '(' + item.xLabel + ', ' + item.yLabel + ')';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\ncore_defaults._set('global', {\r\n\tdatasets: {\r\n\t\tscatter: {\r\n\t\t\tshowLine: false\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Scatter charts use line controllers\r\nvar controller_scatter = controller_line;\n\n// NOTE export a map in which the key represents the controller type, not\r\n// the class, and so must be CamelCase in order to be correctly retrieved\r\n// by the controller in core.controller.js (`controllers[meta.type]`).\r\n\r\nvar controllers = {\r\n\tbar: controller_bar,\r\n\tbubble: controller_bubble,\r\n\tdoughnut: controller_doughnut,\r\n\thorizontalBar: controller_horizontalBar,\r\n\tline: controller_line,\r\n\tpolarArea: controller_polarArea,\r\n\tpie: controller_pie,\r\n\tradar: controller_radar,\r\n\tscatter: controller_scatter\r\n};\n\n/**\r\n * Helper function to get relative position for an event\r\n * @param {Event|IEvent} event - The event to get the position for\r\n * @param {Chart} chart - The chart\r\n * @returns {object} the event position\r\n */\r\nfunction getRelativePosition(e, chart) {\r\n\tif (e.native) {\r\n\t\treturn {\r\n\t\t\tx: e.x,\r\n\t\t\ty: e.y\r\n\t\t};\r\n\t}\r\n\r\n\treturn helpers$1.getRelativePosition(e, chart);\r\n}\r\n\r\n/**\r\n * Helper function to traverse all of the visible elements in the chart\r\n * @param {Chart} chart - the chart\r\n * @param {function} handler - the callback to execute for each visible item\r\n */\r\nfunction parseVisibleItems(chart, handler) {\r\n\tvar metasets = chart._getSortedVisibleDatasetMetas();\r\n\tvar metadata, i, j, ilen, jlen, element;\r\n\r\n\tfor (i = 0, ilen = metasets.length; i < ilen; ++i) {\r\n\t\tmetadata = metasets[i].data;\r\n\t\tfor (j = 0, jlen = metadata.length; j < jlen; ++j) {\r\n\t\t\telement = metadata[j];\r\n\t\t\tif (!element._view.skip) {\r\n\t\t\t\thandler(element);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Helper function to get the items that intersect the event position\r\n * @param {ChartElement[]} items - elements to filter\r\n * @param {object} position - the point to be nearest to\r\n * @return {ChartElement[]} the nearest items\r\n */\r\nfunction getIntersectItems(chart, position) {\r\n\tvar elements = [];\r\n\r\n\tparseVisibleItems(chart, function(element) {\r\n\t\tif (element.inRange(position.x, position.y)) {\r\n\t\t\telements.push(element);\r\n\t\t}\r\n\t});\r\n\r\n\treturn elements;\r\n}\r\n\r\n/**\r\n * Helper function to get the items nearest to the event position considering all visible items in teh chart\r\n * @param {Chart} chart - the chart to look at elements from\r\n * @param {object} position - the point to be nearest to\r\n * @param {boolean} intersect - if true, only consider items that intersect the position\r\n * @param {function} distanceMetric - function to provide the distance between points\r\n * @return {ChartElement[]} the nearest items\r\n */\r\nfunction getNearestItems(chart, position, intersect, distanceMetric) {\r\n\tvar minDistance = Number.POSITIVE_INFINITY;\r\n\tvar nearestItems = [];\r\n\r\n\tparseVisibleItems(chart, function(element) {\r\n\t\tif (intersect && !element.inRange(position.x, position.y)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar center = element.getCenterPoint();\r\n\t\tvar distance = distanceMetric(position, center);\r\n\t\tif (distance < minDistance) {\r\n\t\t\tnearestItems = [element];\r\n\t\t\tminDistance = distance;\r\n\t\t} else if (distance === minDistance) {\r\n\t\t\t// Can have multiple items at the same distance in which case we sort by size\r\n\t\t\tnearestItems.push(element);\r\n\t\t}\r\n\t});\r\n\r\n\treturn nearestItems;\r\n}\r\n\r\n/**\r\n * Get a distance metric function for two points based on the\r\n * axis mode setting\r\n * @param {string} axis - the axis mode. x|y|xy\r\n */\r\nfunction getDistanceMetricForAxis(axis) {\r\n\tvar useX = axis.indexOf('x') !== -1;\r\n\tvar useY = axis.indexOf('y') !== -1;\r\n\r\n\treturn function(pt1, pt2) {\r\n\t\tvar deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\r\n\t\tvar deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\r\n\t\treturn Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\r\n\t};\r\n}\r\n\r\nfunction indexMode(chart, e, options) {\r\n\tvar position = getRelativePosition(e, chart);\r\n\t// Default axis for index mode is 'x' to match old behaviour\r\n\toptions.axis = options.axis || 'x';\r\n\tvar distanceMetric = getDistanceMetricForAxis(options.axis);\r\n\tvar items = options.intersect ? getIntersectItems(chart, position) : getNearestItems(chart, position, false, distanceMetric);\r\n\tvar elements = [];\r\n\r\n\tif (!items.length) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tchart._getSortedVisibleDatasetMetas().forEach(function(meta) {\r\n\t\tvar element = meta.data[items[0]._index];\r\n\r\n\t\t// don't count items that are skipped (null data)\r\n\t\tif (element && !element._view.skip) {\r\n\t\t\telements.push(element);\r\n\t\t}\r\n\t});\r\n\r\n\treturn elements;\r\n}\r\n\r\n/**\r\n * @interface IInteractionOptions\r\n */\r\n/**\r\n * If true, only consider items that intersect the point\r\n * @name IInterfaceOptions#boolean\r\n * @type Boolean\r\n */\r\n\r\n/**\r\n * Contains interaction related functions\r\n * @namespace Chart.Interaction\r\n */\r\nvar core_interaction = {\r\n\t// Helper function for different modes\r\n\tmodes: {\r\n\t\tsingle: function(chart, e) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\tvar elements = [];\r\n\r\n\t\t\tparseVisibleItems(chart, function(element) {\r\n\t\t\t\tif (element.inRange(position.x, position.y)) {\r\n\t\t\t\t\telements.push(element);\r\n\t\t\t\t\treturn elements;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn elements.slice(0, 1);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @function Chart.Interaction.modes.label\r\n\t\t * @deprecated since version 2.4.0\r\n\t\t * @todo remove at version 3\r\n\t\t * @private\r\n\t\t */\r\n\t\tlabel: indexMode,\r\n\r\n\t\t/**\r\n\t\t * Returns items at the same index. If the options.intersect parameter is true, we only return items if we intersect something\r\n\t\t * If the options.intersect mode is false, we find the nearest item and return the items at the same index as that item\r\n\t\t * @function Chart.Interaction.modes.index\r\n\t\t * @since v2.4.0\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use during interaction\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tindex: indexMode,\r\n\r\n\t\t/**\r\n\t\t * Returns items in the same dataset. If the options.intersect parameter is true, we only return items if we intersect something\r\n\t\t * If the options.intersect is false, we find the nearest item and return the items in that dataset\r\n\t\t * @function Chart.Interaction.modes.dataset\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use during interaction\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tdataset: function(chart, e, options) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\toptions.axis = options.axis || 'xy';\r\n\t\t\tvar distanceMetric = getDistanceMetricForAxis(options.axis);\r\n\t\t\tvar items = options.intersect ? getIntersectItems(chart, position) : getNearestItems(chart, position, false, distanceMetric);\r\n\r\n\t\t\tif (items.length > 0) {\r\n\t\t\t\titems = chart.getDatasetMeta(items[0]._datasetIndex).data;\r\n\t\t\t}\r\n\r\n\t\t\treturn items;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @function Chart.Interaction.modes.x-axis\r\n\t\t * @deprecated since version 2.4.0. Use index mode and intersect == true\r\n\t\t * @todo remove at version 3\r\n\t\t * @private\r\n\t\t */\r\n\t\t'x-axis': function(chart, e) {\r\n\t\t\treturn indexMode(chart, e, {intersect: false});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Point mode returns all elements that hit test based on the event position\r\n\t\t * of the event\r\n\t\t * @function Chart.Interaction.modes.intersect\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tpoint: function(chart, e) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\treturn getIntersectItems(chart, position);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * nearest mode returns the element closest to the point\r\n\t\t * @function Chart.Interaction.modes.intersect\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tnearest: function(chart, e, options) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\toptions.axis = options.axis || 'xy';\r\n\t\t\tvar distanceMetric = getDistanceMetricForAxis(options.axis);\r\n\t\t\treturn getNearestItems(chart, position, options.intersect, distanceMetric);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * x mode returns the elements that hit-test at the current x coordinate\r\n\t\t * @function Chart.Interaction.modes.x\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tx: function(chart, e, options) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\tvar items = [];\r\n\t\t\tvar intersectsItem = false;\r\n\r\n\t\t\tparseVisibleItems(chart, function(element) {\r\n\t\t\t\tif (element.inXRange(position.x)) {\r\n\t\t\t\t\titems.push(element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (element.inRange(position.x, position.y)) {\r\n\t\t\t\t\tintersectsItem = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// If we want to trigger on an intersect and we don't have any items\r\n\t\t\t// that intersect the position, return nothing\r\n\t\t\tif (options.intersect && !intersectsItem) {\r\n\t\t\t\titems = [];\r\n\t\t\t}\r\n\t\t\treturn items;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * y mode returns the elements that hit-test at the current y coordinate\r\n\t\t * @function Chart.Interaction.modes.y\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\ty: function(chart, e, options) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\tvar items = [];\r\n\t\t\tvar intersectsItem = false;\r\n\r\n\t\t\tparseVisibleItems(chart, function(element) {\r\n\t\t\t\tif (element.inYRange(position.y)) {\r\n\t\t\t\t\titems.push(element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (element.inRange(position.x, position.y)) {\r\n\t\t\t\t\tintersectsItem = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// If we want to trigger on an intersect and we don't have any items\r\n\t\t\t// that intersect the position, return nothing\r\n\t\t\tif (options.intersect && !intersectsItem) {\r\n\t\t\t\titems = [];\r\n\t\t\t}\r\n\t\t\treturn items;\r\n\t\t}\r\n\t}\r\n};\n\nvar extend = helpers$1.extend;\r\n\r\nfunction filterByPosition(array, position) {\r\n\treturn helpers$1.where(array, function(v) {\r\n\t\treturn v.pos === position;\r\n\t});\r\n}\r\n\r\nfunction sortByWeight(array, reverse) {\r\n\treturn array.sort(function(a, b) {\r\n\t\tvar v0 = reverse ? b : a;\r\n\t\tvar v1 = reverse ? a : b;\r\n\t\treturn v0.weight === v1.weight ?\r\n\t\t\tv0.index - v1.index :\r\n\t\t\tv0.weight - v1.weight;\r\n\t});\r\n}\r\n\r\nfunction wrapBoxes(boxes) {\r\n\tvar layoutBoxes = [];\r\n\tvar i, ilen, box;\r\n\r\n\tfor (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {\r\n\t\tbox = boxes[i];\r\n\t\tlayoutBoxes.push({\r\n\t\t\tindex: i,\r\n\t\t\tbox: box,\r\n\t\t\tpos: box.position,\r\n\t\t\thorizontal: box.isHorizontal(),\r\n\t\t\tweight: box.weight\r\n\t\t});\r\n\t}\r\n\treturn layoutBoxes;\r\n}\r\n\r\nfunction setLayoutDims(layouts, params) {\r\n\tvar i, ilen, layout;\r\n\tfor (i = 0, ilen = layouts.length; i < ilen; ++i) {\r\n\t\tlayout = layouts[i];\r\n\t\t// store width used instead of chartArea.w in fitBoxes\r\n\t\tlayout.width = layout.horizontal\r\n\t\t\t? layout.box.fullWidth && params.availableWidth\r\n\t\t\t: params.vBoxMaxWidth;\r\n\t\t// store height used instead of chartArea.h in fitBoxes\r\n\t\tlayout.height = layout.horizontal && params.hBoxMaxHeight;\r\n\t}\r\n}\r\n\r\nfunction buildLayoutBoxes(boxes) {\r\n\tvar layoutBoxes = wrapBoxes(boxes);\r\n\tvar left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\r\n\tvar right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\r\n\tvar top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\r\n\tvar bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\r\n\r\n\treturn {\r\n\t\tleftAndTop: left.concat(top),\r\n\t\trightAndBottom: right.concat(bottom),\r\n\t\tchartArea: filterByPosition(layoutBoxes, 'chartArea'),\r\n\t\tvertical: left.concat(right),\r\n\t\thorizontal: top.concat(bottom)\r\n\t};\r\n}\r\n\r\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\r\n\treturn Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\r\n}\r\n\r\nfunction updateDims(chartArea, params, layout) {\r\n\tvar box = layout.box;\r\n\tvar maxPadding = chartArea.maxPadding;\r\n\tvar newWidth, newHeight;\r\n\r\n\tif (layout.size) {\r\n\t\t// this layout was already counted for, lets first reduce old size\r\n\t\tchartArea[layout.pos] -= layout.size;\r\n\t}\r\n\tlayout.size = layout.horizontal ? box.height : box.width;\r\n\tchartArea[layout.pos] += layout.size;\r\n\r\n\tif (box.getPadding) {\r\n\t\tvar boxPadding = box.getPadding();\r\n\t\tmaxPadding.top = Math.max(maxPadding.top, boxPadding.top);\r\n\t\tmaxPadding.left = Math.max(maxPadding.left, boxPadding.left);\r\n\t\tmaxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\r\n\t\tmaxPadding.right = Math.max(maxPadding.right, boxPadding.right);\r\n\t}\r\n\r\n\tnewWidth = params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right');\r\n\tnewHeight = params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom');\r\n\r\n\tif (newWidth !== chartArea.w || newHeight !== chartArea.h) {\r\n\t\tchartArea.w = newWidth;\r\n\t\tchartArea.h = newHeight;\r\n\r\n\t\t// return true if chart area changed in layout's direction\r\n\t\tvar sizes = layout.horizontal ? [newWidth, chartArea.w] : [newHeight, chartArea.h];\r\n\t\treturn sizes[0] !== sizes[1] && (!isNaN(sizes[0]) || !isNaN(sizes[1]));\r\n\t}\r\n}\r\n\r\nfunction handleMaxPadding(chartArea) {\r\n\tvar maxPadding = chartArea.maxPadding;\r\n\r\n\tfunction updatePos(pos) {\r\n\t\tvar change = Math.max(maxPadding[pos] - chartArea[pos], 0);\r\n\t\tchartArea[pos] += change;\r\n\t\treturn change;\r\n\t}\r\n\tchartArea.y += updatePos('top');\r\n\tchartArea.x += updatePos('left');\r\n\tupdatePos('right');\r\n\tupdatePos('bottom');\r\n}\r\n\r\nfunction getMargins(horizontal, chartArea) {\r\n\tvar maxPadding = chartArea.maxPadding;\r\n\r\n\tfunction marginForPositions(positions) {\r\n\t\tvar margin = {left: 0, top: 0, right: 0, bottom: 0};\r\n\t\tpositions.forEach(function(pos) {\r\n\t\t\tmargin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\r\n\t\t});\r\n\t\treturn margin;\r\n\t}\r\n\r\n\treturn horizontal\r\n\t\t? marginForPositions(['left', 'right'])\r\n\t\t: marginForPositions(['top', 'bottom']);\r\n}\r\n\r\nfunction fitBoxes(boxes, chartArea, params) {\r\n\tvar refitBoxes = [];\r\n\tvar i, ilen, layout, box, refit, changed;\r\n\r\n\tfor (i = 0, ilen = boxes.length; i < ilen; ++i) {\r\n\t\tlayout = boxes[i];\r\n\t\tbox = layout.box;\r\n\r\n\t\tbox.update(\r\n\t\t\tlayout.width || chartArea.w,\r\n\t\t\tlayout.height || chartArea.h,\r\n\t\t\tgetMargins(layout.horizontal, chartArea)\r\n\t\t);\r\n\t\tif (updateDims(chartArea, params, layout)) {\r\n\t\t\tchanged = true;\r\n\t\t\tif (refitBoxes.length) {\r\n\t\t\t\t// Dimensions changed and there were non full width boxes before this\r\n\t\t\t\t// -> we have to refit those\r\n\t\t\t\trefit = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!box.fullWidth) { // fullWidth boxes don't need to be re-fitted in any case\r\n\t\t\trefitBoxes.push(layout);\r\n\t\t}\r\n\t}\r\n\r\n\treturn refit ? fitBoxes(refitBoxes, chartArea, params) || changed : changed;\r\n}\r\n\r\nfunction placeBoxes(boxes, chartArea, params) {\r\n\tvar userPadding = params.padding;\r\n\tvar x = chartArea.x;\r\n\tvar y = chartArea.y;\r\n\tvar i, ilen, layout, box;\r\n\r\n\tfor (i = 0, ilen = boxes.length; i < ilen; ++i) {\r\n\t\tlayout = boxes[i];\r\n\t\tbox = layout.box;\r\n\t\tif (layout.horizontal) {\r\n\t\t\tbox.left = box.fullWidth ? userPadding.left : chartArea.left;\r\n\t\t\tbox.right = box.fullWidth ? params.outerWidth - userPadding.right : chartArea.left + chartArea.w;\r\n\t\t\tbox.top = y;\r\n\t\t\tbox.bottom = y + box.height;\r\n\t\t\tbox.width = box.right - box.left;\r\n\t\t\ty = box.bottom;\r\n\t\t} else {\r\n\t\t\tbox.left = x;\r\n\t\t\tbox.right = x + box.width;\r\n\t\t\tbox.top = chartArea.top;\r\n\t\t\tbox.bottom = chartArea.top + chartArea.h;\r\n\t\t\tbox.height = box.bottom - box.top;\r\n\t\t\tx = box.right;\r\n\t\t}\r\n\t}\r\n\r\n\tchartArea.x = x;\r\n\tchartArea.y = y;\r\n}\r\n\r\ncore_defaults._set('global', {\r\n\tlayout: {\r\n\t\tpadding: {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * @interface ILayoutItem\r\n * @prop {string} position - The position of the item in the chart layout. Possible values are\r\n * 'left', 'top', 'right', 'bottom', and 'chartArea'\r\n * @prop {number} weight - The weight used to sort the item. Higher weights are further away from the chart area\r\n * @prop {boolean} fullWidth - if true, and the item is horizontal, then push vertical boxes down\r\n * @prop {function} isHorizontal - returns true if the layout item is horizontal (ie. top or bottom)\r\n * @prop {function} update - Takes two parameters: width and height. Returns size of item\r\n * @prop {function} getPadding -  Returns an object with padding on the edges\r\n * @prop {number} width - Width of item. Must be valid after update()\r\n * @prop {number} height - Height of item. Must be valid after update()\r\n * @prop {number} left - Left edge of the item. Set by layout system and cannot be used in update\r\n * @prop {number} top - Top edge of the item. Set by layout system and cannot be used in update\r\n * @prop {number} right - Right edge of the item. Set by layout system and cannot be used in update\r\n * @prop {number} bottom - Bottom edge of the item. Set by layout system and cannot be used in update\r\n */\r\n\r\n// The layout service is very self explanatory.  It's responsible for the layout within a chart.\r\n// Scales, Legends and Plugins all rely on the layout service and can easily register to be placed anywhere they need\r\n// It is this service's responsibility of carrying out that layout.\r\nvar core_layouts = {\r\n\tdefaults: {},\r\n\r\n\t/**\r\n\t * Register a box to a chart.\r\n\t * A box is simply a reference to an object that requires layout. eg. Scales, Legend, Title.\r\n\t * @param {Chart} chart - the chart to use\r\n\t * @param {ILayoutItem} item - the item to add to be layed out\r\n\t */\r\n\taddBox: function(chart, item) {\r\n\t\tif (!chart.boxes) {\r\n\t\t\tchart.boxes = [];\r\n\t\t}\r\n\r\n\t\t// initialize item with default values\r\n\t\titem.fullWidth = item.fullWidth || false;\r\n\t\titem.position = item.position || 'top';\r\n\t\titem.weight = item.weight || 0;\r\n\t\titem._layers = item._layers || function() {\r\n\t\t\treturn [{\r\n\t\t\t\tz: 0,\r\n\t\t\t\tdraw: function() {\r\n\t\t\t\t\titem.draw.apply(item, arguments);\r\n\t\t\t\t}\r\n\t\t\t}];\r\n\t\t};\r\n\r\n\t\tchart.boxes.push(item);\r\n\t},\r\n\r\n\t/**\r\n\t * Remove a layoutItem from a chart\r\n\t * @param {Chart} chart - the chart to remove the box from\r\n\t * @param {ILayoutItem} layoutItem - the item to remove from the layout\r\n\t */\r\n\tremoveBox: function(chart, layoutItem) {\r\n\t\tvar index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\r\n\t\tif (index !== -1) {\r\n\t\t\tchart.boxes.splice(index, 1);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Sets (or updates) options on the given `item`.\r\n\t * @param {Chart} chart - the chart in which the item lives (or will be added to)\r\n\t * @param {ILayoutItem} item - the item to configure with the given options\r\n\t * @param {object} options - the new item options.\r\n\t */\r\n\tconfigure: function(chart, item, options) {\r\n\t\tvar props = ['fullWidth', 'position', 'weight'];\r\n\t\tvar ilen = props.length;\r\n\t\tvar i = 0;\r\n\t\tvar prop;\r\n\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\tprop = props[i];\r\n\t\t\tif (options.hasOwnProperty(prop)) {\r\n\t\t\t\titem[prop] = options[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Fits boxes of the given chart into the given size by having each box measure itself\r\n\t * then running a fitting algorithm\r\n\t * @param {Chart} chart - the chart\r\n\t * @param {number} width - the width to fit into\r\n\t * @param {number} height - the height to fit into\r\n\t */\r\n\tupdate: function(chart, width, height) {\r\n\t\tif (!chart) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar layoutOptions = chart.options.layout || {};\r\n\t\tvar padding = helpers$1.options.toPadding(layoutOptions.padding);\r\n\r\n\t\tvar availableWidth = width - padding.width;\r\n\t\tvar availableHeight = height - padding.height;\r\n\t\tvar boxes = buildLayoutBoxes(chart.boxes);\r\n\t\tvar verticalBoxes = boxes.vertical;\r\n\t\tvar horizontalBoxes = boxes.horizontal;\r\n\r\n\t\t// Essentially we now have any number of boxes on each of the 4 sides.\r\n\t\t// Our canvas looks like the following.\r\n\t\t// The areas L1 and L2 are the left axes. R1 is the right axis, T1 is the top axis and\r\n\t\t// B1 is the bottom axis\r\n\t\t// There are also 4 quadrant-like locations (left to right instead of clockwise) reserved for chart overlays\r\n\t\t// These locations are single-box locations only, when trying to register a chartArea location that is already taken,\r\n\t\t// an error will be thrown.\r\n\t\t//\r\n\t\t// |----------------------------------------------------|\r\n\t\t// |                  T1 (Full Width)                   |\r\n\t\t// |----------------------------------------------------|\r\n\t\t// |    |    |                 T2                  |    |\r\n\t\t// |    |----|-------------------------------------|----|\r\n\t\t// |    |    | C1 |                           | C2 |    |\r\n\t\t// |    |    |----|                           |----|    |\r\n\t\t// |    |    |                                     |    |\r\n\t\t// | L1 | L2 |           ChartArea (C0)            | R1 |\r\n\t\t// |    |    |                                     |    |\r\n\t\t// |    |    |----|                           |----|    |\r\n\t\t// |    |    | C3 |                           | C4 |    |\r\n\t\t// |    |----|-------------------------------------|----|\r\n\t\t// |    |    |                 B1                  |    |\r\n\t\t// |----------------------------------------------------|\r\n\t\t// |                  B2 (Full Width)                   |\r\n\t\t// |----------------------------------------------------|\r\n\t\t//\r\n\r\n\t\tvar params = Object.freeze({\r\n\t\t\touterWidth: width,\r\n\t\t\touterHeight: height,\r\n\t\t\tpadding: padding,\r\n\t\t\tavailableWidth: availableWidth,\r\n\t\t\tvBoxMaxWidth: availableWidth / 2 / verticalBoxes.length,\r\n\t\t\thBoxMaxHeight: availableHeight / 2\r\n\t\t});\r\n\t\tvar chartArea = extend({\r\n\t\t\tmaxPadding: extend({}, padding),\r\n\t\t\tw: availableWidth,\r\n\t\t\th: availableHeight,\r\n\t\t\tx: padding.left,\r\n\t\t\ty: padding.top\r\n\t\t}, padding);\r\n\r\n\t\tsetLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\r\n\r\n\t\t// First fit vertical boxes\r\n\t\tfitBoxes(verticalBoxes, chartArea, params);\r\n\r\n\t\t// Then fit horizontal boxes\r\n\t\tif (fitBoxes(horizontalBoxes, chartArea, params)) {\r\n\t\t\t// if the area changed, re-fit vertical boxes\r\n\t\t\tfitBoxes(verticalBoxes, chartArea, params);\r\n\t\t}\r\n\r\n\t\thandleMaxPadding(chartArea);\r\n\r\n\t\t// Finally place the boxes to correct coordinates\r\n\t\tplaceBoxes(boxes.leftAndTop, chartArea, params);\r\n\r\n\t\t// Move to opposite side of chart\r\n\t\tchartArea.x += chartArea.w;\r\n\t\tchartArea.y += chartArea.h;\r\n\r\n\t\tplaceBoxes(boxes.rightAndBottom, chartArea, params);\r\n\r\n\t\tchart.chartArea = {\r\n\t\t\tleft: chartArea.left,\r\n\t\t\ttop: chartArea.top,\r\n\t\t\tright: chartArea.left + chartArea.w,\r\n\t\t\tbottom: chartArea.top + chartArea.h\r\n\t\t};\r\n\r\n\t\t// Finally update boxes in chartArea (radial scale for example)\r\n\t\thelpers$1.each(boxes.chartArea, function(layout) {\r\n\t\t\tvar box = layout.box;\r\n\t\t\textend(box, chart.chartArea);\r\n\t\t\tbox.update(chartArea.w, chartArea.h);\r\n\t\t});\r\n\t}\r\n};\n\n/**\r\n * Platform fallback implementation (minimal).\r\n * @see https://github.com/chartjs/Chart.js/pull/4591#issuecomment-319575939\r\n */\r\n\r\nvar platform_basic = {\r\n\tacquireContext: function(item) {\r\n\t\tif (item && item.canvas) {\r\n\t\t\t// Support for any object associated to a canvas (including a context2d)\r\n\t\t\titem = item.canvas;\r\n\t\t}\r\n\r\n\t\treturn item && item.getContext('2d') || null;\r\n\t}\r\n};\n\nvar platform_dom = \"/*\\r\\n * DOM element rendering detection\\r\\n * https://davidwalsh.name/detect-node-insertion\\r\\n */\\r\\n@keyframes chartjs-render-animation {\\r\\n\\tfrom { opacity: 0.99; }\\r\\n\\tto { opacity: 1; }\\r\\n}\\r\\n\\r\\n.chartjs-render-monitor {\\r\\n\\tanimation: chartjs-render-animation 0.001s;\\r\\n}\\r\\n\\r\\n/*\\r\\n * DOM element resizing detection\\r\\n * https://github.com/marcj/css-element-queries\\r\\n */\\r\\n.chartjs-size-monitor,\\r\\n.chartjs-size-monitor-expand,\\r\\n.chartjs-size-monitor-shrink {\\r\\n\\tposition: absolute;\\r\\n\\tdirection: ltr;\\r\\n\\tleft: 0;\\r\\n\\ttop: 0;\\r\\n\\tright: 0;\\r\\n\\tbottom: 0;\\r\\n\\toverflow: hidden;\\r\\n\\tpointer-events: none;\\r\\n\\tvisibility: hidden;\\r\\n\\tz-index: -1;\\r\\n}\\r\\n\\r\\n.chartjs-size-monitor-expand > div {\\r\\n\\tposition: absolute;\\r\\n\\twidth: 1000000px;\\r\\n\\theight: 1000000px;\\r\\n\\tleft: 0;\\r\\n\\ttop: 0;\\r\\n}\\r\\n\\r\\n.chartjs-size-monitor-shrink > div {\\r\\n\\tposition: absolute;\\r\\n\\twidth: 200%;\\r\\n\\theight: 200%;\\r\\n\\tleft: 0;\\r\\n\\ttop: 0;\\r\\n}\\r\\n\";\n\nvar platform_dom$1 = /*#__PURE__*/Object.freeze({\n__proto__: null,\n'default': platform_dom\n});\n\nvar stylesheet = getCjsExportFromNamespace(platform_dom$1);\n\nvar EXPANDO_KEY = '$chartjs';\r\nvar CSS_PREFIX = 'chartjs-';\r\nvar CSS_SIZE_MONITOR = CSS_PREFIX + 'size-monitor';\r\nvar CSS_RENDER_MONITOR = CSS_PREFIX + 'render-monitor';\r\nvar CSS_RENDER_ANIMATION = CSS_PREFIX + 'render-animation';\r\nvar ANIMATION_START_EVENTS = ['animationstart', 'webkitAnimationStart'];\r\n\r\n/**\r\n * DOM event types -> Chart.js event types.\r\n * Note: only events with different types are mapped.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/Events\r\n */\r\nvar EVENT_TYPES = {\r\n\ttouchstart: 'mousedown',\r\n\ttouchmove: 'mousemove',\r\n\ttouchend: 'mouseup',\r\n\tpointerenter: 'mouseenter',\r\n\tpointerdown: 'mousedown',\r\n\tpointermove: 'mousemove',\r\n\tpointerup: 'mouseup',\r\n\tpointerleave: 'mouseout',\r\n\tpointerout: 'mouseout'\r\n};\r\n\r\n/**\r\n * The \"used\" size is the final value of a dimension property after all calculations have\r\n * been performed. This method uses the computed style of `element` but returns undefined\r\n * if the computed style is not expressed in pixels. That can happen in some cases where\r\n * `element` has a size relative to its parent and this last one is not yet displayed,\r\n * for example because of `display: none` on a parent node.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\r\n * @returns {number} Size in pixels or undefined if unknown.\r\n */\r\nfunction readUsedSize(element, property) {\r\n\tvar value = helpers$1.getStyle(element, property);\r\n\tvar matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\r\n\treturn matches ? Number(matches[1]) : undefined;\r\n}\r\n\r\n/**\r\n * Initializes the canvas style and render size without modifying the canvas display size,\r\n * since responsiveness is handled by the controller.resize() method. The config is used\r\n * to determine the aspect ratio to apply in case no explicit height has been specified.\r\n */\r\nfunction initCanvas(canvas, config) {\r\n\tvar style = canvas.style;\r\n\r\n\t// NOTE(SB) canvas.getAttribute('width') !== canvas.width: in the first case it\r\n\t// returns null or '' if no explicit value has been set to the canvas attribute.\r\n\tvar renderHeight = canvas.getAttribute('height');\r\n\tvar renderWidth = canvas.getAttribute('width');\r\n\r\n\t// Chart.js modifies some canvas values that we want to restore on destroy\r\n\tcanvas[EXPANDO_KEY] = {\r\n\t\tinitial: {\r\n\t\t\theight: renderHeight,\r\n\t\t\twidth: renderWidth,\r\n\t\t\tstyle: {\r\n\t\t\t\tdisplay: style.display,\r\n\t\t\t\theight: style.height,\r\n\t\t\t\twidth: style.width\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Force canvas to display as block to avoid extra space caused by inline\r\n\t// elements, which would interfere with the responsive resize process.\r\n\t// https://github.com/chartjs/Chart.js/issues/2538\r\n\tstyle.display = style.display || 'block';\r\n\r\n\tif (renderWidth === null || renderWidth === '') {\r\n\t\tvar displayWidth = readUsedSize(canvas, 'width');\r\n\t\tif (displayWidth !== undefined) {\r\n\t\t\tcanvas.width = displayWidth;\r\n\t\t}\r\n\t}\r\n\r\n\tif (renderHeight === null || renderHeight === '') {\r\n\t\tif (canvas.style.height === '') {\r\n\t\t\t// If no explicit render height and style height, let's apply the aspect ratio,\r\n\t\t\t// which one can be specified by the user but also by charts as default option\r\n\t\t\t// (i.e. options.aspectRatio). If not specified, use canvas aspect ratio of 2.\r\n\t\t\tcanvas.height = canvas.width / (config.options.aspectRatio || 2);\r\n\t\t} else {\r\n\t\t\tvar displayHeight = readUsedSize(canvas, 'height');\r\n\t\t\tif (displayWidth !== undefined) {\r\n\t\t\t\tcanvas.height = displayHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn canvas;\r\n}\r\n\r\n/**\r\n * Detects support for options object argument in addEventListener.\r\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\r\n * @private\r\n */\r\nvar supportsEventListenerOptions = (function() {\r\n\tvar supports = false;\r\n\ttry {\r\n\t\tvar options = Object.defineProperty({}, 'passive', {\r\n\t\t\t// eslint-disable-next-line getter-return\r\n\t\t\tget: function() {\r\n\t\t\t\tsupports = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\twindow.addEventListener('e', null, options);\r\n\t} catch (e) {\r\n\t\t// continue regardless of error\r\n\t}\r\n\treturn supports;\r\n}());\r\n\r\n// Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\r\n// https://github.com/chartjs/Chart.js/issues/4287\r\nvar eventListenerOptions = supportsEventListenerOptions ? {passive: true} : false;\r\n\r\nfunction addListener(node, type, listener) {\r\n\tnode.addEventListener(type, listener, eventListenerOptions);\r\n}\r\n\r\nfunction removeListener(node, type, listener) {\r\n\tnode.removeEventListener(type, listener, eventListenerOptions);\r\n}\r\n\r\nfunction createEvent(type, chart, x, y, nativeEvent) {\r\n\treturn {\r\n\t\ttype: type,\r\n\t\tchart: chart,\r\n\t\tnative: nativeEvent || null,\r\n\t\tx: x !== undefined ? x : null,\r\n\t\ty: y !== undefined ? y : null,\r\n\t};\r\n}\r\n\r\nfunction fromNativeEvent(event, chart) {\r\n\tvar type = EVENT_TYPES[event.type] || event.type;\r\n\tvar pos = helpers$1.getRelativePosition(event, chart);\r\n\treturn createEvent(type, chart, pos.x, pos.y, event);\r\n}\r\n\r\nfunction throttled(fn, thisArg) {\r\n\tvar ticking = false;\r\n\tvar args = [];\r\n\r\n\treturn function() {\r\n\t\targs = Array.prototype.slice.call(arguments);\r\n\t\tthisArg = thisArg || this;\r\n\r\n\t\tif (!ticking) {\r\n\t\t\tticking = true;\r\n\t\t\thelpers$1.requestAnimFrame.call(window, function() {\r\n\t\t\t\tticking = false;\r\n\t\t\t\tfn.apply(thisArg, args);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction createDiv(cls) {\r\n\tvar el = document.createElement('div');\r\n\tel.className = cls || '';\r\n\treturn el;\r\n}\r\n\r\n// Implementation based on https://github.com/marcj/css-element-queries\r\nfunction createResizer(handler) {\r\n\tvar maxSize = 1000000;\r\n\r\n\t// NOTE(SB) Don't use innerHTML because it could be considered unsafe.\r\n\t// https://github.com/chartjs/Chart.js/issues/5902\r\n\tvar resizer = createDiv(CSS_SIZE_MONITOR);\r\n\tvar expand = createDiv(CSS_SIZE_MONITOR + '-expand');\r\n\tvar shrink = createDiv(CSS_SIZE_MONITOR + '-shrink');\r\n\r\n\texpand.appendChild(createDiv());\r\n\tshrink.appendChild(createDiv());\r\n\r\n\tresizer.appendChild(expand);\r\n\tresizer.appendChild(shrink);\r\n\tresizer._reset = function() {\r\n\t\texpand.scrollLeft = maxSize;\r\n\t\texpand.scrollTop = maxSize;\r\n\t\tshrink.scrollLeft = maxSize;\r\n\t\tshrink.scrollTop = maxSize;\r\n\t};\r\n\r\n\tvar onScroll = function() {\r\n\t\tresizer._reset();\r\n\t\thandler();\r\n\t};\r\n\r\n\taddListener(expand, 'scroll', onScroll.bind(expand, 'expand'));\r\n\taddListener(shrink, 'scroll', onScroll.bind(shrink, 'shrink'));\r\n\r\n\treturn resizer;\r\n}\r\n\r\n// https://davidwalsh.name/detect-node-insertion\r\nfunction watchForRender(node, handler) {\r\n\tvar expando = node[EXPANDO_KEY] || (node[EXPANDO_KEY] = {});\r\n\tvar proxy = expando.renderProxy = function(e) {\r\n\t\tif (e.animationName === CSS_RENDER_ANIMATION) {\r\n\t\t\thandler();\r\n\t\t}\r\n\t};\r\n\r\n\thelpers$1.each(ANIMATION_START_EVENTS, function(type) {\r\n\t\taddListener(node, type, proxy);\r\n\t});\r\n\r\n\t// #4737: Chrome might skip the CSS animation when the CSS_RENDER_MONITOR class\r\n\t// is removed then added back immediately (same animation frame?). Accessing the\r\n\t// `offsetParent` property will force a reflow and re-evaluate the CSS animation.\r\n\t// https://gist.github.com/paulirish/5d52fb081b3570c81e3a#box-metrics\r\n\t// https://github.com/chartjs/Chart.js/issues/4737\r\n\texpando.reflow = !!node.offsetParent;\r\n\r\n\tnode.classList.add(CSS_RENDER_MONITOR);\r\n}\r\n\r\nfunction unwatchForRender(node) {\r\n\tvar expando = node[EXPANDO_KEY] || {};\r\n\tvar proxy = expando.renderProxy;\r\n\r\n\tif (proxy) {\r\n\t\thelpers$1.each(ANIMATION_START_EVENTS, function(type) {\r\n\t\t\tremoveListener(node, type, proxy);\r\n\t\t});\r\n\r\n\t\tdelete expando.renderProxy;\r\n\t}\r\n\r\n\tnode.classList.remove(CSS_RENDER_MONITOR);\r\n}\r\n\r\nfunction addResizeListener(node, listener, chart) {\r\n\tvar expando = node[EXPANDO_KEY] || (node[EXPANDO_KEY] = {});\r\n\r\n\t// Let's keep track of this added resizer and thus avoid DOM query when removing it.\r\n\tvar resizer = expando.resizer = createResizer(throttled(function() {\r\n\t\tif (expando.resizer) {\r\n\t\t\tvar container = chart.options.maintainAspectRatio && node.parentNode;\r\n\t\t\tvar w = container ? container.clientWidth : 0;\r\n\t\t\tlistener(createEvent('resize', chart));\r\n\t\t\tif (container && container.clientWidth < w && chart.canvas) {\r\n\t\t\t\t// If the container size shrank during chart resize, let's assume\r\n\t\t\t\t// scrollbar appeared. So we resize again with the scrollbar visible -\r\n\t\t\t\t// effectively making chart smaller and the scrollbar hidden again.\r\n\t\t\t\t// Because we are inside `throttled`, and currently `ticking`, scroll\r\n\t\t\t\t// events are ignored during this whole 2 resize process.\r\n\t\t\t\t// If we assumed wrong and something else happened, we are resizing\r\n\t\t\t\t// twice in a frame (potential performance issue)\r\n\t\t\t\tlistener(createEvent('resize', chart));\r\n\t\t\t}\r\n\t\t}\r\n\t}));\r\n\r\n\t// The resizer needs to be attached to the node parent, so we first need to be\r\n\t// sure that `node` is attached to the DOM before injecting the resizer element.\r\n\twatchForRender(node, function() {\r\n\t\tif (expando.resizer) {\r\n\t\t\tvar container = node.parentNode;\r\n\t\t\tif (container && container !== resizer.parentNode) {\r\n\t\t\t\tcontainer.insertBefore(resizer, container.firstChild);\r\n\t\t\t}\r\n\r\n\t\t\t// The container size might have changed, let's reset the resizer state.\r\n\t\t\tresizer._reset();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction removeResizeListener(node) {\r\n\tvar expando = node[EXPANDO_KEY] || {};\r\n\tvar resizer = expando.resizer;\r\n\r\n\tdelete expando.resizer;\r\n\tunwatchForRender(node);\r\n\r\n\tif (resizer && resizer.parentNode) {\r\n\t\tresizer.parentNode.removeChild(resizer);\r\n\t}\r\n}\r\n\r\n/**\r\n * Injects CSS styles inline if the styles are not already present.\r\n * @param {HTMLDocument|ShadowRoot} rootNode - the node to contain the <style>.\r\n * @param {string} css - the CSS to be injected.\r\n */\r\nfunction injectCSS(rootNode, css) {\r\n\t// https://stackoverflow.com/q/3922139\r\n\tvar expando = rootNode[EXPANDO_KEY] || (rootNode[EXPANDO_KEY] = {});\r\n\tif (!expando.containsStyles) {\r\n\t\texpando.containsStyles = true;\r\n\t\tcss = '/* Chart.js */\\n' + css;\r\n\t\tvar style = document.createElement('style');\r\n\t\tstyle.setAttribute('type', 'text/css');\r\n\t\tstyle.appendChild(document.createTextNode(css));\r\n\t\trootNode.appendChild(style);\r\n\t}\r\n}\r\n\r\nvar platform_dom$2 = {\r\n\t/**\r\n\t * When `true`, prevents the automatic injection of the stylesheet required to\r\n\t * correctly detect when the chart is added to the DOM and then resized. This\r\n\t * switch has been added to allow external stylesheet (`dist/Chart(.min)?.js`)\r\n\t * to be manually imported to make this library compatible with any CSP.\r\n\t * See https://github.com/chartjs/Chart.js/issues/5208\r\n\t */\r\n\tdisableCSSInjection: false,\r\n\r\n\t/**\r\n\t * This property holds whether this platform is enabled for the current environment.\r\n\t * Currently used by platform.js to select the proper implementation.\r\n\t * @private\r\n\t */\r\n\t_enabled: typeof window !== 'undefined' && typeof document !== 'undefined',\r\n\r\n\t/**\r\n\t * Initializes resources that depend on platform options.\r\n\t * @param {HTMLCanvasElement} canvas - The Canvas element.\r\n\t * @private\r\n\t */\r\n\t_ensureLoaded: function(canvas) {\r\n\t\tif (!this.disableCSSInjection) {\r\n\t\t\t// If the canvas is in a shadow DOM, then the styles must also be inserted\r\n\t\t\t// into the same shadow DOM.\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/5763\r\n\t\t\tvar root = canvas.getRootNode ? canvas.getRootNode() : document;\r\n\t\t\tvar targetNode = root.host ? root : document.head;\r\n\t\t\tinjectCSS(targetNode, stylesheet);\r\n\t\t}\r\n\t},\r\n\r\n\tacquireContext: function(item, config) {\r\n\t\tif (typeof item === 'string') {\r\n\t\t\titem = document.getElementById(item);\r\n\t\t} else if (item.length) {\r\n\t\t\t// Support for array based queries (such as jQuery)\r\n\t\t\titem = item[0];\r\n\t\t}\r\n\r\n\t\tif (item && item.canvas) {\r\n\t\t\t// Support for any object associated to a canvas (including a context2d)\r\n\t\t\titem = item.canvas;\r\n\t\t}\r\n\r\n\t\t// To prevent canvas fingerprinting, some add-ons undefine the getContext\r\n\t\t// method, for example: https://github.com/kkapsner/CanvasBlocker\r\n\t\t// https://github.com/chartjs/Chart.js/issues/2807\r\n\t\tvar context = item && item.getContext && item.getContext('2d');\r\n\r\n\t\t// `instanceof HTMLCanvasElement/CanvasRenderingContext2D` fails when the item is\r\n\t\t// inside an iframe or when running in a protected environment. We could guess the\r\n\t\t// types from their toString() value but let's keep things flexible and assume it's\r\n\t\t// a sufficient condition if the item has a context2D which has item as `canvas`.\r\n\t\t// https://github.com/chartjs/Chart.js/issues/3887\r\n\t\t// https://github.com/chartjs/Chart.js/issues/4102\r\n\t\t// https://github.com/chartjs/Chart.js/issues/4152\r\n\t\tif (context && context.canvas === item) {\r\n\t\t\t// Load platform resources on first chart creation, to make it possible to\r\n\t\t\t// import the library before setting platform options.\r\n\t\t\tthis._ensureLoaded(item);\r\n\t\t\tinitCanvas(item, config);\r\n\t\t\treturn context;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\treleaseContext: function(context) {\r\n\t\tvar canvas = context.canvas;\r\n\t\tif (!canvas[EXPANDO_KEY]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar initial = canvas[EXPANDO_KEY].initial;\r\n\t\t['height', 'width'].forEach(function(prop) {\r\n\t\t\tvar value = initial[prop];\r\n\t\t\tif (helpers$1.isNullOrUndef(value)) {\r\n\t\t\t\tcanvas.removeAttribute(prop);\r\n\t\t\t} else {\r\n\t\t\t\tcanvas.setAttribute(prop, value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\thelpers$1.each(initial.style || {}, function(value, key) {\r\n\t\t\tcanvas.style[key] = value;\r\n\t\t});\r\n\r\n\t\t// The canvas render size might have been changed (and thus the state stack discarded),\r\n\t\t// we can't use save() and restore() to restore the initial state. So make sure that at\r\n\t\t// least the canvas context is reset to the default state by setting the canvas width.\r\n\t\t// https://www.w3.org/TR/2011/WD-html5-20110525/the-canvas-element.html\r\n\t\t// eslint-disable-next-line no-self-assign\r\n\t\tcanvas.width = canvas.width;\r\n\r\n\t\tdelete canvas[EXPANDO_KEY];\r\n\t},\r\n\r\n\taddEventListener: function(chart, type, listener) {\r\n\t\tvar canvas = chart.canvas;\r\n\t\tif (type === 'resize') {\r\n\t\t\t// Note: the resize event is not supported on all browsers.\r\n\t\t\taddResizeListener(canvas, listener, chart);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar expando = listener[EXPANDO_KEY] || (listener[EXPANDO_KEY] = {});\r\n\t\tvar proxies = expando.proxies || (expando.proxies = {});\r\n\t\tvar proxy = proxies[chart.id + '_' + type] = function(event) {\r\n\t\t\tlistener(fromNativeEvent(event, chart));\r\n\t\t};\r\n\r\n\t\taddListener(canvas, type, proxy);\r\n\t},\r\n\r\n\tremoveEventListener: function(chart, type, listener) {\r\n\t\tvar canvas = chart.canvas;\r\n\t\tif (type === 'resize') {\r\n\t\t\t// Note: the resize event is not supported on all browsers.\r\n\t\t\tremoveResizeListener(canvas);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar expando = listener[EXPANDO_KEY] || {};\r\n\t\tvar proxies = expando.proxies || {};\r\n\t\tvar proxy = proxies[chart.id + '_' + type];\r\n\t\tif (!proxy) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tremoveListener(canvas, type, proxy);\r\n\t}\r\n};\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use EventTarget.addEventListener instead.\r\n * EventTarget.addEventListener compatibility: Chrome, Opera 7, Safari, FF1.5+, IE9+\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\r\n * @function Chart.helpers.addEvent\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers$1.addEvent = addListener;\r\n\r\n/**\r\n * Provided for backward compatibility, use EventTarget.removeEventListener instead.\r\n * EventTarget.removeEventListener compatibility: Chrome, Opera 7, Safari, FF1.5+, IE9+\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener\r\n * @function Chart.helpers.removeEvent\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers$1.removeEvent = removeListener;\n\n// @TODO Make possible to select another platform at build time.\r\nvar implementation = platform_dom$2._enabled ? platform_dom$2 : platform_basic;\r\n\r\n/**\r\n * @namespace Chart.platform\r\n * @see https://chartjs.gitbooks.io/proposals/content/Platform.html\r\n * @since 2.4.0\r\n */\r\nvar platform = helpers$1.extend({\r\n\t/**\r\n\t * @since 2.7.0\r\n\t */\r\n\tinitialize: function() {},\r\n\r\n\t/**\r\n\t * Called at chart construction time, returns a context2d instance implementing\r\n\t * the [W3C Canvas 2D Context API standard]{@link https://www.w3.org/TR/2dcontext/}.\r\n\t * @param {*} item - The native item from which to acquire context (platform specific)\r\n\t * @param {object} options - The chart options\r\n\t * @returns {CanvasRenderingContext2D} context2d instance\r\n\t */\r\n\tacquireContext: function() {},\r\n\r\n\t/**\r\n\t * Called at chart destruction time, releases any resources associated to the context\r\n\t * previously returned by the acquireContext() method.\r\n\t * @param {CanvasRenderingContext2D} context - The context2d instance\r\n\t * @returns {boolean} true if the method succeeded, else false\r\n\t */\r\n\treleaseContext: function() {},\r\n\r\n\t/**\r\n\t * Registers the specified listener on the given chart.\r\n\t * @param {Chart} chart - Chart from which to listen for event\r\n\t * @param {string} type - The ({@link IEvent}) type to listen for\r\n\t * @param {function} listener - Receives a notification (an object that implements\r\n\t * the {@link IEvent} interface) when an event of the specified type occurs.\r\n\t */\r\n\taddEventListener: function() {},\r\n\r\n\t/**\r\n\t * Removes the specified listener previously registered with addEventListener.\r\n\t * @param {Chart} chart - Chart from which to remove the listener\r\n\t * @param {string} type - The ({@link IEvent}) type to remove\r\n\t * @param {function} listener - The listener function to remove from the event target.\r\n\t */\r\n\tremoveEventListener: function() {}\r\n\r\n}, implementation);\n\ncore_defaults._set('global', {\r\n\tplugins: {}\r\n});\r\n\r\n/**\r\n * The plugin service singleton\r\n * @namespace Chart.plugins\r\n * @since 2.1.0\r\n */\r\nvar core_plugins = {\r\n\t/**\r\n\t * Globally registered plugins.\r\n\t * @private\r\n\t */\r\n\t_plugins: [],\r\n\r\n\t/**\r\n\t * This identifier is used to invalidate the descriptors cache attached to each chart\r\n\t * when a global plugin is registered or unregistered. In this case, the cache ID is\r\n\t * incremented and descriptors are regenerated during following API calls.\r\n\t * @private\r\n\t */\r\n\t_cacheId: 0,\r\n\r\n\t/**\r\n\t * Registers the given plugin(s) if not already registered.\r\n\t * @param {IPlugin[]|IPlugin} plugins plugin instance(s).\r\n\t */\r\n\tregister: function(plugins) {\r\n\t\tvar p = this._plugins;\r\n\t\t([]).concat(plugins).forEach(function(plugin) {\r\n\t\t\tif (p.indexOf(plugin) === -1) {\r\n\t\t\t\tp.push(plugin);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._cacheId++;\r\n\t},\r\n\r\n\t/**\r\n\t * Unregisters the given plugin(s) only if registered.\r\n\t * @param {IPlugin[]|IPlugin} plugins plugin instance(s).\r\n\t */\r\n\tunregister: function(plugins) {\r\n\t\tvar p = this._plugins;\r\n\t\t([]).concat(plugins).forEach(function(plugin) {\r\n\t\t\tvar idx = p.indexOf(plugin);\r\n\t\t\tif (idx !== -1) {\r\n\t\t\t\tp.splice(idx, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._cacheId++;\r\n\t},\r\n\r\n\t/**\r\n\t * Remove all registered plugins.\r\n\t * @since 2.1.5\r\n\t */\r\n\tclear: function() {\r\n\t\tthis._plugins = [];\r\n\t\tthis._cacheId++;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the number of registered plugins?\r\n\t * @returns {number}\r\n\t * @since 2.1.5\r\n\t */\r\n\tcount: function() {\r\n\t\treturn this._plugins.length;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns all registered plugin instances.\r\n\t * @returns {IPlugin[]} array of plugin objects.\r\n\t * @since 2.1.5\r\n\t */\r\n\tgetAll: function() {\r\n\t\treturn this._plugins;\r\n\t},\r\n\r\n\t/**\r\n\t * Calls enabled plugins for `chart` on the specified hook and with the given args.\r\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\r\n\t * returned value can be used, for instance, to interrupt the current action.\r\n\t * @param {Chart} chart - The chart instance for which plugins should be called.\r\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\r\n\t * @param {Array} [args] - Extra arguments to apply to the hook call.\r\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\r\n\t */\r\n\tnotify: function(chart, hook, args) {\r\n\t\tvar descriptors = this.descriptors(chart);\r\n\t\tvar ilen = descriptors.length;\r\n\t\tvar i, descriptor, plugin, params, method;\r\n\r\n\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\tdescriptor = descriptors[i];\r\n\t\t\tplugin = descriptor.plugin;\r\n\t\t\tmethod = plugin[hook];\r\n\t\t\tif (typeof method === 'function') {\r\n\t\t\t\tparams = [chart].concat(args || []);\r\n\t\t\t\tparams.push(descriptor.options);\r\n\t\t\t\tif (method.apply(plugin, params) === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns descriptors of enabled plugins for the given chart.\r\n\t * @returns {object[]} [{ plugin, options }]\r\n\t * @private\r\n\t */\r\n\tdescriptors: function(chart) {\r\n\t\tvar cache = chart.$plugins || (chart.$plugins = {});\r\n\t\tif (cache.id === this._cacheId) {\r\n\t\t\treturn cache.descriptors;\r\n\t\t}\r\n\r\n\t\tvar plugins = [];\r\n\t\tvar descriptors = [];\r\n\t\tvar config = (chart && chart.config) || {};\r\n\t\tvar options = (config.options && config.options.plugins) || {};\r\n\r\n\t\tthis._plugins.concat(config.plugins || []).forEach(function(plugin) {\r\n\t\t\tvar idx = plugins.indexOf(plugin);\r\n\t\t\tif (idx !== -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar id = plugin.id;\r\n\t\t\tvar opts = options[id];\r\n\t\t\tif (opts === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (opts === true) {\r\n\t\t\t\topts = helpers$1.clone(core_defaults.global.plugins[id]);\r\n\t\t\t}\r\n\r\n\t\t\tplugins.push(plugin);\r\n\t\t\tdescriptors.push({\r\n\t\t\t\tplugin: plugin,\r\n\t\t\t\toptions: opts || {}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tcache.descriptors = descriptors;\r\n\t\tcache.id = this._cacheId;\r\n\t\treturn descriptors;\r\n\t},\r\n\r\n\t/**\r\n\t * Invalidates cache for the given chart: descriptors hold a reference on plugin option,\r\n\t * but in some cases, this reference can be changed by the user when updating options.\r\n\t * https://github.com/chartjs/Chart.js/issues/5111#issuecomment-355934167\r\n\t * @private\r\n\t */\r\n\t_invalidate: function(chart) {\r\n\t\tdelete chart.$plugins;\r\n\t}\r\n};\n\nvar core_scaleService = {\r\n\t// Scale registration object. Extensions can register new scale types (such as log or DB scales) and then\r\n\t// use the new chart options to grab the correct scale\r\n\tconstructors: {},\r\n\t// Use a registration function so that we can move to an ES6 map when we no longer need to support\r\n\t// old browsers\r\n\r\n\t// Scale config defaults\r\n\tdefaults: {},\r\n\tregisterScaleType: function(type, scaleConstructor, scaleDefaults) {\r\n\t\tthis.constructors[type] = scaleConstructor;\r\n\t\tthis.defaults[type] = helpers$1.clone(scaleDefaults);\r\n\t},\r\n\tgetScaleConstructor: function(type) {\r\n\t\treturn this.constructors.hasOwnProperty(type) ? this.constructors[type] : undefined;\r\n\t},\r\n\tgetScaleDefaults: function(type) {\r\n\t\t// Return the scale defaults merged with the global settings so that we always use the latest ones\r\n\t\treturn this.defaults.hasOwnProperty(type) ? helpers$1.merge(Object.create(null), [core_defaults.scale, this.defaults[type]]) : {};\r\n\t},\r\n\tupdateScaleDefaults: function(type, additions) {\r\n\t\tvar me = this;\r\n\t\tif (me.defaults.hasOwnProperty(type)) {\r\n\t\t\tme.defaults[type] = helpers$1.extend(me.defaults[type], additions);\r\n\t\t}\r\n\t},\r\n\taddScalesToLayout: function(chart) {\r\n\t\t// Adds each scale to the chart.boxes array to be sized accordingly\r\n\t\thelpers$1.each(chart.scales, function(scale) {\r\n\t\t\t// Set ILayoutItem parameters for backwards compatibility\r\n\t\t\tscale.fullWidth = scale.options.fullWidth;\r\n\t\t\tscale.position = scale.options.position;\r\n\t\t\tscale.weight = scale.options.weight;\r\n\t\t\tcore_layouts.addBox(chart, scale);\r\n\t\t});\r\n\t}\r\n};\n\nvar valueOrDefault$8 = helpers$1.valueOrDefault;\r\nvar getRtlHelper = helpers$1.rtl.getRtlAdapter;\r\n\r\ncore_defaults._set('global', {\r\n\ttooltips: {\r\n\t\tenabled: true,\r\n\t\tcustom: null,\r\n\t\tmode: 'nearest',\r\n\t\tposition: 'average',\r\n\t\tintersect: true,\r\n\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\r\n\t\ttitleFontStyle: 'bold',\r\n\t\ttitleSpacing: 2,\r\n\t\ttitleMarginBottom: 6,\r\n\t\ttitleFontColor: '#fff',\r\n\t\ttitleAlign: 'left',\r\n\t\tbodySpacing: 2,\r\n\t\tbodyFontColor: '#fff',\r\n\t\tbodyAlign: 'left',\r\n\t\tfooterFontStyle: 'bold',\r\n\t\tfooterSpacing: 2,\r\n\t\tfooterMarginTop: 6,\r\n\t\tfooterFontColor: '#fff',\r\n\t\tfooterAlign: 'left',\r\n\t\tyPadding: 6,\r\n\t\txPadding: 6,\r\n\t\tcaretPadding: 2,\r\n\t\tcaretSize: 5,\r\n\t\tcornerRadius: 6,\r\n\t\tmultiKeyBackground: '#fff',\r\n\t\tdisplayColors: true,\r\n\t\tborderColor: 'rgba(0,0,0,0)',\r\n\t\tborderWidth: 0,\r\n\t\tcallbacks: {\r\n\t\t\t// Args are: (tooltipItems, data)\r\n\t\t\tbeforeTitle: helpers$1.noop,\r\n\t\t\ttitle: function(tooltipItems, data) {\r\n\t\t\t\tvar title = '';\r\n\t\t\t\tvar labels = data.labels;\r\n\t\t\t\tvar labelCount = labels ? labels.length : 0;\r\n\r\n\t\t\t\tif (tooltipItems.length > 0) {\r\n\t\t\t\t\tvar item = tooltipItems[0];\r\n\t\t\t\t\tif (item.label) {\r\n\t\t\t\t\t\ttitle = item.label;\r\n\t\t\t\t\t} else if (item.xLabel) {\r\n\t\t\t\t\t\ttitle = item.xLabel;\r\n\t\t\t\t\t} else if (labelCount > 0 && item.index < labelCount) {\r\n\t\t\t\t\t\ttitle = labels[item.index];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn title;\r\n\t\t\t},\r\n\t\t\tafterTitle: helpers$1.noop,\r\n\r\n\t\t\t// Args are: (tooltipItems, data)\r\n\t\t\tbeforeBody: helpers$1.noop,\r\n\r\n\t\t\t// Args are: (tooltipItem, data)\r\n\t\t\tbeforeLabel: helpers$1.noop,\r\n\t\t\tlabel: function(tooltipItem, data) {\r\n\t\t\t\tvar label = data.datasets[tooltipItem.datasetIndex].label || '';\r\n\r\n\t\t\t\tif (label) {\r\n\t\t\t\t\tlabel += ': ';\r\n\t\t\t\t}\r\n\t\t\t\tif (!helpers$1.isNullOrUndef(tooltipItem.value)) {\r\n\t\t\t\t\tlabel += tooltipItem.value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlabel += tooltipItem.yLabel;\r\n\t\t\t\t}\r\n\t\t\t\treturn label;\r\n\t\t\t},\r\n\t\t\tlabelColor: function(tooltipItem, chart) {\r\n\t\t\t\tvar meta = chart.getDatasetMeta(tooltipItem.datasetIndex);\r\n\t\t\t\tvar activeElement = meta.data[tooltipItem.index];\r\n\t\t\t\tvar view = activeElement._view;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tborderColor: view.borderColor,\r\n\t\t\t\t\tbackgroundColor: view.backgroundColor\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tlabelTextColor: function() {\r\n\t\t\t\treturn this._options.bodyFontColor;\r\n\t\t\t},\r\n\t\t\tafterLabel: helpers$1.noop,\r\n\r\n\t\t\t// Args are: (tooltipItems, data)\r\n\t\t\tafterBody: helpers$1.noop,\r\n\r\n\t\t\t// Args are: (tooltipItems, data)\r\n\t\t\tbeforeFooter: helpers$1.noop,\r\n\t\t\tfooter: helpers$1.noop,\r\n\t\t\tafterFooter: helpers$1.noop\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar positioners = {\r\n\t/**\r\n\t * Average mode places the tooltip at the average position of the elements shown\r\n\t * @function Chart.Tooltip.positioners.average\r\n\t * @param elements {ChartElement[]} the elements being displayed in the tooltip\r\n\t * @returns {object} tooltip position\r\n\t */\r\n\taverage: function(elements) {\r\n\t\tif (!elements.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar i, len;\r\n\t\tvar x = 0;\r\n\t\tvar y = 0;\r\n\t\tvar count = 0;\r\n\r\n\t\tfor (i = 0, len = elements.length; i < len; ++i) {\r\n\t\t\tvar el = elements[i];\r\n\t\t\tif (el && el.hasValue()) {\r\n\t\t\t\tvar pos = el.tooltipPosition();\r\n\t\t\t\tx += pos.x;\r\n\t\t\t\ty += pos.y;\r\n\t\t\t\t++count;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: x / count,\r\n\t\t\ty: y / count\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Gets the tooltip position nearest of the item nearest to the event position\r\n\t * @function Chart.Tooltip.positioners.nearest\r\n\t * @param elements {Chart.Element[]} the tooltip elements\r\n\t * @param eventPosition {object} the position of the event in canvas coordinates\r\n\t * @returns {object} the tooltip position\r\n\t */\r\n\tnearest: function(elements, eventPosition) {\r\n\t\tvar x = eventPosition.x;\r\n\t\tvar y = eventPosition.y;\r\n\t\tvar minDistance = Number.POSITIVE_INFINITY;\r\n\t\tvar i, len, nearestElement;\r\n\r\n\t\tfor (i = 0, len = elements.length; i < len; ++i) {\r\n\t\t\tvar el = elements[i];\r\n\t\t\tif (el && el.hasValue()) {\r\n\t\t\t\tvar center = el.getCenterPoint();\r\n\t\t\t\tvar d = helpers$1.distanceBetweenPoints(eventPosition, center);\r\n\r\n\t\t\t\tif (d < minDistance) {\r\n\t\t\t\t\tminDistance = d;\r\n\t\t\t\t\tnearestElement = el;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (nearestElement) {\r\n\t\t\tvar tp = nearestElement.tooltipPosition();\r\n\t\t\tx = tp.x;\r\n\t\t\ty = tp.y;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\t}\r\n};\r\n\r\n// Helper to push or concat based on if the 2nd parameter is an array or not\r\nfunction pushOrConcat(base, toPush) {\r\n\tif (toPush) {\r\n\t\tif (helpers$1.isArray(toPush)) {\r\n\t\t\t// base = base.concat(toPush);\r\n\t\t\tArray.prototype.push.apply(base, toPush);\r\n\t\t} else {\r\n\t\t\tbase.push(toPush);\r\n\t\t}\r\n\t}\r\n\r\n\treturn base;\r\n}\r\n\r\n/**\r\n * Returns array of strings split by newline\r\n * @param {string} value - The value to split by newline.\r\n * @returns {string[]} value if newline present - Returned from String split() method\r\n * @function\r\n */\r\nfunction splitNewlines(str) {\r\n\tif ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\r\n\t\treturn str.split('\\n');\r\n\t}\r\n\treturn str;\r\n}\r\n\r\n\r\n/**\r\n * Private helper to create a tooltip item model\r\n * @param element - the chart element (point, arc, bar) to create the tooltip item for\r\n * @return new tooltip item\r\n */\r\nfunction createTooltipItem(element) {\r\n\tvar xScale = element._xScale;\r\n\tvar yScale = element._yScale || element._scale; // handle radar || polarArea charts\r\n\tvar index = element._index;\r\n\tvar datasetIndex = element._datasetIndex;\r\n\tvar controller = element._chart.getDatasetMeta(datasetIndex).controller;\r\n\tvar indexScale = controller._getIndexScale();\r\n\tvar valueScale = controller._getValueScale();\r\n\r\n\treturn {\r\n\t\txLabel: xScale ? xScale.getLabelForIndex(index, datasetIndex) : '',\r\n\t\tyLabel: yScale ? yScale.getLabelForIndex(index, datasetIndex) : '',\r\n\t\tlabel: indexScale ? '' + indexScale.getLabelForIndex(index, datasetIndex) : '',\r\n\t\tvalue: valueScale ? '' + valueScale.getLabelForIndex(index, datasetIndex) : '',\r\n\t\tindex: index,\r\n\t\tdatasetIndex: datasetIndex,\r\n\t\tx: element._model.x,\r\n\t\ty: element._model.y\r\n\t};\r\n}\r\n\r\n/**\r\n * Helper to get the reset model for the tooltip\r\n * @param tooltipOpts {object} the tooltip options\r\n */\r\nfunction getBaseModel(tooltipOpts) {\r\n\tvar globalDefaults = core_defaults.global;\r\n\r\n\treturn {\r\n\t\t// Positioning\r\n\t\txPadding: tooltipOpts.xPadding,\r\n\t\tyPadding: tooltipOpts.yPadding,\r\n\t\txAlign: tooltipOpts.xAlign,\r\n\t\tyAlign: tooltipOpts.yAlign,\r\n\r\n\t\t// Drawing direction and text direction\r\n\t\trtl: tooltipOpts.rtl,\r\n\t\ttextDirection: tooltipOpts.textDirection,\r\n\r\n\t\t// Body\r\n\t\tbodyFontColor: tooltipOpts.bodyFontColor,\r\n\t\t_bodyFontFamily: valueOrDefault$8(tooltipOpts.bodyFontFamily, globalDefaults.defaultFontFamily),\r\n\t\t_bodyFontStyle: valueOrDefault$8(tooltipOpts.bodyFontStyle, globalDefaults.defaultFontStyle),\r\n\t\t_bodyAlign: tooltipOpts.bodyAlign,\r\n\t\tbodyFontSize: valueOrDefault$8(tooltipOpts.bodyFontSize, globalDefaults.defaultFontSize),\r\n\t\tbodySpacing: tooltipOpts.bodySpacing,\r\n\r\n\t\t// Title\r\n\t\ttitleFontColor: tooltipOpts.titleFontColor,\r\n\t\t_titleFontFamily: valueOrDefault$8(tooltipOpts.titleFontFamily, globalDefaults.defaultFontFamily),\r\n\t\t_titleFontStyle: valueOrDefault$8(tooltipOpts.titleFontStyle, globalDefaults.defaultFontStyle),\r\n\t\ttitleFontSize: valueOrDefault$8(tooltipOpts.titleFontSize, globalDefaults.defaultFontSize),\r\n\t\t_titleAlign: tooltipOpts.titleAlign,\r\n\t\ttitleSpacing: tooltipOpts.titleSpacing,\r\n\t\ttitleMarginBottom: tooltipOpts.titleMarginBottom,\r\n\r\n\t\t// Footer\r\n\t\tfooterFontColor: tooltipOpts.footerFontColor,\r\n\t\t_footerFontFamily: valueOrDefault$8(tooltipOpts.footerFontFamily, globalDefaults.defaultFontFamily),\r\n\t\t_footerFontStyle: valueOrDefault$8(tooltipOpts.footerFontStyle, globalDefaults.defaultFontStyle),\r\n\t\tfooterFontSize: valueOrDefault$8(tooltipOpts.footerFontSize, globalDefaults.defaultFontSize),\r\n\t\t_footerAlign: tooltipOpts.footerAlign,\r\n\t\tfooterSpacing: tooltipOpts.footerSpacing,\r\n\t\tfooterMarginTop: tooltipOpts.footerMarginTop,\r\n\r\n\t\t// Appearance\r\n\t\tcaretSize: tooltipOpts.caretSize,\r\n\t\tcornerRadius: tooltipOpts.cornerRadius,\r\n\t\tbackgroundColor: tooltipOpts.backgroundColor,\r\n\t\topacity: 0,\r\n\t\tlegendColorBackground: tooltipOpts.multiKeyBackground,\r\n\t\tdisplayColors: tooltipOpts.displayColors,\r\n\t\tborderColor: tooltipOpts.borderColor,\r\n\t\tborderWidth: tooltipOpts.borderWidth\r\n\t};\r\n}\r\n\r\n/**\r\n * Get the size of the tooltip\r\n */\r\nfunction getTooltipSize(tooltip, model) {\r\n\tvar ctx = tooltip._chart.ctx;\r\n\r\n\tvar height = model.yPadding * 2; // Tooltip Padding\r\n\tvar width = 0;\r\n\r\n\t// Count of all lines in the body\r\n\tvar body = model.body;\r\n\tvar combinedBodyLength = body.reduce(function(count, bodyItem) {\r\n\t\treturn count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length;\r\n\t}, 0);\r\n\tcombinedBodyLength += model.beforeBody.length + model.afterBody.length;\r\n\r\n\tvar titleLineCount = model.title.length;\r\n\tvar footerLineCount = model.footer.length;\r\n\tvar titleFontSize = model.titleFontSize;\r\n\tvar bodyFontSize = model.bodyFontSize;\r\n\tvar footerFontSize = model.footerFontSize;\r\n\r\n\theight += titleLineCount * titleFontSize; // Title Lines\r\n\theight += titleLineCount ? (titleLineCount - 1) * model.titleSpacing : 0; // Title Line Spacing\r\n\theight += titleLineCount ? model.titleMarginBottom : 0; // Title's bottom Margin\r\n\theight += combinedBodyLength * bodyFontSize; // Body Lines\r\n\theight += combinedBodyLength ? (combinedBodyLength - 1) * model.bodySpacing : 0; // Body Line Spacing\r\n\theight += footerLineCount ? model.footerMarginTop : 0; // Footer Margin\r\n\theight += footerLineCount * (footerFontSize); // Footer Lines\r\n\theight += footerLineCount ? (footerLineCount - 1) * model.footerSpacing : 0; // Footer Line Spacing\r\n\r\n\t// Title width\r\n\tvar widthPadding = 0;\r\n\tvar maxLineWidth = function(line) {\r\n\t\twidth = Math.max(width, ctx.measureText(line).width + widthPadding);\r\n\t};\r\n\r\n\tctx.font = helpers$1.fontString(titleFontSize, model._titleFontStyle, model._titleFontFamily);\r\n\thelpers$1.each(model.title, maxLineWidth);\r\n\r\n\t// Body width\r\n\tctx.font = helpers$1.fontString(bodyFontSize, model._bodyFontStyle, model._bodyFontFamily);\r\n\thelpers$1.each(model.beforeBody.concat(model.afterBody), maxLineWidth);\r\n\r\n\t// Body lines may include some extra width due to the color box\r\n\twidthPadding = model.displayColors ? (bodyFontSize + 2) : 0;\r\n\thelpers$1.each(body, function(bodyItem) {\r\n\t\thelpers$1.each(bodyItem.before, maxLineWidth);\r\n\t\thelpers$1.each(bodyItem.lines, maxLineWidth);\r\n\t\thelpers$1.each(bodyItem.after, maxLineWidth);\r\n\t});\r\n\r\n\t// Reset back to 0\r\n\twidthPadding = 0;\r\n\r\n\t// Footer width\r\n\tctx.font = helpers$1.fontString(footerFontSize, model._footerFontStyle, model._footerFontFamily);\r\n\thelpers$1.each(model.footer, maxLineWidth);\r\n\r\n\t// Add padding\r\n\twidth += 2 * model.xPadding;\r\n\r\n\treturn {\r\n\t\twidth: width,\r\n\t\theight: height\r\n\t};\r\n}\r\n\r\n/**\r\n * Helper to get the alignment of a tooltip given the size\r\n */\r\nfunction determineAlignment(tooltip, size) {\r\n\tvar model = tooltip._model;\r\n\tvar chart = tooltip._chart;\r\n\tvar chartArea = tooltip._chart.chartArea;\r\n\tvar xAlign = 'center';\r\n\tvar yAlign = 'center';\r\n\r\n\tif (model.y < size.height) {\r\n\t\tyAlign = 'top';\r\n\t} else if (model.y > (chart.height - size.height)) {\r\n\t\tyAlign = 'bottom';\r\n\t}\r\n\r\n\tvar lf, rf; // functions to determine left, right alignment\r\n\tvar olf, orf; // functions to determine if left/right alignment causes tooltip to go outside chart\r\n\tvar yf; // function to get the y alignment if the tooltip goes outside of the left or right edges\r\n\tvar midX = (chartArea.left + chartArea.right) / 2;\r\n\tvar midY = (chartArea.top + chartArea.bottom) / 2;\r\n\r\n\tif (yAlign === 'center') {\r\n\t\tlf = function(x) {\r\n\t\t\treturn x <= midX;\r\n\t\t};\r\n\t\trf = function(x) {\r\n\t\t\treturn x > midX;\r\n\t\t};\r\n\t} else {\r\n\t\tlf = function(x) {\r\n\t\t\treturn x <= (size.width / 2);\r\n\t\t};\r\n\t\trf = function(x) {\r\n\t\t\treturn x >= (chart.width - (size.width / 2));\r\n\t\t};\r\n\t}\r\n\r\n\tolf = function(x) {\r\n\t\treturn x + size.width + model.caretSize + model.caretPadding > chart.width;\r\n\t};\r\n\torf = function(x) {\r\n\t\treturn x - size.width - model.caretSize - model.caretPadding < 0;\r\n\t};\r\n\tyf = function(y) {\r\n\t\treturn y <= midY ? 'top' : 'bottom';\r\n\t};\r\n\r\n\tif (lf(model.x)) {\r\n\t\txAlign = 'left';\r\n\r\n\t\t// Is tooltip too wide and goes over the right side of the chart.?\r\n\t\tif (olf(model.x)) {\r\n\t\t\txAlign = 'center';\r\n\t\t\tyAlign = yf(model.y);\r\n\t\t}\r\n\t} else if (rf(model.x)) {\r\n\t\txAlign = 'right';\r\n\r\n\t\t// Is tooltip too wide and goes outside left edge of canvas?\r\n\t\tif (orf(model.x)) {\r\n\t\t\txAlign = 'center';\r\n\t\t\tyAlign = yf(model.y);\r\n\t\t}\r\n\t}\r\n\r\n\tvar opts = tooltip._options;\r\n\treturn {\r\n\t\txAlign: opts.xAlign ? opts.xAlign : xAlign,\r\n\t\tyAlign: opts.yAlign ? opts.yAlign : yAlign\r\n\t};\r\n}\r\n\r\n/**\r\n * Helper to get the location a tooltip needs to be placed at given the initial position (via the vm) and the size and alignment\r\n */\r\nfunction getBackgroundPoint(vm, size, alignment, chart) {\r\n\t// Background Position\r\n\tvar x = vm.x;\r\n\tvar y = vm.y;\r\n\r\n\tvar caretSize = vm.caretSize;\r\n\tvar caretPadding = vm.caretPadding;\r\n\tvar cornerRadius = vm.cornerRadius;\r\n\tvar xAlign = alignment.xAlign;\r\n\tvar yAlign = alignment.yAlign;\r\n\tvar paddingAndSize = caretSize + caretPadding;\r\n\tvar radiusAndPadding = cornerRadius + caretPadding;\r\n\r\n\tif (xAlign === 'right') {\r\n\t\tx -= size.width;\r\n\t} else if (xAlign === 'center') {\r\n\t\tx -= (size.width / 2);\r\n\t\tif (x + size.width > chart.width) {\r\n\t\t\tx = chart.width - size.width;\r\n\t\t}\r\n\t\tif (x < 0) {\r\n\t\t\tx = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tif (yAlign === 'top') {\r\n\t\ty += paddingAndSize;\r\n\t} else if (yAlign === 'bottom') {\r\n\t\ty -= size.height + paddingAndSize;\r\n\t} else {\r\n\t\ty -= (size.height / 2);\r\n\t}\r\n\r\n\tif (yAlign === 'center') {\r\n\t\tif (xAlign === 'left') {\r\n\t\t\tx += paddingAndSize;\r\n\t\t} else if (xAlign === 'right') {\r\n\t\t\tx -= paddingAndSize;\r\n\t\t}\r\n\t} else if (xAlign === 'left') {\r\n\t\tx -= radiusAndPadding;\r\n\t} else if (xAlign === 'right') {\r\n\t\tx += radiusAndPadding;\r\n\t}\r\n\r\n\treturn {\r\n\t\tx: x,\r\n\t\ty: y\r\n\t};\r\n}\r\n\r\nfunction getAlignedX(vm, align) {\r\n\treturn align === 'center'\r\n\t\t? vm.x + vm.width / 2\r\n\t\t: align === 'right'\r\n\t\t\t? vm.x + vm.width - vm.xPadding\r\n\t\t\t: vm.x + vm.xPadding;\r\n}\r\n\r\n/**\r\n * Helper to build before and after body lines\r\n */\r\nfunction getBeforeAfterBodyLines(callback) {\r\n\treturn pushOrConcat([], splitNewlines(callback));\r\n}\r\n\r\nvar exports$4 = core_element.extend({\r\n\tinitialize: function() {\r\n\t\tthis._model = getBaseModel(this._options);\r\n\t\tthis._lastActive = [];\r\n\t},\r\n\r\n\t// Get the title\r\n\t// Args are: (tooltipItem, data)\r\n\tgetTitle: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me._options;\r\n\t\tvar callbacks = opts.callbacks;\r\n\r\n\t\tvar beforeTitle = callbacks.beforeTitle.apply(me, arguments);\r\n\t\tvar title = callbacks.title.apply(me, arguments);\r\n\t\tvar afterTitle = callbacks.afterTitle.apply(me, arguments);\r\n\r\n\t\tvar lines = [];\r\n\t\tlines = pushOrConcat(lines, splitNewlines(beforeTitle));\r\n\t\tlines = pushOrConcat(lines, splitNewlines(title));\r\n\t\tlines = pushOrConcat(lines, splitNewlines(afterTitle));\r\n\r\n\t\treturn lines;\r\n\t},\r\n\r\n\t// Args are: (tooltipItem, data)\r\n\tgetBeforeBody: function() {\r\n\t\treturn getBeforeAfterBodyLines(this._options.callbacks.beforeBody.apply(this, arguments));\r\n\t},\r\n\r\n\t// Args are: (tooltipItem, data)\r\n\tgetBody: function(tooltipItems, data) {\r\n\t\tvar me = this;\r\n\t\tvar callbacks = me._options.callbacks;\r\n\t\tvar bodyItems = [];\r\n\r\n\t\thelpers$1.each(tooltipItems, function(tooltipItem) {\r\n\t\t\tvar bodyItem = {\r\n\t\t\t\tbefore: [],\r\n\t\t\t\tlines: [],\r\n\t\t\t\tafter: []\r\n\t\t\t};\r\n\t\t\tpushOrConcat(bodyItem.before, splitNewlines(callbacks.beforeLabel.call(me, tooltipItem, data)));\r\n\t\t\tpushOrConcat(bodyItem.lines, callbacks.label.call(me, tooltipItem, data));\r\n\t\t\tpushOrConcat(bodyItem.after, splitNewlines(callbacks.afterLabel.call(me, tooltipItem, data)));\r\n\r\n\t\t\tbodyItems.push(bodyItem);\r\n\t\t});\r\n\r\n\t\treturn bodyItems;\r\n\t},\r\n\r\n\t// Args are: (tooltipItem, data)\r\n\tgetAfterBody: function() {\r\n\t\treturn getBeforeAfterBodyLines(this._options.callbacks.afterBody.apply(this, arguments));\r\n\t},\r\n\r\n\t// Get the footer and beforeFooter and afterFooter lines\r\n\t// Args are: (tooltipItem, data)\r\n\tgetFooter: function() {\r\n\t\tvar me = this;\r\n\t\tvar callbacks = me._options.callbacks;\r\n\r\n\t\tvar beforeFooter = callbacks.beforeFooter.apply(me, arguments);\r\n\t\tvar footer = callbacks.footer.apply(me, arguments);\r\n\t\tvar afterFooter = callbacks.afterFooter.apply(me, arguments);\r\n\r\n\t\tvar lines = [];\r\n\t\tlines = pushOrConcat(lines, splitNewlines(beforeFooter));\r\n\t\tlines = pushOrConcat(lines, splitNewlines(footer));\r\n\t\tlines = pushOrConcat(lines, splitNewlines(afterFooter));\r\n\r\n\t\treturn lines;\r\n\t},\r\n\r\n\tupdate: function(changed) {\r\n\t\tvar me = this;\r\n\t\tvar opts = me._options;\r\n\r\n\t\t// Need to regenerate the model because its faster than using extend and it is necessary due to the optimization in Chart.Element.transition\r\n\t\t// that does _view = _model if ease === 1. This causes the 2nd tooltip update to set properties in both the view and model at the same time\r\n\t\t// which breaks any animations.\r\n\t\tvar existingModel = me._model;\r\n\t\tvar model = me._model = getBaseModel(opts);\r\n\t\tvar active = me._active;\r\n\r\n\t\tvar data = me._data;\r\n\r\n\t\t// In the case where active.length === 0 we need to keep these at existing values for good animations\r\n\t\tvar alignment = {\r\n\t\t\txAlign: existingModel.xAlign,\r\n\t\t\tyAlign: existingModel.yAlign\r\n\t\t};\r\n\t\tvar backgroundPoint = {\r\n\t\t\tx: existingModel.x,\r\n\t\t\ty: existingModel.y\r\n\t\t};\r\n\t\tvar tooltipSize = {\r\n\t\t\twidth: existingModel.width,\r\n\t\t\theight: existingModel.height\r\n\t\t};\r\n\t\tvar tooltipPosition = {\r\n\t\t\tx: existingModel.caretX,\r\n\t\t\ty: existingModel.caretY\r\n\t\t};\r\n\r\n\t\tvar i, len;\r\n\r\n\t\tif (active.length) {\r\n\t\t\tmodel.opacity = 1;\r\n\r\n\t\t\tvar labelColors = [];\r\n\t\t\tvar labelTextColors = [];\r\n\t\t\ttooltipPosition = positioners[opts.position].call(me, active, me._eventPosition);\r\n\r\n\t\t\tvar tooltipItems = [];\r\n\t\t\tfor (i = 0, len = active.length; i < len; ++i) {\r\n\t\t\t\ttooltipItems.push(createTooltipItem(active[i]));\r\n\t\t\t}\r\n\r\n\t\t\t// If the user provided a filter function, use it to modify the tooltip items\r\n\t\t\tif (opts.filter) {\r\n\t\t\t\ttooltipItems = tooltipItems.filter(function(a) {\r\n\t\t\t\t\treturn opts.filter(a, data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// If the user provided a sorting function, use it to modify the tooltip items\r\n\t\t\tif (opts.itemSort) {\r\n\t\t\t\ttooltipItems = tooltipItems.sort(function(a, b) {\r\n\t\t\t\t\treturn opts.itemSort(a, b, data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Determine colors for boxes\r\n\t\t\thelpers$1.each(tooltipItems, function(tooltipItem) {\r\n\t\t\t\tlabelColors.push(opts.callbacks.labelColor.call(me, tooltipItem, me._chart));\r\n\t\t\t\tlabelTextColors.push(opts.callbacks.labelTextColor.call(me, tooltipItem, me._chart));\r\n\t\t\t});\r\n\r\n\r\n\t\t\t// Build the Text Lines\r\n\t\t\tmodel.title = me.getTitle(tooltipItems, data);\r\n\t\t\tmodel.beforeBody = me.getBeforeBody(tooltipItems, data);\r\n\t\t\tmodel.body = me.getBody(tooltipItems, data);\r\n\t\t\tmodel.afterBody = me.getAfterBody(tooltipItems, data);\r\n\t\t\tmodel.footer = me.getFooter(tooltipItems, data);\r\n\r\n\t\t\t// Initial positioning and colors\r\n\t\t\tmodel.x = tooltipPosition.x;\r\n\t\t\tmodel.y = tooltipPosition.y;\r\n\t\t\tmodel.caretPadding = opts.caretPadding;\r\n\t\t\tmodel.labelColors = labelColors;\r\n\t\t\tmodel.labelTextColors = labelTextColors;\r\n\r\n\t\t\t// data points\r\n\t\t\tmodel.dataPoints = tooltipItems;\r\n\r\n\t\t\t// We need to determine alignment of the tooltip\r\n\t\t\ttooltipSize = getTooltipSize(this, model);\r\n\t\t\talignment = determineAlignment(this, tooltipSize);\r\n\t\t\t// Final Size and Position\r\n\t\t\tbackgroundPoint = getBackgroundPoint(model, tooltipSize, alignment, me._chart);\r\n\t\t} else {\r\n\t\t\tmodel.opacity = 0;\r\n\t\t}\r\n\r\n\t\tmodel.xAlign = alignment.xAlign;\r\n\t\tmodel.yAlign = alignment.yAlign;\r\n\t\tmodel.x = backgroundPoint.x;\r\n\t\tmodel.y = backgroundPoint.y;\r\n\t\tmodel.width = tooltipSize.width;\r\n\t\tmodel.height = tooltipSize.height;\r\n\r\n\t\t// Point where the caret on the tooltip points to\r\n\t\tmodel.caretX = tooltipPosition.x;\r\n\t\tmodel.caretY = tooltipPosition.y;\r\n\r\n\t\tme._model = model;\r\n\r\n\t\tif (changed && opts.custom) {\r\n\t\t\topts.custom.call(me, model);\r\n\t\t}\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\tdrawCaret: function(tooltipPoint, size) {\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar vm = this._view;\r\n\t\tvar caretPosition = this.getCaretPosition(tooltipPoint, size, vm);\r\n\r\n\t\tctx.lineTo(caretPosition.x1, caretPosition.y1);\r\n\t\tctx.lineTo(caretPosition.x2, caretPosition.y2);\r\n\t\tctx.lineTo(caretPosition.x3, caretPosition.y3);\r\n\t},\r\n\tgetCaretPosition: function(tooltipPoint, size, vm) {\r\n\t\tvar x1, x2, x3, y1, y2, y3;\r\n\t\tvar caretSize = vm.caretSize;\r\n\t\tvar cornerRadius = vm.cornerRadius;\r\n\t\tvar xAlign = vm.xAlign;\r\n\t\tvar yAlign = vm.yAlign;\r\n\t\tvar ptX = tooltipPoint.x;\r\n\t\tvar ptY = tooltipPoint.y;\r\n\t\tvar width = size.width;\r\n\t\tvar height = size.height;\r\n\r\n\t\tif (yAlign === 'center') {\r\n\t\t\ty2 = ptY + (height / 2);\r\n\r\n\t\t\tif (xAlign === 'left') {\r\n\t\t\t\tx1 = ptX;\r\n\t\t\t\tx2 = x1 - caretSize;\r\n\t\t\t\tx3 = x1;\r\n\r\n\t\t\t\ty1 = y2 + caretSize;\r\n\t\t\t\ty3 = y2 - caretSize;\r\n\t\t\t} else {\r\n\t\t\t\tx1 = ptX + width;\r\n\t\t\t\tx2 = x1 + caretSize;\r\n\t\t\t\tx3 = x1;\r\n\r\n\t\t\t\ty1 = y2 - caretSize;\r\n\t\t\t\ty3 = y2 + caretSize;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (xAlign === 'left') {\r\n\t\t\t\tx2 = ptX + cornerRadius + (caretSize);\r\n\t\t\t\tx1 = x2 - caretSize;\r\n\t\t\t\tx3 = x2 + caretSize;\r\n\t\t\t} else if (xAlign === 'right') {\r\n\t\t\t\tx2 = ptX + width - cornerRadius - caretSize;\r\n\t\t\t\tx1 = x2 - caretSize;\r\n\t\t\t\tx3 = x2 + caretSize;\r\n\t\t\t} else {\r\n\t\t\t\tx2 = vm.caretX;\r\n\t\t\t\tx1 = x2 - caretSize;\r\n\t\t\t\tx3 = x2 + caretSize;\r\n\t\t\t}\r\n\t\t\tif (yAlign === 'top') {\r\n\t\t\t\ty1 = ptY;\r\n\t\t\t\ty2 = y1 - caretSize;\r\n\t\t\t\ty3 = y1;\r\n\t\t\t} else {\r\n\t\t\t\ty1 = ptY + height;\r\n\t\t\t\ty2 = y1 + caretSize;\r\n\t\t\t\ty3 = y1;\r\n\t\t\t\t// invert drawing order\r\n\t\t\t\tvar tmp = x3;\r\n\t\t\t\tx3 = x1;\r\n\t\t\t\tx1 = tmp;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {x1: x1, x2: x2, x3: x3, y1: y1, y2: y2, y3: y3};\r\n\t},\r\n\r\n\tdrawTitle: function(pt, vm, ctx) {\r\n\t\tvar title = vm.title;\r\n\t\tvar length = title.length;\r\n\t\tvar titleFontSize, titleSpacing, i;\r\n\r\n\t\tif (length) {\r\n\t\t\tvar rtlHelper = getRtlHelper(vm.rtl, vm.x, vm.width);\r\n\r\n\t\t\tpt.x = getAlignedX(vm, vm._titleAlign);\r\n\r\n\t\t\tctx.textAlign = rtlHelper.textAlign(vm._titleAlign);\r\n\t\t\tctx.textBaseline = 'middle';\r\n\r\n\t\t\ttitleFontSize = vm.titleFontSize;\r\n\t\t\ttitleSpacing = vm.titleSpacing;\r\n\r\n\t\t\tctx.fillStyle = vm.titleFontColor;\r\n\t\t\tctx.font = helpers$1.fontString(titleFontSize, vm._titleFontStyle, vm._titleFontFamily);\r\n\r\n\t\t\tfor (i = 0; i < length; ++i) {\r\n\t\t\t\tctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFontSize / 2);\r\n\t\t\t\tpt.y += titleFontSize + titleSpacing; // Line Height and spacing\r\n\r\n\t\t\t\tif (i + 1 === length) {\r\n\t\t\t\t\tpt.y += vm.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdrawBody: function(pt, vm, ctx) {\r\n\t\tvar bodyFontSize = vm.bodyFontSize;\r\n\t\tvar bodySpacing = vm.bodySpacing;\r\n\t\tvar bodyAlign = vm._bodyAlign;\r\n\t\tvar body = vm.body;\r\n\t\tvar drawColorBoxes = vm.displayColors;\r\n\t\tvar xLinePadding = 0;\r\n\t\tvar colorX = drawColorBoxes ? getAlignedX(vm, 'left') : 0;\r\n\r\n\t\tvar rtlHelper = getRtlHelper(vm.rtl, vm.x, vm.width);\r\n\r\n\t\tvar fillLineOfText = function(line) {\r\n\t\t\tctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyFontSize / 2);\r\n\t\t\tpt.y += bodyFontSize + bodySpacing;\r\n\t\t};\r\n\r\n\t\tvar bodyItem, textColor, labelColors, lines, i, j, ilen, jlen;\r\n\t\tvar bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\r\n\r\n\t\tctx.textAlign = bodyAlign;\r\n\t\tctx.textBaseline = 'middle';\r\n\t\tctx.font = helpers$1.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\r\n\r\n\t\tpt.x = getAlignedX(vm, bodyAlignForCalculation);\r\n\r\n\t\t// Before body lines\r\n\t\tctx.fillStyle = vm.bodyFontColor;\r\n\t\thelpers$1.each(vm.beforeBody, fillLineOfText);\r\n\r\n\t\txLinePadding = drawColorBoxes && bodyAlignForCalculation !== 'right'\r\n\t\t\t? bodyAlign === 'center' ? (bodyFontSize / 2 + 1) : (bodyFontSize + 2)\r\n\t\t\t: 0;\r\n\r\n\t\t// Draw body lines now\r\n\t\tfor (i = 0, ilen = body.length; i < ilen; ++i) {\r\n\t\t\tbodyItem = body[i];\r\n\t\t\ttextColor = vm.labelTextColors[i];\r\n\t\t\tlabelColors = vm.labelColors[i];\r\n\r\n\t\t\tctx.fillStyle = textColor;\r\n\t\t\thelpers$1.each(bodyItem.before, fillLineOfText);\r\n\r\n\t\t\tlines = bodyItem.lines;\r\n\t\t\tfor (j = 0, jlen = lines.length; j < jlen; ++j) {\r\n\t\t\t\t// Draw Legend-like boxes if needed\r\n\t\t\t\tif (drawColorBoxes) {\r\n\t\t\t\t\tvar rtlColorX = rtlHelper.x(colorX);\r\n\r\n\t\t\t\t\t// Fill a white rect so that colours merge nicely if the opacity is < 1\r\n\t\t\t\t\tctx.fillStyle = vm.legendColorBackground;\r\n\t\t\t\t\tctx.fillRect(rtlHelper.leftForLtr(rtlColorX, bodyFontSize), pt.y, bodyFontSize, bodyFontSize);\r\n\r\n\t\t\t\t\t// Border\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tctx.strokeStyle = labelColors.borderColor;\r\n\t\t\t\t\tctx.strokeRect(rtlHelper.leftForLtr(rtlColorX, bodyFontSize), pt.y, bodyFontSize, bodyFontSize);\r\n\r\n\t\t\t\t\t// Inner square\r\n\t\t\t\t\tctx.fillStyle = labelColors.backgroundColor;\r\n\t\t\t\t\tctx.fillRect(rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), bodyFontSize - 2), pt.y + 1, bodyFontSize - 2, bodyFontSize - 2);\r\n\t\t\t\t\tctx.fillStyle = textColor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfillLineOfText(lines[j]);\r\n\t\t\t}\r\n\r\n\t\t\thelpers$1.each(bodyItem.after, fillLineOfText);\r\n\t\t}\r\n\r\n\t\t// Reset back to 0 for after body\r\n\t\txLinePadding = 0;\r\n\r\n\t\t// After body lines\r\n\t\thelpers$1.each(vm.afterBody, fillLineOfText);\r\n\t\tpt.y -= bodySpacing; // Remove last body spacing\r\n\t},\r\n\r\n\tdrawFooter: function(pt, vm, ctx) {\r\n\t\tvar footer = vm.footer;\r\n\t\tvar length = footer.length;\r\n\t\tvar footerFontSize, i;\r\n\r\n\t\tif (length) {\r\n\t\t\tvar rtlHelper = getRtlHelper(vm.rtl, vm.x, vm.width);\r\n\r\n\t\t\tpt.x = getAlignedX(vm, vm._footerAlign);\r\n\t\t\tpt.y += vm.footerMarginTop;\r\n\r\n\t\t\tctx.textAlign = rtlHelper.textAlign(vm._footerAlign);\r\n\t\t\tctx.textBaseline = 'middle';\r\n\r\n\t\t\tfooterFontSize = vm.footerFontSize;\r\n\r\n\t\t\tctx.fillStyle = vm.footerFontColor;\r\n\t\t\tctx.font = helpers$1.fontString(footerFontSize, vm._footerFontStyle, vm._footerFontFamily);\r\n\r\n\t\t\tfor (i = 0; i < length; ++i) {\r\n\t\t\t\tctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFontSize / 2);\r\n\t\t\t\tpt.y += footerFontSize + vm.footerSpacing;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdrawBackground: function(pt, vm, ctx, tooltipSize) {\r\n\t\tctx.fillStyle = vm.backgroundColor;\r\n\t\tctx.strokeStyle = vm.borderColor;\r\n\t\tctx.lineWidth = vm.borderWidth;\r\n\t\tvar xAlign = vm.xAlign;\r\n\t\tvar yAlign = vm.yAlign;\r\n\t\tvar x = pt.x;\r\n\t\tvar y = pt.y;\r\n\t\tvar width = tooltipSize.width;\r\n\t\tvar height = tooltipSize.height;\r\n\t\tvar radius = vm.cornerRadius;\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x + radius, y);\r\n\t\tif (yAlign === 'top') {\r\n\t\t\tthis.drawCaret(pt, tooltipSize);\r\n\t\t}\r\n\t\tctx.lineTo(x + width - radius, y);\r\n\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n\t\tif (yAlign === 'center' && xAlign === 'right') {\r\n\t\t\tthis.drawCaret(pt, tooltipSize);\r\n\t\t}\r\n\t\tctx.lineTo(x + width, y + height - radius);\r\n\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n\t\tif (yAlign === 'bottom') {\r\n\t\t\tthis.drawCaret(pt, tooltipSize);\r\n\t\t}\r\n\t\tctx.lineTo(x + radius, y + height);\r\n\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n\t\tif (yAlign === 'center' && xAlign === 'left') {\r\n\t\t\tthis.drawCaret(pt, tooltipSize);\r\n\t\t}\r\n\t\tctx.lineTo(x, y + radius);\r\n\t\tctx.quadraticCurveTo(x, y, x + radius, y);\r\n\t\tctx.closePath();\r\n\r\n\t\tctx.fill();\r\n\r\n\t\tif (vm.borderWidth > 0) {\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar vm = this._view;\r\n\r\n\t\tif (vm.opacity === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tooltipSize = {\r\n\t\t\twidth: vm.width,\r\n\t\t\theight: vm.height\r\n\t\t};\r\n\t\tvar pt = {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y\r\n\t\t};\r\n\r\n\t\t// IE11/Edge does not like very small opacities, so snap to 0\r\n\t\tvar opacity = Math.abs(vm.opacity < 1e-3) ? 0 : vm.opacity;\r\n\r\n\t\t// Truthy/falsey value for empty tooltip\r\n\t\tvar hasTooltipContent = vm.title.length || vm.beforeBody.length || vm.body.length || vm.afterBody.length || vm.footer.length;\r\n\r\n\t\tif (this._options.enabled && hasTooltipContent) {\r\n\t\t\tctx.save();\r\n\t\t\tctx.globalAlpha = opacity;\r\n\r\n\t\t\t// Draw Background\r\n\t\t\tthis.drawBackground(pt, vm, ctx, tooltipSize);\r\n\r\n\t\t\t// Draw Title, Body, and Footer\r\n\t\t\tpt.y += vm.yPadding;\r\n\r\n\t\t\thelpers$1.rtl.overrideTextDirection(ctx, vm.textDirection);\r\n\r\n\t\t\t// Titles\r\n\t\t\tthis.drawTitle(pt, vm, ctx);\r\n\r\n\t\t\t// Body\r\n\t\t\tthis.drawBody(pt, vm, ctx);\r\n\r\n\t\t\t// Footer\r\n\t\t\tthis.drawFooter(pt, vm, ctx);\r\n\r\n\t\t\thelpers$1.rtl.restoreTextDirection(ctx, vm.textDirection);\r\n\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Handle an event\r\n\t * @private\r\n\t * @param {IEvent} event - The event to handle\r\n\t * @returns {boolean} true if the tooltip changed\r\n\t */\r\n\thandleEvent: function(e) {\r\n\t\tvar me = this;\r\n\t\tvar options = me._options;\r\n\t\tvar changed = false;\r\n\r\n\t\tme._lastActive = me._lastActive || [];\r\n\r\n\t\t// Find Active Elements for tooltips\r\n\t\tif (e.type === 'mouseout') {\r\n\t\t\tme._active = [];\r\n\t\t} else {\r\n\t\t\tme._active = me._chart.getElementsAtEventForMode(e, options.mode, options);\r\n\t\t\tif (options.reverse) {\r\n\t\t\t\tme._active.reverse();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remember Last Actives\r\n\t\tchanged = !helpers$1.arrayEquals(me._active, me._lastActive);\r\n\r\n\t\t// Only handle target event on tooltip change\r\n\t\tif (changed) {\r\n\t\t\tme._lastActive = me._active;\r\n\r\n\t\t\tif (options.enabled || options.custom) {\r\n\t\t\t\tme._eventPosition = {\r\n\t\t\t\t\tx: e.x,\r\n\t\t\t\t\ty: e.y\r\n\t\t\t\t};\r\n\r\n\t\t\t\tme.update(true);\r\n\t\t\t\tme.pivot();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn changed;\r\n\t}\r\n});\r\n\r\n/**\r\n * @namespace Chart.Tooltip.positioners\r\n */\r\nvar positioners_1 = positioners;\r\n\r\nvar core_tooltip = exports$4;\ncore_tooltip.positioners = positioners_1;\n\nvar valueOrDefault$9 = helpers$1.valueOrDefault;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {},\r\n\tevents: [\r\n\t\t'mousemove',\r\n\t\t'mouseout',\r\n\t\t'click',\r\n\t\t'touchstart',\r\n\t\t'touchmove'\r\n\t],\r\n\thover: {\r\n\t\tonHover: null,\r\n\t\tmode: 'nearest',\r\n\t\tintersect: true,\r\n\t\tanimationDuration: 400\r\n\t},\r\n\tonClick: null,\r\n\tmaintainAspectRatio: true,\r\n\tresponsive: true,\r\n\tresponsiveAnimationDuration: 0\r\n});\r\n\r\n/**\r\n * Recursively merge the given config objects representing the `scales` option\r\n * by incorporating scale defaults in `xAxes` and `yAxes` array items, then\r\n * returns a deep copy of the result, thus doesn't alter inputs.\r\n */\r\nfunction mergeScaleConfig(/* config objects ... */) {\r\n\treturn helpers$1.merge(Object.create(null), [].slice.call(arguments), {\r\n\t\tmerger: function(key, target, source, options) {\r\n\t\t\tif (key === 'xAxes' || key === 'yAxes') {\r\n\t\t\t\tvar slen = source[key].length;\r\n\t\t\t\tvar i, type, scale;\r\n\r\n\t\t\t\tif (!target[key]) {\r\n\t\t\t\t\ttarget[key] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (i = 0; i < slen; ++i) {\r\n\t\t\t\t\tscale = source[key][i];\r\n\t\t\t\t\ttype = valueOrDefault$9(scale.type, key === 'xAxes' ? 'category' : 'linear');\r\n\r\n\t\t\t\t\tif (i >= target[key].length) {\r\n\t\t\t\t\t\ttarget[key].push({});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!target[key][i].type || (scale.type && scale.type !== target[key][i].type)) {\r\n\t\t\t\t\t\t// new/untyped scale or type changed: let's apply the new defaults\r\n\t\t\t\t\t\t// then merge source scale to correctly overwrite the defaults.\r\n\t\t\t\t\t\thelpers$1.merge(target[key][i], [core_scaleService.getScaleDefaults(type), scale]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// scales type are the same\r\n\t\t\t\t\t\thelpers$1.merge(target[key][i], scale);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thelpers$1._merger(key, target, source, options);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Recursively merge the given config objects as the root options by handling\r\n * default scale options for the `scales` and `scale` properties, then returns\r\n * a deep copy of the result, thus doesn't alter inputs.\r\n */\r\nfunction mergeConfig(/* config objects ... */) {\r\n\treturn helpers$1.merge(Object.create(null), [].slice.call(arguments), {\r\n\t\tmerger: function(key, target, source, options) {\r\n\t\t\tvar tval = target[key] || Object.create(null);\r\n\t\t\tvar sval = source[key];\r\n\r\n\t\t\tif (key === 'scales') {\r\n\t\t\t\t// scale config merging is complex. Add our own function here for that\r\n\t\t\t\ttarget[key] = mergeScaleConfig(tval, sval);\r\n\t\t\t} else if (key === 'scale') {\r\n\t\t\t\t// used in polar area & radar charts since there is only one scale\r\n\t\t\t\ttarget[key] = helpers$1.merge(tval, [core_scaleService.getScaleDefaults(sval.type), sval]);\r\n\t\t\t} else {\r\n\t\t\t\thelpers$1._merger(key, target, source, options);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction initConfig(config) {\r\n\tconfig = config || Object.create(null);\r\n\r\n\t// Do NOT use mergeConfig for the data object because this method merges arrays\r\n\t// and so would change references to labels and datasets, preventing data updates.\r\n\tvar data = config.data = config.data || {};\r\n\tdata.datasets = data.datasets || [];\r\n\tdata.labels = data.labels || [];\r\n\r\n\tconfig.options = mergeConfig(\r\n\t\tcore_defaults.global,\r\n\t\tcore_defaults[config.type],\r\n\t\tconfig.options || {});\r\n\r\n\treturn config;\r\n}\r\n\r\nfunction updateConfig(chart) {\r\n\tvar newOptions = chart.options;\r\n\r\n\thelpers$1.each(chart.scales, function(scale) {\r\n\t\tcore_layouts.removeBox(chart, scale);\r\n\t});\r\n\r\n\tnewOptions = mergeConfig(\r\n\t\tcore_defaults.global,\r\n\t\tcore_defaults[chart.config.type],\r\n\t\tnewOptions);\r\n\r\n\tchart.options = chart.config.options = newOptions;\r\n\tchart.ensureScalesHaveIDs();\r\n\tchart.buildOrUpdateScales();\r\n\r\n\t// Tooltip\r\n\tchart.tooltip._options = newOptions.tooltips;\r\n\tchart.tooltip.initialize();\r\n}\r\n\r\nfunction nextAvailableScaleId(axesOpts, prefix, index) {\r\n\tvar id;\r\n\tvar hasId = function(obj) {\r\n\t\treturn obj.id === id;\r\n\t};\r\n\r\n\tdo {\r\n\t\tid = prefix + index++;\r\n\t} while (helpers$1.findIndex(axesOpts, hasId) >= 0);\r\n\r\n\treturn id;\r\n}\r\n\r\nfunction positionIsHorizontal(position) {\r\n\treturn position === 'top' || position === 'bottom';\r\n}\r\n\r\nfunction compare2Level(l1, l2) {\r\n\treturn function(a, b) {\r\n\t\treturn a[l1] === b[l1]\r\n\t\t\t? a[l2] - b[l2]\r\n\t\t\t: a[l1] - b[l1];\r\n\t};\r\n}\r\n\r\nvar Chart = function(item, config) {\r\n\tthis.construct(item, config);\r\n\treturn this;\r\n};\r\n\r\nhelpers$1.extend(Chart.prototype, /** @lends Chart */ {\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tconstruct: function(item, config) {\r\n\t\tvar me = this;\r\n\r\n\t\tconfig = initConfig(config);\r\n\r\n\t\tvar context = platform.acquireContext(item, config);\r\n\t\tvar canvas = context && context.canvas;\r\n\t\tvar height = canvas && canvas.height;\r\n\t\tvar width = canvas && canvas.width;\r\n\r\n\t\tme.id = helpers$1.uid();\r\n\t\tme.ctx = context;\r\n\t\tme.canvas = canvas;\r\n\t\tme.config = config;\r\n\t\tme.width = width;\r\n\t\tme.height = height;\r\n\t\tme.aspectRatio = height ? width / height : null;\r\n\t\tme.options = config.options;\r\n\t\tme._bufferedRender = false;\r\n\t\tme._layers = [];\r\n\r\n\t\t/**\r\n\t\t * Provided for backward compatibility, Chart and Chart.Controller have been merged,\r\n\t\t * the \"instance\" still need to be defined since it might be called from plugins.\r\n\t\t * @prop Chart#chart\r\n\t\t * @deprecated since version 2.6.0\r\n\t\t * @todo remove at version 3\r\n\t\t * @private\r\n\t\t */\r\n\t\tme.chart = me;\r\n\t\tme.controller = me; // chart.chart.controller #inception\r\n\r\n\t\t// Add the chart instance to the global namespace\r\n\t\tChart.instances[me.id] = me;\r\n\r\n\t\t// Define alias to the config data: `chart.data === chart.config.data`\r\n\t\tObject.defineProperty(me, 'data', {\r\n\t\t\tget: function() {\r\n\t\t\t\treturn me.config.data;\r\n\t\t\t},\r\n\t\t\tset: function(value) {\r\n\t\t\t\tme.config.data = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!context || !canvas) {\r\n\t\t\t// The given item is not a compatible context2d element, let's return before finalizing\r\n\t\t\t// the chart initialization but after setting basic chart / controller properties that\r\n\t\t\t// can help to figure out that the chart is not valid (e.g chart.canvas !== null);\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/2807\r\n\t\t\tconsole.error(\"Failed to create chart: can't acquire context from the given item\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tme.initialize();\r\n\t\tme.update();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinitialize: function() {\r\n\t\tvar me = this;\r\n\r\n\t\t// Before init plugin notification\r\n\t\tcore_plugins.notify(me, 'beforeInit');\r\n\r\n\t\thelpers$1.retinaScale(me, me.options.devicePixelRatio);\r\n\r\n\t\tme.bindEvents();\r\n\r\n\t\tif (me.options.responsive) {\r\n\t\t\t// Initial resize before chart draws (must be silent to preserve initial animations).\r\n\t\t\tme.resize(true);\r\n\t\t}\r\n\r\n\t\tme.initToolTip();\r\n\r\n\t\t// After init plugin notification\r\n\t\tcore_plugins.notify(me, 'afterInit');\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\tclear: function() {\r\n\t\thelpers$1.canvas.clear(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstop: function() {\r\n\t\t// Stops any current animation loop occurring\r\n\t\tcore_animations.cancelAnimation(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tresize: function(silent) {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar canvas = me.canvas;\r\n\t\tvar aspectRatio = (options.maintainAspectRatio && me.aspectRatio) || null;\r\n\r\n\t\t// the canvas render width and height will be casted to integers so make sure that\r\n\t\t// the canvas display style uses the same integer values to avoid blurring effect.\r\n\r\n\t\t// Set to 0 instead of canvas.size because the size defaults to 300x150 if the element is collapsed\r\n\t\tvar newWidth = Math.max(0, Math.floor(helpers$1.getMaximumWidth(canvas)));\r\n\t\tvar newHeight = Math.max(0, Math.floor(aspectRatio ? newWidth / aspectRatio : helpers$1.getMaximumHeight(canvas)));\r\n\r\n\t\tif (me.width === newWidth && me.height === newHeight) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcanvas.width = me.width = newWidth;\r\n\t\tcanvas.height = me.height = newHeight;\r\n\t\tcanvas.style.width = newWidth + 'px';\r\n\t\tcanvas.style.height = newHeight + 'px';\r\n\r\n\t\thelpers$1.retinaScale(me, options.devicePixelRatio);\r\n\r\n\t\tif (!silent) {\r\n\t\t\t// Notify any plugins about the resize\r\n\t\t\tvar newSize = {width: newWidth, height: newHeight};\r\n\t\t\tcore_plugins.notify(me, 'resize', [newSize]);\r\n\r\n\t\t\t// Notify of resize\r\n\t\t\tif (options.onResize) {\r\n\t\t\t\toptions.onResize(me, newSize);\r\n\t\t\t}\r\n\r\n\t\t\tme.stop();\r\n\t\t\tme.update({\r\n\t\t\t\tduration: options.responsiveAnimationDuration\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tensureScalesHaveIDs: function() {\r\n\t\tvar options = this.options;\r\n\t\tvar scalesOptions = options.scales || {};\r\n\t\tvar scaleOptions = options.scale;\r\n\r\n\t\thelpers$1.each(scalesOptions.xAxes, function(xAxisOptions, index) {\r\n\t\t\tif (!xAxisOptions.id) {\r\n\t\t\t\txAxisOptions.id = nextAvailableScaleId(scalesOptions.xAxes, 'x-axis-', index);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\thelpers$1.each(scalesOptions.yAxes, function(yAxisOptions, index) {\r\n\t\t\tif (!yAxisOptions.id) {\r\n\t\t\t\tyAxisOptions.id = nextAvailableScaleId(scalesOptions.yAxes, 'y-axis-', index);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (scaleOptions) {\r\n\t\t\tscaleOptions.id = scaleOptions.id || 'scale';\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Builds a map of scale ID to scale object for future lookup.\r\n\t */\r\n\tbuildOrUpdateScales: function() {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar scales = me.scales || {};\r\n\t\tvar items = [];\r\n\t\tvar updated = Object.keys(scales).reduce(function(obj, id) {\r\n\t\t\tobj[id] = false;\r\n\t\t\treturn obj;\r\n\t\t}, {});\r\n\r\n\t\tif (options.scales) {\r\n\t\t\titems = items.concat(\r\n\t\t\t\t(options.scales.xAxes || []).map(function(xAxisOptions) {\r\n\t\t\t\t\treturn {options: xAxisOptions, dtype: 'category', dposition: 'bottom'};\r\n\t\t\t\t}),\r\n\t\t\t\t(options.scales.yAxes || []).map(function(yAxisOptions) {\r\n\t\t\t\t\treturn {options: yAxisOptions, dtype: 'linear', dposition: 'left'};\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (options.scale) {\r\n\t\t\titems.push({\r\n\t\t\t\toptions: options.scale,\r\n\t\t\t\tdtype: 'radialLinear',\r\n\t\t\t\tisDefault: true,\r\n\t\t\t\tdposition: 'chartArea'\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\thelpers$1.each(items, function(item) {\r\n\t\t\tvar scaleOptions = item.options;\r\n\t\t\tvar id = scaleOptions.id;\r\n\t\t\tvar scaleType = valueOrDefault$9(scaleOptions.type, item.dtype);\r\n\r\n\t\t\tif (positionIsHorizontal(scaleOptions.position) !== positionIsHorizontal(item.dposition)) {\r\n\t\t\t\tscaleOptions.position = item.dposition;\r\n\t\t\t}\r\n\r\n\t\t\tupdated[id] = true;\r\n\t\t\tvar scale = null;\r\n\t\t\tif (id in scales && scales[id].type === scaleType) {\r\n\t\t\t\tscale = scales[id];\r\n\t\t\t\tscale.options = scaleOptions;\r\n\t\t\t\tscale.ctx = me.ctx;\r\n\t\t\t\tscale.chart = me;\r\n\t\t\t} else {\r\n\t\t\t\tvar scaleClass = core_scaleService.getScaleConstructor(scaleType);\r\n\t\t\t\tif (!scaleClass) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tscale = new scaleClass({\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\ttype: scaleType,\r\n\t\t\t\t\toptions: scaleOptions,\r\n\t\t\t\t\tctx: me.ctx,\r\n\t\t\t\t\tchart: me\r\n\t\t\t\t});\r\n\t\t\t\tscales[scale.id] = scale;\r\n\t\t\t}\r\n\r\n\t\t\tscale.mergeTicksOptions();\r\n\r\n\t\t\t// TODO(SB): I think we should be able to remove this custom case (options.scale)\r\n\t\t\t// and consider it as a regular scale part of the \"scales\"\" map only! This would\r\n\t\t\t// make the logic easier and remove some useless? custom code.\r\n\t\t\tif (item.isDefault) {\r\n\t\t\t\tme.scale = scale;\r\n\t\t\t}\r\n\t\t});\r\n\t\t// clear up discarded scales\r\n\t\thelpers$1.each(updated, function(hasUpdated, id) {\r\n\t\t\tif (!hasUpdated) {\r\n\t\t\t\tdelete scales[id];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tme.scales = scales;\r\n\r\n\t\tcore_scaleService.addScalesToLayout(this);\r\n\t},\r\n\r\n\tbuildOrUpdateControllers: function() {\r\n\t\tvar me = this;\r\n\t\tvar newControllers = [];\r\n\t\tvar datasets = me.data.datasets;\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = datasets.length; i < ilen; i++) {\r\n\t\t\tvar dataset = datasets[i];\r\n\t\t\tvar meta = me.getDatasetMeta(i);\r\n\t\t\tvar type = dataset.type || me.config.type;\r\n\r\n\t\t\tif (meta.type && meta.type !== type) {\r\n\t\t\t\tme.destroyDatasetMeta(i);\r\n\t\t\t\tmeta = me.getDatasetMeta(i);\r\n\t\t\t}\r\n\t\t\tmeta.type = type;\r\n\t\t\tmeta.order = dataset.order || 0;\r\n\t\t\tmeta.index = i;\r\n\r\n\t\t\tif (meta.controller) {\r\n\t\t\t\tmeta.controller.updateIndex(i);\r\n\t\t\t\tmeta.controller.linkScales();\r\n\t\t\t} else {\r\n\t\t\t\tvar ControllerClass = controllers[meta.type];\r\n\t\t\t\tif (ControllerClass === undefined) {\r\n\t\t\t\t\tthrow new Error('\"' + meta.type + '\" is not a chart type.');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeta.controller = new ControllerClass(me, i);\r\n\t\t\t\tnewControllers.push(meta.controller);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newControllers;\r\n\t},\r\n\r\n\t/**\r\n\t * Reset the elements of all datasets\r\n\t * @private\r\n\t */\r\n\tresetElements: function() {\r\n\t\tvar me = this;\r\n\t\thelpers$1.each(me.data.datasets, function(dataset, datasetIndex) {\r\n\t\t\tme.getDatasetMeta(datasetIndex).controller.reset();\r\n\t\t}, me);\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the chart back to it's state before the initial animation\r\n\t*/\r\n\treset: function() {\r\n\t\tthis.resetElements();\r\n\t\tthis.tooltip.initialize();\r\n\t},\r\n\r\n\tupdate: function(config) {\r\n\t\tvar me = this;\r\n\t\tvar i, ilen;\r\n\r\n\t\tif (!config || typeof config !== 'object') {\r\n\t\t\t// backwards compatibility\r\n\t\t\tconfig = {\r\n\t\t\t\tduration: config,\r\n\t\t\t\tlazy: arguments[1]\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tupdateConfig(me);\r\n\r\n\t\t// plugins options references might have change, let's invalidate the cache\r\n\t\t// https://github.com/chartjs/Chart.js/issues/5111#issuecomment-355934167\r\n\t\tcore_plugins._invalidate(me);\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeUpdate') === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// In case the entire data object changed\r\n\t\tme.tooltip._data = me.data;\r\n\r\n\t\t// Make sure dataset controllers are updated and new controllers are reset\r\n\t\tvar newControllers = me.buildOrUpdateControllers();\r\n\r\n\t\t// Make sure all dataset controllers have correct meta data counts\r\n\t\tfor (i = 0, ilen = me.data.datasets.length; i < ilen; i++) {\r\n\t\t\tme.getDatasetMeta(i).controller.buildOrUpdateElements();\r\n\t\t}\r\n\r\n\t\tme.updateLayout();\r\n\r\n\t\t// Can only reset the new controllers after the scales have been updated\r\n\t\tif (me.options.animation && me.options.animation.duration) {\r\n\t\t\thelpers$1.each(newControllers, function(controller) {\r\n\t\t\t\tcontroller.reset();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tme.updateDatasets();\r\n\r\n\t\t// Need to reset tooltip in case it is displayed with elements that are removed\r\n\t\t// after update.\r\n\t\tme.tooltip.initialize();\r\n\r\n\t\t// Last active contains items that were previously in the tooltip.\r\n\t\t// When we reset the tooltip, we need to clear it\r\n\t\tme.lastActive = [];\r\n\r\n\t\t// Do this before render so that any plugins that need final scale updates can use it\r\n\t\tcore_plugins.notify(me, 'afterUpdate');\r\n\r\n\t\tme._layers.sort(compare2Level('z', '_idx'));\r\n\r\n\t\tif (me._bufferedRender) {\r\n\t\t\tme._bufferedRequest = {\r\n\t\t\t\tduration: config.duration,\r\n\t\t\t\teasing: config.easing,\r\n\t\t\t\tlazy: config.lazy\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tme.render(config);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Updates the chart layout unless a plugin returns `false` to the `beforeLayout`\r\n\t * hook, in which case, plugins will not be called on `afterLayout`.\r\n\t * @private\r\n\t */\r\n\tupdateLayout: function() {\r\n\t\tvar me = this;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeLayout') === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcore_layouts.update(this, this.width, this.height);\r\n\r\n\t\tme._layers = [];\r\n\t\thelpers$1.each(me.boxes, function(box) {\r\n\t\t\t// _configure is called twice, once in core.scale.update and once here.\r\n\t\t\t// Here the boxes are fully updated and at their final positions.\r\n\t\t\tif (box._configure) {\r\n\t\t\t\tbox._configure();\r\n\t\t\t}\r\n\t\t\tme._layers.push.apply(me._layers, box._layers());\r\n\t\t}, me);\r\n\r\n\t\tme._layers.forEach(function(item, index) {\r\n\t\t\titem._idx = index;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Provided for backward compatibility, use `afterLayout` instead.\r\n\t\t * @method IPlugin#afterScaleUpdate\r\n\t\t * @deprecated since version 2.5.0\r\n\t\t * @todo remove at version 3\r\n\t\t * @private\r\n\t\t */\r\n\t\tcore_plugins.notify(me, 'afterScaleUpdate');\r\n\t\tcore_plugins.notify(me, 'afterLayout');\r\n\t},\r\n\r\n\t/**\r\n\t * Updates all datasets unless a plugin returns `false` to the `beforeDatasetsUpdate`\r\n\t * hook, in which case, plugins will not be called on `afterDatasetsUpdate`.\r\n\t * @private\r\n\t */\r\n\tupdateDatasets: function() {\r\n\t\tvar me = this;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDatasetsUpdate') === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, ilen = me.data.datasets.length; i < ilen; ++i) {\r\n\t\t\tme.updateDataset(i);\r\n\t\t}\r\n\r\n\t\tcore_plugins.notify(me, 'afterDatasetsUpdate');\r\n\t},\r\n\r\n\t/**\r\n\t * Updates dataset at index unless a plugin returns `false` to the `beforeDatasetUpdate`\r\n\t * hook, in which case, plugins will not be called on `afterDatasetUpdate`.\r\n\t * @private\r\n\t */\r\n\tupdateDataset: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getDatasetMeta(index);\r\n\t\tvar args = {\r\n\t\t\tmeta: meta,\r\n\t\t\tindex: index\r\n\t\t};\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDatasetUpdate', [args]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmeta.controller._update();\r\n\r\n\t\tcore_plugins.notify(me, 'afterDatasetUpdate', [args]);\r\n\t},\r\n\r\n\trender: function(config) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (!config || typeof config !== 'object') {\r\n\t\t\t// backwards compatibility\r\n\t\t\tconfig = {\r\n\t\t\t\tduration: config,\r\n\t\t\t\tlazy: arguments[1]\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar animationOptions = me.options.animation;\r\n\t\tvar duration = valueOrDefault$9(config.duration, animationOptions && animationOptions.duration);\r\n\t\tvar lazy = config.lazy;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeRender') === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar onComplete = function(animation) {\r\n\t\t\tcore_plugins.notify(me, 'afterRender');\r\n\t\t\thelpers$1.callback(animationOptions && animationOptions.onComplete, [animation], me);\r\n\t\t};\r\n\r\n\t\tif (animationOptions && duration) {\r\n\t\t\tvar animation = new core_animation({\r\n\t\t\t\tnumSteps: duration / 16.66, // 60 fps\r\n\t\t\t\teasing: config.easing || animationOptions.easing,\r\n\r\n\t\t\t\trender: function(chart, animationObject) {\r\n\t\t\t\t\tvar easingFunction = helpers$1.easing.effects[animationObject.easing];\r\n\t\t\t\t\tvar currentStep = animationObject.currentStep;\r\n\t\t\t\t\tvar stepDecimal = currentStep / animationObject.numSteps;\r\n\r\n\t\t\t\t\tchart.draw(easingFunction(stepDecimal), stepDecimal, currentStep);\r\n\t\t\t\t},\r\n\r\n\t\t\t\tonAnimationProgress: animationOptions.onProgress,\r\n\t\t\t\tonAnimationComplete: onComplete\r\n\t\t\t});\r\n\r\n\t\t\tcore_animations.addAnimation(me, animation, duration, lazy);\r\n\t\t} else {\r\n\t\t\tme.draw();\r\n\r\n\t\t\t// See https://github.com/chartjs/Chart.js/issues/3781\r\n\t\t\tonComplete(new core_animation({numSteps: 0, chart: me}));\r\n\t\t}\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\tdraw: function(easingValue) {\r\n\t\tvar me = this;\r\n\t\tvar i, layers;\r\n\r\n\t\tme.clear();\r\n\r\n\t\tif (helpers$1.isNullOrUndef(easingValue)) {\r\n\t\t\teasingValue = 1;\r\n\t\t}\r\n\r\n\t\tme.transition(easingValue);\r\n\r\n\t\tif (me.width <= 0 || me.height <= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDraw', [easingValue]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Because of plugin hooks (before/afterDatasetsDraw), datasets can't\r\n\t\t// currently be part of layers. Instead, we draw\r\n\t\t// layers <= 0 before(default, backward compat), and the rest after\r\n\t\tlayers = me._layers;\r\n\t\tfor (i = 0; i < layers.length && layers[i].z <= 0; ++i) {\r\n\t\t\tlayers[i].draw(me.chartArea);\r\n\t\t}\r\n\r\n\t\tme.drawDatasets(easingValue);\r\n\r\n\t\t// Rest of layers\r\n\t\tfor (; i < layers.length; ++i) {\r\n\t\t\tlayers[i].draw(me.chartArea);\r\n\t\t}\r\n\r\n\t\tme._drawTooltip(easingValue);\r\n\r\n\t\tcore_plugins.notify(me, 'afterDraw', [easingValue]);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\ttransition: function(easingValue) {\r\n\t\tvar me = this;\r\n\r\n\t\tfor (var i = 0, ilen = (me.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\tif (me.isDatasetVisible(i)) {\r\n\t\t\t\tme.getDatasetMeta(i).controller.transition(easingValue);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.tooltip.transition(easingValue);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getSortedDatasetMetas: function(filterVisible) {\r\n\t\tvar me = this;\r\n\t\tvar datasets = me.data.datasets || [];\r\n\t\tvar result = [];\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = datasets.length; i < ilen; ++i) {\r\n\t\t\tif (!filterVisible || me.isDatasetVisible(i)) {\r\n\t\t\t\tresult.push(me.getDatasetMeta(i));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresult.sort(compare2Level('order', 'index'));\r\n\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getSortedVisibleDatasetMetas: function() {\r\n\t\treturn this._getSortedDatasetMetas(true);\r\n\t},\r\n\r\n\t/**\r\n\t * Draws all datasets unless a plugin returns `false` to the `beforeDatasetsDraw`\r\n\t * hook, in which case, plugins will not be called on `afterDatasetsDraw`.\r\n\t * @private\r\n\t */\r\n\tdrawDatasets: function(easingValue) {\r\n\t\tvar me = this;\r\n\t\tvar metasets, i;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDatasetsDraw', [easingValue]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmetasets = me._getSortedVisibleDatasetMetas();\r\n\t\tfor (i = metasets.length - 1; i >= 0; --i) {\r\n\t\t\tme.drawDataset(metasets[i], easingValue);\r\n\t\t}\r\n\r\n\t\tcore_plugins.notify(me, 'afterDatasetsDraw', [easingValue]);\r\n\t},\r\n\r\n\t/**\r\n\t * Draws dataset at index unless a plugin returns `false` to the `beforeDatasetDraw`\r\n\t * hook, in which case, plugins will not be called on `afterDatasetDraw`.\r\n\t * @private\r\n\t */\r\n\tdrawDataset: function(meta, easingValue) {\r\n\t\tvar me = this;\r\n\t\tvar args = {\r\n\t\t\tmeta: meta,\r\n\t\t\tindex: meta.index,\r\n\t\t\teasingValue: easingValue\r\n\t\t};\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDatasetDraw', [args]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmeta.controller.draw(easingValue);\r\n\r\n\t\tcore_plugins.notify(me, 'afterDatasetDraw', [args]);\r\n\t},\r\n\r\n\t/**\r\n\t * Draws tooltip unless a plugin returns `false` to the `beforeTooltipDraw`\r\n\t * hook, in which case, plugins will not be called on `afterTooltipDraw`.\r\n\t * @private\r\n\t */\r\n\t_drawTooltip: function(easingValue) {\r\n\t\tvar me = this;\r\n\t\tvar tooltip = me.tooltip;\r\n\t\tvar args = {\r\n\t\t\ttooltip: tooltip,\r\n\t\t\teasingValue: easingValue\r\n\t\t};\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeTooltipDraw', [args]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttooltip.draw();\r\n\r\n\t\tcore_plugins.notify(me, 'afterTooltipDraw', [args]);\r\n\t},\r\n\r\n\t/**\r\n\t * Get the single element that was clicked on\r\n\t * @return An object containing the dataset index and element index of the matching element. Also contains the rectangle that was draw\r\n\t */\r\n\tgetElementAtEvent: function(e) {\r\n\t\treturn core_interaction.modes.single(this, e);\r\n\t},\r\n\r\n\tgetElementsAtEvent: function(e) {\r\n\t\treturn core_interaction.modes.label(this, e, {intersect: true});\r\n\t},\r\n\r\n\tgetElementsAtXAxis: function(e) {\r\n\t\treturn core_interaction.modes['x-axis'](this, e, {intersect: true});\r\n\t},\r\n\r\n\tgetElementsAtEventForMode: function(e, mode, options) {\r\n\t\tvar method = core_interaction.modes[mode];\r\n\t\tif (typeof method === 'function') {\r\n\t\t\treturn method(this, e, options);\r\n\t\t}\r\n\r\n\t\treturn [];\r\n\t},\r\n\r\n\tgetDatasetAtEvent: function(e) {\r\n\t\treturn core_interaction.modes.dataset(this, e, {intersect: true});\r\n\t},\r\n\r\n\tgetDatasetMeta: function(datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar dataset = me.data.datasets[datasetIndex];\r\n\t\tif (!dataset._meta) {\r\n\t\t\tdataset._meta = {};\r\n\t\t}\r\n\r\n\t\tvar meta = dataset._meta[me.id];\r\n\t\tif (!meta) {\r\n\t\t\tmeta = dataset._meta[me.id] = {\r\n\t\t\t\ttype: null,\r\n\t\t\t\tdata: [],\r\n\t\t\t\tdataset: null,\r\n\t\t\t\tcontroller: null,\r\n\t\t\t\thidden: null,\t\t\t// See isDatasetVisible() comment\r\n\t\t\t\txAxisID: null,\r\n\t\t\t\tyAxisID: null,\r\n\t\t\t\torder: dataset.order || 0,\r\n\t\t\t\tindex: datasetIndex\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn meta;\r\n\t},\r\n\r\n\tgetVisibleDatasetCount: function() {\r\n\t\tvar count = 0;\r\n\t\tfor (var i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\r\n\t\t\tif (this.isDatasetVisible(i)) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn count;\r\n\t},\r\n\r\n\tisDatasetVisible: function(datasetIndex) {\r\n\t\tvar meta = this.getDatasetMeta(datasetIndex);\r\n\r\n\t\t// meta.hidden is a per chart dataset hidden flag override with 3 states: if true or false,\r\n\t\t// the dataset.hidden value is ignored, else if null, the dataset hidden state is returned.\r\n\t\treturn typeof meta.hidden === 'boolean' ? !meta.hidden : !this.data.datasets[datasetIndex].hidden;\r\n\t},\r\n\r\n\tgenerateLegend: function() {\r\n\t\treturn this.options.legendCallback(this);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tdestroyDatasetMeta: function(datasetIndex) {\r\n\t\tvar id = this.id;\r\n\t\tvar dataset = this.data.datasets[datasetIndex];\r\n\t\tvar meta = dataset._meta && dataset._meta[id];\r\n\r\n\t\tif (meta) {\r\n\t\t\tmeta.controller.destroy();\r\n\t\t\tdelete dataset._meta[id];\r\n\t\t}\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\t\tvar me = this;\r\n\t\tvar canvas = me.canvas;\r\n\t\tvar i, ilen;\r\n\r\n\t\tme.stop();\r\n\r\n\t\t// dataset controllers need to cleanup associated data\r\n\t\tfor (i = 0, ilen = me.data.datasets.length; i < ilen; ++i) {\r\n\t\t\tme.destroyDatasetMeta(i);\r\n\t\t}\r\n\r\n\t\tif (canvas) {\r\n\t\t\tme.unbindEvents();\r\n\t\t\thelpers$1.canvas.clear(me);\r\n\t\t\tplatform.releaseContext(me.ctx);\r\n\t\t\tme.canvas = null;\r\n\t\t\tme.ctx = null;\r\n\t\t}\r\n\r\n\t\tcore_plugins.notify(me, 'destroy');\r\n\r\n\t\tdelete Chart.instances[me.id];\r\n\t},\r\n\r\n\ttoBase64Image: function() {\r\n\t\treturn this.canvas.toDataURL.apply(this.canvas, arguments);\r\n\t},\r\n\r\n\tinitToolTip: function() {\r\n\t\tvar me = this;\r\n\t\tme.tooltip = new core_tooltip({\r\n\t\t\t_chart: me,\r\n\t\t\t_chartInstance: me, // deprecated, backward compatibility\r\n\t\t\t_data: me.data,\r\n\t\t\t_options: me.options.tooltips\r\n\t\t}, me);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tbindEvents: function() {\r\n\t\tvar me = this;\r\n\t\tvar listeners = me._listeners = {};\r\n\t\tvar listener = function() {\r\n\t\t\tme.eventHandler.apply(me, arguments);\r\n\t\t};\r\n\r\n\t\thelpers$1.each(me.options.events, function(type) {\r\n\t\t\tplatform.addEventListener(me, type, listener);\r\n\t\t\tlisteners[type] = listener;\r\n\t\t});\r\n\r\n\t\t// Elements used to detect size change should not be injected for non responsive charts.\r\n\t\t// See https://github.com/chartjs/Chart.js/issues/2210\r\n\t\tif (me.options.responsive) {\r\n\t\t\tlistener = function() {\r\n\t\t\t\tme.resize();\r\n\t\t\t};\r\n\r\n\t\t\tplatform.addEventListener(me, 'resize', listener);\r\n\t\t\tlisteners.resize = listener;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tunbindEvents: function() {\r\n\t\tvar me = this;\r\n\t\tvar listeners = me._listeners;\r\n\t\tif (!listeners) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdelete me._listeners;\r\n\t\thelpers$1.each(listeners, function(listener, type) {\r\n\t\t\tplatform.removeEventListener(me, type, listener);\r\n\t\t});\r\n\t},\r\n\r\n\tupdateHoverStyle: function(elements, mode, enabled) {\r\n\t\tvar prefix = enabled ? 'set' : 'remove';\r\n\t\tvar element, i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = elements.length; i < ilen; ++i) {\r\n\t\t\telement = elements[i];\r\n\t\t\tif (element) {\r\n\t\t\t\tthis.getDatasetMeta(element._datasetIndex).controller[prefix + 'HoverStyle'](element);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (mode === 'dataset') {\r\n\t\t\tthis.getDatasetMeta(elements[0]._datasetIndex).controller['_' + prefix + 'DatasetHoverStyle']();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\teventHandler: function(e) {\r\n\t\tvar me = this;\r\n\t\tvar tooltip = me.tooltip;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeEvent', [e]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Buffer any update calls so that renders do not occur\r\n\t\tme._bufferedRender = true;\r\n\t\tme._bufferedRequest = null;\r\n\r\n\t\tvar changed = me.handleEvent(e);\r\n\t\t// for smooth tooltip animations issue #4989\r\n\t\t// the tooltip should be the source of change\r\n\t\t// Animation check workaround:\r\n\t\t// tooltip._start will be null when tooltip isn't animating\r\n\t\tif (tooltip) {\r\n\t\t\tchanged = tooltip._start\r\n\t\t\t\t? tooltip.handleEvent(e)\r\n\t\t\t\t: changed | tooltip.handleEvent(e);\r\n\t\t}\r\n\r\n\t\tcore_plugins.notify(me, 'afterEvent', [e]);\r\n\r\n\t\tvar bufferedRequest = me._bufferedRequest;\r\n\t\tif (bufferedRequest) {\r\n\t\t\t// If we have an update that was triggered, we need to do a normal render\r\n\t\t\tme.render(bufferedRequest);\r\n\t\t} else if (changed && !me.animating) {\r\n\t\t\t// If entering, leaving, or changing elements, animate the change via pivot\r\n\t\t\tme.stop();\r\n\r\n\t\t\t// We only need to render at this point. Updating will cause scales to be\r\n\t\t\t// recomputed generating flicker & using more memory than necessary.\r\n\t\t\tme.render({\r\n\t\t\t\tduration: me.options.hover.animationDuration,\r\n\t\t\t\tlazy: true\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tme._bufferedRender = false;\r\n\t\tme._bufferedRequest = null;\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\t/**\r\n\t * Handle an event\r\n\t * @private\r\n\t * @param {IEvent} event the event to handle\r\n\t * @return {boolean} true if the chart needs to re-render\r\n\t */\r\n\thandleEvent: function(e) {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options || {};\r\n\t\tvar hoverOptions = options.hover;\r\n\t\tvar changed = false;\r\n\r\n\t\tme.lastActive = me.lastActive || [];\r\n\r\n\t\t// Find Active Elements for hover and tooltips\r\n\t\tif (e.type === 'mouseout') {\r\n\t\t\tme.active = [];\r\n\t\t} else {\r\n\t\t\tme.active = me.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions);\r\n\t\t}\r\n\r\n\t\t// Invoke onHover hook\r\n\t\t// Need to call with native event here to not break backwards compatibility\r\n\t\thelpers$1.callback(options.onHover || options.hover.onHover, [e.native, me.active], me);\r\n\r\n\t\tif (e.type === 'mouseup' || e.type === 'click') {\r\n\t\t\tif (options.onClick) {\r\n\t\t\t\t// Use e.native here for backwards compatibility\r\n\t\t\t\toptions.onClick.call(me, e.native, me.active);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remove styling for last active (even if it may still be active)\r\n\t\tif (me.lastActive.length) {\r\n\t\t\tme.updateHoverStyle(me.lastActive, hoverOptions.mode, false);\r\n\t\t}\r\n\r\n\t\t// Built in hover styling\r\n\t\tif (me.active.length && hoverOptions.mode) {\r\n\t\t\tme.updateHoverStyle(me.active, hoverOptions.mode, true);\r\n\t\t}\r\n\r\n\t\tchanged = !helpers$1.arrayEquals(me.active, me.lastActive);\r\n\r\n\t\t// Remember Last Actives\r\n\t\tme.lastActive = me.active;\r\n\r\n\t\treturn changed;\r\n\t}\r\n});\r\n\r\n/**\r\n * NOTE(SB) We actually don't use this container anymore but we need to keep it\r\n * for backward compatibility. Though, it can still be useful for plugins that\r\n * would need to work on multiple charts?!\r\n */\r\nChart.instances = {};\r\n\r\nvar core_controller = Chart;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart instead.\r\n * @class Chart.Controller\r\n * @deprecated since version 2.6\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nChart.Controller = Chart;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore.\r\n * @namespace Chart\r\n * @deprecated since version 2.8\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nChart.types = {};\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore.\r\n * @namespace Chart.helpers.configMerge\r\n * @deprecated since version 2.8.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers$1.configMerge = mergeConfig;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore.\r\n * @namespace Chart.helpers.scaleMerge\r\n * @deprecated since version 2.8.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers$1.scaleMerge = mergeScaleConfig;\n\nvar core_helpers = function() {\r\n\r\n\t// -- Basic js utility methods\r\n\r\n\thelpers$1.where = function(collection, filterCallback) {\r\n\t\tif (helpers$1.isArray(collection) && Array.prototype.filter) {\r\n\t\t\treturn collection.filter(filterCallback);\r\n\t\t}\r\n\t\tvar filtered = [];\r\n\r\n\t\thelpers$1.each(collection, function(item) {\r\n\t\t\tif (filterCallback(item)) {\r\n\t\t\t\tfiltered.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn filtered;\r\n\t};\r\n\thelpers$1.findIndex = Array.prototype.findIndex ?\r\n\t\tfunction(array, callback, scope) {\r\n\t\t\treturn array.findIndex(callback, scope);\r\n\t\t} :\r\n\t\tfunction(array, callback, scope) {\r\n\t\t\tscope = scope === undefined ? array : scope;\r\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\r\n\t\t\t\tif (callback.call(scope, array[i], i, array)) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t};\r\n\thelpers$1.findNextWhere = function(arrayToSearch, filterCallback, startIndex) {\r\n\t\t// Default to start of the array\r\n\t\tif (helpers$1.isNullOrUndef(startIndex)) {\r\n\t\t\tstartIndex = -1;\r\n\t\t}\r\n\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\r\n\t\t\tvar currentItem = arrayToSearch[i];\r\n\t\t\tif (filterCallback(currentItem)) {\r\n\t\t\t\treturn currentItem;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\thelpers$1.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex) {\r\n\t\t// Default to end of the array\r\n\t\tif (helpers$1.isNullOrUndef(startIndex)) {\r\n\t\t\tstartIndex = arrayToSearch.length;\r\n\t\t}\r\n\t\tfor (var i = startIndex - 1; i >= 0; i--) {\r\n\t\t\tvar currentItem = arrayToSearch[i];\r\n\t\t\tif (filterCallback(currentItem)) {\r\n\t\t\t\treturn currentItem;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// -- Math methods\r\n\thelpers$1.isNumber = function(n) {\r\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t};\r\n\thelpers$1.almostEquals = function(x, y, epsilon) {\r\n\t\treturn Math.abs(x - y) < epsilon;\r\n\t};\r\n\thelpers$1.almostWhole = function(x, epsilon) {\r\n\t\tvar rounded = Math.round(x);\r\n\t\treturn ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\r\n\t};\r\n\thelpers$1.max = function(array) {\r\n\t\treturn array.reduce(function(max, value) {\r\n\t\t\tif (!isNaN(value)) {\r\n\t\t\t\treturn Math.max(max, value);\r\n\t\t\t}\r\n\t\t\treturn max;\r\n\t\t}, Number.NEGATIVE_INFINITY);\r\n\t};\r\n\thelpers$1.min = function(array) {\r\n\t\treturn array.reduce(function(min, value) {\r\n\t\t\tif (!isNaN(value)) {\r\n\t\t\t\treturn Math.min(min, value);\r\n\t\t\t}\r\n\t\t\treturn min;\r\n\t\t}, Number.POSITIVE_INFINITY);\r\n\t};\r\n\thelpers$1.sign = Math.sign ?\r\n\t\tfunction(x) {\r\n\t\t\treturn Math.sign(x);\r\n\t\t} :\r\n\t\tfunction(x) {\r\n\t\t\tx = +x; // convert to a number\r\n\t\t\tif (x === 0 || isNaN(x)) {\r\n\t\t\t\treturn x;\r\n\t\t\t}\r\n\t\t\treturn x > 0 ? 1 : -1;\r\n\t\t};\r\n\thelpers$1.toRadians = function(degrees) {\r\n\t\treturn degrees * (Math.PI / 180);\r\n\t};\r\n\thelpers$1.toDegrees = function(radians) {\r\n\t\treturn radians * (180 / Math.PI);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the number of decimal places\r\n\t * i.e. the number of digits after the decimal point, of the value of this Number.\r\n\t * @param {number} x - A number.\r\n\t * @returns {number} The number of decimal places.\r\n\t * @private\r\n\t */\r\n\thelpers$1._decimalPlaces = function(x) {\r\n\t\tif (!helpers$1.isFinite(x)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar e = 1;\r\n\t\tvar p = 0;\r\n\t\twhile (Math.round(x * e) / e !== x) {\r\n\t\t\te *= 10;\r\n\t\t\tp++;\r\n\t\t}\r\n\t\treturn p;\r\n\t};\r\n\r\n\t// Gets the angle from vertical upright to the point about a centre.\r\n\thelpers$1.getAngleFromPoint = function(centrePoint, anglePoint) {\r\n\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x;\r\n\t\tvar distanceFromYCenter = anglePoint.y - centrePoint.y;\r\n\t\tvar radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\r\n\r\n\t\tvar angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\r\n\r\n\t\tif (angle < (-0.5 * Math.PI)) {\r\n\t\t\tangle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tangle: angle,\r\n\t\t\tdistance: radialDistanceFromCenter\r\n\t\t};\r\n\t};\r\n\thelpers$1.distanceBetweenPoints = function(pt1, pt2) {\r\n\t\treturn Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\r\n\t};\r\n\r\n\t/**\r\n\t * Provided for backward compatibility, not available anymore\r\n\t * @function Chart.helpers.aliasPixel\r\n\t * @deprecated since version 2.8.0\r\n\t * @todo remove at version 3\r\n\t */\r\n\thelpers$1.aliasPixel = function(pixelWidth) {\r\n\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the aligned pixel value to avoid anti-aliasing blur\r\n\t * @param {Chart} chart - The chart instance.\r\n\t * @param {number} pixel - A pixel value.\r\n\t * @param {number} width - The width of the element.\r\n\t * @returns {number} The aligned pixel value.\r\n\t * @private\r\n\t */\r\n\thelpers$1._alignPixel = function(chart, pixel, width) {\r\n\t\tvar devicePixelRatio = chart.currentDevicePixelRatio;\r\n\t\tvar halfWidth = width / 2;\r\n\t\treturn Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\r\n\t};\r\n\r\n\thelpers$1.splineCurve = function(firstPoint, middlePoint, afterPoint, t) {\r\n\t\t// Props to Rob Spencer at scaled innovation for his post on splining between points\r\n\t\t// http://scaledinnovation.com/analytics/splines/aboutSplines.html\r\n\r\n\t\t// This function must also respect \"skipped\" points\r\n\r\n\t\tvar previous = firstPoint.skip ? middlePoint : firstPoint;\r\n\t\tvar current = middlePoint;\r\n\t\tvar next = afterPoint.skip ? middlePoint : afterPoint;\r\n\r\n\t\tvar d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\r\n\t\tvar d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\r\n\r\n\t\tvar s01 = d01 / (d01 + d12);\r\n\t\tvar s12 = d12 / (d01 + d12);\r\n\r\n\t\t// If all points are the same, s01 & s02 will be inf\r\n\t\ts01 = isNaN(s01) ? 0 : s01;\r\n\t\ts12 = isNaN(s12) ? 0 : s12;\r\n\r\n\t\tvar fa = t * s01; // scaling factor for triangle Ta\r\n\t\tvar fb = t * s12;\r\n\r\n\t\treturn {\r\n\t\t\tprevious: {\r\n\t\t\t\tx: current.x - fa * (next.x - previous.x),\r\n\t\t\t\ty: current.y - fa * (next.y - previous.y)\r\n\t\t\t},\r\n\t\t\tnext: {\r\n\t\t\t\tx: current.x + fb * (next.x - previous.x),\r\n\t\t\t\ty: current.y + fb * (next.y - previous.y)\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\thelpers$1.EPSILON = Number.EPSILON || 1e-14;\r\n\thelpers$1.splineCurveMonotone = function(points) {\r\n\t\t// This function calculates Bézier control points in a similar way than |splineCurve|,\r\n\t\t// but preserves monotonicity of the provided data and ensures no local extremums are added\r\n\t\t// between the dataset discrete points due to the interpolation.\r\n\t\t// See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\r\n\r\n\t\tvar pointsWithTangents = (points || []).map(function(point) {\r\n\t\t\treturn {\r\n\t\t\t\tmodel: point._model,\r\n\t\t\t\tdeltaK: 0,\r\n\t\t\t\tmK: 0\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\t// Calculate slopes (deltaK) and initialize tangents (mK)\r\n\t\tvar pointsLen = pointsWithTangents.length;\r\n\t\tvar i, pointBefore, pointCurrent, pointAfter;\r\n\t\tfor (i = 0; i < pointsLen; ++i) {\r\n\t\t\tpointCurrent = pointsWithTangents[i];\r\n\t\t\tif (pointCurrent.model.skip) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\r\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\r\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\r\n\t\t\t\tvar slopeDeltaX = (pointAfter.model.x - pointCurrent.model.x);\r\n\r\n\t\t\t\t// In the case of two points that appear at the same x pixel, slopeDeltaX is 0\r\n\t\t\t\tpointCurrent.deltaK = slopeDeltaX !== 0 ? (pointAfter.model.y - pointCurrent.model.y) / slopeDeltaX : 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (!pointBefore || pointBefore.model.skip) {\r\n\t\t\t\tpointCurrent.mK = pointCurrent.deltaK;\r\n\t\t\t} else if (!pointAfter || pointAfter.model.skip) {\r\n\t\t\t\tpointCurrent.mK = pointBefore.deltaK;\r\n\t\t\t} else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\r\n\t\t\t\tpointCurrent.mK = 0;\r\n\t\t\t} else {\r\n\t\t\t\tpointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Adjust tangents to ensure monotonic properties\r\n\t\tvar alphaK, betaK, tauK, squaredMagnitude;\r\n\t\tfor (i = 0; i < pointsLen - 1; ++i) {\r\n\t\t\tpointCurrent = pointsWithTangents[i];\r\n\t\t\tpointAfter = pointsWithTangents[i + 1];\r\n\t\t\tif (pointCurrent.model.skip || pointAfter.model.skip) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (helpers$1.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\r\n\t\t\t\tpointCurrent.mK = pointAfter.mK = 0;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\talphaK = pointCurrent.mK / pointCurrent.deltaK;\r\n\t\t\tbetaK = pointAfter.mK / pointCurrent.deltaK;\r\n\t\t\tsquaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\r\n\t\t\tif (squaredMagnitude <= 9) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\ttauK = 3 / Math.sqrt(squaredMagnitude);\r\n\t\t\tpointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\r\n\t\t\tpointAfter.mK = betaK * tauK * pointCurrent.deltaK;\r\n\t\t}\r\n\r\n\t\t// Compute control points\r\n\t\tvar deltaX;\r\n\t\tfor (i = 0; i < pointsLen; ++i) {\r\n\t\t\tpointCurrent = pointsWithTangents[i];\r\n\t\t\tif (pointCurrent.model.skip) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\r\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\r\n\t\t\tif (pointBefore && !pointBefore.model.skip) {\r\n\t\t\t\tdeltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\r\n\t\t\t\tpointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\r\n\t\t\t\tpointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\r\n\t\t\t}\r\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\r\n\t\t\t\tdeltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\r\n\t\t\t\tpointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\r\n\t\t\t\tpointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\thelpers$1.nextItem = function(collection, index, loop) {\r\n\t\tif (loop) {\r\n\t\t\treturn index >= collection.length - 1 ? collection[0] : collection[index + 1];\r\n\t\t}\r\n\t\treturn index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\r\n\t};\r\n\thelpers$1.previousItem = function(collection, index, loop) {\r\n\t\tif (loop) {\r\n\t\t\treturn index <= 0 ? collection[collection.length - 1] : collection[index - 1];\r\n\t\t}\r\n\t\treturn index <= 0 ? collection[0] : collection[index - 1];\r\n\t};\r\n\t// Implementation of the nice number algorithm used in determining where axis labels will go\r\n\thelpers$1.niceNum = function(range, round) {\r\n\t\tvar exponent = Math.floor(helpers$1.log10(range));\r\n\t\tvar fraction = range / Math.pow(10, exponent);\r\n\t\tvar niceFraction;\r\n\r\n\t\tif (round) {\r\n\t\t\tif (fraction < 1.5) {\r\n\t\t\t\tniceFraction = 1;\r\n\t\t\t} else if (fraction < 3) {\r\n\t\t\t\tniceFraction = 2;\r\n\t\t\t} else if (fraction < 7) {\r\n\t\t\t\tniceFraction = 5;\r\n\t\t\t} else {\r\n\t\t\t\tniceFraction = 10;\r\n\t\t\t}\r\n\t\t} else if (fraction <= 1.0) {\r\n\t\t\tniceFraction = 1;\r\n\t\t} else if (fraction <= 2) {\r\n\t\t\tniceFraction = 2;\r\n\t\t} else if (fraction <= 5) {\r\n\t\t\tniceFraction = 5;\r\n\t\t} else {\r\n\t\t\tniceFraction = 10;\r\n\t\t}\r\n\r\n\t\treturn niceFraction * Math.pow(10, exponent);\r\n\t};\r\n\t// Request animation polyfill - https://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\thelpers$1.requestAnimFrame = (function() {\r\n\t\tif (typeof window === 'undefined') {\r\n\t\t\treturn function(callback) {\r\n\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\twindow.msRequestAnimationFrame ||\r\n\t\t\tfunction(callback) {\r\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\r\n\t\t\t};\r\n\t}());\r\n\t// -- DOM methods\r\n\thelpers$1.getRelativePosition = function(evt, chart) {\r\n\t\tvar mouseX, mouseY;\r\n\t\tvar e = evt.originalEvent || evt;\r\n\t\tvar canvas = evt.target || evt.srcElement;\r\n\t\tvar boundingRect = canvas.getBoundingClientRect();\r\n\r\n\t\tvar touches = e.touches;\r\n\t\tif (touches && touches.length > 0) {\r\n\t\t\tmouseX = touches[0].clientX;\r\n\t\t\tmouseY = touches[0].clientY;\r\n\r\n\t\t} else {\r\n\t\t\tmouseX = e.clientX;\r\n\t\t\tmouseY = e.clientY;\r\n\t\t}\r\n\r\n\t\t// Scale mouse coordinates into canvas coordinates\r\n\t\t// by following the pattern laid out by 'jerryj' in the comments of\r\n\t\t// https://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\r\n\t\tvar paddingLeft = parseFloat(helpers$1.getStyle(canvas, 'padding-left'));\r\n\t\tvar paddingTop = parseFloat(helpers$1.getStyle(canvas, 'padding-top'));\r\n\t\tvar paddingRight = parseFloat(helpers$1.getStyle(canvas, 'padding-right'));\r\n\t\tvar paddingBottom = parseFloat(helpers$1.getStyle(canvas, 'padding-bottom'));\r\n\t\tvar width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\r\n\t\tvar height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom;\r\n\r\n\t\t// We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\r\n\t\t// the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\r\n\t\tmouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / (width) * canvas.width / chart.currentDevicePixelRatio);\r\n\t\tmouseY = Math.round((mouseY - boundingRect.top - paddingTop) / (height) * canvas.height / chart.currentDevicePixelRatio);\r\n\r\n\t\treturn {\r\n\t\t\tx: mouseX,\r\n\t\t\ty: mouseY\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t// Private helper function to convert max-width/max-height values that may be percentages into a number\r\n\tfunction parseMaxStyle(styleValue, node, parentProperty) {\r\n\t\tvar valueInPixels;\r\n\t\tif (typeof styleValue === 'string') {\r\n\t\t\tvalueInPixels = parseInt(styleValue, 10);\r\n\r\n\t\t\tif (styleValue.indexOf('%') !== -1) {\r\n\t\t\t\t// percentage * size in dimension\r\n\t\t\t\tvalueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvalueInPixels = styleValue;\r\n\t\t}\r\n\r\n\t\treturn valueInPixels;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if the given value contains an effective constraint.\r\n\t * @private\r\n\t */\r\n\tfunction isConstrainedValue(value) {\r\n\t\treturn value !== undefined && value !== null && value !== 'none';\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the max width or height of the given DOM node in a cross-browser compatible fashion\r\n\t * @param {HTMLElement} domNode - the node to check the constraint on\r\n\t * @param {string} maxStyle - the style that defines the maximum for the direction we are using ('max-width' / 'max-height')\r\n\t * @param {string} percentageProperty - property of parent to use when calculating width as a percentage\r\n\t * @see {@link https://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser}\r\n\t */\r\n\tfunction getConstraintDimension(domNode, maxStyle, percentageProperty) {\r\n\t\tvar view = document.defaultView;\r\n\t\tvar parentNode = helpers$1._getParentNode(domNode);\r\n\t\tvar constrainedNode = view.getComputedStyle(domNode)[maxStyle];\r\n\t\tvar constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\r\n\t\tvar hasCNode = isConstrainedValue(constrainedNode);\r\n\t\tvar hasCContainer = isConstrainedValue(constrainedContainer);\r\n\t\tvar infinity = Number.POSITIVE_INFINITY;\r\n\r\n\t\tif (hasCNode || hasCContainer) {\r\n\t\t\treturn Math.min(\r\n\t\t\t\thasCNode ? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity,\r\n\t\t\t\thasCContainer ? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\r\n\t\t}\r\n\r\n\t\treturn 'none';\r\n\t}\r\n\t// returns Number or undefined if no constraint\r\n\thelpers$1.getConstraintWidth = function(domNode) {\r\n\t\treturn getConstraintDimension(domNode, 'max-width', 'clientWidth');\r\n\t};\r\n\t// returns Number or undefined if no constraint\r\n\thelpers$1.getConstraintHeight = function(domNode) {\r\n\t\treturn getConstraintDimension(domNode, 'max-height', 'clientHeight');\r\n\t};\r\n\t/**\r\n\t * @private\r\n \t */\r\n\thelpers$1._calculatePadding = function(container, padding, parentDimension) {\r\n\t\tpadding = helpers$1.getStyle(container, padding);\r\n\r\n\t\treturn padding.indexOf('%') > -1 ? parentDimension * parseInt(padding, 10) / 100 : parseInt(padding, 10);\r\n\t};\r\n\t/**\r\n\t * @private\r\n\t */\r\n\thelpers$1._getParentNode = function(domNode) {\r\n\t\tvar parent = domNode.parentNode;\r\n\t\tif (parent && parent.toString() === '[object ShadowRoot]') {\r\n\t\t\tparent = parent.host;\r\n\t\t}\r\n\t\treturn parent;\r\n\t};\r\n\thelpers$1.getMaximumWidth = function(domNode) {\r\n\t\tvar container = helpers$1._getParentNode(domNode);\r\n\t\tif (!container) {\r\n\t\t\treturn domNode.clientWidth;\r\n\t\t}\r\n\r\n\t\tvar clientWidth = container.clientWidth;\r\n\t\tvar paddingLeft = helpers$1._calculatePadding(container, 'padding-left', clientWidth);\r\n\t\tvar paddingRight = helpers$1._calculatePadding(container, 'padding-right', clientWidth);\r\n\r\n\t\tvar w = clientWidth - paddingLeft - paddingRight;\r\n\t\tvar cw = helpers$1.getConstraintWidth(domNode);\r\n\t\treturn isNaN(cw) ? w : Math.min(w, cw);\r\n\t};\r\n\thelpers$1.getMaximumHeight = function(domNode) {\r\n\t\tvar container = helpers$1._getParentNode(domNode);\r\n\t\tif (!container) {\r\n\t\t\treturn domNode.clientHeight;\r\n\t\t}\r\n\r\n\t\tvar clientHeight = container.clientHeight;\r\n\t\tvar paddingTop = helpers$1._calculatePadding(container, 'padding-top', clientHeight);\r\n\t\tvar paddingBottom = helpers$1._calculatePadding(container, 'padding-bottom', clientHeight);\r\n\r\n\t\tvar h = clientHeight - paddingTop - paddingBottom;\r\n\t\tvar ch = helpers$1.getConstraintHeight(domNode);\r\n\t\treturn isNaN(ch) ? h : Math.min(h, ch);\r\n\t};\r\n\thelpers$1.getStyle = function(el, property) {\r\n\t\treturn el.currentStyle ?\r\n\t\t\tel.currentStyle[property] :\r\n\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\r\n\t};\r\n\thelpers$1.retinaScale = function(chart, forceRatio) {\r\n\t\tvar pixelRatio = chart.currentDevicePixelRatio = forceRatio || (typeof window !== 'undefined' && window.devicePixelRatio) || 1;\r\n\t\tif (pixelRatio === 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar canvas = chart.canvas;\r\n\t\tvar height = chart.height;\r\n\t\tvar width = chart.width;\r\n\r\n\t\tcanvas.height = height * pixelRatio;\r\n\t\tcanvas.width = width * pixelRatio;\r\n\t\tchart.ctx.scale(pixelRatio, pixelRatio);\r\n\r\n\t\t// If no style has been set on the canvas, the render size is used as display size,\r\n\t\t// making the chart visually bigger, so let's enforce it to the \"correct\" values.\r\n\t\t// See https://github.com/chartjs/Chart.js/issues/3575\r\n\t\tif (!canvas.style.height && !canvas.style.width) {\r\n\t\t\tcanvas.style.height = height + 'px';\r\n\t\t\tcanvas.style.width = width + 'px';\r\n\t\t}\r\n\t};\r\n\t// -- Canvas methods\r\n\thelpers$1.fontString = function(pixelSize, fontStyle, fontFamily) {\r\n\t\treturn fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\r\n\t};\r\n\thelpers$1.longestText = function(ctx, font, arrayOfThings, cache) {\r\n\t\tcache = cache || {};\r\n\t\tvar data = cache.data = cache.data || {};\r\n\t\tvar gc = cache.garbageCollect = cache.garbageCollect || [];\r\n\r\n\t\tif (cache.font !== font) {\r\n\t\t\tdata = cache.data = {};\r\n\t\t\tgc = cache.garbageCollect = [];\r\n\t\t\tcache.font = font;\r\n\t\t}\r\n\r\n\t\tctx.font = font;\r\n\t\tvar longest = 0;\r\n\t\tvar ilen = arrayOfThings.length;\r\n\t\tvar i, j, jlen, thing, nestedThing;\r\n\t\tfor (i = 0; i < ilen; i++) {\r\n\t\t\tthing = arrayOfThings[i];\r\n\r\n\t\t\t// Undefined strings and arrays should not be measured\r\n\t\t\tif (thing !== undefined && thing !== null && helpers$1.isArray(thing) !== true) {\r\n\t\t\t\tlongest = helpers$1.measureText(ctx, data, gc, longest, thing);\r\n\t\t\t} else if (helpers$1.isArray(thing)) {\r\n\t\t\t\t// if it is an array lets measure each element\r\n\t\t\t\t// to do maybe simplify this function a bit so we can do this more recursively?\r\n\t\t\t\tfor (j = 0, jlen = thing.length; j < jlen; j++) {\r\n\t\t\t\t\tnestedThing = thing[j];\r\n\t\t\t\t\t// Undefined strings and arrays should not be measured\r\n\t\t\t\t\tif (nestedThing !== undefined && nestedThing !== null && !helpers$1.isArray(nestedThing)) {\r\n\t\t\t\t\t\tlongest = helpers$1.measureText(ctx, data, gc, longest, nestedThing);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar gcLen = gc.length / 2;\r\n\t\tif (gcLen > arrayOfThings.length) {\r\n\t\t\tfor (i = 0; i < gcLen; i++) {\r\n\t\t\t\tdelete data[gc[i]];\r\n\t\t\t}\r\n\t\t\tgc.splice(0, gcLen);\r\n\t\t}\r\n\t\treturn longest;\r\n\t};\r\n\thelpers$1.measureText = function(ctx, data, gc, longest, string) {\r\n\t\tvar textWidth = data[string];\r\n\t\tif (!textWidth) {\r\n\t\t\ttextWidth = data[string] = ctx.measureText(string).width;\r\n\t\t\tgc.push(string);\r\n\t\t}\r\n\t\tif (textWidth > longest) {\r\n\t\t\tlongest = textWidth;\r\n\t\t}\r\n\t\treturn longest;\r\n\t};\r\n\r\n\t/**\r\n\t * @deprecated\r\n\t */\r\n\thelpers$1.numberOfLabelLines = function(arrayOfThings) {\r\n\t\tvar numberOfLines = 1;\r\n\t\thelpers$1.each(arrayOfThings, function(thing) {\r\n\t\t\tif (helpers$1.isArray(thing)) {\r\n\t\t\t\tif (thing.length > numberOfLines) {\r\n\t\t\t\t\tnumberOfLines = thing.length;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn numberOfLines;\r\n\t};\r\n\r\n\thelpers$1.color = !chartjsColor ?\r\n\t\tfunction(value) {\r\n\t\t\tconsole.error('Color.js not found!');\r\n\t\t\treturn value;\r\n\t\t} :\r\n\t\tfunction(value) {\r\n\t\t\t/* global CanvasGradient */\r\n\t\t\tif (value instanceof CanvasGradient) {\r\n\t\t\t\tvalue = core_defaults.global.defaultColor;\r\n\t\t\t}\r\n\r\n\t\t\treturn chartjsColor(value);\r\n\t\t};\r\n\r\n\thelpers$1.getHoverColor = function(colorValue) {\r\n\t\t/* global CanvasPattern */\r\n\t\treturn (colorValue instanceof CanvasPattern || colorValue instanceof CanvasGradient) ?\r\n\t\t\tcolorValue :\r\n\t\t\thelpers$1.color(colorValue).saturate(0.5).darken(0.1).rgbString();\r\n\t};\r\n};\n\nfunction abstract() {\r\n\tthrow new Error(\r\n\t\t'This method is not implemented: either no adapter can ' +\r\n\t\t'be found or an incomplete integration was provided.'\r\n\t);\r\n}\r\n\r\n/**\r\n * Date adapter (current used by the time scale)\r\n * @namespace Chart._adapters._date\r\n * @memberof Chart._adapters\r\n * @private\r\n */\r\n\r\n/**\r\n * Currently supported unit string values.\r\n * @typedef {('millisecond'|'second'|'minute'|'hour'|'day'|'week'|'month'|'quarter'|'year')}\r\n * @memberof Chart._adapters._date\r\n * @name Unit\r\n */\r\n\r\n/**\r\n * @class\r\n */\r\nfunction DateAdapter(options) {\r\n\tthis.options = options || {};\r\n}\r\n\r\nhelpers$1.extend(DateAdapter.prototype, /** @lends DateAdapter */ {\r\n\t/**\r\n\t * Returns a map of time formats for the supported formatting units defined\r\n\t * in Unit as well as 'datetime' representing a detailed date/time string.\r\n\t * @returns {{string: string}}\r\n\t */\r\n\tformats: abstract,\r\n\r\n\t/**\r\n\t * Parses the given `value` and return the associated timestamp.\r\n\t * @param {any} value - the value to parse (usually comes from the data)\r\n\t * @param {string} [format] - the expected data format\r\n\t * @returns {(number|null)}\r\n\t * @function\r\n\t */\r\n\tparse: abstract,\r\n\r\n\t/**\r\n\t * Returns the formatted date in the specified `format` for a given `timestamp`.\r\n\t * @param {number} timestamp - the timestamp to format\r\n\t * @param {string} format - the date/time token\r\n\t * @return {string}\r\n\t * @function\r\n\t */\r\n\tformat: abstract,\r\n\r\n\t/**\r\n\t * Adds the specified `amount` of `unit` to the given `timestamp`.\r\n\t * @param {number} timestamp - the input timestamp\r\n\t * @param {number} amount - the amount to add\r\n\t * @param {Unit} unit - the unit as string\r\n\t * @return {number}\r\n\t * @function\r\n\t */\r\n\tadd: abstract,\r\n\r\n\t/**\r\n\t * Returns the number of `unit` between the given timestamps.\r\n\t * @param {number} max - the input timestamp (reference)\r\n\t * @param {number} min - the timestamp to substract\r\n\t * @param {Unit} unit - the unit as string\r\n\t * @return {number}\r\n\t * @function\r\n\t */\r\n\tdiff: abstract,\r\n\r\n\t/**\r\n\t * Returns start of `unit` for the given `timestamp`.\r\n\t * @param {number} timestamp - the input timestamp\r\n\t * @param {Unit} unit - the unit as string\r\n\t * @param {number} [weekday] - the ISO day of the week with 1 being Monday\r\n\t * and 7 being Sunday (only needed if param *unit* is `isoWeek`).\r\n\t * @function\r\n\t */\r\n\tstartOf: abstract,\r\n\r\n\t/**\r\n\t * Returns end of `unit` for the given `timestamp`.\r\n\t * @param {number} timestamp - the input timestamp\r\n\t * @param {Unit} unit - the unit as string\r\n\t * @function\r\n\t */\r\n\tendOf: abstract,\r\n\r\n\t// DEPRECATIONS\r\n\r\n\t/**\r\n\t * Provided for backward compatibility for scale.getValueForPixel(),\r\n\t * this method should be overridden only by the moment adapter.\r\n\t * @deprecated since version 2.8.0\r\n\t * @todo remove at version 3\r\n\t * @private\r\n\t */\r\n\t_create: function(value) {\r\n\t\treturn value;\r\n\t}\r\n});\r\n\r\nDateAdapter.override = function(members) {\r\n\thelpers$1.extend(DateAdapter.prototype, members);\r\n};\r\n\r\nvar _date = DateAdapter;\n\nvar core_adapters = {\n\t_date: _date\n};\n\n/**\r\n * Namespace to hold static tick generation functions\r\n * @namespace Chart.Ticks\r\n */\r\nvar core_ticks = {\r\n\t/**\r\n\t * Namespace to hold formatters for different types of ticks\r\n\t * @namespace Chart.Ticks.formatters\r\n\t */\r\n\tformatters: {\r\n\t\t/**\r\n\t\t * Formatter for value labels\r\n\t\t * @method Chart.Ticks.formatters.values\r\n\t\t * @param value the value to display\r\n\t\t * @return {string|string[]} the label to display\r\n\t\t */\r\n\t\tvalues: function(value) {\r\n\t\t\treturn helpers$1.isArray(value) ? value : '' + value;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Formatter for linear numeric ticks\r\n\t\t * @method Chart.Ticks.formatters.linear\r\n\t\t * @param tickValue {number} the value to be formatted\r\n\t\t * @param index {number} the position of the tickValue parameter in the ticks array\r\n\t\t * @param ticks {number[]} the list of ticks being converted\r\n\t\t * @return {string} string representation of the tickValue parameter\r\n\t\t */\r\n\t\tlinear: function(tickValue, index, ticks) {\r\n\t\t\t// If we have lots of ticks, don't use the ones\r\n\t\t\tvar delta = ticks.length > 3 ? ticks[2] - ticks[1] : ticks[1] - ticks[0];\r\n\r\n\t\t\t// If we have a number like 2.5 as the delta, figure out how many decimal places we need\r\n\t\t\tif (Math.abs(delta) > 1) {\r\n\t\t\t\tif (tickValue !== Math.floor(tickValue)) {\r\n\t\t\t\t\t// not an integer\r\n\t\t\t\t\tdelta = tickValue - Math.floor(tickValue);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar logDelta = helpers$1.log10(Math.abs(delta));\r\n\t\t\tvar tickString = '';\r\n\r\n\t\t\tif (tickValue !== 0) {\r\n\t\t\t\tvar maxTick = Math.max(Math.abs(ticks[0]), Math.abs(ticks[ticks.length - 1]));\r\n\t\t\t\tif (maxTick < 1e-4) { // all ticks are small numbers; use scientific notation\r\n\t\t\t\t\tvar logTick = helpers$1.log10(Math.abs(tickValue));\r\n\t\t\t\t\tvar numExponential = Math.floor(logTick) - Math.floor(logDelta);\r\n\t\t\t\t\tnumExponential = Math.max(Math.min(numExponential, 20), 0);\r\n\t\t\t\t\ttickString = tickValue.toExponential(numExponential);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar numDecimal = -1 * Math.floor(logDelta);\r\n\t\t\t\t\tnumDecimal = Math.max(Math.min(numDecimal, 20), 0); // toFixed has a max of 20 decimal places\r\n\t\t\t\t\ttickString = tickValue.toFixed(numDecimal);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ttickString = '0'; // never show decimal places for 0\r\n\t\t\t}\r\n\r\n\t\t\treturn tickString;\r\n\t\t},\r\n\r\n\t\tlogarithmic: function(tickValue, index, ticks) {\r\n\t\t\tvar remain = tickValue / (Math.pow(10, Math.floor(helpers$1.log10(tickValue))));\r\n\r\n\t\t\tif (tickValue === 0) {\r\n\t\t\t\treturn '0';\r\n\t\t\t} else if (remain === 1 || remain === 2 || remain === 5 || index === 0 || index === ticks.length - 1) {\r\n\t\t\t\treturn tickValue.toExponential();\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n};\n\nvar isArray = helpers$1.isArray;\r\nvar isNullOrUndef = helpers$1.isNullOrUndef;\r\nvar valueOrDefault$a = helpers$1.valueOrDefault;\r\nvar valueAtIndexOrDefault = helpers$1.valueAtIndexOrDefault;\r\n\r\ncore_defaults._set('scale', {\r\n\tdisplay: true,\r\n\tposition: 'left',\r\n\toffset: false,\r\n\r\n\t// grid line settings\r\n\tgridLines: {\r\n\t\tdisplay: true,\r\n\t\tcolor: 'rgba(0,0,0,0.1)',\r\n\t\tlineWidth: 1,\r\n\t\tdrawBorder: true,\r\n\t\tdrawOnChartArea: true,\r\n\t\tdrawTicks: true,\r\n\t\ttickMarkLength: 10,\r\n\t\tzeroLineWidth: 1,\r\n\t\tzeroLineColor: 'rgba(0,0,0,0.25)',\r\n\t\tzeroLineBorderDash: [],\r\n\t\tzeroLineBorderDashOffset: 0.0,\r\n\t\toffsetGridLines: false,\r\n\t\tborderDash: [],\r\n\t\tborderDashOffset: 0.0\r\n\t},\r\n\r\n\t// scale label\r\n\tscaleLabel: {\r\n\t\t// display property\r\n\t\tdisplay: false,\r\n\r\n\t\t// actual label\r\n\t\tlabelString: '',\r\n\r\n\t\t// top/bottom padding\r\n\t\tpadding: {\r\n\t\t\ttop: 4,\r\n\t\t\tbottom: 4\r\n\t\t}\r\n\t},\r\n\r\n\t// label settings\r\n\tticks: {\r\n\t\tbeginAtZero: false,\r\n\t\tminRotation: 0,\r\n\t\tmaxRotation: 50,\r\n\t\tmirror: false,\r\n\t\tpadding: 0,\r\n\t\treverse: false,\r\n\t\tdisplay: true,\r\n\t\tautoSkip: true,\r\n\t\tautoSkipPadding: 0,\r\n\t\tlabelOffset: 0,\r\n\t\t// We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\r\n\t\tcallback: core_ticks.formatters.values,\r\n\t\tminor: {},\r\n\t\tmajor: {}\r\n\t}\r\n});\r\n\r\n/** Returns a new array containing numItems from arr */\r\nfunction sample(arr, numItems) {\r\n\tvar result = [];\r\n\tvar increment = arr.length / numItems;\r\n\tvar i = 0;\r\n\tvar len = arr.length;\r\n\r\n\tfor (; i < len; i += increment) {\r\n\t\tresult.push(arr[Math.floor(i)]);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction getPixelForGridLine(scale, index, offsetGridLines) {\r\n\tvar length = scale.getTicks().length;\r\n\tvar validIndex = Math.min(index, length - 1);\r\n\tvar lineValue = scale.getPixelForTick(validIndex);\r\n\tvar start = scale._startPixel;\r\n\tvar end = scale._endPixel;\r\n\tvar epsilon = 1e-6; // 1e-6 is margin in pixels for accumulated error.\r\n\tvar offset;\r\n\r\n\tif (offsetGridLines) {\r\n\t\tif (length === 1) {\r\n\t\t\toffset = Math.max(lineValue - start, end - lineValue);\r\n\t\t} else if (index === 0) {\r\n\t\t\toffset = (scale.getPixelForTick(1) - lineValue) / 2;\r\n\t\t} else {\r\n\t\t\toffset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\r\n\t\t}\r\n\t\tlineValue += validIndex < index ? offset : -offset;\r\n\r\n\t\t// Return undefined if the pixel is out of the range\r\n\t\tif (lineValue < start - epsilon || lineValue > end + epsilon) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\treturn lineValue;\r\n}\r\n\r\nfunction garbageCollect(caches, length) {\r\n\thelpers$1.each(caches, function(cache) {\r\n\t\tvar gc = cache.gc;\r\n\t\tvar gcLen = gc.length / 2;\r\n\t\tvar i;\r\n\t\tif (gcLen > length) {\r\n\t\t\tfor (i = 0; i < gcLen; ++i) {\r\n\t\t\t\tdelete cache.data[gc[i]];\r\n\t\t\t}\r\n\t\t\tgc.splice(0, gcLen);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Returns {width, height, offset} objects for the first, last, widest, highest tick\r\n * labels where offset indicates the anchor point offset from the top in pixels.\r\n */\r\nfunction computeLabelSizes(ctx, tickFonts, ticks, caches) {\r\n\tvar length = ticks.length;\r\n\tvar widths = [];\r\n\tvar heights = [];\r\n\tvar offsets = [];\r\n\tvar widestLabelSize = 0;\r\n\tvar highestLabelSize = 0;\r\n\tvar i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel, widest, highest;\r\n\r\n\tfor (i = 0; i < length; ++i) {\r\n\t\tlabel = ticks[i].label;\r\n\t\ttickFont = ticks[i].major ? tickFonts.major : tickFonts.minor;\r\n\t\tctx.font = fontString = tickFont.string;\r\n\t\tcache = caches[fontString] = caches[fontString] || {data: {}, gc: []};\r\n\t\tlineHeight = tickFont.lineHeight;\r\n\t\twidth = height = 0;\r\n\t\t// Undefined labels and arrays should not be measured\r\n\t\tif (!isNullOrUndef(label) && !isArray(label)) {\r\n\t\t\twidth = helpers$1.measureText(ctx, cache.data, cache.gc, width, label);\r\n\t\t\theight = lineHeight;\r\n\t\t} else if (isArray(label)) {\r\n\t\t\t// if it is an array let's measure each element\r\n\t\t\tfor (j = 0, jlen = label.length; j < jlen; ++j) {\r\n\t\t\t\tnestedLabel = label[j];\r\n\t\t\t\t// Undefined labels and arrays should not be measured\r\n\t\t\t\tif (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\r\n\t\t\t\t\twidth = helpers$1.measureText(ctx, cache.data, cache.gc, width, nestedLabel);\r\n\t\t\t\t\theight += lineHeight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\twidths.push(width);\r\n\t\theights.push(height);\r\n\t\toffsets.push(lineHeight / 2);\r\n\t\twidestLabelSize = Math.max(width, widestLabelSize);\r\n\t\thighestLabelSize = Math.max(height, highestLabelSize);\r\n\t}\r\n\tgarbageCollect(caches, length);\r\n\r\n\twidest = widths.indexOf(widestLabelSize);\r\n\thighest = heights.indexOf(highestLabelSize);\r\n\r\n\tfunction valueAt(idx) {\r\n\t\treturn {\r\n\t\t\twidth: widths[idx] || 0,\r\n\t\t\theight: heights[idx] || 0,\r\n\t\t\toffset: offsets[idx] || 0\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tfirst: valueAt(0),\r\n\t\tlast: valueAt(length - 1),\r\n\t\twidest: valueAt(widest),\r\n\t\thighest: valueAt(highest)\r\n\t};\r\n}\r\n\r\nfunction getTickMarkLength(options) {\r\n\treturn options.drawTicks ? options.tickMarkLength : 0;\r\n}\r\n\r\nfunction getScaleLabelHeight(options) {\r\n\tvar font, padding;\r\n\r\n\tif (!options.display) {\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfont = helpers$1.options._parseFont(options);\r\n\tpadding = helpers$1.options.toPadding(options.padding);\r\n\r\n\treturn font.lineHeight + padding.height;\r\n}\r\n\r\nfunction parseFontOptions(options, nestedOpts) {\r\n\treturn helpers$1.extend(helpers$1.options._parseFont({\r\n\t\tfontFamily: valueOrDefault$a(nestedOpts.fontFamily, options.fontFamily),\r\n\t\tfontSize: valueOrDefault$a(nestedOpts.fontSize, options.fontSize),\r\n\t\tfontStyle: valueOrDefault$a(nestedOpts.fontStyle, options.fontStyle),\r\n\t\tlineHeight: valueOrDefault$a(nestedOpts.lineHeight, options.lineHeight)\r\n\t}), {\r\n\t\tcolor: helpers$1.options.resolve([nestedOpts.fontColor, options.fontColor, core_defaults.global.defaultFontColor])\r\n\t});\r\n}\r\n\r\nfunction parseTickFontOptions(options) {\r\n\tvar minor = parseFontOptions(options, options.minor);\r\n\tvar major = options.major.enabled ? parseFontOptions(options, options.major) : minor;\r\n\r\n\treturn {minor: minor, major: major};\r\n}\r\n\r\nfunction nonSkipped(ticksToFilter) {\r\n\tvar filtered = [];\r\n\tvar item, index, len;\r\n\tfor (index = 0, len = ticksToFilter.length; index < len; ++index) {\r\n\t\titem = ticksToFilter[index];\r\n\t\tif (typeof item._index !== 'undefined') {\r\n\t\t\tfiltered.push(item);\r\n\t\t}\r\n\t}\r\n\treturn filtered;\r\n}\r\n\r\nfunction getEvenSpacing(arr) {\r\n\tvar len = arr.length;\r\n\tvar i, diff;\r\n\r\n\tif (len < 2) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfor (diff = arr[0], i = 1; i < len; ++i) {\r\n\t\tif (arr[i] - arr[i - 1] !== diff) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn diff;\r\n}\r\n\r\nfunction calculateSpacing(majorIndices, ticks, axisLength, ticksLimit) {\r\n\tvar evenMajorSpacing = getEvenSpacing(majorIndices);\r\n\tvar spacing = (ticks.length - 1) / ticksLimit;\r\n\tvar factors, factor, i, ilen;\r\n\r\n\t// If the major ticks are evenly spaced apart, place the minor ticks\r\n\t// so that they divide the major ticks into even chunks\r\n\tif (!evenMajorSpacing) {\r\n\t\treturn Math.max(spacing, 1);\r\n\t}\r\n\r\n\tfactors = helpers$1.math._factorize(evenMajorSpacing);\r\n\tfor (i = 0, ilen = factors.length - 1; i < ilen; i++) {\r\n\t\tfactor = factors[i];\r\n\t\tif (factor > spacing) {\r\n\t\t\treturn factor;\r\n\t\t}\r\n\t}\r\n\treturn Math.max(spacing, 1);\r\n}\r\n\r\nfunction getMajorIndices(ticks) {\r\n\tvar result = [];\r\n\tvar i, ilen;\r\n\tfor (i = 0, ilen = ticks.length; i < ilen; i++) {\r\n\t\tif (ticks[i].major) {\r\n\t\t\tresult.push(i);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction skipMajors(ticks, majorIndices, spacing) {\r\n\tvar count = 0;\r\n\tvar next = majorIndices[0];\r\n\tvar i, tick;\r\n\r\n\tspacing = Math.ceil(spacing);\r\n\tfor (i = 0; i < ticks.length; i++) {\r\n\t\ttick = ticks[i];\r\n\t\tif (i === next) {\r\n\t\t\ttick._index = i;\r\n\t\t\tcount++;\r\n\t\t\tnext = majorIndices[count * spacing];\r\n\t\t} else {\r\n\t\t\tdelete tick.label;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction skip(ticks, spacing, majorStart, majorEnd) {\r\n\tvar start = valueOrDefault$a(majorStart, 0);\r\n\tvar end = Math.min(valueOrDefault$a(majorEnd, ticks.length), ticks.length);\r\n\tvar count = 0;\r\n\tvar length, i, tick, next;\r\n\r\n\tspacing = Math.ceil(spacing);\r\n\tif (majorEnd) {\r\n\t\tlength = majorEnd - majorStart;\r\n\t\tspacing = length / Math.floor(length / spacing);\r\n\t}\r\n\r\n\tnext = start;\r\n\r\n\twhile (next < 0) {\r\n\t\tcount++;\r\n\t\tnext = Math.round(start + count * spacing);\r\n\t}\r\n\r\n\tfor (i = Math.max(start, 0); i < end; i++) {\r\n\t\ttick = ticks[i];\r\n\t\tif (i === next) {\r\n\t\t\ttick._index = i;\r\n\t\t\tcount++;\r\n\t\t\tnext = Math.round(start + count * spacing);\r\n\t\t} else {\r\n\t\t\tdelete tick.label;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar Scale = core_element.extend({\r\n\r\n\tzeroLineIndex: 0,\r\n\r\n\t/**\r\n\t * Get the padding needed for the scale\r\n\t * @method getPadding\r\n\t * @private\r\n\t * @returns {Padding} the necessary padding\r\n\t */\r\n\tgetPadding: function() {\r\n\t\tvar me = this;\r\n\t\treturn {\r\n\t\t\tleft: me.paddingLeft || 0,\r\n\t\t\ttop: me.paddingTop || 0,\r\n\t\t\tright: me.paddingRight || 0,\r\n\t\t\tbottom: me.paddingBottom || 0\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the scale tick objects ({label, major})\r\n\t * @since 2.7\r\n\t */\r\n\tgetTicks: function() {\r\n\t\treturn this._ticks;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getLabels: function() {\r\n\t\tvar data = this.chart.data;\r\n\t\treturn this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\r\n\t},\r\n\r\n\t// These methods are ordered by lifecyle. Utilities then follow.\r\n\t// Any function defined here is inherited by all scale types.\r\n\t// Any function can be extended by the scale type\r\n\r\n\t/**\r\n\t * Provided for backward compatibility, not available anymore\r\n\t * @function Chart.Scale.mergeTicksOptions\r\n\t * @deprecated since version 2.8.0\r\n\t * @todo remove at version 3\r\n\t */\r\n\tmergeTicksOptions: function() {\r\n\t\t// noop\r\n\t},\r\n\r\n\tbeforeUpdate: function() {\r\n\t\thelpers$1.callback(this.options.beforeUpdate, [this]);\r\n\t},\r\n\r\n\t/**\r\n\t * @param {number} maxWidth - the max width in pixels\r\n\t * @param {number} maxHeight - the max height in pixels\r\n\t * @param {object} margins - the space between the edge of the other scales and edge of the chart\r\n\t *   This space comes from two sources:\r\n\t *     - padding - space that's required to show the labels at the edges of the scale\r\n\t *     - thickness of scales or legends in another orientation\r\n\t */\r\n\tupdate: function(maxWidth, maxHeight, margins) {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar sampleSize = tickOpts.sampleSize;\r\n\t\tvar i, ilen, labels, ticks, samplingEnabled;\r\n\r\n\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\r\n\t\tme.beforeUpdate();\r\n\r\n\t\t// Absorb the master measurements\r\n\t\tme.maxWidth = maxWidth;\r\n\t\tme.maxHeight = maxHeight;\r\n\t\tme.margins = helpers$1.extend({\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tbottom: 0\r\n\t\t}, margins);\r\n\r\n\t\tme._ticks = null;\r\n\t\tme.ticks = null;\r\n\t\tme._labelSizes = null;\r\n\t\tme._maxLabelLines = 0;\r\n\t\tme.longestLabelWidth = 0;\r\n\t\tme.longestTextCache = me.longestTextCache || {};\r\n\t\tme._gridLineItems = null;\r\n\t\tme._labelItems = null;\r\n\r\n\t\t// Dimensions\r\n\t\tme.beforeSetDimensions();\r\n\t\tme.setDimensions();\r\n\t\tme.afterSetDimensions();\r\n\r\n\t\t// Data min/max\r\n\t\tme.beforeDataLimits();\r\n\t\tme.determineDataLimits();\r\n\t\tme.afterDataLimits();\r\n\r\n\t\t// Ticks - `this.ticks` is now DEPRECATED!\r\n\t\t// Internal ticks are now stored as objects in the PRIVATE `this._ticks` member\r\n\t\t// and must not be accessed directly from outside this class. `this.ticks` being\r\n\t\t// around for long time and not marked as private, we can't change its structure\r\n\t\t// without unexpected breaking changes. If you need to access the scale ticks,\r\n\t\t// use scale.getTicks() instead.\r\n\r\n\t\tme.beforeBuildTicks();\r\n\r\n\t\t// New implementations should return an array of objects but for BACKWARD COMPAT,\r\n\t\t// we still support no return (`this.ticks` internally set by calling this method).\r\n\t\tticks = me.buildTicks() || [];\r\n\r\n\t\t// Allow modification of ticks in callback.\r\n\t\tticks = me.afterBuildTicks(ticks) || ticks;\r\n\r\n\t\t// Ensure ticks contains ticks in new tick format\r\n\t\tif ((!ticks || !ticks.length) && me.ticks) {\r\n\t\t\tticks = [];\r\n\t\t\tfor (i = 0, ilen = me.ticks.length; i < ilen; ++i) {\r\n\t\t\t\tticks.push({\r\n\t\t\t\t\tvalue: me.ticks[i],\r\n\t\t\t\t\tmajor: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme._ticks = ticks;\r\n\r\n\t\t// Compute tick rotation and fit using a sampled subset of labels\r\n\t\t// We generally don't need to compute the size of every single label for determining scale size\r\n\t\tsamplingEnabled = sampleSize < ticks.length;\r\n\t\tlabels = me._convertTicksToLabels(samplingEnabled ? sample(ticks, sampleSize) : ticks);\r\n\r\n\t\t// _configure is called twice, once here, once from core.controller.updateLayout.\r\n\t\t// Here we haven't been positioned yet, but dimensions are correct.\r\n\t\t// Variables set in _configure are needed for calculateTickRotation, and\r\n\t\t// it's ok that coordinates are not correct there, only dimensions matter.\r\n\t\tme._configure();\r\n\r\n\t\t// Tick Rotation\r\n\t\tme.beforeCalculateTickRotation();\r\n\t\tme.calculateTickRotation();\r\n\t\tme.afterCalculateTickRotation();\r\n\r\n\t\tme.beforeFit();\r\n\t\tme.fit();\r\n\t\tme.afterFit();\r\n\r\n\t\t// Auto-skip\r\n\t\tme._ticksToDraw = tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto') ? me._autoSkip(ticks) : ticks;\r\n\r\n\t\tif (samplingEnabled) {\r\n\t\t\t// Generate labels using all non-skipped ticks\r\n\t\t\tlabels = me._convertTicksToLabels(me._ticksToDraw);\r\n\t\t}\r\n\r\n\t\tme.ticks = labels;   // BACKWARD COMPATIBILITY\r\n\r\n\t\t// IMPORTANT: after this point, we consider that `this.ticks` will NEVER change!\r\n\r\n\t\tme.afterUpdate();\r\n\r\n\t\t// TODO(v3): remove minSize as a public property and return value from all layout boxes. It is unused\r\n\t\t// make maxWidth and maxHeight private\r\n\t\treturn me.minSize;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tvar reversePixels = me.options.ticks.reverse;\r\n\t\tvar startPixel, endPixel;\r\n\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\tstartPixel = me.left;\r\n\t\t\tendPixel = me.right;\r\n\t\t} else {\r\n\t\t\tstartPixel = me.top;\r\n\t\t\tendPixel = me.bottom;\r\n\t\t\t// by default vertical scales are from bottom to top, so pixels are reversed\r\n\t\t\treversePixels = !reversePixels;\r\n\t\t}\r\n\t\tme._startPixel = startPixel;\r\n\t\tme._endPixel = endPixel;\r\n\t\tme._reversePixels = reversePixels;\r\n\t\tme._length = endPixel - startPixel;\r\n\t},\r\n\r\n\tafterUpdate: function() {\r\n\t\thelpers$1.callback(this.options.afterUpdate, [this]);\r\n\t},\r\n\r\n\t//\r\n\r\n\tbeforeSetDimensions: function() {\r\n\t\thelpers$1.callback(this.options.beforeSetDimensions, [this]);\r\n\t},\r\n\tsetDimensions: function() {\r\n\t\tvar me = this;\r\n\t\t// Set the unconstrained dimension before label rotation\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.width = me.maxWidth;\r\n\t\t\tme.left = 0;\r\n\t\t\tme.right = me.width;\r\n\t\t} else {\r\n\t\t\tme.height = me.maxHeight;\r\n\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.top = 0;\r\n\t\t\tme.bottom = me.height;\r\n\t\t}\r\n\r\n\t\t// Reset padding\r\n\t\tme.paddingLeft = 0;\r\n\t\tme.paddingTop = 0;\r\n\t\tme.paddingRight = 0;\r\n\t\tme.paddingBottom = 0;\r\n\t},\r\n\tafterSetDimensions: function() {\r\n\t\thelpers$1.callback(this.options.afterSetDimensions, [this]);\r\n\t},\r\n\r\n\t// Data limits\r\n\tbeforeDataLimits: function() {\r\n\t\thelpers$1.callback(this.options.beforeDataLimits, [this]);\r\n\t},\r\n\tdetermineDataLimits: helpers$1.noop,\r\n\tafterDataLimits: function() {\r\n\t\thelpers$1.callback(this.options.afterDataLimits, [this]);\r\n\t},\r\n\r\n\t//\r\n\tbeforeBuildTicks: function() {\r\n\t\thelpers$1.callback(this.options.beforeBuildTicks, [this]);\r\n\t},\r\n\tbuildTicks: helpers$1.noop,\r\n\tafterBuildTicks: function(ticks) {\r\n\t\tvar me = this;\r\n\t\t// ticks is empty for old axis implementations here\r\n\t\tif (isArray(ticks) && ticks.length) {\r\n\t\t\treturn helpers$1.callback(me.options.afterBuildTicks, [me, ticks]);\r\n\t\t}\r\n\t\t// Support old implementations (that modified `this.ticks` directly in buildTicks)\r\n\t\tme.ticks = helpers$1.callback(me.options.afterBuildTicks, [me, me.ticks]) || me.ticks;\r\n\t\treturn ticks;\r\n\t},\r\n\r\n\tbeforeTickToLabelConversion: function() {\r\n\t\thelpers$1.callback(this.options.beforeTickToLabelConversion, [this]);\r\n\t},\r\n\tconvertTicksToLabels: function() {\r\n\t\tvar me = this;\r\n\t\t// Convert ticks to strings\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tme.ticks = me.ticks.map(tickOpts.userCallback || tickOpts.callback, this);\r\n\t},\r\n\tafterTickToLabelConversion: function() {\r\n\t\thelpers$1.callback(this.options.afterTickToLabelConversion, [this]);\r\n\t},\r\n\r\n\t//\r\n\r\n\tbeforeCalculateTickRotation: function() {\r\n\t\thelpers$1.callback(this.options.beforeCalculateTickRotation, [this]);\r\n\t},\r\n\tcalculateTickRotation: function() {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar tickOpts = options.ticks;\r\n\t\tvar numTicks = me.getTicks().length;\r\n\t\tvar minRotation = tickOpts.minRotation || 0;\r\n\t\tvar maxRotation = tickOpts.maxRotation;\r\n\t\tvar labelRotation = minRotation;\r\n\t\tvar labelSizes, maxLabelWidth, maxLabelHeight, maxWidth, tickWidth, maxHeight, maxLabelDiagonal;\r\n\r\n\t\tif (!me._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !me.isHorizontal()) {\r\n\t\t\tme.labelRotation = minRotation;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlabelSizes = me._getLabelSizes();\r\n\t\tmaxLabelWidth = labelSizes.widest.width;\r\n\t\tmaxLabelHeight = labelSizes.highest.height - labelSizes.highest.offset;\r\n\r\n\t\t// Estimate the width of each grid based on the canvas width, the maximum\r\n\t\t// label width and the number of tick intervals\r\n\t\tmaxWidth = Math.min(me.maxWidth, me.chart.width - maxLabelWidth);\r\n\t\ttickWidth = options.offset ? me.maxWidth / numTicks : maxWidth / (numTicks - 1);\r\n\r\n\t\t// Allow 3 pixels x2 padding either side for label readability\r\n\t\tif (maxLabelWidth + 6 > tickWidth) {\r\n\t\t\ttickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\r\n\t\t\tmaxHeight = me.maxHeight - getTickMarkLength(options.gridLines)\r\n\t\t\t\t- tickOpts.padding - getScaleLabelHeight(options.scaleLabel);\r\n\t\t\tmaxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\r\n\t\t\tlabelRotation = helpers$1.toDegrees(Math.min(\r\n\t\t\t\tMath.asin(Math.min((labelSizes.highest.height + 6) / tickWidth, 1)),\r\n\t\t\t\tMath.asin(Math.min(maxHeight / maxLabelDiagonal, 1)) - Math.asin(maxLabelHeight / maxLabelDiagonal)\r\n\t\t\t));\r\n\t\t\tlabelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\r\n\t\t}\r\n\r\n\t\tme.labelRotation = labelRotation;\r\n\t},\r\n\tafterCalculateTickRotation: function() {\r\n\t\thelpers$1.callback(this.options.afterCalculateTickRotation, [this]);\r\n\t},\r\n\r\n\t//\r\n\r\n\tbeforeFit: function() {\r\n\t\thelpers$1.callback(this.options.beforeFit, [this]);\r\n\t},\r\n\tfit: function() {\r\n\t\tvar me = this;\r\n\t\t// Reset\r\n\t\tvar minSize = me.minSize = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0\r\n\t\t};\r\n\r\n\t\tvar chart = me.chart;\r\n\t\tvar opts = me.options;\r\n\t\tvar tickOpts = opts.ticks;\r\n\t\tvar scaleLabelOpts = opts.scaleLabel;\r\n\t\tvar gridLineOpts = opts.gridLines;\r\n\t\tvar display = me._isVisible();\r\n\t\tvar isBottom = opts.position === 'bottom';\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\r\n\t\t// Width\r\n\t\tif (isHorizontal) {\r\n\t\t\tminSize.width = me.maxWidth;\r\n\t\t} else if (display) {\r\n\t\t\tminSize.width = getTickMarkLength(gridLineOpts) + getScaleLabelHeight(scaleLabelOpts);\r\n\t\t}\r\n\r\n\t\t// height\r\n\t\tif (!isHorizontal) {\r\n\t\t\tminSize.height = me.maxHeight; // fill all the height\r\n\t\t} else if (display) {\r\n\t\t\tminSize.height = getTickMarkLength(gridLineOpts) + getScaleLabelHeight(scaleLabelOpts);\r\n\t\t}\r\n\r\n\t\t// Don't bother fitting the ticks if we are not showing the labels\r\n\t\tif (tickOpts.display && display) {\r\n\t\t\tvar tickFonts = parseTickFontOptions(tickOpts);\r\n\t\t\tvar labelSizes = me._getLabelSizes();\r\n\t\t\tvar firstLabelSize = labelSizes.first;\r\n\t\t\tvar lastLabelSize = labelSizes.last;\r\n\t\t\tvar widestLabelSize = labelSizes.widest;\r\n\t\t\tvar highestLabelSize = labelSizes.highest;\r\n\t\t\tvar lineSpace = tickFonts.minor.lineHeight * 0.4;\r\n\t\t\tvar tickPadding = tickOpts.padding;\r\n\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\t// A horizontal axis is more constrained by the height.\r\n\t\t\t\tvar isRotated = me.labelRotation !== 0;\r\n\t\t\t\tvar angleRadians = helpers$1.toRadians(me.labelRotation);\r\n\t\t\t\tvar cosRotation = Math.cos(angleRadians);\r\n\t\t\t\tvar sinRotation = Math.sin(angleRadians);\r\n\r\n\t\t\t\tvar labelHeight = sinRotation * widestLabelSize.width\r\n\t\t\t\t\t+ cosRotation * (highestLabelSize.height - (isRotated ? highestLabelSize.offset : 0))\r\n\t\t\t\t\t+ (isRotated ? 0 : lineSpace); // padding\r\n\r\n\t\t\t\tminSize.height = Math.min(me.maxHeight, minSize.height + labelHeight + tickPadding);\r\n\r\n\t\t\t\tvar offsetLeft = me.getPixelForTick(0) - me.left;\r\n\t\t\t\tvar offsetRight = me.right - me.getPixelForTick(me.getTicks().length - 1);\r\n\t\t\t\tvar paddingLeft, paddingRight;\r\n\r\n\t\t\t\t// Ensure that our ticks are always inside the canvas. When rotated, ticks are right aligned\r\n\t\t\t\t// which means that the right padding is dominated by the font height\r\n\t\t\t\tif (isRotated) {\r\n\t\t\t\t\tpaddingLeft = isBottom ?\r\n\t\t\t\t\t\tcosRotation * firstLabelSize.width + sinRotation * firstLabelSize.offset :\r\n\t\t\t\t\t\tsinRotation * (firstLabelSize.height - firstLabelSize.offset);\r\n\t\t\t\t\tpaddingRight = isBottom ?\r\n\t\t\t\t\t\tsinRotation * (lastLabelSize.height - lastLabelSize.offset) :\r\n\t\t\t\t\t\tcosRotation * lastLabelSize.width + sinRotation * lastLabelSize.offset;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpaddingLeft = firstLabelSize.width / 2;\r\n\t\t\t\t\tpaddingRight = lastLabelSize.width / 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Adjust padding taking into account changes in offsets\r\n\t\t\t\t// and add 3 px to move away from canvas edges\r\n\t\t\t\tme.paddingLeft = Math.max((paddingLeft - offsetLeft) * me.width / (me.width - offsetLeft), 0) + 3;\r\n\t\t\t\tme.paddingRight = Math.max((paddingRight - offsetRight) * me.width / (me.width - offsetRight), 0) + 3;\r\n\t\t\t} else {\r\n\t\t\t\t// A vertical axis is more constrained by the width. Labels are the\r\n\t\t\t\t// dominant factor here, so get that length first and account for padding\r\n\t\t\t\tvar labelWidth = tickOpts.mirror ? 0 :\r\n\t\t\t\t\t// use lineSpace for consistency with horizontal axis\r\n\t\t\t\t\t// tickPadding is not implemented for horizontal\r\n\t\t\t\t\twidestLabelSize.width + tickPadding + lineSpace;\r\n\r\n\t\t\t\tminSize.width = Math.min(me.maxWidth, minSize.width + labelWidth);\r\n\r\n\t\t\t\tme.paddingTop = firstLabelSize.height / 2;\r\n\t\t\t\tme.paddingBottom = lastLabelSize.height / 2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.handleMargins();\r\n\r\n\t\tif (isHorizontal) {\r\n\t\t\tme.width = me._length = chart.width - me.margins.left - me.margins.right;\r\n\t\t\tme.height = minSize.height;\r\n\t\t} else {\r\n\t\t\tme.width = minSize.width;\r\n\t\t\tme.height = me._length = chart.height - me.margins.top - me.margins.bottom;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Handle margins and padding interactions\r\n\t * @private\r\n\t */\r\n\thandleMargins: function() {\r\n\t\tvar me = this;\r\n\t\tif (me.margins) {\r\n\t\t\tme.margins.left = Math.max(me.paddingLeft, me.margins.left);\r\n\t\t\tme.margins.top = Math.max(me.paddingTop, me.margins.top);\r\n\t\t\tme.margins.right = Math.max(me.paddingRight, me.margins.right);\r\n\t\t\tme.margins.bottom = Math.max(me.paddingBottom, me.margins.bottom);\r\n\t\t}\r\n\t},\r\n\r\n\tafterFit: function() {\r\n\t\thelpers$1.callback(this.options.afterFit, [this]);\r\n\t},\r\n\r\n\t// Shared Methods\r\n\tisHorizontal: function() {\r\n\t\tvar pos = this.options.position;\r\n\t\treturn pos === 'top' || pos === 'bottom';\r\n\t},\r\n\tisFullWidth: function() {\r\n\t\treturn this.options.fullWidth;\r\n\t},\r\n\r\n\t// Get the correct value. NaN bad inputs, If the value type is object get the x or y based on whether we are horizontal or not\r\n\tgetRightValue: function(rawValue) {\r\n\t\t// Null and undefined values first\r\n\t\tif (isNullOrUndef(rawValue)) {\r\n\t\t\treturn NaN;\r\n\t\t}\r\n\t\t// isNaN(object) returns true, so make sure NaN is checking for a number; Discard Infinite values\r\n\t\tif ((typeof rawValue === 'number' || rawValue instanceof Number) && !isFinite(rawValue)) {\r\n\t\t\treturn NaN;\r\n\t\t}\r\n\r\n\t\t// If it is in fact an object, dive in one more level\r\n\t\tif (rawValue) {\r\n\t\t\tif (this.isHorizontal()) {\r\n\t\t\t\tif (rawValue.x !== undefined) {\r\n\t\t\t\t\treturn this.getRightValue(rawValue.x);\r\n\t\t\t\t}\r\n\t\t\t} else if (rawValue.y !== undefined) {\r\n\t\t\t\treturn this.getRightValue(rawValue.y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Value is good, return it\r\n\t\treturn rawValue;\r\n\t},\r\n\r\n\t_convertTicksToLabels: function(ticks) {\r\n\t\tvar me = this;\r\n\t\tvar labels, i, ilen;\r\n\r\n\t\tme.ticks = ticks.map(function(tick) {\r\n\t\t\treturn tick.value;\r\n\t\t});\r\n\r\n\t\tme.beforeTickToLabelConversion();\r\n\r\n\t\t// New implementations should return the formatted tick labels but for BACKWARD\r\n\t\t// COMPAT, we still support no return (`this.ticks` internally changed by calling\r\n\t\t// this method and supposed to contain only string values).\r\n\t\tlabels = me.convertTicksToLabels(ticks) || me.ticks;\r\n\r\n\t\tme.afterTickToLabelConversion();\r\n\r\n\t\t// BACKWARD COMPAT: synchronize `_ticks` with labels (so potentially `this.ticks`)\r\n\t\tfor (i = 0, ilen = ticks.length; i < ilen; ++i) {\r\n\t\t\tticks[i].label = labels[i];\r\n\t\t}\r\n\r\n\t\treturn labels;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getLabelSizes: function() {\r\n\t\tvar me = this;\r\n\t\tvar labelSizes = me._labelSizes;\r\n\r\n\t\tif (!labelSizes) {\r\n\t\t\tme._labelSizes = labelSizes = computeLabelSizes(me.ctx, parseTickFontOptions(me.options.ticks), me.getTicks(), me.longestTextCache);\r\n\t\t\tme.longestLabelWidth = labelSizes.widest.width;\r\n\t\t}\r\n\r\n\t\treturn labelSizes;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_parseValue: function(value) {\r\n\t\tvar start, end, min, max;\r\n\r\n\t\tif (isArray(value)) {\r\n\t\t\tstart = +this.getRightValue(value[0]);\r\n\t\t\tend = +this.getRightValue(value[1]);\r\n\t\t\tmin = Math.min(start, end);\r\n\t\t\tmax = Math.max(start, end);\r\n\t\t} else {\r\n\t\t\tvalue = +this.getRightValue(value);\r\n\t\t\tstart = undefined;\r\n\t\t\tend = value;\r\n\t\t\tmin = value;\r\n\t\t\tmax = value;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tmin: min,\r\n\t\t\tmax: max,\r\n\t\t\tstart: start,\r\n\t\t\tend: end\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getScaleLabel: function(rawValue) {\r\n\t\tvar v = this._parseValue(rawValue);\r\n\t\tif (v.start !== undefined) {\r\n\t\t\treturn '[' + v.start + ', ' + v.end + ']';\r\n\t\t}\r\n\r\n\t\treturn +this.getRightValue(rawValue);\r\n\t},\r\n\r\n\t/**\r\n\t * Used to get the value to display in the tooltip for the data at the given index\r\n\t * @param index\r\n\t * @param datasetIndex\r\n\t */\r\n\tgetLabelForIndex: helpers$1.noop,\r\n\r\n\t/**\r\n\t * Returns the location of the given data point. Value can either be an index or a numerical value\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t * @param value\r\n\t * @param index\r\n\t * @param datasetIndex\r\n\t */\r\n\tgetPixelForValue: helpers$1.noop,\r\n\r\n\t/**\r\n\t * Used to get the data value from a given pixel. This is the inverse of getPixelForValue\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t * @param pixel\r\n\t */\r\n\tgetValueForPixel: helpers$1.noop,\r\n\r\n\t/**\r\n\t * Returns the location of the tick at the given index\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t */\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar offset = me.options.offset;\r\n\t\tvar numTicks = me._ticks.length;\r\n\t\tvar tickWidth = 1 / Math.max(numTicks - (offset ? 0 : 1), 1);\r\n\r\n\t\treturn index < 0 || index > numTicks - 1\r\n\t\t\t? null\r\n\t\t\t: me.getPixelForDecimal(index * tickWidth + (offset ? tickWidth / 2 : 0));\r\n\t},\r\n\r\n\t/**\r\n\t * Utility for getting the pixel location of a percentage of scale\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t */\r\n\tgetPixelForDecimal: function(decimal) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (me._reversePixels) {\r\n\t\t\tdecimal = 1 - decimal;\r\n\t\t}\r\n\r\n\t\treturn me._startPixel + decimal * me._length;\r\n\t},\r\n\r\n\tgetDecimalForPixel: function(pixel) {\r\n\t\tvar decimal = (pixel - this._startPixel) / this._length;\r\n\t\treturn this._reversePixels ? 1 - decimal : decimal;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the pixel for the minimum chart value\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t */\r\n\tgetBasePixel: function() {\r\n\t\treturn this.getPixelForValue(this.getBaseValue());\r\n\t},\r\n\r\n\tgetBaseValue: function() {\r\n\t\tvar me = this;\r\n\t\tvar min = me.min;\r\n\t\tvar max = me.max;\r\n\r\n\t\treturn me.beginAtZero ? 0 :\r\n\t\t\tmin < 0 && max < 0 ? max :\r\n\t\t\tmin > 0 && max > 0 ? min :\r\n\t\t\t0;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns a subset of ticks to be plotted to avoid overlapping labels.\r\n\t * @private\r\n\t */\r\n\t_autoSkip: function(ticks) {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar axisLength = me._length;\r\n\t\tvar ticksLimit = tickOpts.maxTicksLimit || axisLength / me._tickSize() + 1;\r\n\t\tvar majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\r\n\t\tvar numMajorIndices = majorIndices.length;\r\n\t\tvar first = majorIndices[0];\r\n\t\tvar last = majorIndices[numMajorIndices - 1];\r\n\t\tvar i, ilen, spacing, avgMajorSpacing;\r\n\r\n\t\t// If there are too many major ticks to display them all\r\n\t\tif (numMajorIndices > ticksLimit) {\r\n\t\t\tskipMajors(ticks, majorIndices, numMajorIndices / ticksLimit);\r\n\t\t\treturn nonSkipped(ticks);\r\n\t\t}\r\n\r\n\t\tspacing = calculateSpacing(majorIndices, ticks, axisLength, ticksLimit);\r\n\r\n\t\tif (numMajorIndices > 0) {\r\n\t\t\tfor (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {\r\n\t\t\t\tskip(ticks, spacing, majorIndices[i], majorIndices[i + 1]);\r\n\t\t\t}\r\n\t\t\tavgMajorSpacing = numMajorIndices > 1 ? (last - first) / (numMajorIndices - 1) : null;\r\n\t\t\tskip(ticks, spacing, helpers$1.isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\r\n\t\t\tskip(ticks, spacing, last, helpers$1.isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\r\n\t\t\treturn nonSkipped(ticks);\r\n\t\t}\r\n\t\tskip(ticks, spacing);\r\n\t\treturn nonSkipped(ticks);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_tickSize: function() {\r\n\t\tvar me = this;\r\n\t\tvar optionTicks = me.options.ticks;\r\n\r\n\t\t// Calculate space needed by label in axis direction.\r\n\t\tvar rot = helpers$1.toRadians(me.labelRotation);\r\n\t\tvar cos = Math.abs(Math.cos(rot));\r\n\t\tvar sin = Math.abs(Math.sin(rot));\r\n\r\n\t\tvar labelSizes = me._getLabelSizes();\r\n\t\tvar padding = optionTicks.autoSkipPadding || 0;\r\n\t\tvar w = labelSizes ? labelSizes.widest.width + padding : 0;\r\n\t\tvar h = labelSizes ? labelSizes.highest.height + padding : 0;\r\n\r\n\t\t// Calculate space needed for 1 tick in axis direction.\r\n\t\treturn me.isHorizontal()\r\n\t\t\t? h * cos > w * sin ? w / cos : h / sin\r\n\t\t\t: h * sin < w * cos ? h / cos : w / sin;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_isVisible: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar display = me.options.display;\r\n\t\tvar i, ilen, meta;\r\n\r\n\t\tif (display !== 'auto') {\r\n\t\t\treturn !!display;\r\n\t\t}\r\n\r\n\t\t// When 'auto', the scale is visible if at least one associated dataset is visible.\r\n\t\tfor (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\r\n\t\t\tif (chart.isDatasetVisible(i)) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\tif (meta.xAxisID === me.id || meta.yAxisID === me.id) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_computeGridLineItems: function(chartArea) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar options = me.options;\r\n\t\tvar gridLines = options.gridLines;\r\n\t\tvar position = options.position;\r\n\t\tvar offsetGridLines = gridLines.offsetGridLines;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tvar ticks = me._ticksToDraw;\r\n\t\tvar ticksLength = ticks.length + (offsetGridLines ? 1 : 0);\r\n\r\n\t\tvar tl = getTickMarkLength(gridLines);\r\n\t\tvar items = [];\r\n\t\tvar axisWidth = gridLines.drawBorder ? valueAtIndexOrDefault(gridLines.lineWidth, 0, 0) : 0;\r\n\t\tvar axisHalfWidth = axisWidth / 2;\r\n\t\tvar alignPixel = helpers$1._alignPixel;\r\n\t\tvar alignBorderValue = function(pixel) {\r\n\t\t\treturn alignPixel(chart, pixel, axisWidth);\r\n\t\t};\r\n\t\tvar borderValue, i, tick, lineValue, alignedLineValue;\r\n\t\tvar tx1, ty1, tx2, ty2, x1, y1, x2, y2, lineWidth, lineColor, borderDash, borderDashOffset;\r\n\r\n\t\tif (position === 'top') {\r\n\t\t\tborderValue = alignBorderValue(me.bottom);\r\n\t\t\tty1 = me.bottom - tl;\r\n\t\t\tty2 = borderValue - axisHalfWidth;\r\n\t\t\ty1 = alignBorderValue(chartArea.top) + axisHalfWidth;\r\n\t\t\ty2 = chartArea.bottom;\r\n\t\t} else if (position === 'bottom') {\r\n\t\t\tborderValue = alignBorderValue(me.top);\r\n\t\t\ty1 = chartArea.top;\r\n\t\t\ty2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\r\n\t\t\tty1 = borderValue + axisHalfWidth;\r\n\t\t\tty2 = me.top + tl;\r\n\t\t} else if (position === 'left') {\r\n\t\t\tborderValue = alignBorderValue(me.right);\r\n\t\t\ttx1 = me.right - tl;\r\n\t\t\ttx2 = borderValue - axisHalfWidth;\r\n\t\t\tx1 = alignBorderValue(chartArea.left) + axisHalfWidth;\r\n\t\t\tx2 = chartArea.right;\r\n\t\t} else {\r\n\t\t\tborderValue = alignBorderValue(me.left);\r\n\t\t\tx1 = chartArea.left;\r\n\t\t\tx2 = alignBorderValue(chartArea.right) - axisHalfWidth;\r\n\t\t\ttx1 = borderValue + axisHalfWidth;\r\n\t\t\ttx2 = me.left + tl;\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < ticksLength; ++i) {\r\n\t\t\ttick = ticks[i] || {};\r\n\r\n\t\t\t// autoskipper skipped this tick (#4635)\r\n\t\t\tif (isNullOrUndef(tick.label) && i < ticks.length) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (i === me.zeroLineIndex && options.offset === offsetGridLines) {\r\n\t\t\t\t// Draw the first index specially\r\n\t\t\t\tlineWidth = gridLines.zeroLineWidth;\r\n\t\t\t\tlineColor = gridLines.zeroLineColor;\r\n\t\t\t\tborderDash = gridLines.zeroLineBorderDash || [];\r\n\t\t\t\tborderDashOffset = gridLines.zeroLineBorderDashOffset || 0.0;\r\n\t\t\t} else {\r\n\t\t\t\tlineWidth = valueAtIndexOrDefault(gridLines.lineWidth, i, 1);\r\n\t\t\t\tlineColor = valueAtIndexOrDefault(gridLines.color, i, 'rgba(0,0,0,0.1)');\r\n\t\t\t\tborderDash = gridLines.borderDash || [];\r\n\t\t\t\tborderDashOffset = gridLines.borderDashOffset || 0.0;\r\n\t\t\t}\r\n\r\n\t\t\tlineValue = getPixelForGridLine(me, tick._index || i, offsetGridLines);\r\n\r\n\t\t\t// Skip if the pixel is out of the range\r\n\t\t\tif (lineValue === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\talignedLineValue = alignPixel(chart, lineValue, lineWidth);\r\n\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\ttx1 = tx2 = x1 = x2 = alignedLineValue;\r\n\t\t\t} else {\r\n\t\t\t\tty1 = ty2 = y1 = y2 = alignedLineValue;\r\n\t\t\t}\r\n\r\n\t\t\titems.push({\r\n\t\t\t\ttx1: tx1,\r\n\t\t\t\tty1: ty1,\r\n\t\t\t\ttx2: tx2,\r\n\t\t\t\tty2: ty2,\r\n\t\t\t\tx1: x1,\r\n\t\t\t\ty1: y1,\r\n\t\t\t\tx2: x2,\r\n\t\t\t\ty2: y2,\r\n\t\t\t\twidth: lineWidth,\r\n\t\t\t\tcolor: lineColor,\r\n\t\t\t\tborderDash: borderDash,\r\n\t\t\t\tborderDashOffset: borderDashOffset,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\titems.ticksLength = ticksLength;\r\n\t\titems.borderValue = borderValue;\r\n\r\n\t\treturn items;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_computeLabelItems: function() {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar optionTicks = options.ticks;\r\n\t\tvar position = options.position;\r\n\t\tvar isMirrored = optionTicks.mirror;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tvar ticks = me._ticksToDraw;\r\n\t\tvar fonts = parseTickFontOptions(optionTicks);\r\n\t\tvar tickPadding = optionTicks.padding;\r\n\t\tvar tl = getTickMarkLength(options.gridLines);\r\n\t\tvar rotation = -helpers$1.toRadians(me.labelRotation);\r\n\t\tvar items = [];\r\n\t\tvar i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\r\n\r\n\t\tif (position === 'top') {\r\n\t\t\ty = me.bottom - tl - tickPadding;\r\n\t\t\ttextAlign = !rotation ? 'center' : 'left';\r\n\t\t} else if (position === 'bottom') {\r\n\t\t\ty = me.top + tl + tickPadding;\r\n\t\t\ttextAlign = !rotation ? 'center' : 'right';\r\n\t\t} else if (position === 'left') {\r\n\t\t\tx = me.right - (isMirrored ? 0 : tl) - tickPadding;\r\n\t\t\ttextAlign = isMirrored ? 'left' : 'right';\r\n\t\t} else {\r\n\t\t\tx = me.left + (isMirrored ? 0 : tl) + tickPadding;\r\n\t\t\ttextAlign = isMirrored ? 'right' : 'left';\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = ticks.length; i < ilen; ++i) {\r\n\t\t\ttick = ticks[i];\r\n\t\t\tlabel = tick.label;\r\n\r\n\t\t\t// autoskipper skipped this tick (#4635)\r\n\t\t\tif (isNullOrUndef(label)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tpixel = me.getPixelForTick(tick._index || i) + optionTicks.labelOffset;\r\n\t\t\tfont = tick.major ? fonts.major : fonts.minor;\r\n\t\t\tlineHeight = font.lineHeight;\r\n\t\t\tlineCount = isArray(label) ? label.length : 1;\r\n\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\tx = pixel;\r\n\t\t\t\ttextOffset = position === 'top'\r\n\t\t\t\t\t? ((!rotation ? 0.5 : 1) - lineCount) * lineHeight\r\n\t\t\t\t\t: (!rotation ? 0.5 : 0) * lineHeight;\r\n\t\t\t} else {\r\n\t\t\t\ty = pixel;\r\n\t\t\t\ttextOffset = (1 - lineCount) * lineHeight / 2;\r\n\t\t\t}\r\n\r\n\t\t\titems.push({\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\trotation: rotation,\r\n\t\t\t\tlabel: label,\r\n\t\t\t\tfont: font,\r\n\t\t\t\ttextOffset: textOffset,\r\n\t\t\t\ttextAlign: textAlign\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn items;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawGrid: function(chartArea) {\r\n\t\tvar me = this;\r\n\t\tvar gridLines = me.options.gridLines;\r\n\r\n\t\tif (!gridLines.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar chart = me.chart;\r\n\t\tvar alignPixel = helpers$1._alignPixel;\r\n\t\tvar axisWidth = gridLines.drawBorder ? valueAtIndexOrDefault(gridLines.lineWidth, 0, 0) : 0;\r\n\t\tvar items = me._gridLineItems || (me._gridLineItems = me._computeGridLineItems(chartArea));\r\n\t\tvar width, color, i, ilen, item;\r\n\r\n\t\tfor (i = 0, ilen = items.length; i < ilen; ++i) {\r\n\t\t\titem = items[i];\r\n\t\t\twidth = item.width;\r\n\t\t\tcolor = item.color;\r\n\r\n\t\t\tif (width && color) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.lineWidth = width;\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\tif (ctx.setLineDash) {\r\n\t\t\t\t\tctx.setLineDash(item.borderDash);\r\n\t\t\t\t\tctx.lineDashOffset = item.borderDashOffset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\tif (gridLines.drawTicks) {\r\n\t\t\t\t\tctx.moveTo(item.tx1, item.ty1);\r\n\t\t\t\t\tctx.lineTo(item.tx2, item.ty2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (gridLines.drawOnChartArea) {\r\n\t\t\t\t\tctx.moveTo(item.x1, item.y1);\r\n\t\t\t\t\tctx.lineTo(item.x2, item.y2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (axisWidth) {\r\n\t\t\t// Draw the line at the edge of the axis\r\n\t\t\tvar firstLineWidth = axisWidth;\r\n\t\t\tvar lastLineWidth = valueAtIndexOrDefault(gridLines.lineWidth, items.ticksLength - 1, 1);\r\n\t\t\tvar borderValue = items.borderValue;\r\n\t\t\tvar x1, x2, y1, y2;\r\n\r\n\t\t\tif (me.isHorizontal()) {\r\n\t\t\t\tx1 = alignPixel(chart, me.left, firstLineWidth) - firstLineWidth / 2;\r\n\t\t\t\tx2 = alignPixel(chart, me.right, lastLineWidth) + lastLineWidth / 2;\r\n\t\t\t\ty1 = y2 = borderValue;\r\n\t\t\t} else {\r\n\t\t\t\ty1 = alignPixel(chart, me.top, firstLineWidth) - firstLineWidth / 2;\r\n\t\t\t\ty2 = alignPixel(chart, me.bottom, lastLineWidth) + lastLineWidth / 2;\r\n\t\t\t\tx1 = x2 = borderValue;\r\n\t\t\t}\r\n\r\n\t\t\tctx.lineWidth = axisWidth;\r\n\t\t\tctx.strokeStyle = valueAtIndexOrDefault(gridLines.color, 0);\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x1, y1);\r\n\t\t\tctx.lineTo(x2, y2);\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawLabels: function() {\r\n\t\tvar me = this;\r\n\t\tvar optionTicks = me.options.ticks;\r\n\r\n\t\tif (!optionTicks.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar items = me._labelItems || (me._labelItems = me._computeLabelItems());\r\n\t\tvar i, j, ilen, jlen, item, tickFont, label, y;\r\n\r\n\t\tfor (i = 0, ilen = items.length; i < ilen; ++i) {\r\n\t\t\titem = items[i];\r\n\t\t\ttickFont = item.font;\r\n\r\n\t\t\t// Make sure we draw text in the correct color and font\r\n\t\t\tctx.save();\r\n\t\t\tctx.translate(item.x, item.y);\r\n\t\t\tctx.rotate(item.rotation);\r\n\t\t\tctx.font = tickFont.string;\r\n\t\t\tctx.fillStyle = tickFont.color;\r\n\t\t\tctx.textBaseline = 'middle';\r\n\t\t\tctx.textAlign = item.textAlign;\r\n\r\n\t\t\tlabel = item.label;\r\n\t\t\ty = item.textOffset;\r\n\t\t\tif (isArray(label)) {\r\n\t\t\t\tfor (j = 0, jlen = label.length; j < jlen; ++j) {\r\n\t\t\t\t\t// We just make sure the multiline element is a string here..\r\n\t\t\t\t\tctx.fillText('' + label[j], 0, y);\r\n\t\t\t\t\ty += tickFont.lineHeight;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tctx.fillText(label, 0, y);\r\n\t\t\t}\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawTitle: function() {\r\n\t\tvar me = this;\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar options = me.options;\r\n\t\tvar scaleLabel = options.scaleLabel;\r\n\r\n\t\tif (!scaleLabel.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar scaleLabelFontColor = valueOrDefault$a(scaleLabel.fontColor, core_defaults.global.defaultFontColor);\r\n\t\tvar scaleLabelFont = helpers$1.options._parseFont(scaleLabel);\r\n\t\tvar scaleLabelPadding = helpers$1.options.toPadding(scaleLabel.padding);\r\n\t\tvar halfLineHeight = scaleLabelFont.lineHeight / 2;\r\n\t\tvar position = options.position;\r\n\t\tvar rotation = 0;\r\n\t\tvar scaleLabelX, scaleLabelY;\r\n\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\tscaleLabelX = me.left + me.width / 2; // midpoint of the width\r\n\t\t\tscaleLabelY = position === 'bottom'\r\n\t\t\t\t? me.bottom - halfLineHeight - scaleLabelPadding.bottom\r\n\t\t\t\t: me.top + halfLineHeight + scaleLabelPadding.top;\r\n\t\t} else {\r\n\t\t\tvar isLeft = position === 'left';\r\n\t\t\tscaleLabelX = isLeft\r\n\t\t\t\t? me.left + halfLineHeight + scaleLabelPadding.top\r\n\t\t\t\t: me.right - halfLineHeight - scaleLabelPadding.top;\r\n\t\t\tscaleLabelY = me.top + me.height / 2;\r\n\t\t\trotation = isLeft ? -0.5 * Math.PI : 0.5 * Math.PI;\r\n\t\t}\r\n\r\n\t\tctx.save();\r\n\t\tctx.translate(scaleLabelX, scaleLabelY);\r\n\t\tctx.rotate(rotation);\r\n\t\tctx.textAlign = 'center';\r\n\t\tctx.textBaseline = 'middle';\r\n\t\tctx.fillStyle = scaleLabelFontColor; // render in correct colour\r\n\t\tctx.font = scaleLabelFont.string;\r\n\t\tctx.fillText(scaleLabel.labelString, 0, 0);\r\n\t\tctx.restore();\r\n\t},\r\n\r\n\tdraw: function(chartArea) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (!me._isVisible()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tme._drawGrid(chartArea);\r\n\t\tme._drawTitle();\r\n\t\tme._drawLabels();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_layers: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar tz = opts.ticks && opts.ticks.z || 0;\r\n\t\tvar gz = opts.gridLines && opts.gridLines.z || 0;\r\n\r\n\t\tif (!me._isVisible() || tz === gz || me.draw !== me._draw) {\r\n\t\t\t// backward compatibility: draw has been overridden by custom scale\r\n\t\t\treturn [{\r\n\t\t\t\tz: tz,\r\n\t\t\t\tdraw: function() {\r\n\t\t\t\t\tme.draw.apply(me, arguments);\r\n\t\t\t\t}\r\n\t\t\t}];\r\n\t\t}\r\n\r\n\t\treturn [{\r\n\t\t\tz: gz,\r\n\t\t\tdraw: function() {\r\n\t\t\t\tme._drawGrid.apply(me, arguments);\r\n\t\t\t\tme._drawTitle.apply(me, arguments);\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tz: tz,\r\n\t\t\tdraw: function() {\r\n\t\t\t\tme._drawLabels.apply(me, arguments);\r\n\t\t\t}\r\n\t\t}];\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getMatchingVisibleMetas: function(type) {\r\n\t\tvar me = this;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\treturn me.chart._getSortedVisibleDatasetMetas()\r\n\t\t\t.filter(function(meta) {\r\n\t\t\t\treturn (!type || meta.type === type)\r\n\t\t\t\t\t&& (isHorizontal ? meta.xAxisID === me.id : meta.yAxisID === me.id);\r\n\t\t\t});\r\n\t}\r\n});\r\n\r\nScale.prototype._draw = Scale.prototype.draw;\r\n\r\nvar core_scale = Scale;\n\nvar isNullOrUndef$1 = helpers$1.isNullOrUndef;\r\n\r\nvar defaultConfig = {\r\n\tposition: 'bottom'\r\n};\r\n\r\nvar scale_category = core_scale.extend({\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar labels = me._getLabels();\r\n\t\tvar ticksOpts = me.options.ticks;\r\n\t\tvar min = ticksOpts.min;\r\n\t\tvar max = ticksOpts.max;\r\n\t\tvar minIndex = 0;\r\n\t\tvar maxIndex = labels.length - 1;\r\n\t\tvar findIndex;\r\n\r\n\t\tif (min !== undefined) {\r\n\t\t\t// user specified min value\r\n\t\t\tfindIndex = labels.indexOf(min);\r\n\t\t\tif (findIndex >= 0) {\r\n\t\t\t\tminIndex = findIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (max !== undefined) {\r\n\t\t\t// user specified max value\r\n\t\t\tfindIndex = labels.indexOf(max);\r\n\t\t\tif (findIndex >= 0) {\r\n\t\t\t\tmaxIndex = findIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.minIndex = minIndex;\r\n\t\tme.maxIndex = maxIndex;\r\n\t\tme.min = labels[minIndex];\r\n\t\tme.max = labels[maxIndex];\r\n\t},\r\n\r\n\tbuildTicks: function() {\r\n\t\tvar me = this;\r\n\t\tvar labels = me._getLabels();\r\n\t\tvar minIndex = me.minIndex;\r\n\t\tvar maxIndex = me.maxIndex;\r\n\r\n\t\t// If we are viewing some subset of labels, slice the original array\r\n\t\tme.ticks = (minIndex === 0 && maxIndex === labels.length - 1) ? labels : labels.slice(minIndex, maxIndex + 1);\r\n\t},\r\n\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\r\n\t\tif (chart.getDatasetMeta(datasetIndex).controller._getValueScaleId() === me.id) {\r\n\t\t\treturn me.getRightValue(chart.data.datasets[datasetIndex].data[index]);\r\n\t\t}\r\n\r\n\t\treturn me._getLabels()[index];\r\n\t},\r\n\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tvar offset = me.options.offset;\r\n\t\tvar ticks = me.ticks;\r\n\r\n\t\tcore_scale.prototype._configure.call(me);\r\n\r\n\t\tif (!me.isHorizontal()) {\r\n\t\t\t// For backward compatibility, vertical category scale reverse is inverted.\r\n\t\t\tme._reversePixels = !me._reversePixels;\r\n\t\t}\r\n\r\n\t\tif (!ticks) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tme._startValue = me.minIndex - (offset ? 0.5 : 0);\r\n\t\tme._valueRange = Math.max(ticks.length - (offset ? 0 : 1), 1);\r\n\t},\r\n\r\n\t// Used to get data value locations.  Value can either be an index or a numerical value\r\n\tgetPixelForValue: function(value, index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar valueCategory, labels, idx;\r\n\r\n\t\tif (!isNullOrUndef$1(index) && !isNullOrUndef$1(datasetIndex)) {\r\n\t\t\tvalue = me.chart.data.datasets[datasetIndex].data[index];\r\n\t\t}\r\n\r\n\t\t// If value is a data object, then index is the index in the data array,\r\n\t\t// not the index of the scale. We need to change that.\r\n\t\tif (!isNullOrUndef$1(value)) {\r\n\t\t\tvalueCategory = me.isHorizontal() ? value.x : value.y;\r\n\t\t}\r\n\t\tif (valueCategory !== undefined || (value !== undefined && isNaN(index))) {\r\n\t\t\tlabels = me._getLabels();\r\n\t\t\tvalue = helpers$1.valueOrDefault(valueCategory, value);\r\n\t\t\tidx = labels.indexOf(value);\r\n\t\t\tindex = idx !== -1 ? idx : index;\r\n\t\t\tif (isNaN(index)) {\r\n\t\t\t\tindex = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn me.getPixelForDecimal((index - me._startValue) / me._valueRange);\r\n\t},\r\n\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar ticks = this.ticks;\r\n\t\treturn index < 0 || index > ticks.length - 1\r\n\t\t\t? null\r\n\t\t\t: this.getPixelForValue(ticks[index], index + this.minIndex);\r\n\t},\r\n\r\n\tgetValueForPixel: function(pixel) {\r\n\t\tvar me = this;\r\n\t\tvar value = Math.round(me._startValue + me.getDecimalForPixel(pixel) * me._valueRange);\r\n\t\treturn Math.min(Math.max(value, 0), me.ticks.length - 1);\r\n\t},\r\n\r\n\tgetBasePixel: function() {\r\n\t\treturn this.bottom;\r\n\t}\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults = defaultConfig;\nscale_category._defaults = _defaults;\n\nvar noop = helpers$1.noop;\r\nvar isNullOrUndef$2 = helpers$1.isNullOrUndef;\r\n\r\n/**\r\n * Generate a set of linear ticks\r\n * @param generationOptions the options used to generate the ticks\r\n * @param dataRange the range of the data\r\n * @returns {number[]} array of tick values\r\n */\r\nfunction generateTicks(generationOptions, dataRange) {\r\n\tvar ticks = [];\r\n\t// To get a \"nice\" value for the tick spacing, we will use the appropriately named\r\n\t// \"nice number\" algorithm. See https://stackoverflow.com/questions/8506881/nice-label-algorithm-for-charts-with-minimum-ticks\r\n\t// for details.\r\n\r\n\tvar MIN_SPACING = 1e-14;\r\n\tvar stepSize = generationOptions.stepSize;\r\n\tvar unit = stepSize || 1;\r\n\tvar maxNumSpaces = generationOptions.maxTicks - 1;\r\n\tvar min = generationOptions.min;\r\n\tvar max = generationOptions.max;\r\n\tvar precision = generationOptions.precision;\r\n\tvar rmin = dataRange.min;\r\n\tvar rmax = dataRange.max;\r\n\tvar spacing = helpers$1.niceNum((rmax - rmin) / maxNumSpaces / unit) * unit;\r\n\tvar factor, niceMin, niceMax, numSpaces;\r\n\r\n\t// Beyond MIN_SPACING floating point numbers being to lose precision\r\n\t// such that we can't do the math necessary to generate ticks\r\n\tif (spacing < MIN_SPACING && isNullOrUndef$2(min) && isNullOrUndef$2(max)) {\r\n\t\treturn [rmin, rmax];\r\n\t}\r\n\r\n\tnumSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\r\n\tif (numSpaces > maxNumSpaces) {\r\n\t\t// If the calculated num of spaces exceeds maxNumSpaces, recalculate it\r\n\t\tspacing = helpers$1.niceNum(numSpaces * spacing / maxNumSpaces / unit) * unit;\r\n\t}\r\n\r\n\tif (stepSize || isNullOrUndef$2(precision)) {\r\n\t\t// If a precision is not specified, calculate factor based on spacing\r\n\t\tfactor = Math.pow(10, helpers$1._decimalPlaces(spacing));\r\n\t} else {\r\n\t\t// If the user specified a precision, round to that number of decimal places\r\n\t\tfactor = Math.pow(10, precision);\r\n\t\tspacing = Math.ceil(spacing * factor) / factor;\r\n\t}\r\n\r\n\tniceMin = Math.floor(rmin / spacing) * spacing;\r\n\tniceMax = Math.ceil(rmax / spacing) * spacing;\r\n\r\n\t// If min, max and stepSize is set and they make an evenly spaced scale use it.\r\n\tif (stepSize) {\r\n\t\t// If very close to our whole number, use it.\r\n\t\tif (!isNullOrUndef$2(min) && helpers$1.almostWhole(min / spacing, spacing / 1000)) {\r\n\t\t\tniceMin = min;\r\n\t\t}\r\n\t\tif (!isNullOrUndef$2(max) && helpers$1.almostWhole(max / spacing, spacing / 1000)) {\r\n\t\t\tniceMax = max;\r\n\t\t}\r\n\t}\r\n\r\n\tnumSpaces = (niceMax - niceMin) / spacing;\r\n\t// If very close to our rounded value, use it.\r\n\tif (helpers$1.almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\r\n\t\tnumSpaces = Math.round(numSpaces);\r\n\t} else {\r\n\t\tnumSpaces = Math.ceil(numSpaces);\r\n\t}\r\n\r\n\tniceMin = Math.round(niceMin * factor) / factor;\r\n\tniceMax = Math.round(niceMax * factor) / factor;\r\n\tticks.push(isNullOrUndef$2(min) ? niceMin : min);\r\n\tfor (var j = 1; j < numSpaces; ++j) {\r\n\t\tticks.push(Math.round((niceMin + j * spacing) * factor) / factor);\r\n\t}\r\n\tticks.push(isNullOrUndef$2(max) ? niceMax : max);\r\n\r\n\treturn ticks;\r\n}\r\n\r\nvar scale_linearbase = core_scale.extend({\r\n\tgetRightValue: function(value) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\treturn +value;\r\n\t\t}\r\n\t\treturn core_scale.prototype.getRightValue.call(this, value);\r\n\t},\r\n\r\n\thandleTickRangeOptions: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar tickOpts = opts.ticks;\r\n\r\n\t\t// If we are forcing it to begin at 0, but 0 will already be rendered on the chart,\r\n\t\t// do nothing since that would make the chart weird. If the user really wants a weird chart\r\n\t\t// axis, they can manually override it\r\n\t\tif (tickOpts.beginAtZero) {\r\n\t\t\tvar minSign = helpers$1.sign(me.min);\r\n\t\t\tvar maxSign = helpers$1.sign(me.max);\r\n\r\n\t\t\tif (minSign < 0 && maxSign < 0) {\r\n\t\t\t\t// move the top up to 0\r\n\t\t\t\tme.max = 0;\r\n\t\t\t} else if (minSign > 0 && maxSign > 0) {\r\n\t\t\t\t// move the bottom down to 0\r\n\t\t\t\tme.min = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar setMin = tickOpts.min !== undefined || tickOpts.suggestedMin !== undefined;\r\n\t\tvar setMax = tickOpts.max !== undefined || tickOpts.suggestedMax !== undefined;\r\n\r\n\t\tif (tickOpts.min !== undefined) {\r\n\t\t\tme.min = tickOpts.min;\r\n\t\t} else if (tickOpts.suggestedMin !== undefined) {\r\n\t\t\tif (me.min === null) {\r\n\t\t\t\tme.min = tickOpts.suggestedMin;\r\n\t\t\t} else {\r\n\t\t\t\tme.min = Math.min(me.min, tickOpts.suggestedMin);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (tickOpts.max !== undefined) {\r\n\t\t\tme.max = tickOpts.max;\r\n\t\t} else if (tickOpts.suggestedMax !== undefined) {\r\n\t\t\tif (me.max === null) {\r\n\t\t\t\tme.max = tickOpts.suggestedMax;\r\n\t\t\t} else {\r\n\t\t\t\tme.max = Math.max(me.max, tickOpts.suggestedMax);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (setMin !== setMax) {\r\n\t\t\t// We set the min or the max but not both.\r\n\t\t\t// So ensure that our range is good\r\n\t\t\t// Inverted or 0 length range can happen when\r\n\t\t\t// ticks.min is set, and no datasets are visible\r\n\t\t\tif (me.min >= me.max) {\r\n\t\t\t\tif (setMin) {\r\n\t\t\t\t\tme.max = me.min + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tme.min = me.max - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (me.min === me.max) {\r\n\t\t\tme.max++;\r\n\r\n\t\t\tif (!tickOpts.beginAtZero) {\r\n\t\t\t\tme.min--;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tgetTickLimit: function() {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar stepSize = tickOpts.stepSize;\r\n\t\tvar maxTicksLimit = tickOpts.maxTicksLimit;\r\n\t\tvar maxTicks;\r\n\r\n\t\tif (stepSize) {\r\n\t\t\tmaxTicks = Math.ceil(me.max / stepSize) - Math.floor(me.min / stepSize) + 1;\r\n\t\t} else {\r\n\t\t\tmaxTicks = me._computeTickLimit();\r\n\t\t\tmaxTicksLimit = maxTicksLimit || 11;\r\n\t\t}\r\n\r\n\t\tif (maxTicksLimit) {\r\n\t\t\tmaxTicks = Math.min(maxTicksLimit, maxTicks);\r\n\t\t}\r\n\r\n\t\treturn maxTicks;\r\n\t},\r\n\r\n\t_computeTickLimit: function() {\r\n\t\treturn Number.POSITIVE_INFINITY;\r\n\t},\r\n\r\n\thandleDirectionalChanges: noop,\r\n\r\n\tbuildTicks: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar tickOpts = opts.ticks;\r\n\r\n\t\t// Figure out what the max number of ticks we can support it is based on the size of\r\n\t\t// the axis area. For now, we say that the minimum tick spacing in pixels must be 40\r\n\t\t// We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\r\n\t\t// the graph. Make sure we always have at least 2 ticks\r\n\t\tvar maxTicks = me.getTickLimit();\r\n\t\tmaxTicks = Math.max(2, maxTicks);\r\n\r\n\t\tvar numericGeneratorOptions = {\r\n\t\t\tmaxTicks: maxTicks,\r\n\t\t\tmin: tickOpts.min,\r\n\t\t\tmax: tickOpts.max,\r\n\t\t\tprecision: tickOpts.precision,\r\n\t\t\tstepSize: helpers$1.valueOrDefault(tickOpts.fixedStepSize, tickOpts.stepSize)\r\n\t\t};\r\n\t\tvar ticks = me.ticks = generateTicks(numericGeneratorOptions, me);\r\n\r\n\t\tme.handleDirectionalChanges();\r\n\r\n\t\t// At this point, we need to update our max and min given the tick values since we have expanded the\r\n\t\t// range of the scale\r\n\t\tme.max = helpers$1.max(ticks);\r\n\t\tme.min = helpers$1.min(ticks);\r\n\r\n\t\tif (tickOpts.reverse) {\r\n\t\t\tticks.reverse();\r\n\r\n\t\t\tme.start = me.max;\r\n\t\t\tme.end = me.min;\r\n\t\t} else {\r\n\t\t\tme.start = me.min;\r\n\t\t\tme.end = me.max;\r\n\t\t}\r\n\t},\r\n\r\n\tconvertTicksToLabels: function() {\r\n\t\tvar me = this;\r\n\t\tme.ticksAsNumbers = me.ticks.slice();\r\n\t\tme.zeroLineIndex = me.ticks.indexOf(0);\r\n\r\n\t\tcore_scale.prototype.convertTicksToLabels.call(me);\r\n\t},\r\n\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tvar ticks = me.getTicks();\r\n\t\tvar start = me.min;\r\n\t\tvar end = me.max;\r\n\t\tvar offset;\r\n\r\n\t\tcore_scale.prototype._configure.call(me);\r\n\r\n\t\tif (me.options.offset && ticks.length) {\r\n\t\t\toffset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\r\n\t\t\tstart -= offset;\r\n\t\t\tend += offset;\r\n\t\t}\r\n\t\tme._startValue = start;\r\n\t\tme._endValue = end;\r\n\t\tme._valueRange = end - start;\r\n\t}\r\n});\n\nvar defaultConfig$1 = {\r\n\tposition: 'left',\r\n\tticks: {\r\n\t\tcallback: core_ticks.formatters.linear\r\n\t}\r\n};\r\n\r\nvar DEFAULT_MIN = 0;\r\nvar DEFAULT_MAX = 1;\r\n\r\nfunction getOrCreateStack(stacks, stacked, meta) {\r\n\tvar key = [\r\n\t\tmeta.type,\r\n\t\t// we have a separate stack for stack=undefined datasets when the opts.stacked is undefined\r\n\t\tstacked === undefined && meta.stack === undefined ? meta.index : '',\r\n\t\tmeta.stack\r\n\t].join('.');\r\n\r\n\tif (stacks[key] === undefined) {\r\n\t\tstacks[key] = {\r\n\t\t\tpos: [],\r\n\t\t\tneg: []\r\n\t\t};\r\n\t}\r\n\r\n\treturn stacks[key];\r\n}\r\n\r\nfunction stackData(scale, stacks, meta, data) {\r\n\tvar opts = scale.options;\r\n\tvar stacked = opts.stacked;\r\n\tvar stack = getOrCreateStack(stacks, stacked, meta);\r\n\tvar pos = stack.pos;\r\n\tvar neg = stack.neg;\r\n\tvar ilen = data.length;\r\n\tvar i, value;\r\n\r\n\tfor (i = 0; i < ilen; ++i) {\r\n\t\tvalue = scale._parseValue(data[i]);\r\n\t\tif (isNaN(value.min) || isNaN(value.max) || meta.data[i].hidden) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tpos[i] = pos[i] || 0;\r\n\t\tneg[i] = neg[i] || 0;\r\n\r\n\t\tif (opts.relativePoints) {\r\n\t\t\tpos[i] = 100;\r\n\t\t} else if (value.min < 0 || value.max < 0) {\r\n\t\t\tneg[i] += value.min;\r\n\t\t} else {\r\n\t\t\tpos[i] += value.max;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction updateMinMax(scale, meta, data) {\r\n\tvar ilen = data.length;\r\n\tvar i, value;\r\n\r\n\tfor (i = 0; i < ilen; ++i) {\r\n\t\tvalue = scale._parseValue(data[i]);\r\n\t\tif (isNaN(value.min) || isNaN(value.max) || meta.data[i].hidden) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tscale.min = Math.min(scale.min, value.min);\r\n\t\tscale.max = Math.max(scale.max, value.max);\r\n\t}\r\n}\r\n\r\nvar scale_linear = scale_linearbase.extend({\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar chart = me.chart;\r\n\t\tvar datasets = chart.data.datasets;\r\n\t\tvar metasets = me._getMatchingVisibleMetas();\r\n\t\tvar hasStacks = opts.stacked;\r\n\t\tvar stacks = {};\r\n\t\tvar ilen = metasets.length;\r\n\t\tvar i, meta, data, values;\r\n\r\n\t\tme.min = Number.POSITIVE_INFINITY;\r\n\t\tme.max = Number.NEGATIVE_INFINITY;\r\n\r\n\t\tif (hasStacks === undefined) {\r\n\t\t\tfor (i = 0; !hasStacks && i < ilen; ++i) {\r\n\t\t\t\tmeta = metasets[i];\r\n\t\t\t\thasStacks = meta.stack !== undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\tmeta = metasets[i];\r\n\t\t\tdata = datasets[meta.index].data;\r\n\t\t\tif (hasStacks) {\r\n\t\t\t\tstackData(me, stacks, meta, data);\r\n\t\t\t} else {\r\n\t\t\t\tupdateMinMax(me, meta, data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thelpers$1.each(stacks, function(stackValues) {\r\n\t\t\tvalues = stackValues.pos.concat(stackValues.neg);\r\n\t\t\tme.min = Math.min(me.min, helpers$1.min(values));\r\n\t\t\tme.max = Math.max(me.max, helpers$1.max(values));\r\n\t\t});\r\n\r\n\t\tme.min = helpers$1.isFinite(me.min) && !isNaN(me.min) ? me.min : DEFAULT_MIN;\r\n\t\tme.max = helpers$1.isFinite(me.max) && !isNaN(me.max) ? me.max : DEFAULT_MAX;\r\n\r\n\t\t// Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\r\n\t\tme.handleTickRangeOptions();\r\n\t},\r\n\r\n\t// Returns the maximum number of ticks based on the scale dimension\r\n\t_computeTickLimit: function() {\r\n\t\tvar me = this;\r\n\t\tvar tickFont;\r\n\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\treturn Math.ceil(me.width / 40);\r\n\t\t}\r\n\t\ttickFont = helpers$1.options._parseFont(me.options.ticks);\r\n\t\treturn Math.ceil(me.height / tickFont.lineHeight);\r\n\t},\r\n\r\n\t// Called after the ticks are built. We need\r\n\thandleDirectionalChanges: function() {\r\n\t\tif (!this.isHorizontal()) {\r\n\t\t\t// We are in a vertical orientation. The top value is the highest. So reverse the array\r\n\t\t\tthis.ticks.reverse();\r\n\t\t}\r\n\t},\r\n\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\treturn this._getScaleLabel(this.chart.data.datasets[datasetIndex].data[index]);\r\n\t},\r\n\r\n\t// Utils\r\n\tgetPixelForValue: function(value) {\r\n\t\tvar me = this;\r\n\t\treturn me.getPixelForDecimal((+me.getRightValue(value) - me._startValue) / me._valueRange);\r\n\t},\r\n\r\n\tgetValueForPixel: function(pixel) {\r\n\t\treturn this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\r\n\t},\r\n\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar ticks = this.ticksAsNumbers;\r\n\t\tif (index < 0 || index > ticks.length - 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.getPixelForValue(ticks[index]);\r\n\t}\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults$1 = defaultConfig$1;\nscale_linear._defaults = _defaults$1;\n\nvar valueOrDefault$b = helpers$1.valueOrDefault;\r\nvar log10 = helpers$1.math.log10;\r\n\r\n/**\r\n * Generate a set of logarithmic ticks\r\n * @param generationOptions the options used to generate the ticks\r\n * @param dataRange the range of the data\r\n * @returns {number[]} array of tick values\r\n */\r\nfunction generateTicks$1(generationOptions, dataRange) {\r\n\tvar ticks = [];\r\n\r\n\tvar tickVal = valueOrDefault$b(generationOptions.min, Math.pow(10, Math.floor(log10(dataRange.min))));\r\n\r\n\tvar endExp = Math.floor(log10(dataRange.max));\r\n\tvar endSignificand = Math.ceil(dataRange.max / Math.pow(10, endExp));\r\n\tvar exp, significand;\r\n\r\n\tif (tickVal === 0) {\r\n\t\texp = Math.floor(log10(dataRange.minNotZero));\r\n\t\tsignificand = Math.floor(dataRange.minNotZero / Math.pow(10, exp));\r\n\r\n\t\tticks.push(tickVal);\r\n\t\ttickVal = significand * Math.pow(10, exp);\r\n\t} else {\r\n\t\texp = Math.floor(log10(tickVal));\r\n\t\tsignificand = Math.floor(tickVal / Math.pow(10, exp));\r\n\t}\r\n\tvar precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\r\n\r\n\tdo {\r\n\t\tticks.push(tickVal);\r\n\r\n\t\t++significand;\r\n\t\tif (significand === 10) {\r\n\t\t\tsignificand = 1;\r\n\t\t\t++exp;\r\n\t\t\tprecision = exp >= 0 ? 1 : precision;\r\n\t\t}\r\n\r\n\t\ttickVal = Math.round(significand * Math.pow(10, exp) * precision) / precision;\r\n\t} while (exp < endExp || (exp === endExp && significand < endSignificand));\r\n\r\n\tvar lastTick = valueOrDefault$b(generationOptions.max, tickVal);\r\n\tticks.push(lastTick);\r\n\r\n\treturn ticks;\r\n}\r\n\r\nvar defaultConfig$2 = {\r\n\tposition: 'left',\r\n\r\n\t// label settings\r\n\tticks: {\r\n\t\tcallback: core_ticks.formatters.logarithmic\r\n\t}\r\n};\r\n\r\n// TODO(v3): change this to positiveOrDefault\r\nfunction nonNegativeOrDefault(value, defaultValue) {\r\n\treturn helpers$1.isFinite(value) && value >= 0 ? value : defaultValue;\r\n}\r\n\r\nvar scale_logarithmic = core_scale.extend({\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar chart = me.chart;\r\n\t\tvar datasets = chart.data.datasets;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tfunction IDMatches(meta) {\r\n\t\t\treturn isHorizontal ? meta.xAxisID === me.id : meta.yAxisID === me.id;\r\n\t\t}\r\n\t\tvar datasetIndex, meta, value, data, i, ilen;\r\n\r\n\t\t// Calculate Range\r\n\t\tme.min = Number.POSITIVE_INFINITY;\r\n\t\tme.max = Number.NEGATIVE_INFINITY;\r\n\t\tme.minNotZero = Number.POSITIVE_INFINITY;\r\n\r\n\t\tvar hasStacks = opts.stacked;\r\n\t\tif (hasStacks === undefined) {\r\n\t\t\tfor (datasetIndex = 0; datasetIndex < datasets.length; datasetIndex++) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(datasetIndex);\r\n\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta) &&\r\n\t\t\t\t\tmeta.stack !== undefined) {\r\n\t\t\t\t\thasStacks = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (opts.stacked || hasStacks) {\r\n\t\t\tvar valuesPerStack = {};\r\n\r\n\t\t\tfor (datasetIndex = 0; datasetIndex < datasets.length; datasetIndex++) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(datasetIndex);\r\n\t\t\t\tvar key = [\r\n\t\t\t\t\tmeta.type,\r\n\t\t\t\t\t// we have a separate stack for stack=undefined datasets when the opts.stacked is undefined\r\n\t\t\t\t\t((opts.stacked === undefined && meta.stack === undefined) ? datasetIndex : ''),\r\n\t\t\t\t\tmeta.stack\r\n\t\t\t\t].join('.');\r\n\r\n\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\r\n\t\t\t\t\tif (valuesPerStack[key] === undefined) {\r\n\t\t\t\t\t\tvaluesPerStack[key] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdata = datasets[datasetIndex].data;\r\n\t\t\t\t\tfor (i = 0, ilen = data.length; i < ilen; i++) {\r\n\t\t\t\t\t\tvar values = valuesPerStack[key];\r\n\t\t\t\t\t\tvalue = me._parseValue(data[i]);\r\n\t\t\t\t\t\t// invalid, hidden and negative values are ignored\r\n\t\t\t\t\t\tif (isNaN(value.min) || isNaN(value.max) || meta.data[i].hidden || value.min < 0 || value.max < 0) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalues[i] = values[i] || 0;\r\n\t\t\t\t\t\tvalues[i] += value.max;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\thelpers$1.each(valuesPerStack, function(valuesForType) {\r\n\t\t\t\tif (valuesForType.length > 0) {\r\n\t\t\t\t\tvar minVal = helpers$1.min(valuesForType);\r\n\t\t\t\t\tvar maxVal = helpers$1.max(valuesForType);\r\n\t\t\t\t\tme.min = Math.min(me.min, minVal);\r\n\t\t\t\t\tme.max = Math.max(me.max, maxVal);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\tfor (datasetIndex = 0; datasetIndex < datasets.length; datasetIndex++) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(datasetIndex);\r\n\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\r\n\t\t\t\t\tdata = datasets[datasetIndex].data;\r\n\t\t\t\t\tfor (i = 0, ilen = data.length; i < ilen; i++) {\r\n\t\t\t\t\t\tvalue = me._parseValue(data[i]);\r\n\t\t\t\t\t\t// invalid, hidden and negative values are ignored\r\n\t\t\t\t\t\tif (isNaN(value.min) || isNaN(value.max) || meta.data[i].hidden || value.min < 0 || value.max < 0) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tme.min = Math.min(value.min, me.min);\r\n\t\t\t\t\t\tme.max = Math.max(value.max, me.max);\r\n\r\n\t\t\t\t\t\tif (value.min !== 0) {\r\n\t\t\t\t\t\t\tme.minNotZero = Math.min(value.min, me.minNotZero);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.min = helpers$1.isFinite(me.min) ? me.min : null;\r\n\t\tme.max = helpers$1.isFinite(me.max) ? me.max : null;\r\n\t\tme.minNotZero = helpers$1.isFinite(me.minNotZero) ? me.minNotZero : null;\r\n\r\n\t\t// Common base implementation to handle ticks.min, ticks.max\r\n\t\tthis.handleTickRangeOptions();\r\n\t},\r\n\r\n\thandleTickRangeOptions: function() {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar DEFAULT_MIN = 1;\r\n\t\tvar DEFAULT_MAX = 10;\r\n\r\n\t\tme.min = nonNegativeOrDefault(tickOpts.min, me.min);\r\n\t\tme.max = nonNegativeOrDefault(tickOpts.max, me.max);\r\n\r\n\t\tif (me.min === me.max) {\r\n\t\t\tif (me.min !== 0 && me.min !== null) {\r\n\t\t\t\tme.min = Math.pow(10, Math.floor(log10(me.min)) - 1);\r\n\t\t\t\tme.max = Math.pow(10, Math.floor(log10(me.max)) + 1);\r\n\t\t\t} else {\r\n\t\t\t\tme.min = DEFAULT_MIN;\r\n\t\t\t\tme.max = DEFAULT_MAX;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (me.min === null) {\r\n\t\t\tme.min = Math.pow(10, Math.floor(log10(me.max)) - 1);\r\n\t\t}\r\n\t\tif (me.max === null) {\r\n\t\t\tme.max = me.min !== 0\r\n\t\t\t\t? Math.pow(10, Math.floor(log10(me.min)) + 1)\r\n\t\t\t\t: DEFAULT_MAX;\r\n\t\t}\r\n\t\tif (me.minNotZero === null) {\r\n\t\t\tif (me.min > 0) {\r\n\t\t\t\tme.minNotZero = me.min;\r\n\t\t\t} else if (me.max < 1) {\r\n\t\t\t\tme.minNotZero = Math.pow(10, Math.floor(log10(me.max)));\r\n\t\t\t} else {\r\n\t\t\t\tme.minNotZero = DEFAULT_MIN;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tbuildTicks: function() {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar reverse = !me.isHorizontal();\r\n\r\n\t\tvar generationOptions = {\r\n\t\t\tmin: nonNegativeOrDefault(tickOpts.min),\r\n\t\t\tmax: nonNegativeOrDefault(tickOpts.max)\r\n\t\t};\r\n\t\tvar ticks = me.ticks = generateTicks$1(generationOptions, me);\r\n\r\n\t\t// At this point, we need to update our max and min given the tick values since we have expanded the\r\n\t\t// range of the scale\r\n\t\tme.max = helpers$1.max(ticks);\r\n\t\tme.min = helpers$1.min(ticks);\r\n\r\n\t\tif (tickOpts.reverse) {\r\n\t\t\treverse = !reverse;\r\n\t\t\tme.start = me.max;\r\n\t\t\tme.end = me.min;\r\n\t\t} else {\r\n\t\t\tme.start = me.min;\r\n\t\t\tme.end = me.max;\r\n\t\t}\r\n\t\tif (reverse) {\r\n\t\t\tticks.reverse();\r\n\t\t}\r\n\t},\r\n\r\n\tconvertTicksToLabels: function() {\r\n\t\tthis.tickValues = this.ticks.slice();\r\n\r\n\t\tcore_scale.prototype.convertTicksToLabels.call(this);\r\n\t},\r\n\r\n\t// Get the correct tooltip label\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\treturn this._getScaleLabel(this.chart.data.datasets[datasetIndex].data[index]);\r\n\t},\r\n\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar ticks = this.tickValues;\r\n\t\tif (index < 0 || index > ticks.length - 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.getPixelForValue(ticks[index]);\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the value of the first tick.\r\n\t * @param {number} value - The minimum not zero value.\r\n\t * @return {number} The first tick value.\r\n\t * @private\r\n\t */\r\n\t_getFirstTickValue: function(value) {\r\n\t\tvar exp = Math.floor(log10(value));\r\n\t\tvar significand = Math.floor(value / Math.pow(10, exp));\r\n\r\n\t\treturn significand * Math.pow(10, exp);\r\n\t},\r\n\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tvar start = me.min;\r\n\t\tvar offset = 0;\r\n\r\n\t\tcore_scale.prototype._configure.call(me);\r\n\r\n\t\tif (start === 0) {\r\n\t\t\tstart = me._getFirstTickValue(me.minNotZero);\r\n\t\t\toffset = valueOrDefault$b(me.options.ticks.fontSize, core_defaults.global.defaultFontSize) / me._length;\r\n\t\t}\r\n\r\n\t\tme._startValue = log10(start);\r\n\t\tme._valueOffset = offset;\r\n\t\tme._valueRange = (log10(me.max) - log10(start)) / (1 - offset);\r\n\t},\r\n\r\n\tgetPixelForValue: function(value) {\r\n\t\tvar me = this;\r\n\t\tvar decimal = 0;\r\n\r\n\t\tvalue = +me.getRightValue(value);\r\n\r\n\t\tif (value > me.min && value > 0) {\r\n\t\t\tdecimal = (log10(value) - me._startValue) / me._valueRange + me._valueOffset;\r\n\t\t}\r\n\t\treturn me.getPixelForDecimal(decimal);\r\n\t},\r\n\r\n\tgetValueForPixel: function(pixel) {\r\n\t\tvar me = this;\r\n\t\tvar decimal = me.getDecimalForPixel(pixel);\r\n\t\treturn decimal === 0 && me.min === 0\r\n\t\t\t? 0\r\n\t\t\t: Math.pow(10, me._startValue + (decimal - me._valueOffset) * me._valueRange);\r\n\t}\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults$2 = defaultConfig$2;\nscale_logarithmic._defaults = _defaults$2;\n\nvar valueOrDefault$c = helpers$1.valueOrDefault;\r\nvar valueAtIndexOrDefault$1 = helpers$1.valueAtIndexOrDefault;\r\nvar resolve$4 = helpers$1.options.resolve;\r\n\r\nvar defaultConfig$3 = {\r\n\tdisplay: true,\r\n\r\n\t// Boolean - Whether to animate scaling the chart from the centre\r\n\tanimate: true,\r\n\tposition: 'chartArea',\r\n\r\n\tangleLines: {\r\n\t\tdisplay: true,\r\n\t\tcolor: 'rgba(0,0,0,0.1)',\r\n\t\tlineWidth: 1,\r\n\t\tborderDash: [],\r\n\t\tborderDashOffset: 0.0\r\n\t},\r\n\r\n\tgridLines: {\r\n\t\tcircular: false\r\n\t},\r\n\r\n\t// label settings\r\n\tticks: {\r\n\t\t// Boolean - Show a backdrop to the scale label\r\n\t\tshowLabelBackdrop: true,\r\n\r\n\t\t// String - The colour of the label backdrop\r\n\t\tbackdropColor: 'rgba(255,255,255,0.75)',\r\n\r\n\t\t// Number - The backdrop padding above & below the label in pixels\r\n\t\tbackdropPaddingY: 2,\r\n\r\n\t\t// Number - The backdrop padding to the side of the label in pixels\r\n\t\tbackdropPaddingX: 2,\r\n\r\n\t\tcallback: core_ticks.formatters.linear\r\n\t},\r\n\r\n\tpointLabels: {\r\n\t\t// Boolean - if true, show point labels\r\n\t\tdisplay: true,\r\n\r\n\t\t// Number - Point label font size in pixels\r\n\t\tfontSize: 10,\r\n\r\n\t\t// Function - Used to convert point labels\r\n\t\tcallback: function(label) {\r\n\t\t\treturn label;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction getTickBackdropHeight(opts) {\r\n\tvar tickOpts = opts.ticks;\r\n\r\n\tif (tickOpts.display && opts.display) {\r\n\t\treturn valueOrDefault$c(tickOpts.fontSize, core_defaults.global.defaultFontSize) + tickOpts.backdropPaddingY * 2;\r\n\t}\r\n\treturn 0;\r\n}\r\n\r\nfunction measureLabelSize(ctx, lineHeight, label) {\r\n\tif (helpers$1.isArray(label)) {\r\n\t\treturn {\r\n\t\t\tw: helpers$1.longestText(ctx, ctx.font, label),\r\n\t\t\th: label.length * lineHeight\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tw: ctx.measureText(label).width,\r\n\t\th: lineHeight\r\n\t};\r\n}\r\n\r\nfunction determineLimits(angle, pos, size, min, max) {\r\n\tif (angle === min || angle === max) {\r\n\t\treturn {\r\n\t\t\tstart: pos - (size / 2),\r\n\t\t\tend: pos + (size / 2)\r\n\t\t};\r\n\t} else if (angle < min || angle > max) {\r\n\t\treturn {\r\n\t\t\tstart: pos - size,\r\n\t\t\tend: pos\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tstart: pos,\r\n\t\tend: pos + size\r\n\t};\r\n}\r\n\r\n/**\r\n * Helper function to fit a radial linear scale with point labels\r\n */\r\nfunction fitWithPointLabels(scale) {\r\n\r\n\t// Right, this is really confusing and there is a lot of maths going on here\r\n\t// The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\r\n\t//\r\n\t// Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\r\n\t//\r\n\t// Solution:\r\n\t//\r\n\t// We assume the radius of the polygon is half the size of the canvas at first\r\n\t// at each index we check if the text overlaps.\r\n\t//\r\n\t// Where it does, we store that angle and that index.\r\n\t//\r\n\t// After finding the largest index and angle we calculate how much we need to remove\r\n\t// from the shape radius to move the point inwards by that x.\r\n\t//\r\n\t// We average the left and right distances to get the maximum shape radius that can fit in the box\r\n\t// along with labels.\r\n\t//\r\n\t// Once we have that, we can find the centre point for the chart, by taking the x text protrusion\r\n\t// on each side, removing that from the size, halving it and adding the left x protrusion width.\r\n\t//\r\n\t// This will mean we have a shape fitted to the canvas, as large as it can be with the labels\r\n\t// and position it in the most space efficient manner\r\n\t//\r\n\t// https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\r\n\r\n\tvar plFont = helpers$1.options._parseFont(scale.options.pointLabels);\r\n\r\n\t// Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\r\n\t// Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\r\n\tvar furthestLimits = {\r\n\t\tl: 0,\r\n\t\tr: scale.width,\r\n\t\tt: 0,\r\n\t\tb: scale.height - scale.paddingTop\r\n\t};\r\n\tvar furthestAngles = {};\r\n\tvar i, textSize, pointPosition;\r\n\r\n\tscale.ctx.font = plFont.string;\r\n\tscale._pointLabelSizes = [];\r\n\r\n\tvar valueCount = scale.chart.data.labels.length;\r\n\tfor (i = 0; i < valueCount; i++) {\r\n\t\tpointPosition = scale.getPointPosition(i, scale.drawingArea + 5);\r\n\t\ttextSize = measureLabelSize(scale.ctx, plFont.lineHeight, scale.pointLabels[i]);\r\n\t\tscale._pointLabelSizes[i] = textSize;\r\n\r\n\t\t// Add quarter circle to make degree 0 mean top of circle\r\n\t\tvar angleRadians = scale.getIndexAngle(i);\r\n\t\tvar angle = helpers$1.toDegrees(angleRadians) % 360;\r\n\t\tvar hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\r\n\t\tvar vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\r\n\r\n\t\tif (hLimits.start < furthestLimits.l) {\r\n\t\t\tfurthestLimits.l = hLimits.start;\r\n\t\t\tfurthestAngles.l = angleRadians;\r\n\t\t}\r\n\r\n\t\tif (hLimits.end > furthestLimits.r) {\r\n\t\t\tfurthestLimits.r = hLimits.end;\r\n\t\t\tfurthestAngles.r = angleRadians;\r\n\t\t}\r\n\r\n\t\tif (vLimits.start < furthestLimits.t) {\r\n\t\t\tfurthestLimits.t = vLimits.start;\r\n\t\t\tfurthestAngles.t = angleRadians;\r\n\t\t}\r\n\r\n\t\tif (vLimits.end > furthestLimits.b) {\r\n\t\t\tfurthestLimits.b = vLimits.end;\r\n\t\t\tfurthestAngles.b = angleRadians;\r\n\t\t}\r\n\t}\r\n\r\n\tscale.setReductions(scale.drawingArea, furthestLimits, furthestAngles);\r\n}\r\n\r\nfunction getTextAlignForAngle(angle) {\r\n\tif (angle === 0 || angle === 180) {\r\n\t\treturn 'center';\r\n\t} else if (angle < 180) {\r\n\t\treturn 'left';\r\n\t}\r\n\r\n\treturn 'right';\r\n}\r\n\r\nfunction fillText(ctx, text, position, lineHeight) {\r\n\tvar y = position.y + lineHeight / 2;\r\n\tvar i, ilen;\r\n\r\n\tif (helpers$1.isArray(text)) {\r\n\t\tfor (i = 0, ilen = text.length; i < ilen; ++i) {\r\n\t\t\tctx.fillText(text[i], position.x, y);\r\n\t\t\ty += lineHeight;\r\n\t\t}\r\n\t} else {\r\n\t\tctx.fillText(text, position.x, y);\r\n\t}\r\n}\r\n\r\nfunction adjustPointPositionForLabelHeight(angle, textSize, position) {\r\n\tif (angle === 90 || angle === 270) {\r\n\t\tposition.y -= (textSize.h / 2);\r\n\t} else if (angle > 270 || angle < 90) {\r\n\t\tposition.y -= textSize.h;\r\n\t}\r\n}\r\n\r\nfunction drawPointLabels(scale) {\r\n\tvar ctx = scale.ctx;\r\n\tvar opts = scale.options;\r\n\tvar pointLabelOpts = opts.pointLabels;\r\n\tvar tickBackdropHeight = getTickBackdropHeight(opts);\r\n\tvar outerDistance = scale.getDistanceFromCenterForValue(opts.ticks.reverse ? scale.min : scale.max);\r\n\tvar plFont = helpers$1.options._parseFont(pointLabelOpts);\r\n\r\n\tctx.save();\r\n\r\n\tctx.font = plFont.string;\r\n\tctx.textBaseline = 'middle';\r\n\r\n\tfor (var i = scale.chart.data.labels.length - 1; i >= 0; i--) {\r\n\t\t// Extra pixels out for some label spacing\r\n\t\tvar extra = (i === 0 ? tickBackdropHeight / 2 : 0);\r\n\t\tvar pointLabelPosition = scale.getPointPosition(i, outerDistance + extra + 5);\r\n\r\n\t\t// Keep this in loop since we may support array properties here\r\n\t\tvar pointLabelFontColor = valueAtIndexOrDefault$1(pointLabelOpts.fontColor, i, core_defaults.global.defaultFontColor);\r\n\t\tctx.fillStyle = pointLabelFontColor;\r\n\r\n\t\tvar angleRadians = scale.getIndexAngle(i);\r\n\t\tvar angle = helpers$1.toDegrees(angleRadians);\r\n\t\tctx.textAlign = getTextAlignForAngle(angle);\r\n\t\tadjustPointPositionForLabelHeight(angle, scale._pointLabelSizes[i], pointLabelPosition);\r\n\t\tfillText(ctx, scale.pointLabels[i], pointLabelPosition, plFont.lineHeight);\r\n\t}\r\n\tctx.restore();\r\n}\r\n\r\nfunction drawRadiusLine(scale, gridLineOpts, radius, index) {\r\n\tvar ctx = scale.ctx;\r\n\tvar circular = gridLineOpts.circular;\r\n\tvar valueCount = scale.chart.data.labels.length;\r\n\tvar lineColor = valueAtIndexOrDefault$1(gridLineOpts.color, index - 1);\r\n\tvar lineWidth = valueAtIndexOrDefault$1(gridLineOpts.lineWidth, index - 1);\r\n\tvar pointPosition;\r\n\r\n\tif ((!circular && !valueCount) || !lineColor || !lineWidth) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tctx.save();\r\n\tctx.strokeStyle = lineColor;\r\n\tctx.lineWidth = lineWidth;\r\n\tif (ctx.setLineDash) {\r\n\t\tctx.setLineDash(gridLineOpts.borderDash || []);\r\n\t\tctx.lineDashOffset = gridLineOpts.borderDashOffset || 0.0;\r\n\t}\r\n\r\n\tctx.beginPath();\r\n\tif (circular) {\r\n\t\t// Draw circular arcs between the points\r\n\t\tctx.arc(scale.xCenter, scale.yCenter, radius, 0, Math.PI * 2);\r\n\t} else {\r\n\t\t// Draw straight lines connecting each index\r\n\t\tpointPosition = scale.getPointPosition(0, radius);\r\n\t\tctx.moveTo(pointPosition.x, pointPosition.y);\r\n\r\n\t\tfor (var i = 1; i < valueCount; i++) {\r\n\t\t\tpointPosition = scale.getPointPosition(i, radius);\r\n\t\t\tctx.lineTo(pointPosition.x, pointPosition.y);\r\n\t\t}\r\n\t}\r\n\tctx.closePath();\r\n\tctx.stroke();\r\n\tctx.restore();\r\n}\r\n\r\nfunction numberOrZero(param) {\r\n\treturn helpers$1.isNumber(param) ? param : 0;\r\n}\r\n\r\nvar scale_radialLinear = scale_linearbase.extend({\r\n\tsetDimensions: function() {\r\n\t\tvar me = this;\r\n\r\n\t\t// Set the unconstrained dimension before label rotation\r\n\t\tme.width = me.maxWidth;\r\n\t\tme.height = me.maxHeight;\r\n\t\tme.paddingTop = getTickBackdropHeight(me.options) / 2;\r\n\t\tme.xCenter = Math.floor(me.width / 2);\r\n\t\tme.yCenter = Math.floor((me.height - me.paddingTop) / 2);\r\n\t\tme.drawingArea = Math.min(me.height - me.paddingTop, me.width) / 2;\r\n\t},\r\n\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar min = Number.POSITIVE_INFINITY;\r\n\t\tvar max = Number.NEGATIVE_INFINITY;\r\n\r\n\t\thelpers$1.each(chart.data.datasets, function(dataset, datasetIndex) {\r\n\t\t\tif (chart.isDatasetVisible(datasetIndex)) {\r\n\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\r\n\r\n\t\t\t\thelpers$1.each(dataset.data, function(rawValue, index) {\r\n\t\t\t\t\tvar value = +me.getRightValue(rawValue);\r\n\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmin = Math.min(value, min);\r\n\t\t\t\t\tmax = Math.max(value, max);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tme.min = (min === Number.POSITIVE_INFINITY ? 0 : min);\r\n\t\tme.max = (max === Number.NEGATIVE_INFINITY ? 0 : max);\r\n\r\n\t\t// Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\r\n\t\tme.handleTickRangeOptions();\r\n\t},\r\n\r\n\t// Returns the maximum number of ticks based on the scale dimension\r\n\t_computeTickLimit: function() {\r\n\t\treturn Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\r\n\t},\r\n\r\n\tconvertTicksToLabels: function() {\r\n\t\tvar me = this;\r\n\r\n\t\tscale_linearbase.prototype.convertTicksToLabels.call(me);\r\n\r\n\t\t// Point labels\r\n\t\tme.pointLabels = me.chart.data.labels.map(function() {\r\n\t\t\tvar label = helpers$1.callback(me.options.pointLabels.callback, arguments, me);\r\n\t\t\treturn label || label === 0 ? label : '';\r\n\t\t});\r\n\t},\r\n\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\treturn +this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);\r\n\t},\r\n\r\n\tfit: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\r\n\t\tif (opts.display && opts.pointLabels.display) {\r\n\t\t\tfitWithPointLabels(me);\r\n\t\t} else {\r\n\t\t\tme.setCenterPoint(0, 0, 0, 0);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set radius reductions and determine new radius and center point\r\n\t * @private\r\n\t */\r\n\tsetReductions: function(largestPossibleRadius, furthestLimits, furthestAngles) {\r\n\t\tvar me = this;\r\n\t\tvar radiusReductionLeft = furthestLimits.l / Math.sin(furthestAngles.l);\r\n\t\tvar radiusReductionRight = Math.max(furthestLimits.r - me.width, 0) / Math.sin(furthestAngles.r);\r\n\t\tvar radiusReductionTop = -furthestLimits.t / Math.cos(furthestAngles.t);\r\n\t\tvar radiusReductionBottom = -Math.max(furthestLimits.b - (me.height - me.paddingTop), 0) / Math.cos(furthestAngles.b);\r\n\r\n\t\tradiusReductionLeft = numberOrZero(radiusReductionLeft);\r\n\t\tradiusReductionRight = numberOrZero(radiusReductionRight);\r\n\t\tradiusReductionTop = numberOrZero(radiusReductionTop);\r\n\t\tradiusReductionBottom = numberOrZero(radiusReductionBottom);\r\n\r\n\t\tme.drawingArea = Math.min(\r\n\t\t\tMath.floor(largestPossibleRadius - (radiusReductionLeft + radiusReductionRight) / 2),\r\n\t\t\tMath.floor(largestPossibleRadius - (radiusReductionTop + radiusReductionBottom) / 2));\r\n\t\tme.setCenterPoint(radiusReductionLeft, radiusReductionRight, radiusReductionTop, radiusReductionBottom);\r\n\t},\r\n\r\n\tsetCenterPoint: function(leftMovement, rightMovement, topMovement, bottomMovement) {\r\n\t\tvar me = this;\r\n\t\tvar maxRight = me.width - rightMovement - me.drawingArea;\r\n\t\tvar maxLeft = leftMovement + me.drawingArea;\r\n\t\tvar maxTop = topMovement + me.drawingArea;\r\n\t\tvar maxBottom = (me.height - me.paddingTop) - bottomMovement - me.drawingArea;\r\n\r\n\t\tme.xCenter = Math.floor(((maxLeft + maxRight) / 2) + me.left);\r\n\t\tme.yCenter = Math.floor(((maxTop + maxBottom) / 2) + me.top + me.paddingTop);\r\n\t},\r\n\r\n\tgetIndexAngle: function(index) {\r\n\t\tvar chart = this.chart;\r\n\t\tvar angleMultiplier = 360 / chart.data.labels.length;\r\n\t\tvar options = chart.options || {};\r\n\t\tvar startAngle = options.startAngle || 0;\r\n\r\n\t\t// Start from the top instead of right, so remove a quarter of the circle\r\n\t\tvar angle = (index * angleMultiplier + startAngle) % 360;\r\n\r\n\t\treturn (angle < 0 ? angle + 360 : angle) * Math.PI * 2 / 360;\r\n\t},\r\n\r\n\tgetDistanceFromCenterForValue: function(value) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (helpers$1.isNullOrUndef(value)) {\r\n\t\t\treturn NaN;\r\n\t\t}\r\n\r\n\t\t// Take into account half font size + the yPadding of the top value\r\n\t\tvar scalingFactor = me.drawingArea / (me.max - me.min);\r\n\t\tif (me.options.ticks.reverse) {\r\n\t\t\treturn (me.max - value) * scalingFactor;\r\n\t\t}\r\n\t\treturn (value - me.min) * scalingFactor;\r\n\t},\r\n\r\n\tgetPointPosition: function(index, distanceFromCenter) {\r\n\t\tvar me = this;\r\n\t\tvar thisAngle = me.getIndexAngle(index) - (Math.PI / 2);\r\n\t\treturn {\r\n\t\t\tx: Math.cos(thisAngle) * distanceFromCenter + me.xCenter,\r\n\t\t\ty: Math.sin(thisAngle) * distanceFromCenter + me.yCenter\r\n\t\t};\r\n\t},\r\n\r\n\tgetPointPositionForValue: function(index, value) {\r\n\t\treturn this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\r\n\t},\r\n\r\n\tgetBasePosition: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar min = me.min;\r\n\t\tvar max = me.max;\r\n\r\n\t\treturn me.getPointPositionForValue(index || 0,\r\n\t\t\tme.beginAtZero ? 0 :\r\n\t\t\tmin < 0 && max < 0 ? max :\r\n\t\t\tmin > 0 && max > 0 ? min :\r\n\t\t\t0);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawGrid: function() {\r\n\t\tvar me = this;\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar opts = me.options;\r\n\t\tvar gridLineOpts = opts.gridLines;\r\n\t\tvar angleLineOpts = opts.angleLines;\r\n\t\tvar lineWidth = valueOrDefault$c(angleLineOpts.lineWidth, gridLineOpts.lineWidth);\r\n\t\tvar lineColor = valueOrDefault$c(angleLineOpts.color, gridLineOpts.color);\r\n\t\tvar i, offset, position;\r\n\r\n\t\tif (opts.pointLabels.display) {\r\n\t\t\tdrawPointLabels(me);\r\n\t\t}\r\n\r\n\t\tif (gridLineOpts.display) {\r\n\t\t\thelpers$1.each(me.ticks, function(label, index) {\r\n\t\t\t\tif (index !== 0) {\r\n\t\t\t\t\toffset = me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]);\r\n\t\t\t\t\tdrawRadiusLine(me, gridLineOpts, offset, index);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (angleLineOpts.display && lineWidth && lineColor) {\r\n\t\t\tctx.save();\r\n\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\tctx.strokeStyle = lineColor;\r\n\t\t\tif (ctx.setLineDash) {\r\n\t\t\t\tctx.setLineDash(resolve$4([angleLineOpts.borderDash, gridLineOpts.borderDash, []]));\r\n\t\t\t\tctx.lineDashOffset = resolve$4([angleLineOpts.borderDashOffset, gridLineOpts.borderDashOffset, 0.0]);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = me.chart.data.labels.length - 1; i >= 0; i--) {\r\n\t\t\t\toffset = me.getDistanceFromCenterForValue(opts.ticks.reverse ? me.min : me.max);\r\n\t\t\t\tposition = me.getPointPosition(i, offset);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(me.xCenter, me.yCenter);\r\n\t\t\t\tctx.lineTo(position.x, position.y);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawLabels: function() {\r\n\t\tvar me = this;\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar opts = me.options;\r\n\t\tvar tickOpts = opts.ticks;\r\n\r\n\t\tif (!tickOpts.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar startAngle = me.getIndexAngle(0);\r\n\t\tvar tickFont = helpers$1.options._parseFont(tickOpts);\r\n\t\tvar tickFontColor = valueOrDefault$c(tickOpts.fontColor, core_defaults.global.defaultFontColor);\r\n\t\tvar offset, width;\r\n\r\n\t\tctx.save();\r\n\t\tctx.font = tickFont.string;\r\n\t\tctx.translate(me.xCenter, me.yCenter);\r\n\t\tctx.rotate(startAngle);\r\n\t\tctx.textAlign = 'center';\r\n\t\tctx.textBaseline = 'middle';\r\n\r\n\t\thelpers$1.each(me.ticks, function(label, index) {\r\n\t\t\tif (index === 0 && !tickOpts.reverse) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\toffset = me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]);\r\n\r\n\t\t\tif (tickOpts.showLabelBackdrop) {\r\n\t\t\t\twidth = ctx.measureText(label).width;\r\n\t\t\t\tctx.fillStyle = tickOpts.backdropColor;\r\n\r\n\t\t\t\tctx.fillRect(\r\n\t\t\t\t\t-width / 2 - tickOpts.backdropPaddingX,\r\n\t\t\t\t\t-offset - tickFont.size / 2 - tickOpts.backdropPaddingY,\r\n\t\t\t\t\twidth + tickOpts.backdropPaddingX * 2,\r\n\t\t\t\t\ttickFont.size + tickOpts.backdropPaddingY * 2\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tctx.fillStyle = tickFontColor;\r\n\t\t\tctx.fillText(label, 0, -offset);\r\n\t\t});\r\n\r\n\t\tctx.restore();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawTitle: helpers$1.noop\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults$3 = defaultConfig$3;\nscale_radialLinear._defaults = _defaults$3;\n\nvar deprecated$1 = helpers$1._deprecated;\r\nvar resolve$5 = helpers$1.options.resolve;\r\nvar valueOrDefault$d = helpers$1.valueOrDefault;\r\n\r\n// Integer constants are from the ES6 spec.\r\nvar MIN_INTEGER = Number.MIN_SAFE_INTEGER || -9007199254740991;\r\nvar MAX_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\r\n\r\nvar INTERVALS = {\r\n\tmillisecond: {\r\n\t\tcommon: true,\r\n\t\tsize: 1,\r\n\t\tsteps: 1000\r\n\t},\r\n\tsecond: {\r\n\t\tcommon: true,\r\n\t\tsize: 1000,\r\n\t\tsteps: 60\r\n\t},\r\n\tminute: {\r\n\t\tcommon: true,\r\n\t\tsize: 60000,\r\n\t\tsteps: 60\r\n\t},\r\n\thour: {\r\n\t\tcommon: true,\r\n\t\tsize: 3600000,\r\n\t\tsteps: 24\r\n\t},\r\n\tday: {\r\n\t\tcommon: true,\r\n\t\tsize: 86400000,\r\n\t\tsteps: 30\r\n\t},\r\n\tweek: {\r\n\t\tcommon: false,\r\n\t\tsize: 604800000,\r\n\t\tsteps: 4\r\n\t},\r\n\tmonth: {\r\n\t\tcommon: true,\r\n\t\tsize: 2.628e9,\r\n\t\tsteps: 12\r\n\t},\r\n\tquarter: {\r\n\t\tcommon: false,\r\n\t\tsize: 7.884e9,\r\n\t\tsteps: 4\r\n\t},\r\n\tyear: {\r\n\t\tcommon: true,\r\n\t\tsize: 3.154e10\r\n\t}\r\n};\r\n\r\nvar UNITS = Object.keys(INTERVALS);\r\n\r\nfunction sorter(a, b) {\r\n\treturn a - b;\r\n}\r\n\r\nfunction arrayUnique(items) {\r\n\tvar hash = {};\r\n\tvar out = [];\r\n\tvar i, ilen, item;\r\n\r\n\tfor (i = 0, ilen = items.length; i < ilen; ++i) {\r\n\t\titem = items[i];\r\n\t\tif (!hash[item]) {\r\n\t\t\thash[item] = true;\r\n\t\t\tout.push(item);\r\n\t\t}\r\n\t}\r\n\r\n\treturn out;\r\n}\r\n\r\nfunction getMin(options) {\r\n\treturn helpers$1.valueOrDefault(options.time.min, options.ticks.min);\r\n}\r\n\r\nfunction getMax(options) {\r\n\treturn helpers$1.valueOrDefault(options.time.max, options.ticks.max);\r\n}\r\n\r\n/**\r\n * Returns an array of {time, pos} objects used to interpolate a specific `time` or position\r\n * (`pos`) on the scale, by searching entries before and after the requested value. `pos` is\r\n * a decimal between 0 and 1: 0 being the start of the scale (left or top) and 1 the other\r\n * extremity (left + width or top + height). Note that it would be more optimized to directly\r\n * store pre-computed pixels, but the scale dimensions are not guaranteed at the time we need\r\n * to create the lookup table. The table ALWAYS contains at least two items: min and max.\r\n *\r\n * @param {number[]} timestamps - timestamps sorted from lowest to highest.\r\n * @param {string} distribution - If 'linear', timestamps will be spread linearly along the min\r\n * and max range, so basically, the table will contains only two items: {min, 0} and {max, 1}.\r\n * If 'series', timestamps will be positioned at the same distance from each other. In this\r\n * case, only timestamps that break the time linearity are registered, meaning that in the\r\n * best case, all timestamps are linear, the table contains only min and max.\r\n */\r\nfunction buildLookupTable(timestamps, min, max, distribution) {\r\n\tif (distribution === 'linear' || !timestamps.length) {\r\n\t\treturn [\r\n\t\t\t{time: min, pos: 0},\r\n\t\t\t{time: max, pos: 1}\r\n\t\t];\r\n\t}\r\n\r\n\tvar table = [];\r\n\tvar items = [min];\r\n\tvar i, ilen, prev, curr, next;\r\n\r\n\tfor (i = 0, ilen = timestamps.length; i < ilen; ++i) {\r\n\t\tcurr = timestamps[i];\r\n\t\tif (curr > min && curr < max) {\r\n\t\t\titems.push(curr);\r\n\t\t}\r\n\t}\r\n\r\n\titems.push(max);\r\n\r\n\tfor (i = 0, ilen = items.length; i < ilen; ++i) {\r\n\t\tnext = items[i + 1];\r\n\t\tprev = items[i - 1];\r\n\t\tcurr = items[i];\r\n\r\n\t\t// only add points that breaks the scale linearity\r\n\t\tif (prev === undefined || next === undefined || Math.round((next + prev) / 2) !== curr) {\r\n\t\t\ttable.push({time: curr, pos: i / (ilen - 1)});\r\n\t\t}\r\n\t}\r\n\r\n\treturn table;\r\n}\r\n\r\n// @see adapted from https://www.anujgakhar.com/2014/03/01/binary-search-in-javascript/\r\nfunction lookup(table, key, value) {\r\n\tvar lo = 0;\r\n\tvar hi = table.length - 1;\r\n\tvar mid, i0, i1;\r\n\r\n\twhile (lo >= 0 && lo <= hi) {\r\n\t\tmid = (lo + hi) >> 1;\r\n\t\ti0 = table[mid - 1] || null;\r\n\t\ti1 = table[mid];\r\n\r\n\t\tif (!i0) {\r\n\t\t\t// given value is outside table (before first item)\r\n\t\t\treturn {lo: null, hi: i1};\r\n\t\t} else if (i1[key] < value) {\r\n\t\t\tlo = mid + 1;\r\n\t\t} else if (i0[key] > value) {\r\n\t\t\thi = mid - 1;\r\n\t\t} else {\r\n\t\t\treturn {lo: i0, hi: i1};\r\n\t\t}\r\n\t}\r\n\r\n\t// given value is outside table (after last item)\r\n\treturn {lo: i1, hi: null};\r\n}\r\n\r\n/**\r\n * Linearly interpolates the given source `value` using the table items `skey` values and\r\n * returns the associated `tkey` value. For example, interpolate(table, 'time', 42, 'pos')\r\n * returns the position for a timestamp equal to 42. If value is out of bounds, values at\r\n * index [0, 1] or [n - 1, n] are used for the interpolation.\r\n */\r\nfunction interpolate$1(table, skey, sval, tkey) {\r\n\tvar range = lookup(table, skey, sval);\r\n\r\n\t// Note: the lookup table ALWAYS contains at least 2 items (min and max)\r\n\tvar prev = !range.lo ? table[0] : !range.hi ? table[table.length - 2] : range.lo;\r\n\tvar next = !range.lo ? table[1] : !range.hi ? table[table.length - 1] : range.hi;\r\n\r\n\tvar span = next[skey] - prev[skey];\r\n\tvar ratio = span ? (sval - prev[skey]) / span : 0;\r\n\tvar offset = (next[tkey] - prev[tkey]) * ratio;\r\n\r\n\treturn prev[tkey] + offset;\r\n}\r\n\r\nfunction toTimestamp(scale, input) {\r\n\tvar adapter = scale._adapter;\r\n\tvar options = scale.options.time;\r\n\tvar parser = options.parser;\r\n\tvar format = parser || options.format;\r\n\tvar value = input;\r\n\r\n\tif (typeof parser === 'function') {\r\n\t\tvalue = parser(value);\r\n\t}\r\n\r\n\t// Only parse if its not a timestamp already\r\n\tif (!helpers$1.isFinite(value)) {\r\n\t\tvalue = typeof format === 'string'\r\n\t\t\t? adapter.parse(value, format)\r\n\t\t\t: adapter.parse(value);\r\n\t}\r\n\r\n\tif (value !== null) {\r\n\t\treturn +value;\r\n\t}\r\n\r\n\t// Labels are in an incompatible format and no `parser` has been provided.\r\n\t// The user might still use the deprecated `format` option for parsing.\r\n\tif (!parser && typeof format === 'function') {\r\n\t\tvalue = format(input);\r\n\r\n\t\t// `format` could return something else than a timestamp, if so, parse it\r\n\t\tif (!helpers$1.isFinite(value)) {\r\n\t\t\tvalue = adapter.parse(value);\r\n\t\t}\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction parse(scale, input) {\r\n\tif (helpers$1.isNullOrUndef(input)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar options = scale.options.time;\r\n\tvar value = toTimestamp(scale, scale.getRightValue(input));\r\n\tif (value === null) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif (options.round) {\r\n\t\tvalue = +scale._adapter.startOf(value, options.round);\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Figures out what unit results in an appropriate number of auto-generated ticks\r\n */\r\nfunction determineUnitForAutoTicks(minUnit, min, max, capacity) {\r\n\tvar ilen = UNITS.length;\r\n\tvar i, interval, factor;\r\n\r\n\tfor (i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {\r\n\t\tinterval = INTERVALS[UNITS[i]];\r\n\t\tfactor = interval.steps ? interval.steps : MAX_INTEGER;\r\n\r\n\t\tif (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\r\n\t\t\treturn UNITS[i];\r\n\t\t}\r\n\t}\r\n\r\n\treturn UNITS[ilen - 1];\r\n}\r\n\r\n/**\r\n * Figures out what unit to format a set of ticks with\r\n */\r\nfunction determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\r\n\tvar i, unit;\r\n\r\n\tfor (i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {\r\n\t\tunit = UNITS[i];\r\n\t\tif (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\r\n\t\t\treturn unit;\r\n\t\t}\r\n\t}\r\n\r\n\treturn UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\r\n}\r\n\r\nfunction determineMajorUnit(unit) {\r\n\tfor (var i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {\r\n\t\tif (INTERVALS[UNITS[i]].common) {\r\n\t\t\treturn UNITS[i];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Generates a maximum of `capacity` timestamps between min and max, rounded to the\r\n * `minor` unit using the given scale time `options`.\r\n * Important: this method can return ticks outside the min and max range, it's the\r\n * responsibility of the calling code to clamp values if needed.\r\n */\r\nfunction generate(scale, min, max, capacity) {\r\n\tvar adapter = scale._adapter;\r\n\tvar options = scale.options;\r\n\tvar timeOpts = options.time;\r\n\tvar minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, capacity);\r\n\tvar stepSize = resolve$5([timeOpts.stepSize, timeOpts.unitStepSize, 1]);\r\n\tvar weekday = minor === 'week' ? timeOpts.isoWeekday : false;\r\n\tvar first = min;\r\n\tvar ticks = [];\r\n\tvar time;\r\n\r\n\t// For 'week' unit, handle the first day of week option\r\n\tif (weekday) {\r\n\t\tfirst = +adapter.startOf(first, 'isoWeek', weekday);\r\n\t}\r\n\r\n\t// Align first ticks on unit\r\n\tfirst = +adapter.startOf(first, weekday ? 'day' : minor);\r\n\r\n\t// Prevent browser from freezing in case user options request millions of milliseconds\r\n\tif (adapter.diff(max, min, minor) > 100000 * stepSize) {\r\n\t\tthrow min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor;\r\n\t}\r\n\r\n\tfor (time = first; time < max; time = +adapter.add(time, stepSize, minor)) {\r\n\t\tticks.push(time);\r\n\t}\r\n\r\n\tif (time === max || options.bounds === 'ticks') {\r\n\t\tticks.push(time);\r\n\t}\r\n\r\n\treturn ticks;\r\n}\r\n\r\n/**\r\n * Returns the start and end offsets from edges in the form of {start, end}\r\n * where each value is a relative width to the scale and ranges between 0 and 1.\r\n * They add extra margins on the both sides by scaling down the original scale.\r\n * Offsets are added when the `offset` option is true.\r\n */\r\nfunction computeOffsets(table, ticks, min, max, options) {\r\n\tvar start = 0;\r\n\tvar end = 0;\r\n\tvar first, last;\r\n\r\n\tif (options.offset && ticks.length) {\r\n\t\tfirst = interpolate$1(table, 'time', ticks[0], 'pos');\r\n\t\tif (ticks.length === 1) {\r\n\t\t\tstart = 1 - first;\r\n\t\t} else {\r\n\t\t\tstart = (interpolate$1(table, 'time', ticks[1], 'pos') - first) / 2;\r\n\t\t}\r\n\t\tlast = interpolate$1(table, 'time', ticks[ticks.length - 1], 'pos');\r\n\t\tif (ticks.length === 1) {\r\n\t\t\tend = last;\r\n\t\t} else {\r\n\t\t\tend = (last - interpolate$1(table, 'time', ticks[ticks.length - 2], 'pos')) / 2;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {start: start, end: end, factor: 1 / (start + 1 + end)};\r\n}\r\n\r\nfunction setMajorTicks(scale, ticks, map, majorUnit) {\r\n\tvar adapter = scale._adapter;\r\n\tvar first = +adapter.startOf(ticks[0].value, majorUnit);\r\n\tvar last = ticks[ticks.length - 1].value;\r\n\tvar major, index;\r\n\r\n\tfor (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {\r\n\t\tindex = map[major];\r\n\t\tif (index >= 0) {\r\n\t\t\tticks[index].major = true;\r\n\t\t}\r\n\t}\r\n\treturn ticks;\r\n}\r\n\r\nfunction ticksFromTimestamps(scale, values, majorUnit) {\r\n\tvar ticks = [];\r\n\tvar map = {};\r\n\tvar ilen = values.length;\r\n\tvar i, value;\r\n\r\n\tfor (i = 0; i < ilen; ++i) {\r\n\t\tvalue = values[i];\r\n\t\tmap[value] = i;\r\n\r\n\t\tticks.push({\r\n\t\t\tvalue: value,\r\n\t\t\tmajor: false\r\n\t\t});\r\n\t}\r\n\r\n\t// We set the major ticks separately from the above loop because calling startOf for every tick\r\n\t// is expensive when there is a large number of ticks\r\n\treturn (ilen === 0 || !majorUnit) ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\r\n}\r\n\r\nvar defaultConfig$4 = {\r\n\tposition: 'bottom',\r\n\r\n\t/**\r\n\t * Data distribution along the scale:\r\n\t * - 'linear': data are spread according to their time (distances can vary),\r\n\t * - 'series': data are spread at the same distance from each other.\r\n\t * @see https://github.com/chartjs/Chart.js/pull/4507\r\n\t * @since 2.7.0\r\n\t */\r\n\tdistribution: 'linear',\r\n\r\n\t/**\r\n\t * Scale boundary strategy (bypassed by min/max time options)\r\n\t * - `data`: make sure data are fully visible, ticks outside are removed\r\n\t * - `ticks`: make sure ticks are fully visible, data outside are truncated\r\n\t * @see https://github.com/chartjs/Chart.js/pull/4556\r\n\t * @since 2.7.0\r\n\t */\r\n\tbounds: 'data',\r\n\r\n\tadapters: {},\r\n\ttime: {\r\n\t\tparser: false, // false == a pattern string from https://momentjs.com/docs/#/parsing/string-format/ or a custom callback that converts its argument to a moment\r\n\t\tunit: false, // false == automatic or override with week, month, year, etc.\r\n\t\tround: false, // none, or override with week, month, year, etc.\r\n\t\tdisplayFormat: false, // DEPRECATED\r\n\t\tisoWeekday: false, // override week start day - see https://momentjs.com/docs/#/get-set/iso-weekday/\r\n\t\tminUnit: 'millisecond',\r\n\t\tdisplayFormats: {}\r\n\t},\r\n\tticks: {\r\n\t\tautoSkip: false,\r\n\r\n\t\t/**\r\n\t\t * Ticks generation input values:\r\n\t\t * - 'auto': generates \"optimal\" ticks based on scale size and time options.\r\n\t\t * - 'data': generates ticks from data (including labels from data {t|x|y} objects).\r\n\t\t * - 'labels': generates ticks from user given `data.labels` values ONLY.\r\n\t\t * @see https://github.com/chartjs/Chart.js/pull/4507\r\n\t\t * @since 2.7.0\r\n\t\t */\r\n\t\tsource: 'auto',\r\n\r\n\t\tmajor: {\r\n\t\t\tenabled: false\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar scale_time = core_scale.extend({\r\n\tinitialize: function() {\r\n\t\tthis.mergeTicksOptions();\r\n\t\tcore_scale.prototype.initialize.call(this);\r\n\t},\r\n\r\n\tupdate: function() {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar time = options.time || (options.time = {});\r\n\t\tvar adapter = me._adapter = new core_adapters._date(options.adapters.date);\r\n\r\n\t\t// DEPRECATIONS: output a message only one time per update\r\n\t\tdeprecated$1('time scale', time.format, 'time.format', 'time.parser');\r\n\t\tdeprecated$1('time scale', time.min, 'time.min', 'ticks.min');\r\n\t\tdeprecated$1('time scale', time.max, 'time.max', 'ticks.max');\r\n\r\n\t\t// Backward compatibility: before introducing adapter, `displayFormats` was\r\n\t\t// supposed to contain *all* unit/string pairs but this can't be resolved\r\n\t\t// when loading the scale (adapters are loaded afterward), so let's populate\r\n\t\t// missing formats on update\r\n\t\thelpers$1.mergeIf(time.displayFormats, adapter.formats());\r\n\r\n\t\treturn core_scale.prototype.update.apply(me, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t * Allows data to be referenced via 't' attribute\r\n\t */\r\n\tgetRightValue: function(rawValue) {\r\n\t\tif (rawValue && rawValue.t !== undefined) {\r\n\t\t\trawValue = rawValue.t;\r\n\t\t}\r\n\t\treturn core_scale.prototype.getRightValue.call(this, rawValue);\r\n\t},\r\n\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar adapter = me._adapter;\r\n\t\tvar options = me.options;\r\n\t\tvar unit = options.time.unit || 'day';\r\n\t\tvar min = MAX_INTEGER;\r\n\t\tvar max = MIN_INTEGER;\r\n\t\tvar timestamps = [];\r\n\t\tvar datasets = [];\r\n\t\tvar labels = [];\r\n\t\tvar i, j, ilen, jlen, data, timestamp, labelsAdded;\r\n\t\tvar dataLabels = me._getLabels();\r\n\r\n\t\tfor (i = 0, ilen = dataLabels.length; i < ilen; ++i) {\r\n\t\t\tlabels.push(parse(me, dataLabels[i]));\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\tif (chart.isDatasetVisible(i)) {\r\n\t\t\t\tdata = chart.data.datasets[i].data;\r\n\r\n\t\t\t\t// Let's consider that all data have the same format.\r\n\t\t\t\tif (helpers$1.isObject(data[0])) {\r\n\t\t\t\t\tdatasets[i] = [];\r\n\r\n\t\t\t\t\tfor (j = 0, jlen = data.length; j < jlen; ++j) {\r\n\t\t\t\t\t\ttimestamp = parse(me, data[j]);\r\n\t\t\t\t\t\ttimestamps.push(timestamp);\r\n\t\t\t\t\t\tdatasets[i][j] = timestamp;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdatasets[i] = labels.slice(0);\r\n\t\t\t\t\tif (!labelsAdded) {\r\n\t\t\t\t\t\ttimestamps = timestamps.concat(labels);\r\n\t\t\t\t\t\tlabelsAdded = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdatasets[i] = [];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (labels.length) {\r\n\t\t\tmin = Math.min(min, labels[0]);\r\n\t\t\tmax = Math.max(max, labels[labels.length - 1]);\r\n\t\t}\r\n\r\n\t\tif (timestamps.length) {\r\n\t\t\ttimestamps = ilen > 1 ? arrayUnique(timestamps).sort(sorter) : timestamps.sort(sorter);\r\n\t\t\tmin = Math.min(min, timestamps[0]);\r\n\t\t\tmax = Math.max(max, timestamps[timestamps.length - 1]);\r\n\t\t}\r\n\r\n\t\tmin = parse(me, getMin(options)) || min;\r\n\t\tmax = parse(me, getMax(options)) || max;\r\n\r\n\t\t// In case there is no valid min/max, set limits based on unit time option\r\n\t\tmin = min === MAX_INTEGER ? +adapter.startOf(Date.now(), unit) : min;\r\n\t\tmax = max === MIN_INTEGER ? +adapter.endOf(Date.now(), unit) + 1 : max;\r\n\r\n\t\t// Make sure that max is strictly higher than min (required by the lookup table)\r\n\t\tme.min = Math.min(min, max);\r\n\t\tme.max = Math.max(min + 1, max);\r\n\r\n\t\t// PRIVATE\r\n\t\tme._table = [];\r\n\t\tme._timestamps = {\r\n\t\t\tdata: timestamps,\r\n\t\t\tdatasets: datasets,\r\n\t\t\tlabels: labels\r\n\t\t};\r\n\t},\r\n\r\n\tbuildTicks: function() {\r\n\t\tvar me = this;\r\n\t\tvar min = me.min;\r\n\t\tvar max = me.max;\r\n\t\tvar options = me.options;\r\n\t\tvar tickOpts = options.ticks;\r\n\t\tvar timeOpts = options.time;\r\n\t\tvar timestamps = me._timestamps;\r\n\t\tvar ticks = [];\r\n\t\tvar capacity = me.getLabelCapacity(min);\r\n\t\tvar source = tickOpts.source;\r\n\t\tvar distribution = options.distribution;\r\n\t\tvar i, ilen, timestamp;\r\n\r\n\t\tif (source === 'data' || (source === 'auto' && distribution === 'series')) {\r\n\t\t\ttimestamps = timestamps.data;\r\n\t\t} else if (source === 'labels') {\r\n\t\t\ttimestamps = timestamps.labels;\r\n\t\t} else {\r\n\t\t\ttimestamps = generate(me, min, max, capacity);\r\n\t\t}\r\n\r\n\t\tif (options.bounds === 'ticks' && timestamps.length) {\r\n\t\t\tmin = timestamps[0];\r\n\t\t\tmax = timestamps[timestamps.length - 1];\r\n\t\t}\r\n\r\n\t\t// Enforce limits with user min/max options\r\n\t\tmin = parse(me, getMin(options)) || min;\r\n\t\tmax = parse(me, getMax(options)) || max;\r\n\r\n\t\t// Remove ticks outside the min/max range\r\n\t\tfor (i = 0, ilen = timestamps.length; i < ilen; ++i) {\r\n\t\t\ttimestamp = timestamps[i];\r\n\t\t\tif (timestamp >= min && timestamp <= max) {\r\n\t\t\t\tticks.push(timestamp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.min = min;\r\n\t\tme.max = max;\r\n\r\n\t\t// PRIVATE\r\n\t\t// determineUnitForFormatting relies on the number of ticks so we don't use it when\r\n\t\t// autoSkip is enabled because we don't yet know what the final number of ticks will be\r\n\t\tme._unit = timeOpts.unit || (tickOpts.autoSkip\r\n\t\t\t? determineUnitForAutoTicks(timeOpts.minUnit, me.min, me.max, capacity)\r\n\t\t\t: determineUnitForFormatting(me, ticks.length, timeOpts.minUnit, me.min, me.max));\r\n\t\tme._majorUnit = !tickOpts.major.enabled || me._unit === 'year' ? undefined\r\n\t\t\t: determineMajorUnit(me._unit);\r\n\t\tme._table = buildLookupTable(me._timestamps.data, min, max, distribution);\r\n\t\tme._offsets = computeOffsets(me._table, ticks, min, max, options);\r\n\r\n\t\tif (tickOpts.reverse) {\r\n\t\t\tticks.reverse();\r\n\t\t}\r\n\r\n\t\treturn ticksFromTimestamps(me, ticks, me._majorUnit);\r\n\t},\r\n\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar adapter = me._adapter;\r\n\t\tvar data = me.chart.data;\r\n\t\tvar timeOpts = me.options.time;\r\n\t\tvar label = data.labels && index < data.labels.length ? data.labels[index] : '';\r\n\t\tvar value = data.datasets[datasetIndex].data[index];\r\n\r\n\t\tif (helpers$1.isObject(value)) {\r\n\t\t\tlabel = me.getRightValue(value);\r\n\t\t}\r\n\t\tif (timeOpts.tooltipFormat) {\r\n\t\t\treturn adapter.format(toTimestamp(me, label), timeOpts.tooltipFormat);\r\n\t\t}\r\n\t\tif (typeof label === 'string') {\r\n\t\t\treturn label;\r\n\t\t}\r\n\t\treturn adapter.format(toTimestamp(me, label), timeOpts.displayFormats.datetime);\r\n\t},\r\n\r\n\t/**\r\n\t * Function to format an individual tick mark\r\n\t * @private\r\n\t */\r\n\ttickFormatFunction: function(time, index, ticks, format) {\r\n\t\tvar me = this;\r\n\t\tvar adapter = me._adapter;\r\n\t\tvar options = me.options;\r\n\t\tvar formats = options.time.displayFormats;\r\n\t\tvar minorFormat = formats[me._unit];\r\n\t\tvar majorUnit = me._majorUnit;\r\n\t\tvar majorFormat = formats[majorUnit];\r\n\t\tvar tick = ticks[index];\r\n\t\tvar tickOpts = options.ticks;\r\n\t\tvar major = majorUnit && majorFormat && tick && tick.major;\r\n\t\tvar label = adapter.format(time, format ? format : major ? majorFormat : minorFormat);\r\n\t\tvar nestedTickOpts = major ? tickOpts.major : tickOpts.minor;\r\n\t\tvar formatter = resolve$5([\r\n\t\t\tnestedTickOpts.callback,\r\n\t\t\tnestedTickOpts.userCallback,\r\n\t\t\ttickOpts.callback,\r\n\t\t\ttickOpts.userCallback\r\n\t\t]);\r\n\r\n\t\treturn formatter ? formatter(label, index, ticks) : label;\r\n\t},\r\n\r\n\tconvertTicksToLabels: function(ticks) {\r\n\t\tvar labels = [];\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = ticks.length; i < ilen; ++i) {\r\n\t\t\tlabels.push(this.tickFormatFunction(ticks[i].value, i, ticks));\r\n\t\t}\r\n\r\n\t\treturn labels;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tgetPixelForOffset: function(time) {\r\n\t\tvar me = this;\r\n\t\tvar offsets = me._offsets;\r\n\t\tvar pos = interpolate$1(me._table, 'time', time, 'pos');\r\n\t\treturn me.getPixelForDecimal((offsets.start + pos) * offsets.factor);\r\n\t},\r\n\r\n\tgetPixelForValue: function(value, index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar time = null;\r\n\r\n\t\tif (index !== undefined && datasetIndex !== undefined) {\r\n\t\t\ttime = me._timestamps.datasets[datasetIndex][index];\r\n\t\t}\r\n\r\n\t\tif (time === null) {\r\n\t\t\ttime = parse(me, value);\r\n\t\t}\r\n\r\n\t\tif (time !== null) {\r\n\t\t\treturn me.getPixelForOffset(time);\r\n\t\t}\r\n\t},\r\n\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar ticks = this.getTicks();\r\n\t\treturn index >= 0 && index < ticks.length ?\r\n\t\t\tthis.getPixelForOffset(ticks[index].value) :\r\n\t\t\tnull;\r\n\t},\r\n\r\n\tgetValueForPixel: function(pixel) {\r\n\t\tvar me = this;\r\n\t\tvar offsets = me._offsets;\r\n\t\tvar pos = me.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\r\n\t\tvar time = interpolate$1(me._table, 'pos', pos, 'time');\r\n\r\n\t\t// DEPRECATION, we should return time directly\r\n\t\treturn me._adapter._create(time);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getLabelSize: function(label) {\r\n\t\tvar me = this;\r\n\t\tvar ticksOpts = me.options.ticks;\r\n\t\tvar tickLabelWidth = me.ctx.measureText(label).width;\r\n\t\tvar angle = helpers$1.toRadians(me.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\r\n\t\tvar cosRotation = Math.cos(angle);\r\n\t\tvar sinRotation = Math.sin(angle);\r\n\t\tvar tickFontSize = valueOrDefault$d(ticksOpts.fontSize, core_defaults.global.defaultFontSize);\r\n\r\n\t\treturn {\r\n\t\t\tw: (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation),\r\n\t\t\th: (tickLabelWidth * sinRotation) + (tickFontSize * cosRotation)\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Crude approximation of what the label width might be\r\n\t * @private\r\n\t */\r\n\tgetLabelWidth: function(label) {\r\n\t\treturn this._getLabelSize(label).w;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tgetLabelCapacity: function(exampleTime) {\r\n\t\tvar me = this;\r\n\t\tvar timeOpts = me.options.time;\r\n\t\tvar displayFormats = timeOpts.displayFormats;\r\n\r\n\t\t// pick the longest format (milliseconds) for guestimation\r\n\t\tvar format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\r\n\t\tvar exampleLabel = me.tickFormatFunction(exampleTime, 0, ticksFromTimestamps(me, [exampleTime], me._majorUnit), format);\r\n\t\tvar size = me._getLabelSize(exampleLabel);\r\n\t\tvar capacity = Math.floor(me.isHorizontal() ? me.width / size.w : me.height / size.h);\r\n\r\n\t\tif (me.options.offset) {\r\n\t\t\tcapacity--;\r\n\t\t}\r\n\r\n\t\treturn capacity > 0 ? capacity : 1;\r\n\t}\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults$4 = defaultConfig$4;\nscale_time._defaults = _defaults$4;\n\nvar scales = {\r\n\tcategory: scale_category,\r\n\tlinear: scale_linear,\r\n\tlogarithmic: scale_logarithmic,\r\n\tradialLinear: scale_radialLinear,\r\n\ttime: scale_time\r\n};\n\nvar FORMATS = {\r\n\tdatetime: 'MMM D, YYYY, h:mm:ss a',\r\n\tmillisecond: 'h:mm:ss.SSS a',\r\n\tsecond: 'h:mm:ss a',\r\n\tminute: 'h:mm a',\r\n\thour: 'hA',\r\n\tday: 'MMM D',\r\n\tweek: 'll',\r\n\tmonth: 'MMM YYYY',\r\n\tquarter: '[Q]Q - YYYY',\r\n\tyear: 'YYYY'\r\n};\r\n\r\ncore_adapters._date.override(typeof moment === 'function' ? {\r\n\t_id: 'moment', // DEBUG ONLY\r\n\r\n\tformats: function() {\r\n\t\treturn FORMATS;\r\n\t},\r\n\r\n\tparse: function(value, format) {\r\n\t\tif (typeof value === 'string' && typeof format === 'string') {\r\n\t\t\tvalue = moment(value, format);\r\n\t\t} else if (!(value instanceof moment)) {\r\n\t\t\tvalue = moment(value);\r\n\t\t}\r\n\t\treturn value.isValid() ? value.valueOf() : null;\r\n\t},\r\n\r\n\tformat: function(time, format) {\r\n\t\treturn moment(time).format(format);\r\n\t},\r\n\r\n\tadd: function(time, amount, unit) {\r\n\t\treturn moment(time).add(amount, unit).valueOf();\r\n\t},\r\n\r\n\tdiff: function(max, min, unit) {\r\n\t\treturn moment(max).diff(moment(min), unit);\r\n\t},\r\n\r\n\tstartOf: function(time, unit, weekday) {\r\n\t\ttime = moment(time);\r\n\t\tif (unit === 'isoWeek') {\r\n\t\t\treturn time.isoWeekday(weekday).valueOf();\r\n\t\t}\r\n\t\treturn time.startOf(unit).valueOf();\r\n\t},\r\n\r\n\tendOf: function(time, unit) {\r\n\t\treturn moment(time).endOf(unit).valueOf();\r\n\t},\r\n\r\n\t// DEPRECATIONS\r\n\r\n\t/**\r\n\t * Provided for backward compatibility with scale.getValueForPixel().\r\n\t * @deprecated since version 2.8.0\r\n\t * @todo remove at version 3\r\n\t * @private\r\n\t */\r\n\t_create: function(time) {\r\n\t\treturn moment(time);\r\n\t},\r\n} : {});\n\ncore_defaults._set('global', {\r\n\tplugins: {\r\n\t\tfiller: {\r\n\t\t\tpropagate: true\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar mappers = {\r\n\tdataset: function(source) {\r\n\t\tvar index = source.fill;\r\n\t\tvar chart = source.chart;\r\n\t\tvar meta = chart.getDatasetMeta(index);\r\n\t\tvar visible = meta && chart.isDatasetVisible(index);\r\n\t\tvar points = (visible && meta.dataset._children) || [];\r\n\t\tvar length = points.length || 0;\r\n\r\n\t\treturn !length ? null : function(point, i) {\r\n\t\t\treturn (i < length && points[i]._view) || null;\r\n\t\t};\r\n\t},\r\n\r\n\tboundary: function(source) {\r\n\t\tvar boundary = source.boundary;\r\n\t\tvar x = boundary ? boundary.x : null;\r\n\t\tvar y = boundary ? boundary.y : null;\r\n\r\n\t\tif (helpers$1.isArray(boundary)) {\r\n\t\t\treturn function(point, i) {\r\n\t\t\t\treturn boundary[i];\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn function(point) {\r\n\t\t\treturn {\r\n\t\t\t\tx: x === null ? point.x : x,\r\n\t\t\t\ty: y === null ? point.y : y,\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n};\r\n\r\n// @todo if (fill[0] === '#')\r\nfunction decodeFill(el, index, count) {\r\n\tvar model = el._model || {};\r\n\tvar fill = model.fill;\r\n\tvar target;\r\n\r\n\tif (fill === undefined) {\r\n\t\tfill = !!model.backgroundColor;\r\n\t}\r\n\r\n\tif (fill === false || fill === null) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (fill === true) {\r\n\t\treturn 'origin';\r\n\t}\r\n\r\n\ttarget = parseFloat(fill, 10);\r\n\tif (isFinite(target) && Math.floor(target) === target) {\r\n\t\tif (fill[0] === '-' || fill[0] === '+') {\r\n\t\t\ttarget = index + target;\r\n\t\t}\r\n\r\n\t\tif (target === index || target < 0 || target >= count) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\tswitch (fill) {\r\n\t// compatibility\r\n\tcase 'bottom':\r\n\t\treturn 'start';\r\n\tcase 'top':\r\n\t\treturn 'end';\r\n\tcase 'zero':\r\n\t\treturn 'origin';\r\n\t// supported boundaries\r\n\tcase 'origin':\r\n\tcase 'start':\r\n\tcase 'end':\r\n\t\treturn fill;\r\n\t// invalid fill values\r\n\tdefault:\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction computeLinearBoundary(source) {\r\n\tvar model = source.el._model || {};\r\n\tvar scale = source.el._scale || {};\r\n\tvar fill = source.fill;\r\n\tvar target = null;\r\n\tvar horizontal;\r\n\r\n\tif (isFinite(fill)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Backward compatibility: until v3, we still need to support boundary values set on\r\n\t// the model (scaleTop, scaleBottom and scaleZero) because some external plugins and\r\n\t// controllers might still use it (e.g. the Smith chart).\r\n\r\n\tif (fill === 'start') {\r\n\t\ttarget = model.scaleBottom === undefined ? scale.bottom : model.scaleBottom;\r\n\t} else if (fill === 'end') {\r\n\t\ttarget = model.scaleTop === undefined ? scale.top : model.scaleTop;\r\n\t} else if (model.scaleZero !== undefined) {\r\n\t\ttarget = model.scaleZero;\r\n\t} else if (scale.getBasePixel) {\r\n\t\ttarget = scale.getBasePixel();\r\n\t}\r\n\r\n\tif (target !== undefined && target !== null) {\r\n\t\tif (target.x !== undefined && target.y !== undefined) {\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\tif (helpers$1.isFinite(target)) {\r\n\t\t\thorizontal = scale.isHorizontal();\r\n\t\t\treturn {\r\n\t\t\t\tx: horizontal ? target : null,\r\n\t\t\t\ty: horizontal ? null : target\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nfunction computeCircularBoundary(source) {\r\n\tvar scale = source.el._scale;\r\n\tvar options = scale.options;\r\n\tvar length = scale.chart.data.labels.length;\r\n\tvar fill = source.fill;\r\n\tvar target = [];\r\n\tvar start, end, center, i, point;\r\n\r\n\tif (!length) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstart = options.ticks.reverse ? scale.max : scale.min;\r\n\tend = options.ticks.reverse ? scale.min : scale.max;\r\n\tcenter = scale.getPointPositionForValue(0, start);\r\n\tfor (i = 0; i < length; ++i) {\r\n\t\tpoint = fill === 'start' || fill === 'end'\r\n\t\t\t? scale.getPointPositionForValue(i, fill === 'start' ? start : end)\r\n\t\t\t: scale.getBasePosition(i);\r\n\t\tif (options.gridLines.circular) {\r\n\t\t\tpoint.cx = center.x;\r\n\t\t\tpoint.cy = center.y;\r\n\t\t\tpoint.angle = scale.getIndexAngle(i) - Math.PI / 2;\r\n\t\t}\r\n\t\ttarget.push(point);\r\n\t}\r\n\treturn target;\r\n}\r\n\r\nfunction computeBoundary(source) {\r\n\tvar scale = source.el._scale || {};\r\n\r\n\tif (scale.getPointPositionForValue) {\r\n\t\treturn computeCircularBoundary(source);\r\n\t}\r\n\treturn computeLinearBoundary(source);\r\n}\r\n\r\nfunction resolveTarget(sources, index, propagate) {\r\n\tvar source = sources[index];\r\n\tvar fill = source.fill;\r\n\tvar visited = [index];\r\n\tvar target;\r\n\r\n\tif (!propagate) {\r\n\t\treturn fill;\r\n\t}\r\n\r\n\twhile (fill !== false && visited.indexOf(fill) === -1) {\r\n\t\tif (!isFinite(fill)) {\r\n\t\t\treturn fill;\r\n\t\t}\r\n\r\n\t\ttarget = sources[fill];\r\n\t\tif (!target) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (target.visible) {\r\n\t\t\treturn fill;\r\n\t\t}\r\n\r\n\t\tvisited.push(fill);\r\n\t\tfill = target.fill;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction createMapper(source) {\r\n\tvar fill = source.fill;\r\n\tvar type = 'dataset';\r\n\r\n\tif (fill === false) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!isFinite(fill)) {\r\n\t\ttype = 'boundary';\r\n\t}\r\n\r\n\treturn mappers[type](source);\r\n}\r\n\r\nfunction isDrawable(point) {\r\n\treturn point && !point.skip;\r\n}\r\n\r\nfunction drawArea(ctx, curve0, curve1, len0, len1) {\r\n\tvar i, cx, cy, r;\r\n\r\n\tif (!len0 || !len1) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// building first area curve (normal)\r\n\tctx.moveTo(curve0[0].x, curve0[0].y);\r\n\tfor (i = 1; i < len0; ++i) {\r\n\t\thelpers$1.canvas.lineTo(ctx, curve0[i - 1], curve0[i]);\r\n\t}\r\n\r\n\tif (curve1[0].angle !== undefined) {\r\n\t\tcx = curve1[0].cx;\r\n\t\tcy = curve1[0].cy;\r\n\t\tr = Math.sqrt(Math.pow(curve1[0].x - cx, 2) + Math.pow(curve1[0].y - cy, 2));\r\n\t\tfor (i = len1 - 1; i > 0; --i) {\r\n\t\t\tctx.arc(cx, cy, r, curve1[i].angle, curve1[i - 1].angle, true);\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t// joining the two area curves\r\n\tctx.lineTo(curve1[len1 - 1].x, curve1[len1 - 1].y);\r\n\r\n\t// building opposite area curve (reverse)\r\n\tfor (i = len1 - 1; i > 0; --i) {\r\n\t\thelpers$1.canvas.lineTo(ctx, curve1[i], curve1[i - 1], true);\r\n\t}\r\n}\r\n\r\nfunction doFill(ctx, points, mapper, view, color, loop) {\r\n\tvar count = points.length;\r\n\tvar span = view.spanGaps;\r\n\tvar curve0 = [];\r\n\tvar curve1 = [];\r\n\tvar len0 = 0;\r\n\tvar len1 = 0;\r\n\tvar i, ilen, index, p0, p1, d0, d1, loopOffset;\r\n\r\n\tctx.beginPath();\r\n\r\n\tfor (i = 0, ilen = count; i < ilen; ++i) {\r\n\t\tindex = i % count;\r\n\t\tp0 = points[index]._view;\r\n\t\tp1 = mapper(p0, index, view);\r\n\t\td0 = isDrawable(p0);\r\n\t\td1 = isDrawable(p1);\r\n\r\n\t\tif (loop && loopOffset === undefined && d0) {\r\n\t\t\tloopOffset = i + 1;\r\n\t\t\tilen = count + loopOffset;\r\n\t\t}\r\n\r\n\t\tif (d0 && d1) {\r\n\t\t\tlen0 = curve0.push(p0);\r\n\t\t\tlen1 = curve1.push(p1);\r\n\t\t} else if (len0 && len1) {\r\n\t\t\tif (!span) {\r\n\t\t\t\tdrawArea(ctx, curve0, curve1, len0, len1);\r\n\t\t\t\tlen0 = len1 = 0;\r\n\t\t\t\tcurve0 = [];\r\n\t\t\t\tcurve1 = [];\r\n\t\t\t} else {\r\n\t\t\t\tif (d0) {\r\n\t\t\t\t\tcurve0.push(p0);\r\n\t\t\t\t}\r\n\t\t\t\tif (d1) {\r\n\t\t\t\t\tcurve1.push(p1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdrawArea(ctx, curve0, curve1, len0, len1);\r\n\r\n\tctx.closePath();\r\n\tctx.fillStyle = color;\r\n\tctx.fill();\r\n}\r\n\r\nvar plugin_filler = {\r\n\tid: 'filler',\r\n\r\n\tafterDatasetsUpdate: function(chart, options) {\r\n\t\tvar count = (chart.data.datasets || []).length;\r\n\t\tvar propagate = options.propagate;\r\n\t\tvar sources = [];\r\n\t\tvar meta, i, el, source;\r\n\r\n\t\tfor (i = 0; i < count; ++i) {\r\n\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\tel = meta.dataset;\r\n\t\t\tsource = null;\r\n\r\n\t\t\tif (el && el._model && el instanceof elements.Line) {\r\n\t\t\t\tsource = {\r\n\t\t\t\t\tvisible: chart.isDatasetVisible(i),\r\n\t\t\t\t\tfill: decodeFill(el, i, count),\r\n\t\t\t\t\tchart: chart,\r\n\t\t\t\t\tel: el\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tmeta.$filler = source;\r\n\t\t\tsources.push(source);\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < count; ++i) {\r\n\t\t\tsource = sources[i];\r\n\t\t\tif (!source) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tsource.fill = resolveTarget(sources, i, propagate);\r\n\t\t\tsource.boundary = computeBoundary(source);\r\n\t\t\tsource.mapper = createMapper(source);\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeDatasetsDraw: function(chart) {\r\n\t\tvar metasets = chart._getSortedVisibleDatasetMetas();\r\n\t\tvar ctx = chart.ctx;\r\n\t\tvar meta, i, el, view, points, mapper, color;\r\n\r\n\t\tfor (i = metasets.length - 1; i >= 0; --i) {\r\n\t\t\tmeta = metasets[i].$filler;\r\n\r\n\t\t\tif (!meta || !meta.visible) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tel = meta.el;\r\n\t\t\tview = el._view;\r\n\t\t\tpoints = el._children || [];\r\n\t\t\tmapper = meta.mapper;\r\n\t\t\tcolor = view.backgroundColor || core_defaults.global.defaultColor;\r\n\r\n\t\t\tif (mapper && color && points.length) {\r\n\t\t\t\thelpers$1.canvas.clipArea(ctx, chart.chartArea);\r\n\t\t\t\tdoFill(ctx, points, mapper, view, color, el._loop);\r\n\t\t\t\thelpers$1.canvas.unclipArea(ctx);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\n\nvar getRtlHelper$1 = helpers$1.rtl.getRtlAdapter;\r\nvar noop$1 = helpers$1.noop;\r\nvar valueOrDefault$e = helpers$1.valueOrDefault;\r\n\r\ncore_defaults._set('global', {\r\n\tlegend: {\r\n\t\tdisplay: true,\r\n\t\tposition: 'top',\r\n\t\talign: 'center',\r\n\t\tfullWidth: true,\r\n\t\treverse: false,\r\n\t\tweight: 1000,\r\n\r\n\t\t// a callback that will handle\r\n\t\tonClick: function(e, legendItem) {\r\n\t\t\tvar index = legendItem.datasetIndex;\r\n\t\t\tvar ci = this.chart;\r\n\t\t\tvar meta = ci.getDatasetMeta(index);\r\n\r\n\t\t\t// See controller.isDatasetVisible comment\r\n\t\t\tmeta.hidden = meta.hidden === null ? !ci.data.datasets[index].hidden : null;\r\n\r\n\t\t\t// We hid a dataset ... rerender the chart\r\n\t\t\tci.update();\r\n\t\t},\r\n\r\n\t\tonHover: null,\r\n\t\tonLeave: null,\r\n\r\n\t\tlabels: {\r\n\t\t\tboxWidth: 40,\r\n\t\t\tpadding: 10,\r\n\t\t\t// Generates labels shown in the legend\r\n\t\t\t// Valid properties to return:\r\n\t\t\t// text : text to display\r\n\t\t\t// fillStyle : fill of coloured box\r\n\t\t\t// strokeStyle: stroke of coloured box\r\n\t\t\t// hidden : if this legend item refers to a hidden item\r\n\t\t\t// lineCap : cap style for line\r\n\t\t\t// lineDash\r\n\t\t\t// lineDashOffset :\r\n\t\t\t// lineJoin :\r\n\t\t\t// lineWidth :\r\n\t\t\tgenerateLabels: function(chart) {\r\n\t\t\t\tvar datasets = chart.data.datasets;\r\n\t\t\t\tvar options = chart.options.legend || {};\r\n\t\t\t\tvar usePointStyle = options.labels && options.labels.usePointStyle;\r\n\r\n\t\t\t\treturn chart._getSortedDatasetMetas().map(function(meta) {\r\n\t\t\t\t\tvar style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttext: datasets[meta.index].label,\r\n\t\t\t\t\t\tfillStyle: style.backgroundColor,\r\n\t\t\t\t\t\thidden: !chart.isDatasetVisible(meta.index),\r\n\t\t\t\t\t\tlineCap: style.borderCapStyle,\r\n\t\t\t\t\t\tlineDash: style.borderDash,\r\n\t\t\t\t\t\tlineDashOffset: style.borderDashOffset,\r\n\t\t\t\t\t\tlineJoin: style.borderJoinStyle,\r\n\t\t\t\t\t\tlineWidth: style.borderWidth,\r\n\t\t\t\t\t\tstrokeStyle: style.borderColor,\r\n\t\t\t\t\t\tpointStyle: style.pointStyle,\r\n\t\t\t\t\t\trotation: style.rotation,\r\n\r\n\t\t\t\t\t\t// Below is extra data used for toggling the datasets\r\n\t\t\t\t\t\tdatasetIndex: meta.index\r\n\t\t\t\t\t};\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tlegendCallback: function(chart) {\r\n\t\tvar list = document.createElement('ul');\r\n\t\tvar datasets = chart.data.datasets;\r\n\t\tvar i, ilen, listItem, listItemSpan;\r\n\r\n\t\tlist.setAttribute('class', chart.id + '-legend');\r\n\r\n\t\tfor (i = 0, ilen = datasets.length; i < ilen; i++) {\r\n\t\t\tlistItem = list.appendChild(document.createElement('li'));\r\n\t\t\tlistItemSpan = listItem.appendChild(document.createElement('span'));\r\n\t\t\tlistItemSpan.style.backgroundColor = datasets[i].backgroundColor;\r\n\t\t\tif (datasets[i].label) {\r\n\t\t\t\tlistItem.appendChild(document.createTextNode(datasets[i].label));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn list.outerHTML;\r\n\t}\r\n});\r\n\r\n/**\r\n * Helper function to get the box width based on the usePointStyle option\r\n * @param {object} labelopts - the label options on the legend\r\n * @param {number} fontSize - the label font size\r\n * @return {number} width of the color box area\r\n */\r\nfunction getBoxWidth(labelOpts, fontSize) {\r\n\treturn labelOpts.usePointStyle && labelOpts.boxWidth > fontSize ?\r\n\t\tfontSize :\r\n\t\tlabelOpts.boxWidth;\r\n}\r\n\r\n/**\r\n * IMPORTANT: this class is exposed publicly as Chart.Legend, backward compatibility required!\r\n */\r\nvar Legend = core_element.extend({\r\n\r\n\tinitialize: function(config) {\r\n\t\tvar me = this;\r\n\t\thelpers$1.extend(me, config);\r\n\r\n\t\t// Contains hit boxes for each dataset (in dataset order)\r\n\t\tme.legendHitBoxes = [];\r\n\r\n\t\t/**\r\n \t\t * @private\r\n \t\t */\r\n\t\tme._hoveredItem = null;\r\n\r\n\t\t// Are we in doughnut mode which has a different data type\r\n\t\tme.doughnutMode = false;\r\n\t},\r\n\r\n\t// These methods are ordered by lifecycle. Utilities then follow.\r\n\t// Any function defined here is inherited by all legend types.\r\n\t// Any function can be extended by the legend type\r\n\r\n\tbeforeUpdate: noop$1,\r\n\tupdate: function(maxWidth, maxHeight, margins) {\r\n\t\tvar me = this;\r\n\r\n\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\r\n\t\tme.beforeUpdate();\r\n\r\n\t\t// Absorb the master measurements\r\n\t\tme.maxWidth = maxWidth;\r\n\t\tme.maxHeight = maxHeight;\r\n\t\tme.margins = margins;\r\n\r\n\t\t// Dimensions\r\n\t\tme.beforeSetDimensions();\r\n\t\tme.setDimensions();\r\n\t\tme.afterSetDimensions();\r\n\t\t// Labels\r\n\t\tme.beforeBuildLabels();\r\n\t\tme.buildLabels();\r\n\t\tme.afterBuildLabels();\r\n\r\n\t\t// Fit\r\n\t\tme.beforeFit();\r\n\t\tme.fit();\r\n\t\tme.afterFit();\r\n\t\t//\r\n\t\tme.afterUpdate();\r\n\r\n\t\treturn me.minSize;\r\n\t},\r\n\tafterUpdate: noop$1,\r\n\r\n\t//\r\n\r\n\tbeforeSetDimensions: noop$1,\r\n\tsetDimensions: function() {\r\n\t\tvar me = this;\r\n\t\t// Set the unconstrained dimension before label rotation\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.width = me.maxWidth;\r\n\t\t\tme.left = 0;\r\n\t\t\tme.right = me.width;\r\n\t\t} else {\r\n\t\t\tme.height = me.maxHeight;\r\n\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.top = 0;\r\n\t\t\tme.bottom = me.height;\r\n\t\t}\r\n\r\n\t\t// Reset padding\r\n\t\tme.paddingLeft = 0;\r\n\t\tme.paddingTop = 0;\r\n\t\tme.paddingRight = 0;\r\n\t\tme.paddingBottom = 0;\r\n\r\n\t\t// Reset minSize\r\n\t\tme.minSize = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0\r\n\t\t};\r\n\t},\r\n\tafterSetDimensions: noop$1,\r\n\r\n\t//\r\n\r\n\tbeforeBuildLabels: noop$1,\r\n\tbuildLabels: function() {\r\n\t\tvar me = this;\r\n\t\tvar labelOpts = me.options.labels || {};\r\n\t\tvar legendItems = helpers$1.callback(labelOpts.generateLabels, [me.chart], me) || [];\r\n\r\n\t\tif (labelOpts.filter) {\r\n\t\t\tlegendItems = legendItems.filter(function(item) {\r\n\t\t\t\treturn labelOpts.filter(item, me.chart.data);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (me.options.reverse) {\r\n\t\t\tlegendItems.reverse();\r\n\t\t}\r\n\r\n\t\tme.legendItems = legendItems;\r\n\t},\r\n\tafterBuildLabels: noop$1,\r\n\r\n\t//\r\n\r\n\tbeforeFit: noop$1,\r\n\tfit: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar labelOpts = opts.labels;\r\n\t\tvar display = opts.display;\r\n\r\n\t\tvar ctx = me.ctx;\r\n\r\n\t\tvar labelFont = helpers$1.options._parseFont(labelOpts);\r\n\t\tvar fontSize = labelFont.size;\r\n\r\n\t\t// Reset hit boxes\r\n\t\tvar hitboxes = me.legendHitBoxes = [];\r\n\r\n\t\tvar minSize = me.minSize;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\r\n\t\tif (isHorizontal) {\r\n\t\t\tminSize.width = me.maxWidth; // fill all the width\r\n\t\t\tminSize.height = display ? 10 : 0;\r\n\t\t} else {\r\n\t\t\tminSize.width = display ? 10 : 0;\r\n\t\t\tminSize.height = me.maxHeight; // fill all the height\r\n\t\t}\r\n\r\n\t\t// Increase sizes here\r\n\t\tif (!display) {\r\n\t\t\tme.width = minSize.width = me.height = minSize.height = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tctx.font = labelFont.string;\r\n\r\n\t\tif (isHorizontal) {\r\n\t\t\t// Labels\r\n\r\n\t\t\t// Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\r\n\t\t\tvar lineWidths = me.lineWidths = [0];\r\n\t\t\tvar totalHeight = 0;\r\n\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'middle';\r\n\r\n\t\t\thelpers$1.each(me.legendItems, function(legendItem, i) {\r\n\t\t\t\tvar boxWidth = getBoxWidth(labelOpts, fontSize);\r\n\t\t\t\tvar width = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\r\n\r\n\t\t\t\tif (i === 0 || lineWidths[lineWidths.length - 1] + width + 2 * labelOpts.padding > minSize.width) {\r\n\t\t\t\t\ttotalHeight += fontSize + labelOpts.padding;\r\n\t\t\t\t\tlineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Store the hitbox width and height here. Final position will be updated in `draw`\r\n\t\t\t\thitboxes[i] = {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: fontSize\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlineWidths[lineWidths.length - 1] += width + labelOpts.padding;\r\n\t\t\t});\r\n\r\n\t\t\tminSize.height += totalHeight;\r\n\r\n\t\t} else {\r\n\t\t\tvar vPadding = labelOpts.padding;\r\n\t\t\tvar columnWidths = me.columnWidths = [];\r\n\t\t\tvar columnHeights = me.columnHeights = [];\r\n\t\t\tvar totalWidth = labelOpts.padding;\r\n\t\t\tvar currentColWidth = 0;\r\n\t\t\tvar currentColHeight = 0;\r\n\r\n\t\t\thelpers$1.each(me.legendItems, function(legendItem, i) {\r\n\t\t\t\tvar boxWidth = getBoxWidth(labelOpts, fontSize);\r\n\t\t\t\tvar itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\r\n\r\n\t\t\t\t// If too tall, go to new column\r\n\t\t\t\tif (i > 0 && currentColHeight + fontSize + 2 * vPadding > minSize.height) {\r\n\t\t\t\t\ttotalWidth += currentColWidth + labelOpts.padding;\r\n\t\t\t\t\tcolumnWidths.push(currentColWidth); // previous column width\r\n\t\t\t\t\tcolumnHeights.push(currentColHeight);\r\n\t\t\t\t\tcurrentColWidth = 0;\r\n\t\t\t\t\tcurrentColHeight = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Get max width\r\n\t\t\t\tcurrentColWidth = Math.max(currentColWidth, itemWidth);\r\n\t\t\t\tcurrentColHeight += fontSize + vPadding;\r\n\r\n\t\t\t\t// Store the hitbox width and height here. Final position will be updated in `draw`\r\n\t\t\t\thitboxes[i] = {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\twidth: itemWidth,\r\n\t\t\t\t\theight: fontSize\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\ttotalWidth += currentColWidth;\r\n\t\t\tcolumnWidths.push(currentColWidth);\r\n\t\t\tcolumnHeights.push(currentColHeight);\r\n\t\t\tminSize.width += totalWidth;\r\n\t\t}\r\n\r\n\t\tme.width = minSize.width;\r\n\t\tme.height = minSize.height;\r\n\t},\r\n\tafterFit: noop$1,\r\n\r\n\t// Shared Methods\r\n\tisHorizontal: function() {\r\n\t\treturn this.options.position === 'top' || this.options.position === 'bottom';\r\n\t},\r\n\r\n\t// Actually draw the legend on the canvas\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar labelOpts = opts.labels;\r\n\t\tvar globalDefaults = core_defaults.global;\r\n\t\tvar defaultColor = globalDefaults.defaultColor;\r\n\t\tvar lineDefault = globalDefaults.elements.line;\r\n\t\tvar legendHeight = me.height;\r\n\t\tvar columnHeights = me.columnHeights;\r\n\t\tvar legendWidth = me.width;\r\n\t\tvar lineWidths = me.lineWidths;\r\n\r\n\t\tif (!opts.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar rtlHelper = getRtlHelper$1(opts.rtl, me.left, me.minSize.width);\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar fontColor = valueOrDefault$e(labelOpts.fontColor, globalDefaults.defaultFontColor);\r\n\t\tvar labelFont = helpers$1.options._parseFont(labelOpts);\r\n\t\tvar fontSize = labelFont.size;\r\n\t\tvar cursor;\r\n\r\n\t\t// Canvas setup\r\n\t\tctx.textAlign = rtlHelper.textAlign('left');\r\n\t\tctx.textBaseline = 'middle';\r\n\t\tctx.lineWidth = 0.5;\r\n\t\tctx.strokeStyle = fontColor; // for strikethrough effect\r\n\t\tctx.fillStyle = fontColor; // render in correct colour\r\n\t\tctx.font = labelFont.string;\r\n\r\n\t\tvar boxWidth = getBoxWidth(labelOpts, fontSize);\r\n\t\tvar hitboxes = me.legendHitBoxes;\r\n\r\n\t\t// current position\r\n\t\tvar drawLegendBox = function(x, y, legendItem) {\r\n\t\t\tif (isNaN(boxWidth) || boxWidth <= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Set the ctx for the box\r\n\t\t\tctx.save();\r\n\r\n\t\t\tvar lineWidth = valueOrDefault$e(legendItem.lineWidth, lineDefault.borderWidth);\r\n\t\t\tctx.fillStyle = valueOrDefault$e(legendItem.fillStyle, defaultColor);\r\n\t\t\tctx.lineCap = valueOrDefault$e(legendItem.lineCap, lineDefault.borderCapStyle);\r\n\t\t\tctx.lineDashOffset = valueOrDefault$e(legendItem.lineDashOffset, lineDefault.borderDashOffset);\r\n\t\t\tctx.lineJoin = valueOrDefault$e(legendItem.lineJoin, lineDefault.borderJoinStyle);\r\n\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\tctx.strokeStyle = valueOrDefault$e(legendItem.strokeStyle, defaultColor);\r\n\r\n\t\t\tif (ctx.setLineDash) {\r\n\t\t\t\t// IE 9 and 10 do not support line dash\r\n\t\t\t\tctx.setLineDash(valueOrDefault$e(legendItem.lineDash, lineDefault.borderDash));\r\n\t\t\t}\r\n\r\n\t\t\tif (labelOpts && labelOpts.usePointStyle) {\r\n\t\t\t\t// Recalculate x and y for drawPoint() because its expecting\r\n\t\t\t\t// x and y to be center of figure (instead of top left)\r\n\t\t\t\tvar radius = boxWidth * Math.SQRT2 / 2;\r\n\t\t\t\tvar centerX = rtlHelper.xPlus(x, boxWidth / 2);\r\n\t\t\t\tvar centerY = y + fontSize / 2;\r\n\r\n\t\t\t\t// Draw pointStyle as legend symbol\r\n\t\t\t\thelpers$1.canvas.drawPoint(ctx, legendItem.pointStyle, radius, centerX, centerY, legendItem.rotation);\r\n\t\t\t} else {\r\n\t\t\t\t// Draw box as legend symbol\r\n\t\t\t\tctx.fillRect(rtlHelper.leftForLtr(x, boxWidth), y, boxWidth, fontSize);\r\n\t\t\t\tif (lineWidth !== 0) {\r\n\t\t\t\t\tctx.strokeRect(rtlHelper.leftForLtr(x, boxWidth), y, boxWidth, fontSize);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tctx.restore();\r\n\t\t};\r\n\r\n\t\tvar fillText = function(x, y, legendItem, textWidth) {\r\n\t\t\tvar halfFontSize = fontSize / 2;\r\n\t\t\tvar xLeft = rtlHelper.xPlus(x, boxWidth + halfFontSize);\r\n\t\t\tvar yMiddle = y + halfFontSize;\r\n\r\n\t\t\tctx.fillText(legendItem.text, xLeft, yMiddle);\r\n\r\n\t\t\tif (legendItem.hidden) {\r\n\t\t\t\t// Strikethrough the text if hidden\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.lineWidth = 2;\r\n\t\t\t\tctx.moveTo(xLeft, yMiddle);\r\n\t\t\t\tctx.lineTo(rtlHelper.xPlus(xLeft, textWidth), yMiddle);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar alignmentOffset = function(dimension, blockSize) {\r\n\t\t\tswitch (opts.align) {\r\n\t\t\tcase 'start':\r\n\t\t\t\treturn labelOpts.padding;\r\n\t\t\tcase 'end':\r\n\t\t\t\treturn dimension - blockSize;\r\n\t\t\tdefault: // center\r\n\t\t\t\treturn (dimension - blockSize + labelOpts.padding) / 2;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Horizontal\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tif (isHorizontal) {\r\n\t\t\tcursor = {\r\n\t\t\t\tx: me.left + alignmentOffset(legendWidth, lineWidths[0]),\r\n\t\t\t\ty: me.top + labelOpts.padding,\r\n\t\t\t\tline: 0\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tcursor = {\r\n\t\t\t\tx: me.left + labelOpts.padding,\r\n\t\t\t\ty: me.top + alignmentOffset(legendHeight, columnHeights[0]),\r\n\t\t\t\tline: 0\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\thelpers$1.rtl.overrideTextDirection(me.ctx, opts.textDirection);\r\n\r\n\t\tvar itemHeight = fontSize + labelOpts.padding;\r\n\t\thelpers$1.each(me.legendItems, function(legendItem, i) {\r\n\t\t\tvar textWidth = ctx.measureText(legendItem.text).width;\r\n\t\t\tvar width = boxWidth + (fontSize / 2) + textWidth;\r\n\t\t\tvar x = cursor.x;\r\n\t\t\tvar y = cursor.y;\r\n\r\n\t\t\trtlHelper.setWidth(me.minSize.width);\r\n\r\n\t\t\t// Use (me.left + me.minSize.width) and (me.top + me.minSize.height)\r\n\t\t\t// instead of me.right and me.bottom because me.width and me.height\r\n\t\t\t// may have been changed since me.minSize was calculated\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\tif (i > 0 && x + width + labelOpts.padding > me.left + me.minSize.width) {\r\n\t\t\t\t\ty = cursor.y += itemHeight;\r\n\t\t\t\t\tcursor.line++;\r\n\t\t\t\t\tx = cursor.x = me.left + alignmentOffset(legendWidth, lineWidths[cursor.line]);\r\n\t\t\t\t}\r\n\t\t\t} else if (i > 0 && y + itemHeight > me.top + me.minSize.height) {\r\n\t\t\t\tx = cursor.x = x + me.columnWidths[cursor.line] + labelOpts.padding;\r\n\t\t\t\tcursor.line++;\r\n\t\t\t\ty = cursor.y = me.top + alignmentOffset(legendHeight, columnHeights[cursor.line]);\r\n\t\t\t}\r\n\r\n\t\t\tvar realX = rtlHelper.x(x);\r\n\r\n\t\t\tdrawLegendBox(realX, y, legendItem);\r\n\r\n\t\t\thitboxes[i].left = rtlHelper.leftForLtr(realX, hitboxes[i].width);\r\n\t\t\thitboxes[i].top = y;\r\n\r\n\t\t\t// Fill the actual label\r\n\t\t\tfillText(realX, y, legendItem, textWidth);\r\n\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\tcursor.x += width + labelOpts.padding;\r\n\t\t\t} else {\r\n\t\t\t\tcursor.y += itemHeight;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\thelpers$1.rtl.restoreTextDirection(me.ctx, opts.textDirection);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getLegendItemAt: function(x, y) {\r\n\t\tvar me = this;\r\n\t\tvar i, hitBox, lh;\r\n\r\n\t\tif (x >= me.left && x <= me.right && y >= me.top && y <= me.bottom) {\r\n\t\t\t// See if we are touching one of the dataset boxes\r\n\t\t\tlh = me.legendHitBoxes;\r\n\t\t\tfor (i = 0; i < lh.length; ++i) {\r\n\t\t\t\thitBox = lh[i];\r\n\r\n\t\t\t\tif (x >= hitBox.left && x <= hitBox.left + hitBox.width && y >= hitBox.top && y <= hitBox.top + hitBox.height) {\r\n\t\t\t\t\t// Touching an element\r\n\t\t\t\t\treturn me.legendItems[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * Handle an event\r\n\t * @private\r\n\t * @param {IEvent} event - The event to handle\r\n\t */\r\n\thandleEvent: function(e) {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar type = e.type === 'mouseup' ? 'click' : e.type;\r\n\t\tvar hoveredItem;\r\n\r\n\t\tif (type === 'mousemove') {\r\n\t\t\tif (!opts.onHover && !opts.onLeave) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else if (type === 'click') {\r\n\t\t\tif (!opts.onClick) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Chart event already has relative position in it\r\n\t\thoveredItem = me._getLegendItemAt(e.x, e.y);\r\n\r\n\t\tif (type === 'click') {\r\n\t\t\tif (hoveredItem && opts.onClick) {\r\n\t\t\t\t// use e.native for backwards compatibility\r\n\t\t\t\topts.onClick.call(me, e.native, hoveredItem);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (opts.onLeave && hoveredItem !== me._hoveredItem) {\r\n\t\t\t\tif (me._hoveredItem) {\r\n\t\t\t\t\topts.onLeave.call(me, e.native, me._hoveredItem);\r\n\t\t\t\t}\r\n\t\t\t\tme._hoveredItem = hoveredItem;\r\n\t\t\t}\r\n\r\n\t\t\tif (opts.onHover && hoveredItem) {\r\n\t\t\t\t// use e.native for backwards compatibility\r\n\t\t\t\topts.onHover.call(me, e.native, hoveredItem);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction createNewLegendAndAttach(chart, legendOpts) {\r\n\tvar legend = new Legend({\r\n\t\tctx: chart.ctx,\r\n\t\toptions: legendOpts,\r\n\t\tchart: chart\r\n\t});\r\n\r\n\tcore_layouts.configure(chart, legend, legendOpts);\r\n\tcore_layouts.addBox(chart, legend);\r\n\tchart.legend = legend;\r\n}\r\n\r\nvar plugin_legend = {\r\n\tid: 'legend',\r\n\r\n\t/**\r\n\t * Backward compatibility: since 2.1.5, the legend is registered as a plugin, making\r\n\t * Chart.Legend obsolete. To avoid a breaking change, we export the Legend as part of\r\n\t * the plugin, which one will be re-exposed in the chart.js file.\r\n\t * https://github.com/chartjs/Chart.js/pull/2640\r\n\t * @private\r\n\t */\r\n\t_element: Legend,\r\n\r\n\tbeforeInit: function(chart) {\r\n\t\tvar legendOpts = chart.options.legend;\r\n\r\n\t\tif (legendOpts) {\r\n\t\t\tcreateNewLegendAndAttach(chart, legendOpts);\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeUpdate: function(chart) {\r\n\t\tvar legendOpts = chart.options.legend;\r\n\t\tvar legend = chart.legend;\r\n\r\n\t\tif (legendOpts) {\r\n\t\t\thelpers$1.mergeIf(legendOpts, core_defaults.global.legend);\r\n\r\n\t\t\tif (legend) {\r\n\t\t\t\tcore_layouts.configure(chart, legend, legendOpts);\r\n\t\t\t\tlegend.options = legendOpts;\r\n\t\t\t} else {\r\n\t\t\t\tcreateNewLegendAndAttach(chart, legendOpts);\r\n\t\t\t}\r\n\t\t} else if (legend) {\r\n\t\t\tcore_layouts.removeBox(chart, legend);\r\n\t\t\tdelete chart.legend;\r\n\t\t}\r\n\t},\r\n\r\n\tafterEvent: function(chart, e) {\r\n\t\tvar legend = chart.legend;\r\n\t\tif (legend) {\r\n\t\t\tlegend.handleEvent(e);\r\n\t\t}\r\n\t}\r\n};\n\nvar noop$2 = helpers$1.noop;\r\n\r\ncore_defaults._set('global', {\r\n\ttitle: {\r\n\t\tdisplay: false,\r\n\t\tfontStyle: 'bold',\r\n\t\tfullWidth: true,\r\n\t\tpadding: 10,\r\n\t\tposition: 'top',\r\n\t\ttext: '',\r\n\t\tweight: 2000         // by default greater than legend (1000) to be above\r\n\t}\r\n});\r\n\r\n/**\r\n * IMPORTANT: this class is exposed publicly as Chart.Legend, backward compatibility required!\r\n */\r\nvar Title = core_element.extend({\r\n\tinitialize: function(config) {\r\n\t\tvar me = this;\r\n\t\thelpers$1.extend(me, config);\r\n\r\n\t\t// Contains hit boxes for each dataset (in dataset order)\r\n\t\tme.legendHitBoxes = [];\r\n\t},\r\n\r\n\t// These methods are ordered by lifecycle. Utilities then follow.\r\n\r\n\tbeforeUpdate: noop$2,\r\n\tupdate: function(maxWidth, maxHeight, margins) {\r\n\t\tvar me = this;\r\n\r\n\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\r\n\t\tme.beforeUpdate();\r\n\r\n\t\t// Absorb the master measurements\r\n\t\tme.maxWidth = maxWidth;\r\n\t\tme.maxHeight = maxHeight;\r\n\t\tme.margins = margins;\r\n\r\n\t\t// Dimensions\r\n\t\tme.beforeSetDimensions();\r\n\t\tme.setDimensions();\r\n\t\tme.afterSetDimensions();\r\n\t\t// Labels\r\n\t\tme.beforeBuildLabels();\r\n\t\tme.buildLabels();\r\n\t\tme.afterBuildLabels();\r\n\r\n\t\t// Fit\r\n\t\tme.beforeFit();\r\n\t\tme.fit();\r\n\t\tme.afterFit();\r\n\t\t//\r\n\t\tme.afterUpdate();\r\n\r\n\t\treturn me.minSize;\r\n\r\n\t},\r\n\tafterUpdate: noop$2,\r\n\r\n\t//\r\n\r\n\tbeforeSetDimensions: noop$2,\r\n\tsetDimensions: function() {\r\n\t\tvar me = this;\r\n\t\t// Set the unconstrained dimension before label rotation\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.width = me.maxWidth;\r\n\t\t\tme.left = 0;\r\n\t\t\tme.right = me.width;\r\n\t\t} else {\r\n\t\t\tme.height = me.maxHeight;\r\n\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.top = 0;\r\n\t\t\tme.bottom = me.height;\r\n\t\t}\r\n\r\n\t\t// Reset padding\r\n\t\tme.paddingLeft = 0;\r\n\t\tme.paddingTop = 0;\r\n\t\tme.paddingRight = 0;\r\n\t\tme.paddingBottom = 0;\r\n\r\n\t\t// Reset minSize\r\n\t\tme.minSize = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0\r\n\t\t};\r\n\t},\r\n\tafterSetDimensions: noop$2,\r\n\r\n\t//\r\n\r\n\tbeforeBuildLabels: noop$2,\r\n\tbuildLabels: noop$2,\r\n\tafterBuildLabels: noop$2,\r\n\r\n\t//\r\n\r\n\tbeforeFit: noop$2,\r\n\tfit: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar minSize = me.minSize = {};\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tvar lineCount, textSize;\r\n\r\n\t\tif (!opts.display) {\r\n\t\t\tme.width = minSize.width = me.height = minSize.height = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlineCount = helpers$1.isArray(opts.text) ? opts.text.length : 1;\r\n\t\ttextSize = lineCount * helpers$1.options._parseFont(opts).lineHeight + opts.padding * 2;\r\n\r\n\t\tme.width = minSize.width = isHorizontal ? me.maxWidth : textSize;\r\n\t\tme.height = minSize.height = isHorizontal ? textSize : me.maxHeight;\r\n\t},\r\n\tafterFit: noop$2,\r\n\r\n\t// Shared Methods\r\n\tisHorizontal: function() {\r\n\t\tvar pos = this.options.position;\r\n\t\treturn pos === 'top' || pos === 'bottom';\r\n\t},\r\n\r\n\t// Actually draw the title block on the canvas\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar opts = me.options;\r\n\r\n\t\tif (!opts.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar fontOpts = helpers$1.options._parseFont(opts);\r\n\t\tvar lineHeight = fontOpts.lineHeight;\r\n\t\tvar offset = lineHeight / 2 + opts.padding;\r\n\t\tvar rotation = 0;\r\n\t\tvar top = me.top;\r\n\t\tvar left = me.left;\r\n\t\tvar bottom = me.bottom;\r\n\t\tvar right = me.right;\r\n\t\tvar maxWidth, titleX, titleY;\r\n\r\n\t\tctx.fillStyle = helpers$1.valueOrDefault(opts.fontColor, core_defaults.global.defaultFontColor); // render in correct colour\r\n\t\tctx.font = fontOpts.string;\r\n\r\n\t\t// Horizontal\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\ttitleX = left + ((right - left) / 2); // midpoint of the width\r\n\t\t\ttitleY = top + offset;\r\n\t\t\tmaxWidth = right - left;\r\n\t\t} else {\r\n\t\t\ttitleX = opts.position === 'left' ? left + offset : right - offset;\r\n\t\t\ttitleY = top + ((bottom - top) / 2);\r\n\t\t\tmaxWidth = bottom - top;\r\n\t\t\trotation = Math.PI * (opts.position === 'left' ? -0.5 : 0.5);\r\n\t\t}\r\n\r\n\t\tctx.save();\r\n\t\tctx.translate(titleX, titleY);\r\n\t\tctx.rotate(rotation);\r\n\t\tctx.textAlign = 'center';\r\n\t\tctx.textBaseline = 'middle';\r\n\r\n\t\tvar text = opts.text;\r\n\t\tif (helpers$1.isArray(text)) {\r\n\t\t\tvar y = 0;\r\n\t\t\tfor (var i = 0; i < text.length; ++i) {\r\n\t\t\t\tctx.fillText(text[i], 0, y, maxWidth);\r\n\t\t\t\ty += lineHeight;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tctx.fillText(text, 0, 0, maxWidth);\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\t}\r\n});\r\n\r\nfunction createNewTitleBlockAndAttach(chart, titleOpts) {\r\n\tvar title = new Title({\r\n\t\tctx: chart.ctx,\r\n\t\toptions: titleOpts,\r\n\t\tchart: chart\r\n\t});\r\n\r\n\tcore_layouts.configure(chart, title, titleOpts);\r\n\tcore_layouts.addBox(chart, title);\r\n\tchart.titleBlock = title;\r\n}\r\n\r\nvar plugin_title = {\r\n\tid: 'title',\r\n\r\n\t/**\r\n\t * Backward compatibility: since 2.1.5, the title is registered as a plugin, making\r\n\t * Chart.Title obsolete. To avoid a breaking change, we export the Title as part of\r\n\t * the plugin, which one will be re-exposed in the chart.js file.\r\n\t * https://github.com/chartjs/Chart.js/pull/2640\r\n\t * @private\r\n\t */\r\n\t_element: Title,\r\n\r\n\tbeforeInit: function(chart) {\r\n\t\tvar titleOpts = chart.options.title;\r\n\r\n\t\tif (titleOpts) {\r\n\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeUpdate: function(chart) {\r\n\t\tvar titleOpts = chart.options.title;\r\n\t\tvar titleBlock = chart.titleBlock;\r\n\r\n\t\tif (titleOpts) {\r\n\t\t\thelpers$1.mergeIf(titleOpts, core_defaults.global.title);\r\n\r\n\t\t\tif (titleBlock) {\r\n\t\t\t\tcore_layouts.configure(chart, titleBlock, titleOpts);\r\n\t\t\t\ttitleBlock.options = titleOpts;\r\n\t\t\t} else {\r\n\t\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\r\n\t\t\t}\r\n\t\t} else if (titleBlock) {\r\n\t\t\tcore_layouts.removeBox(chart, titleBlock);\r\n\t\t\tdelete chart.titleBlock;\r\n\t\t}\r\n\t}\r\n};\n\nvar plugins = {};\r\nvar filler = plugin_filler;\r\nvar legend = plugin_legend;\r\nvar title = plugin_title;\nplugins.filler = filler;\nplugins.legend = legend;\nplugins.title = title;\n\n/**\r\n * @namespace Chart\r\n */\r\n\r\n\r\ncore_controller.helpers = helpers$1;\r\n\r\n// @todo dispatch these helpers into appropriated helpers/helpers.* file and write unit tests!\r\ncore_helpers();\r\n\r\ncore_controller._adapters = core_adapters;\r\ncore_controller.Animation = core_animation;\r\ncore_controller.animationService = core_animations;\r\ncore_controller.controllers = controllers;\r\ncore_controller.DatasetController = core_datasetController;\r\ncore_controller.defaults = core_defaults;\r\ncore_controller.Element = core_element;\r\ncore_controller.elements = elements;\r\ncore_controller.Interaction = core_interaction;\r\ncore_controller.layouts = core_layouts;\r\ncore_controller.platform = platform;\r\ncore_controller.plugins = core_plugins;\r\ncore_controller.Scale = core_scale;\r\ncore_controller.scaleService = core_scaleService;\r\ncore_controller.Ticks = core_ticks;\r\ncore_controller.Tooltip = core_tooltip;\r\n\r\n// Register built-in scales\r\n\r\ncore_controller.helpers.each(scales, function(scale, type) {\r\n\tcore_controller.scaleService.registerScaleType(type, scale, scale._defaults);\r\n});\r\n\r\n// Load to register built-in adapters (as side effects)\r\n\r\n\r\n// Loading built-in plugins\r\n\r\nfor (var k in plugins) {\r\n\tif (plugins.hasOwnProperty(k)) {\r\n\t\tcore_controller.plugins.register(plugins[k]);\r\n\t}\r\n}\r\n\r\ncore_controller.platform.initialize();\r\n\r\nvar src = core_controller;\r\nif (typeof window !== 'undefined') {\r\n\twindow.Chart = core_controller;\r\n}\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore\r\n * @namespace Chart.Chart\r\n * @deprecated since version 2.8.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.Chart = core_controller;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore\r\n * @namespace Chart.Legend\r\n * @deprecated since version 2.1.5\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.Legend = plugins.legend._element;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore\r\n * @namespace Chart.Title\r\n * @deprecated since version 2.1.5\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.Title = plugins.title._element;\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.plugins instead\r\n * @namespace Chart.pluginService\r\n * @deprecated since version 2.1.5\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.pluginService = core_controller.plugins;\r\n\r\n/**\r\n * Provided for backward compatibility, inheriting from Chart.PlugingBase has no\r\n * effect, instead simply create/register plugins via plain JavaScript objects.\r\n * @interface Chart.PluginBase\r\n * @deprecated since version 2.5.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.PluginBase = core_controller.Element.extend({});\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.canvas instead.\r\n * @namespace Chart.canvasHelpers\r\n * @deprecated since version 2.6.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.canvasHelpers = core_controller.helpers.canvas;\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.layouts instead.\r\n * @namespace Chart.layoutService\r\n * @deprecated since version 2.7.3\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.layoutService = core_controller.layouts;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore.\r\n * @namespace Chart.LinearScaleBase\r\n * @deprecated since version 2.8\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.LinearScaleBase = scale_linearbase;\r\n\r\n/**\r\n * Provided for backward compatibility, instead we should create a new Chart\r\n * by setting the type in the config (`new Chart(id, {type: '{chart-type}'}`).\r\n * @deprecated since version 2.8.0\r\n * @todo remove at version 3\r\n */\r\ncore_controller.helpers.each(\r\n\t[\r\n\t\t'Bar',\r\n\t\t'Bubble',\r\n\t\t'Doughnut',\r\n\t\t'Line',\r\n\t\t'PolarArea',\r\n\t\t'Radar',\r\n\t\t'Scatter'\r\n\t],\r\n\tfunction(klass) {\r\n\t\tcore_controller[klass] = function(ctx, cfg) {\r\n\t\t\treturn new core_controller(ctx, core_controller.helpers.merge(cfg || {}, {\r\n\t\t\t\ttype: klass.charAt(0).toLowerCase() + klass.slice(1)\r\n\t\t\t}));\r\n\t\t};\r\n\t}\r\n);\n\nreturn src;\n\n})));\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nmodule.exports = keyBy;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  operations: PropTypes.array.isRequired,\n  translateOperations: PropTypes.func.isRequired\n};\n\nclass OpMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'op');\n    this.props.onMenuItemClick(operation);\n  }\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  render() {\n    const { operations, translateOperations } = this.props;\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle fa fa-ellipsis-v\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <DropdownMenu className=\"my-1 mr-2\">\n          {operations.map((item, index )=> {\n            return (<DropdownItem key={index} data-op={item} onClick={this.onMenuItemClick}>{translateOperations(item)}</DropdownItem>);\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nOpMenu.propTypes = propTypes;\n\nexport default OpMenu;\n"],"sourceRoot":""}